var W0 = Object.defineProperty;
var X0 = (l, e, t) => e in l ? W0(l, e, { enumerable: !0, configurable: !0, writable: !0, value: t }) : l[e] = t;
var yl = (l, e, t) => X0(l, typeof e != "symbol" ? e + "" : e, t);
function ge() {
}
const bi = (l) => l;
function h0(l) {
  return l();
}
function Ts() {
  return /* @__PURE__ */ Object.create(null);
}
function Te(l) {
  l.forEach(h0);
}
function oa(l) {
  return typeof l == "function";
}
function dt(l, e) {
  return l != l ? e == e : l !== e || l && typeof l == "object" || typeof l == "function";
}
let yi;
function at(l, e) {
  return l === e ? !0 : (yi || (yi = document.createElement("a")), yi.href = e, l === yi.href);
}
function J0(l) {
  return Object.keys(l).length === 0;
}
function Y0(l, ...e) {
  if (l == null) {
    for (const i of e)
      i(void 0);
    return ge;
  }
  const t = l.subscribe(...e);
  return t.unsubscribe ? () => t.unsubscribe() : t;
}
function _a(l, e, t) {
  l.$$.on_destroy.push(Y0(e, t));
}
function Ul(l) {
  return l ?? "";
}
function Ds(l) {
  const e = typeof l == "string" && l.match(/^\s*(-?[\d.]+)([^\s]*)\s*$/);
  return e ? [parseFloat(e[1]), e[2] || "px"] : [
    /** @type {number} */
    l,
    "px"
  ];
}
const g0 = typeof window < "u";
let zi = g0 ? () => window.performance.now() : () => Date.now(), us = g0 ? (l) => requestAnimationFrame(l) : ge;
const Wa = /* @__PURE__ */ new Set();
function _0(l) {
  Wa.forEach((e) => {
    e.c(l) || (Wa.delete(e), e.f());
  }), Wa.size !== 0 && us(_0);
}
function Bi(l) {
  let e;
  return Wa.size === 0 && us(_0), {
    promise: new Promise((t) => {
      Wa.add(e = { c: l, f: t });
    }),
    abort() {
      Wa.delete(e);
    }
  };
}
const Fi = typeof window < "u" ? window : typeof globalThis < "u" ? globalThis : (
  // @ts-ignore Node typings have this
  global
);
function a(l, e) {
  l.appendChild(e);
}
function k0(l) {
  if (!l) return document;
  const e = l.getRootNode ? l.getRootNode() : l.ownerDocument;
  return e && /** @type {ShadowRoot} */
  e.host ? (
    /** @type {ShadowRoot} */
    e
  ) : l.ownerDocument;
}
function Q0(l) {
  const e = r("style");
  return e.textContent = "/* empty */", K0(k0(l), e), e.sheet;
}
function K0(l, e) {
  return a(
    /** @type {Document} */
    l.head || l,
    e
  ), e.sheet;
}
function q(l, e, t) {
  l.insertBefore(e, t || null);
}
function P(l) {
  l.parentNode && l.parentNode.removeChild(l);
}
function Fe(l, e) {
  for (let t = 0; t < l.length; t += 1)
    l[t] && l[t].d(e);
}
function r(l) {
  return document.createElement(l);
}
function Ni(l) {
  return document.createElementNS("http://www.w3.org/2000/svg", l);
}
function B(l) {
  return document.createTextNode(l);
}
function g() {
  return B(" ");
}
function Pt() {
  return B("");
}
function R(l, e, t, i) {
  return l.addEventListener(e, t, i), () => l.removeEventListener(e, t, i);
}
function ri(l) {
  return function(e) {
    return e.preventDefault(), l.call(this, e);
  };
}
function Lt(l) {
  return function(e) {
    return e.stopPropagation(), l.call(this, e);
  };
}
function w0(l) {
  return function(e) {
    e.target === this && l.call(this, e);
  };
}
function s(l, e, t) {
  t == null ? l.removeAttribute(e) : l.getAttribute(e) !== t && l.setAttribute(e, t);
}
function Z0(l, e) {
  let t = n(l), i;
  function n(f) {
    for (let u = 0; u < e.length; u++)
      f = f[e[u]] = f[e[u]] || [];
    return f;
  }
  function o() {
    i.forEach((f) => t.push(f));
  }
  function c() {
    i.forEach((f) => t.splice(t.indexOf(f), 1));
  }
  return {
    /* update */
    u(f) {
      e = f;
      const u = n(l);
      u !== t && (c(), t = u, o());
    },
    /* push */
    p(...f) {
      i = f, o();
    },
    /* remove */
    r: c
  };
}
function Je(l) {
  return l === "" ? null : +l;
}
function x0(l) {
  return Array.from(l.childNodes);
}
function te(l, e) {
  e = "" + e, l.data !== e && (l.data = /** @type {string} */
  e);
}
function x(l, e) {
  l.value = e ?? "";
}
function ae(l, e, t, i) {
  t == null ? l.style.removeProperty(e) : l.style.setProperty(e, t, "");
}
function ot(l, e, t) {
  for (let i = 0; i < l.options.length; i += 1) {
    const n = l.options[i];
    if (n.__value === e) {
      n.selected = !0;
      return;
    }
  }
  (!t || e !== void 0) && (l.selectedIndex = -1);
}
function Gt(l) {
  const e = l.querySelector(":checked");
  return e && e.__value;
}
function he(l, e, t) {
  l.classList.toggle(e, !!t);
}
function y0(l, e, { bubbles: t = !1, cancelable: i = !1 } = {}) {
  return new CustomEvent(l, { detail: e, bubbles: t, cancelable: i });
}
class ps {
  constructor(e = !1) {
    /**
     * @private
     * @default false
     */
    yl(this, "is_svg", !1);
    /** parent for creating node */
    yl(this, "e");
    /** html tag nodes */
    yl(this, "n");
    /** target */
    yl(this, "t");
    /** anchor */
    yl(this, "a");
    this.is_svg = e, this.e = this.n = null;
  }
  /**
   * @param {string} html
   * @returns {void}
   */
  c(e) {
    this.h(e);
  }
  /**
   * @param {string} html
   * @param {HTMLElement | SVGElement} target
   * @param {HTMLElement | SVGElement} anchor
   * @returns {void}
   */
  m(e, t, i = null) {
    this.e || (this.is_svg ? this.e = Ni(
      /** @type {keyof SVGElementTagNameMap} */
      t.nodeName
    ) : this.e = r(
      /** @type {keyof HTMLElementTagNameMap} */
      t.nodeType === 11 ? "TEMPLATE" : t.nodeName
    ), this.t = t.tagName !== "TEMPLATE" ? t : (
      /** @type {HTMLTemplateElement} */
      t.content
    ), this.c(e)), this.i(i);
  }
  /**
   * @param {string} html
   * @returns {void}
   */
  h(e) {
    this.e.innerHTML = e, this.n = Array.from(
      this.e.nodeName === "TEMPLATE" ? this.e.content.childNodes : this.e.childNodes
    );
  }
  /**
   * @returns {void} */
  i(e) {
    for (let t = 0; t < this.n.length; t += 1)
      q(this.t, this.n[t], e);
  }
  /**
   * @param {string} html
   * @returns {void}
   */
  p(e) {
    this.d(), this.h(e), this.i(this.a);
  }
  /**
   * @returns {void} */
  d() {
    this.n.forEach(P);
  }
}
const qi = /* @__PURE__ */ new Map();
let Ui = 0;
function $0(l) {
  let e = 5381, t = l.length;
  for (; t--; ) e = (e << 5) - e ^ l.charCodeAt(t);
  return e >>> 0;
}
function em(l, e) {
  const t = { stylesheet: Q0(e), rules: {} };
  return qi.set(l, t), t;
}
function ci(l, e, t, i, n, o, c, f = 0) {
  const u = 16.666 / i;
  let d = `{
`;
  for (let w = 0; w <= 1; w += u) {
    const k = e + (t - e) * o(w);
    d += w * 100 + `%{${c(k, 1 - k)}}
`;
  }
  const p = d + `100% {${c(t, 1 - t)}}
}`, m = `__svelte_${$0(p)}_${f}`, b = k0(l), { stylesheet: v, rules: h } = qi.get(b) || em(b, l);
  h[m] || (h[m] = !0, v.insertRule(`@keyframes ${m} ${p}`, v.cssRules.length));
  const _ = l.style.animation || "";
  return l.style.animation = `${_ ? `${_}, ` : ""}${m} ${i}ms linear ${n}ms 1 both`, Ui += 1, m;
}
function fi(l, e) {
  const t = (l.style.animation || "").split(", "), i = t.filter(
    e ? (o) => o.indexOf(e) < 0 : (o) => o.indexOf("__svelte") === -1
    // remove all Svelte animations
  ), n = t.length - i.length;
  n && (l.style.animation = i.join(", "), Ui -= n, Ui || tm());
}
function tm() {
  us(() => {
    Ui || (qi.forEach((l) => {
      const { ownerNode: e } = l.stylesheet;
      e && P(e);
    }), qi.clear());
  });
}
function lm(l, e, t, i) {
  if (!e) return ge;
  const n = l.getBoundingClientRect();
  if (e.left === n.left && e.right === n.right && e.top === n.top && e.bottom === n.bottom)
    return ge;
  const {
    delay: o = 0,
    duration: c = 300,
    easing: f = bi,
    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?
    start: u = zi() + o,
    // @ts-ignore todo:
    end: d = u + c,
    tick: p = ge,
    css: m
  } = t(l, { from: e, to: n }, i);
  let b = !0, v = !1, h;
  function _() {
    m && (h = ci(l, 0, 1, c, o, f, m)), o || (v = !0);
  }
  function w() {
    m && fi(l, h), b = !1;
  }
  return Bi((k) => {
    if (!v && k >= u && (v = !0), v && k >= d && (p(1, 0), w()), !b)
      return !1;
    if (v) {
      const A = k - u, y = 0 + 1 * f(A / c);
      p(y, 1 - y);
    }
    return !0;
  }), _(), p(0, 1), w;
}
function am(l) {
  const e = getComputedStyle(l);
  if (e.position !== "absolute" && e.position !== "fixed") {
    const { width: t, height: i } = e, n = l.getBoundingClientRect();
    l.style.position = "absolute", l.style.width = t, l.style.height = i, im(l, n);
  }
}
function im(l, e) {
  const t = l.getBoundingClientRect();
  if (e.left !== t.left || e.top !== t.top) {
    const i = getComputedStyle(l), n = i.transform === "none" ? "" : i.transform;
    l.style.transform = `${n} translate(${e.left - t.left}px, ${e.top - t.top}px)`;
  }
}
let di;
function si(l) {
  di = l;
}
function ji() {
  if (!di) throw new Error("Function called outside component initialization");
  return di;
}
function qt(l) {
  ji().$$.on_mount.push(l);
}
function sm(l) {
  ji().$$.after_update.push(l);
}
function ra(l) {
  ji().$$.on_destroy.push(l);
}
function ml() {
  const l = ji();
  return (e, t, { cancelable: i = !1 } = {}) => {
    const n = l.$$.callbacks[e];
    if (n) {
      const o = y0(
        /** @type {string} */
        e,
        t,
        { cancelable: i }
      );
      return n.slice().forEach((c) => {
        c.call(l, o);
      }), !o.defaultPrevented;
    }
    return !0;
  };
}
function Ol(l, e) {
  const t = l.$$.callbacks[e.type];
  t && t.slice().forEach((i) => i.call(this, e));
}
const ja = [], wa = [];
let Xa = [];
const ns = [], A0 = /* @__PURE__ */ Promise.resolve();
let os = !1;
function E0() {
  os || (os = !0, A0.then(O0));
}
function pi() {
  return E0(), A0;
}
function Ne(l) {
  Xa.push(l);
}
function nm(l) {
  ns.push(l);
}
const Ji = /* @__PURE__ */ new Set();
let Ua = 0;
function O0() {
  if (Ua !== 0)
    return;
  const l = di;
  do {
    try {
      for (; Ua < ja.length; ) {
        const e = ja[Ua];
        Ua++, si(e), om(e.$$);
      }
    } catch (e) {
      throw ja.length = 0, Ua = 0, e;
    }
    for (si(null), ja.length = 0, Ua = 0; wa.length; ) wa.pop()();
    for (let e = 0; e < Xa.length; e += 1) {
      const t = Xa[e];
      Ji.has(t) || (Ji.add(t), t());
    }
    Xa.length = 0;
  } while (ja.length);
  for (; ns.length; )
    ns.pop()();
  os = !1, Ji.clear(), si(l);
}
function om(l) {
  if (l.fragment !== null) {
    l.update(), Te(l.before_update);
    const e = l.dirty;
    l.dirty = [-1], l.fragment && l.fragment.p(l.ctx, e), l.after_update.forEach(Ne);
  }
}
function rm(l) {
  const e = [], t = [];
  Xa.forEach((i) => l.indexOf(i) === -1 ? e.push(i) : t.push(i)), t.forEach((i) => i()), Xa = e;
}
let ti;
function ms() {
  return ti || (ti = Promise.resolve(), ti.then(() => {
    ti = null;
  })), ti;
}
function ka(l, e, t) {
  l.dispatchEvent(y0(`${e ? "intro" : "outro"}${t}`));
}
const Li = /* @__PURE__ */ new Set();
let Bl;
function $e() {
  Bl = {
    r: 0,
    c: [],
    p: Bl
    // parent group
  };
}
function et() {
  Bl.r || Te(Bl.c), Bl = Bl.p;
}
function ne(l, e) {
  l && l.i && (Li.delete(l), l.i(e));
}
function Ae(l, e, t, i) {
  if (l && l.o) {
    if (Li.has(l)) return;
    Li.add(l), Bl.c.push(() => {
      Li.delete(l), i && (t && l.d(1), i());
    }), l.o(e);
  } else i && i();
}
const bs = { duration: 0 };
function st(l, e, t) {
  const i = { direction: "in" };
  let n = e(l, t, i), o = !1, c, f, u = 0;
  function d() {
    c && fi(l, c);
  }
  function p() {
    const {
      delay: b = 0,
      duration: v = 300,
      easing: h = bi,
      tick: _ = ge,
      css: w
    } = n || bs;
    w && (c = ci(l, 0, 1, v, b, h, w, u++)), _(0, 1);
    const k = zi() + b, A = k + v;
    f && f.abort(), o = !0, Ne(() => ka(l, !0, "start")), f = Bi((y) => {
      if (o) {
        if (y >= A)
          return _(1, 0), ka(l, !0, "end"), d(), o = !1;
        if (y >= k) {
          const E = h((y - k) / v);
          _(E, 1 - E);
        }
      }
      return o;
    });
  }
  let m = !1;
  return {
    start() {
      m || (m = !0, fi(l), oa(n) ? (n = n(i), ms().then(p)) : p());
    },
    invalidate() {
      m = !1;
    },
    end() {
      o && (d(), o = !1);
    }
  };
}
function vi(l, e, t) {
  const i = { direction: "out" };
  let n = e(l, t, i), o = !0, c;
  const f = Bl;
  f.r += 1;
  let u;
  function d() {
    const {
      delay: p = 0,
      duration: m = 300,
      easing: b = bi,
      tick: v = ge,
      css: h
    } = n || bs;
    h && (c = ci(l, 1, 0, m, p, b, h));
    const _ = zi() + p, w = _ + m;
    Ne(() => ka(l, !1, "start")), "inert" in l && (u = /** @type {HTMLElement} */
    l.inert, l.inert = !0), Bi((k) => {
      if (o) {
        if (k >= w)
          return v(0, 1), ka(l, !1, "end"), --f.r || Te(f.c), !1;
        if (k >= _) {
          const A = b((k - _) / m);
          v(1 - A, A);
        }
      }
      return o;
    });
  }
  return oa(n) ? ms().then(() => {
    n = n(i), d();
  }) : d(), {
    end(p) {
      p && "inert" in l && (l.inert = u), p && n.tick && n.tick(1, 0), o && (c && fi(l, c), o = !1);
    }
  };
}
function We(l, e, t, i) {
  let o = e(l, t, { direction: "both" }), c = i ? 0 : 1, f = null, u = null, d = null, p;
  function m() {
    d && fi(l, d);
  }
  function b(h, _) {
    const w = (
      /** @type {Program['d']} */
      h.b - c
    );
    return _ *= Math.abs(w), {
      a: c,
      b: h.b,
      d: w,
      duration: _,
      start: h.start,
      end: h.start + _,
      group: h.group
    };
  }
  function v(h) {
    const {
      delay: _ = 0,
      duration: w = 300,
      easing: k = bi,
      tick: A = ge,
      css: y
    } = o || bs, E = {
      start: zi() + _,
      b: h
    };
    h || (E.group = Bl, Bl.r += 1), "inert" in l && (h ? p !== void 0 && (l.inert = p) : (p = /** @type {HTMLElement} */
    l.inert, l.inert = !0)), f || u ? u = E : (y && (m(), d = ci(l, c, h, w, _, k, y)), h && A(0, 1), f = b(E, w), Ne(() => ka(l, h, "start")), Bi((S) => {
      if (u && S > u.start && (f = b(u, w), u = null, ka(l, f.b, "start"), y && (m(), d = ci(
        l,
        c,
        f.b,
        f.duration,
        0,
        k,
        o.css
      ))), f) {
        if (S >= f.end)
          A(c = f.b, 1 - c), ka(l, f.b, "end"), u || (f.b ? m() : --f.group.r || Te(f.group.c)), f = null;
        else if (S >= f.start) {
          const O = S - f.start;
          c = f.a + f.d * k(O / f.duration), A(c, 1 - c);
        }
      }
      return !!(f || u);
    }));
  }
  return {
    run(h) {
      oa(o) ? ms().then(() => {
        o = o({ direction: h ? "in" : "out" }), v(h);
      }) : v(h);
    },
    end() {
      m(), f = u = null;
    }
  };
}
function ce(l) {
  return (l == null ? void 0 : l.length) !== void 0 ? l : Array.from(l);
}
function Qa(l, e) {
  l.d(1), e.delete(l.key);
}
function Ya(l, e) {
  Ae(l, 1, 1, () => {
    e.delete(l.key);
  });
}
function cm(l, e) {
  l.f(), Qa(l, e);
}
function Tl(l, e, t, i, n, o, c, f, u, d, p, m) {
  let b = l.length, v = o.length, h = b;
  const _ = {};
  for (; h--; ) _[l[h].key] = h;
  const w = [], k = /* @__PURE__ */ new Map(), A = /* @__PURE__ */ new Map(), y = [];
  for (h = v; h--; ) {
    const C = m(n, o, h), T = t(C);
    let N = c.get(T);
    N ? y.push(() => N.p(C, e)) : (N = d(T, C), N.c()), k.set(T, w[h] = N), T in _ && A.set(T, Math.abs(h - _[T]));
  }
  const E = /* @__PURE__ */ new Set(), S = /* @__PURE__ */ new Set();
  function O(C) {
    ne(C, 1), C.m(f, p), c.set(C.key, C), p = C.first, v--;
  }
  for (; b && v; ) {
    const C = w[v - 1], T = l[b - 1], N = C.key, I = T.key;
    C === T ? (p = C.first, b--, v--) : k.has(I) ? !c.has(N) || E.has(N) ? O(C) : S.has(I) ? b-- : A.get(N) > A.get(I) ? (S.add(N), O(C)) : (E.add(I), b--) : (u(T, c), b--);
  }
  for (; b--; ) {
    const C = l[b];
    k.has(C.key) || u(C, c);
  }
  for (; v; ) O(w[v - 1]);
  return Te(y), w;
}
function fm(l, e, t) {
  const i = l.$$.props[e];
  i !== void 0 && (l.$$.bound[i] = t, t(l.$$.ctx[i]));
}
function kt(l) {
  l && l.c();
}
function ht(l, e, t) {
  const { fragment: i, after_update: n } = l.$$;
  i && i.m(e, t), Ne(() => {
    const o = l.$$.on_mount.map(h0).filter(oa);
    l.$$.on_destroy ? l.$$.on_destroy.push(...o) : Te(o), l.$$.on_mount = [];
  }), n.forEach(Ne);
}
function gt(l, e) {
  const t = l.$$;
  t.fragment !== null && (rm(t.after_update), Te(t.on_destroy), t.fragment && t.fragment.d(e), t.on_destroy = t.fragment = null, t.ctx = []);
}
function dm(l, e) {
  l.$$.dirty[0] === -1 && (ja.push(l), E0(), l.$$.dirty.fill(0)), l.$$.dirty[e / 31 | 0] |= 1 << e % 31;
}
function pt(l, e, t, i, n, o, c = null, f = [-1]) {
  const u = di;
  si(l);
  const d = l.$$ = {
    fragment: null,
    ctx: [],
    // state
    props: o,
    update: ge,
    not_equal: n,
    bound: Ts(),
    // lifecycle
    on_mount: [],
    on_destroy: [],
    on_disconnect: [],
    before_update: [],
    after_update: [],
    context: new Map(e.context || (u ? u.$$.context : [])),
    // everything else
    callbacks: Ts(),
    dirty: f,
    skip_bound: !1,
    root: e.target || u.$$.root
  };
  c && c(d.root);
  let p = !1;
  if (d.ctx = t ? t(l, e.props || {}, (m, b, ...v) => {
    const h = v.length ? v[0] : b;
    return d.ctx && n(d.ctx[m], d.ctx[m] = h) && (!d.skip_bound && d.bound[m] && d.bound[m](h), p && dm(l, m)), b;
  }) : [], d.update(), p = !0, Te(d.before_update), d.fragment = i ? i(d.ctx) : !1, e.target) {
    if (e.hydrate) {
      const m = x0(e.target);
      d.fragment && d.fragment.l(m), m.forEach(P);
    } else
      d.fragment && d.fragment.c();
    e.intro && ne(l.$$.fragment), ht(l, e.target, e.anchor), O0();
  }
  si(u);
}
class mt {
  constructor() {
    /**
     * ### PRIVATE API
     *
     * Do not use, may change at any time
     *
     * @type {any}
     */
    yl(this, "$$");
    /**
     * ### PRIVATE API
     *
     * Do not use, may change at any time
     *
     * @type {any}
     */
    yl(this, "$$set");
  }
  /** @returns {void} */
  $destroy() {
    gt(this, 1), this.$destroy = ge;
  }
  /**
   * @template {Extract<keyof Events, string>} K
   * @param {K} type
   * @param {((e: Events[K]) => void) | null | undefined} callback
   * @returns {() => void}
   */
  $on(e, t) {
    if (!oa(t))
      return ge;
    const i = this.$$.callbacks[e] || (this.$$.callbacks[e] = []);
    return i.push(t), () => {
      const n = i.indexOf(t);
      n !== -1 && i.splice(n, 1);
    };
  }
  /**
   * @param {Partial<Props>} props
   * @returns {void}
   */
  $set(e) {
    this.$$set && !J0(e) && (this.$$.skip_bound = !0, this.$$set(e), this.$$.skip_bound = !1);
  }
}
const um = "4";
typeof window < "u" && (window.__svelte || (window.__svelte = { v: /* @__PURE__ */ new Set() })).v.add(um);
function pm(l) {
  return l * l * l;
}
function Dl(l) {
  const e = l - 1;
  return e * e * e + 1;
}
function S0(l) {
  return --l * l * l * l * l + 1;
}
function Qe(l, { delay: e = 0, duration: t = 400, easing: i = bi } = {}) {
  const n = +getComputedStyle(l).opacity;
  return {
    delay: e,
    duration: t,
    easing: i,
    css: (o) => `opacity: ${o * n}`
  };
}
function Sl(l, { delay: e = 0, duration: t = 400, easing: i = Dl, x: n = 0, y: o = 0, opacity: c = 0 } = {}) {
  const f = getComputedStyle(l), u = +f.opacity, d = f.transform === "none" ? "" : f.transform, p = u * (1 - c), [m, b] = Ds(n), [v, h] = Ds(o);
  return {
    delay: e,
    duration: t,
    easing: i,
    css: (_, w) => `
			transform: ${d} translate(${(1 - _) * m}${b}, ${(1 - _) * v}${h});
			opacity: ${u - p * w}`
  };
}
function yt(l, { delay: e = 0, duration: t = 400, easing: i = Dl, axis: n = "y" } = {}) {
  const o = getComputedStyle(l), c = +o.opacity, f = n === "y" ? "height" : "width", u = parseFloat(o[f]), d = n === "y" ? ["top", "bottom"] : ["left", "right"], p = d.map(
    (k) => `${k[0].toUpperCase()}${k.slice(1)}`
  ), m = parseFloat(o[`padding${p[0]}`]), b = parseFloat(o[`padding${p[1]}`]), v = parseFloat(o[`margin${p[0]}`]), h = parseFloat(o[`margin${p[1]}`]), _ = parseFloat(
    o[`border${p[0]}Width`]
  ), w = parseFloat(
    o[`border${p[1]}Width`]
  );
  return {
    delay: e,
    duration: t,
    easing: i,
    css: (k) => `overflow: hidden;opacity: ${Math.min(k * 20, 1) * c};${f}: ${k * u}px;padding-${d[0]}: ${k * m}px;padding-${d[1]}: ${k * b}px;margin-${d[0]}: ${k * v}px;margin-${d[1]}: ${k * h}px;border-${d[0]}-width: ${k * _}px;border-${d[1]}-width: ${k * w}px;`
  };
}
function Mt(l, { delay: e = 0, duration: t = 400, easing: i = Dl, start: n = 0, opacity: o = 0 } = {}) {
  const c = getComputedStyle(l), f = +c.opacity, u = c.transform === "none" ? "" : c.transform, d = 1 - n, p = f * (1 - o);
  return {
    delay: e,
    duration: t,
    easing: i,
    css: (m, b) => `
			transform: ${u} scale(${1 - d * b});
			opacity: ${f - p * b}
		`
  };
}
const Ai = "multiversus-rpg", $l = {
  getPlayerData: (l) => {
    const e = game.users.get(l);
    if (!e) return { initialPoints: 150, earnedXP: 0, spentXP: 0, group: "Sem Grupo", log: [] };
    const t = e.getFlag(Ai, "xpData") || {};
    return {
      initialPoints: t.initialPoints ?? 150,
      earnedXP: t.earnedXP ?? 0,
      spentXP: t.spentXP ?? 0,
      group: t.group ?? "Sem Grupo",
      log: t.log ?? []
    };
  },
  spendXP: async (l, e) => {
    const t = game.users.get(l);
    let i = $l.getPlayerData(l);
    i.spentXP += e, await t.setFlag(Ai, "xpData", i);
  },
  setGroup: async (l, e) => {
    const t = game.users.get(l);
    let i = $l.getPlayerData(l);
    i.group = e, await t.setFlag(Ai, "xpData", i);
  },
  addXP: async (l, e, t = "Sess√£o") => {
    if (!game.user.isGM) return;
    const i = game.users.get(l);
    let n = $l.getPlayerData(l);
    n.earnedXP += e, n.log.unshift({ date: Date.now(), amount: e, reason: t }), n.log.length > 20 && n.log.pop(), await i.setFlag(Ai, "xpData", n), Hooks.callAll("nexusXPGain", i, e, t, n.earnedXP), ui.notifications.info(`XP concedido a ${i.name}`);
  }
}, Ei = [
  { lvl: 1, min: 0, max: 50, limits: "1 Principal, 1 Secund√°rio, 1 Especial", buffs: "Cria√ß√£o Padr√£o (150 Pontos)" },
  { lvl: 2, min: 51, max: 100, limits: "1 Principal, 2 Secund√°rios, 2 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 3, min: 101, max: 200, limits: "2 Principais, 2 Secund√°rios, 2 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 4, min: 201, max: 300, limits: "2 Principais, 3 Secund√°rios, 3 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 5, min: 301, max: 400, limits: "2 Principais, 3 Secund√°rios, 3 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 6, min: 401, max: 500, limits: "3 Principais, 4 Secund√°rios, 4 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 7, min: 501, max: 650, limits: "3 Principais, 4 Secund√°rios, 4 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 8, min: 651, max: 800, limits: "3 Principais, 5 Secund√°rios, 5 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 9, min: 801, max: 950, limits: "4 Principais, 5 Secund√°rios, 5 Especiais", buffs: "+1 Base Will, +1 Wound Box, +1 HD Stat, +1 WD Skill, +1 Trait" },
  { lvl: 10, min: 951, max: 1e4, limits: "5 Principais, 6 Secund√°rios, 6 Especiais", buffs: "N√çVEL M√ÅXIMO" }
], C0 = {
  getLevelInfo: (l) => {
    const e = Ei.find((o) => l >= o.min && l <= o.max) || Ei[Ei.length - 1], t = Ei.find((o) => o.lvl === e.lvl + 1);
    let i = 100, n = e.max;
    if (t) {
      const o = e.max - e.min, c = l - e.min;
      i = o > 0 ? c / o * 100 : 100, n = e.max + 1;
    }
    return {
      level: e.lvl,
      limits: e.limits,
      buffs: e.buffs,
      progress: Math.min(100, Math.max(0, i)),
      currentXP: l,
      nextXP: n
    };
  }
}, I0 = {
  // Fun√ß√£o simples que retorna os dados fixos abaixo
  load: async () => mm
}, mm = {
  // --- SLOT 1: SEMI-DIVINO (J√° configurado com seu texto) ---
  // --- SLOT 2: SEMI-DIVINO (Atualizado) ---
  "semi-divino": {
    id: "semi-divino",
    name: "Semi-Divino",
    icon: "‚ö°",
    type: "M√≠tico (80+)",
    desc: `
            <p>O Semi-Deus √© um ser que n√£o pertence inteiramente ao mundo mortal nem ao plano conceitual que o originou. Ele existe como a manifesta√ß√£o parcial de um conceito, princ√≠pio ou ideia elevada ‚Äî algo que acredita, exige e observa. Aqui tamb√©m se enquadram os <b>Semi-Dem√¥nios</b>, que carregam conceitos parecidos, por√©m invertidos.</p>
            <p>Diferente de Jogadores ou Experimentos, ele n√£o foi criado artificialmente; foi reconhecido por algo maior. Sua for√ßa vem da coer√™ncia entre a√ß√£o, cren√ßa e prop√≥sito.</p>
            <p><em>Nota: Esta origem n√£o possui acesso a classes, recebendo exclusivamente o Poder M√≠tico Fisiologia Semi-Divina.</em></p>
        `,
    mechanic: {
      name: "F√©",
      desc: `
                <p>O Semi-Deus substitui Lealdades e Paix√µes por uma <b>F√©</b> (3 a 5 conceitos como Julgamento, Ordem Absoluta, etc).</p>
                <ul>
                    <li><b>Recupera√ß√£o de WP:</b> +1 WP ao agir alinhado aos conceitos; +1 WP (m√°x 1/cena) ao convencer outros a n√£o agirem contra sua F√©.</li>
                    <li><b>Perda de Base Will:</b> -1 Base Will permanentemente ao agir diretamente contra sua F√©.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Corpo Consagrado",
        effect: "O Semi-Deus possui um corpo parcialmente ancorado em algo al√©m da realidade comum. Uma vez por cena, ele pode escolher ignorar um efeito debilitante f√≠sico ou mental leve relacionado a medo, dor ou intimida√ß√£o. Em contrapartida, sempre que sofrer dano extremo ou efeitos que desafiem diretamente sua F√©, ele sofre ‚àí2 Dados em a√ß√µes subsequentes at√© o fim da cena, pois sua natureza divina reage mal √† contradi√ß√£o, assim como, o usu√°rio nunca teve risco real de vida desde o momento de sua exist√™ncia."
      },
      {
        name: "Milagre Menor",
        effect: "Uma vez por sess√£o, o Semi-Deus pode declarar um Milagre Menor coerente com sua F√©, concedendo um efeito narrativo ou mec√¢nico moderado, como b√¥nus tempor√°rios, altera√ß√£o leve do ambiente ou prote√ß√£o moment√¢nea, em termos sistematicos, ele usa de forma variavel um poder Raro, e usaria de sistematicas relacionados a esse poder. O Milagre n√£o pode causar dano direto alto nem anular consequ√™ncias graves. Ap√≥s o uso, o personagem entra em Sil√™ncio Divino, ficando incapaz de recuperar Willpower por F√© at√© o fim da cena seguinte."
      },
      {
        name: "Julgamento Inerente",
        effect: "A presen√ßa do Semi-Deus carrega peso conceitual. Sempre que interagir com criaturas, NPCs ou entidades que contrariem diretamente sua F√©, o personagem recebe +2 Dados Normais em testes de Intimida√ß√£o, Autoridade ou Confronto Moral. Em contrapartida, ele sofre ‚àí2 Dados Normais em testes de Charm ou manipula√ß√£o social com indiv√≠duos que n√£o reconhecem, respeitam ou compreendem sua natureza divina."
      },
      {
        name: "V√≠nculo de Adora√ß√£o",
        effect: "O Semi-Deus pode formar v√≠nculos com seguidores, cultos menores ou indiv√≠duos que acreditam em sua F√©. Enquanto possuir ao menos um seguidor ativo na narrativa, ele recebe +1 WD em testes de Estabilidade. No entanto, sempre que um seguidor morre, √© corrompido ou abandona a F√© por consequ√™ncia direta das a√ß√µes do Semi-Deus, ele n√£o pode recuperar Willpower por F√© at√© o fim da pr√≥xima sess√£o."
      },
      {
        name: "Corpo Semi-Divino",
        effect: "A mesma ess√™ncia que fortalece o Semi-Deus o torna r√≠gido. Seu corpo possui naturalmente +1 HP em todas as partes e 1 ponto de LAR (Impenetr√°vel), refletindo sua resist√™ncia sobrenatural. Em contrapartida, essa natureza parcialmente absoluta dificulta adapta√ß√£o, improviso e concess√µes mundanas. Sempre que tentar agir de forma amb√≠gua, relativizar sua F√©, ocultar sua natureza ou contornar dilemas conceituais, o personagem sofre ‚àí2 Dados Normais nesses testes. Quebrar conscientemente sua coer√™ncia divina pode evitar essa penalidade, mas sempre implica perda de Willpower Base, a crit√©rio da gravidade da viola√ß√£o.."
      }
    ],
    powers: `
            <hr>
            <h3>FISIOLOGIA SEMI-DIVINA: [CONCEITO] (2 ND)</h3>
            <p><strong>Poder Principal M√≠tico (Custo: 8 Pontos por Dado)</strong></p>
            
            <p><b>Fraqueza Clara & N√™mesis:</b> O usu√°rio deve escolher um N√™mesis (Evento, Mat√©ria ou Deus rival). 
            Contato m√≠nimo desativa este poder completamente. Exposi√ß√£o consider√°vel ou ataques do N√™mesis causam 1 Killing Damage no Torso instantaneamente. 
            Contra o Deus rival ou suas cria√ß√µes, o usu√°rio causa +2 de dano e recebe +2 de dano.</p>
            
            <p><b>Hyper Stat (Conceito):</b> Este poder substitui um atributo √† escolha. 
            Permite ultrapassar o limite inicial de 5 no atributo. O jogador deve escolher entre investir XP puramente na Fisiologia (Pool do Poder) ou em pontos adicionais de atributo (garantidos pelo poder).</p>
            
            <h4>A√á√ïES ESPECIAIS (Se Atributo for diferente de Body)</h4>
            <ul>
                <li><b>Ataque:</b> Toque ou Dist√¢ncia (Dano Shock = W). Usa o Super Atributo. Pode gastar custo vari√°vel para efeitos tem√°ticos at√© o fim da cena.</li>
                <li><b>Defesa:</b> Defesa natural baseada no conceito. Gaste 2 WP para proteger aliados (capacidade dura at√© o fim da cena).</li>
                <li><b>Movimento:</b> Calcula dist√¢ncia de deslocamento baseada no Atributo escolhido (conforme tabela de Sprint de Body).</li>
            </ul>
        `
  },
  // --- SLOT 2: HUMANO (Atualizado) ---
  humano: {
    id: "humano",
    name: "Humano",
    icon: "üë§",
    type: "Mundano (N√£o-An√¥malo)",
    desc: `<p>O Humano n√£o foi tocado pelo Lobby, n√£o carrega fragmentos do sistema e n√£o herdou sangue divino. Ele √© o resultado do mundo como ele √©: imperfeito, limitado e insistente. Enquanto outras origens dobram a realidade, o Humano aprende a sobreviver dentro dela, compensando a aus√™ncia de milagres com preparo, repeti√ß√£o e especializa√ß√£o.</p>
               <p>√â a √∫nica origem completamente desconectada de fen√¥menos sobrenaturais (F√©, System Points ou Fragmentos), possuindo em troca uma ficha mais ampla e flex√≠vel.</p>`,
    mechanic: {
      name: "Adapta√ß√£o Mental",
      desc: "O Humano n√£o se transforma, ele se acostuma. Sempre que realizar um Teste Mental, Emocional ou de Estabilidade sob press√£o (dor, medo, horror, etc.) e obtiver Largura 3 ou maior, ele registra a situa√ß√£o em sua Lista de Adapta√ß√µes. Cada Adapta√ß√£o concede +1 Dado de Buff em testes relacionados (m√°x +2) ou reduz penalidades recorrentes em -1. Limite de Adapta√ß√µes: N√≠vel +1."
    },
    classes: [
      { name: "Combatente", benefit: "2 Poderes Principais Combativos (Tem√°tica: Hyper Skill)" },
      { name: "Profissional", benefit: "2 Poderes Principais N√£o Combativos (Tem√°tica: Hyper Skill)" },
      { name: "Faz-Tudo", benefit: "1 Poder Principal Combativo e 1 N√£o Combativo (Tem√°tica: Hyper Skill)" }
    ],
    traits: [
      {
        name: "Corpo Fr√°gil",
        effect: "-1 HP permanente em todas as partes do corpo. Se sofrer dano m√©dio/alto, teste de Estabilidade f√≠sica ou -1 Dado Normal em a√ß√µes f√≠sicas at√© o fim da cena.",
        bonus: "+10 Pontos Iniciais"
      },
      {
        name: "Mente C√©tica",
        effect: "-2 Dados Normais em testes para compreender fen√¥menos an√¥malos, paradoxais ou n√£o humanos.",
        bonus: "+10 Pontos Iniciais"
      },
      {
        name: "Depend√™ncia de Recursos",
        effect: "-2 Dados Normais em a√ß√µes complexas realizadas sem ferramentas ou equipamentos apropriados.",
        bonus: "+10 Pontos Iniciais"
      },
      {
        name: "Cansa√ßo Real",
        effect: "Ap√≥s 2 cenas consecutivas de esfor√ßo intenso ou risco cont√≠nuo, sofre 1 de Exaust√£o (aplicada como Dados de Debuff em todas as rolagens) at√© que haja descanso.",
        bonus: "+10 Pontos Iniciais"
      },
      {
        name: "Psicologia Comum",
        effect: "-1 Dado Normal adicional contra medo extremo e horror. Willpower s√≥ √© recuperado por meios narrativos (descanso, conforto, seguran√ßa).",
        bonus: "+10 Pontos Iniciais"
      }
    ],
    powers: "<p>Humanos n√£o acessam poderes an√¥malos. Suas capacidades v√™m de <b>Hyper Skills</b>: o √°pice do treinamento humano. Eles devem escolher uma das tr√™s classes (Combatente, Profissional ou Faz-Tudo) para definir seus poderes iniciais.</p>"
  },
  // --- SLOT 3: ESPA√áO VAZIO ---
  experimento: {
    id: "experimento",
    name: "Experimento",
    icon: "üß™",
    type: "Lend√°rio (H√≠brido)",
    desc: `
            <p>Voc√™ n√£o foi moldado para escolher, foi moldado para responder. Durante um per√≠odo da sua vida, cada dia foi reduzido a protocolos, testes e rea√ß√µes observadas de forma cl√≠nica. O medo n√£o era um risco, era uma ferramenta; a dor era apenas um dado coletado.</p>
            <p>Seu corpo aprendeu a funcionar sem pedir permiss√£o √† sua mente. Voc√™ carrega um legado silencioso: funciona melhor no caos e no perigo do que na normalidade ou no conforto. Voc√™ √© uma arma ou uma ferramenta que sobreviveu ao seu prop√≥sito original.</p>
            <p><em>Nota: Esta origem possui uma classe √∫nica ("Experimento"), recebendo 1 Poder Principal Raro vari√°vel e o Poder Lend√°rio Fisiologia Experimental.</em></p>
        `,
    mechanic: {
      name: "Adapta√ß√£o F√≠sica",
      desc: `
                <p>O corpo do Experimento aprende com o dano. Sempre que for exposto a condi√ß√µes adversas (frio, toxinas, radia√ß√£o, etc.) e obtiver <b>Largura 3 ou maior</b> em um Teste de Resist√™ncia, ele registra uma Adapta√ß√£o F√≠sica.</p>
                <ul>
                    <li><b>Efeito:</b> +1 Dado de Buff ou +1 de Resist√™ncia direta contra aquela condi√ß√£o (M√°x +2).</li>
                    <li><b>Limite:</b> Pode manter um n√∫mero de adapta√ß√µes igual a N√≠vel +1.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Condicionamento For√ßado",
        effect: "+1 WD em Estabilidade (medo/intimida√ß√£o) e Resist√™ncia Mental 1. Em cenas sociais ou seguras: -2 Dados em Charm e recupera -1 WP."
      },
      {
        name: "Dossi√™",
        effect: "1x por sess√£o, recebe informa√ß√µes privilegiadas do Mestre sobre amea√ßas/dificuldades. Contudo, organiza√ß√µes podem rastre√°-lo e conhecem suas fraquezas."
      },
      {
        name: "Toler√¢ncia √† Dor",
        effect: "+1 WD contra dor; n√£o desmaia por dano e a√ß√µes n√£o s√£o interrompidas. Penalidade: O jogador N√ÉO sabe seu HP atual (apenas o Mestre controla)."
      },
      {
        name: "Marcas do Experimento (Obrigat√≥ria)",
        effect: "Possui 3 cicatrizes. Cada cicatriz em um membro causa +1 Killing Damage extra ao receber dano ali. Concede +2 Dados em Intimida√ß√£o."
      },
      {
        name: "Depend√™ncia de Estrutura",
        effect: "-1 Dado se agir sem ordens claras. Se receber instru√ß√µes (gasta 1 per√≠odo), ganha +1 Dado em todos os testes para cumprir aquela fun√ß√£o por 24h."
      }
    ],
    powers: `
            <hr>
            <h3>FISIOLOGIA EXPERIMENTAL (2 HD)</h3>
            <p><strong>Poder Principal Lend√°rio (Custo: 8 Pontos por Dado)</strong></p>
            
            <p><b>Fraqueza Biol√≥gica:</b> Escolha uma mat√©ria/evento (Sol, Lua, Madeira, Pedra, Fogo, Vento, Areia, Terra, √Ågua, Metal ou Sangue). Contato m√≠nimo desativa o poder; exposi√ß√£o consider√°vel causa 1 Killing Damage no Torso imediatamente.</p>
            
            <p><b>Resist√™ncia Sobre-humana:</b> +2 Dados em Resist√™ncia. Se a pool exceder 10 dados, os excedentes tornam-se HD. Imunidade a venenos e toxinas convencionais.</p>
            
            <p><b>Vitalidade Sint√©tica:</b> O personagem recebe +W (2) de HP em todas as partes do corpo.</p>
            
            <p><b>Hyper Stat (Body):</b> Este poder substitui o atributo Body. Permite ultrapassar o limite de 5. O XP pode ser gasto para evoluir a Pool do Poder ou comprar pontos permanentes de Body acima do limite.</p>
            
            <p><b>Combate & Bloqueio:</b> Ataques com Briga causam +1 de Dano. Bloqueios recebem +1 Dado e anulam a penalidade de m√∫ltipla a√ß√£o uma vez por rodada.</p>
            
            <p><b>Poder Adicional:</b> O jogador deve escolher 1 Poder Principal Raro (Variavel) que combine com seu tema de experimento.</p>
        `
  },
  // --- SLOT 4 ---
  // --- SLOT 4: MAGO ---
  mago: {
    id: "mago",
    name: "Mago",
    icon: "üîÆ",
    type: "Arcano (Especializado)",
    desc: `
            <p>O Mago √© algu√©m que aprendeu a interagir conscientemente com a Energia Nexus, uma for√ßa inst√°vel que permeia realidades e conceitos. Diferente de outras entidades, o Mago n√£o imp√µe sua vontade ao sistema ‚Äî ele negocia com ele.</p>
            <p>Cada magia √© um c√°lculo imperfeito e cada ritual um risco controlado. O Mago √© definido pelo estudo, pr√°tica e pelos limites que ousa desafiar, sabendo que o uso excessivo pode levar ao colapso f√≠sico ou mental.</p>
        `,
    mechanic: {
      name: "Adapta√ß√£o M√°gica",
      desc: `
                <p>O Mago √© moldado pela magia. Sempre que for exposto a estressores m√°gicos (conjura√ß√£o excessiva, falhas arcanas, resson√¢ncia) e obtiver <b>Largura 3 ou maior</b> em testes relacionados, ele registra uma Adapta√ß√£o.</p>
                <ul>
                    <li><b>Efeito:</b> +1 Dado de Buff ou +1 de Resist√™ncia M√°gica contra aquela situa√ß√£o espec√≠fica (M√°x +2).</li>
                    <li><b>Limite:</b> Pode manter um n√∫mero de adapta√ß√µes igual a N√≠vel +1.</li>
                </ul>
            `
    },
    classes: [
      { name: "Feiticeiro", benefit: "1 Poder Principal e 1 Habilidade Especial." },
      { name: "Mago", benefit: "2 Poderes Secund√°rios M√°gicos." },
      { name: "Bruxo", benefit: "1 Poder Principal e 1 Poder Secund√°rio." }
    ],
    traits: [
      {
        name: "Condutor Nexus",
        effect: "-1 WP no custo de magias ativas. Contudo, a cada 3 magias no mesmo dia, recebe -1 Dado de Debuff (cumulativo) em conjura√ß√£o pelo resto do dia e o dia seguinte."
      },
      {
        name: "Estrutura Arcana",
        effect: "Exige gestos/foco para conjurar. Recebe +1 Dado Normal ao usar a estrutura, e +1 adicional por rodada de prepara√ß√£o (M√°x +3 Dados totais)."
      },
      {
        name: "Conhecimento Especializado",
        effect: "Escolha uma Escola de Magia. Magias fora dela sofrem -2 Dados Normais. Magias dentro dela negam at√© 2 Dados de Debuff de conjura√ß√£o."
      },
      {
        name: "O Custo do Poder",
        effect: "Falha Cr√≠tica gera retrocesso (1d6: perda de WP, Exaust√£o ou Killing Damage). Acerto Cr√≠tico permite escolher um desses efeitos e ganhar o dobro em b√¥nus positivo."
      },
      {
        name: "Sensibilidade Nexus",
        effect: "+1 Dado Normal em testes de magia, rituais ou fen√¥menos an√¥malos. Sofre -1 Dado Normal em Percep√ß√£o ou Investiga√ß√£o de elementos mundanos."
      }
    ],
    powers: `
            <hr>
            <h3>SISTEM√ÅTICA ARCANIA</h3>
            <p>Diferente de outras origens, o Mago deve escolher uma das tr√™s vertentes de aprendizado para definir seus poderes iniciais:</p>
            <ul>
                <li><strong>Feiticeiro:</strong> Focado em um grande poder central e uma t√©cnica utilit√°ria.</li>
                <li><strong>Mago:</strong> Um generalista acad√™mico com m√∫ltiplos poderes menores.</li>
                <li><strong>Bruxo:</strong> Equil√≠brio entre um poder de grande escala e um suporte secund√°rio.</li>
            </ul>
            <p>O uso de magias consome Willpower e est√° sujeito √† <i>Tabela de Retrocesso</i> em caso de falhas cr√≠ticas, conforme a Trait 'O Custo do Poder'.</p>
        `
  },
  // --- SLOT 5 ---
  // --- SLOT 5: S√ìCIA ---
  socia: {
    id: "socia",
    name: "S√≥cia",
    icon: "üß¨",
    type: "Lend√°rio (Replicante)",
    desc: `
            <p>Voc√™ nunca esteve no Lobby. Ainda assim, tudo em voc√™ foi feito a partir dele. O S√≥cia nasce como algo montado a partir de registros e fragmentos de l√≥gica extra√≠dos de um Jogador verdadeiro.</p>
            <p>Seu corpo, mente e mem√≥rias s√£o herdados, n√£o vividos. Os S√≥cias falam e pensam como Jogadores, compartilhando a sensa√ß√£o de que o mundo real √© "errado", mas s√£o, no fundo, c√≥pias tentando validar sua pr√≥pria exist√™ncia.</p>
            <p><em>Regra de Poder: Independentemente da classe, o S√≥cia possui 1 Poder Lend√°rio e os demais s√£o Raros.</em></p>
        `,
    mechanic: {
      name: "Fragmentos de Sistema",
      desc: `
                <p>Res√≠duos do Lobby que permitem ao S√≥cia mitigar falhas. Um Fragmento surge em uma <b>Sorte de Principiante</b> (todos os dados > 5, com pelo menos 2 dados na pool).</p>
                <ul>
                    <li><b>Uso:</b> Alivia desgaste mental ou impede que uma falha seja final.</li>
                    <li><b>Restri√ß√£o:</b> N√£o aumentam dano, n√£o garantem sucesso e n√£o protegem contra controle mental. S√£o inst√°veis e n√£o acumulam entre sess√µes.</li>
                </ul>
            `
    },
    classes: [
      { name: "Aprimorado", benefit: "1 Poder Principal e 1 Habilidade Especial." },
      { name: "Combatente", benefit: "2 Poderes Secund√°rios Combativos." },
      { name: "Mago", benefit: "2 Poderes Secund√°rios M√°gicos." },
      { name: "Profissional", benefit: "2 Poderes Principais (Hyper Skill)." },
      { name: "Anormal", benefit: "1 Poder Principal e 1 Secund√°rio." },
      { name: "Casual", benefit: "1 Poder Principal e 1 Item Exclusivo." }
    ],
    traits: [
      {
        name: "Aprendizado Constante",
        effect: "Ap√≥s observar uma a√ß√£o por 1 rodada, ganha +1 Dado Normal para reproduzi-la. Sofre -2 Dados em Estabilidade e Autodetermina√ß√£o."
      },
      {
        name: "Corpo Replicado",
        effect: "1x/cena, reduz gravidade de dano/debuff por 1 WP. Se encontrar outro S√≥cia: -1 Base Will. Se encontrar o Original: Sua Base Will cai para 0 imediatamente."
      },
      {
        name: "Desacoplamento da Realidade",
        effect: "Perde 1 WP em Falhas Cr√≠ticas ou rolagens de apenas 1 dado. D√° acesso ao uso de Fragmentos de Sistema."
      },
      {
        name: "Identidade Herdada",
        effect: "1x/sess√£o: +2 Dados se agir conforme o hist√≥rico do Original. Se falhar em 'testes de legitimidade' de Jogador: -2 WP por falha."
      },
      {
        name: "Rec√©m-Nascido",
        effect: "Sem per√≠cias de profiss√£o/backstory. -2 Dados na primeira rolagem de cada cena. Recupera 1 WP por per√≠odo acordado (curiosidade)."
      }
    ],
    powers: `
            <hr>
            <h3>TABELA DE ORIGEM HERDADA (1d33)</h3>
            <p>O jogador deve rolar para definir de qual Jogador Lend√°rio ele √© uma c√≥pia:</p>
            <small>
                1. Batman | 2. Kirito | 3. Barba Loira | 4. Plunder Uchiha | 5. Thanatos Kenpachi | 6. Son Kami | 7. John Wick | 8. Imortal | 9. Maioral | 10. Midra | 11. Kaiba | 12. Dumbledore | 13. One Volheim | 14. Eufrazino | 15. Theodore Valentine | 16. Ryujin | 17. Arthur (Hollow) | 18. Bad | 19. Qiang Ming | 20. Jihan | 21. Omellum | 22. Aharadak | 23. Park | 24. Anaak | 25. William | 26. Blue | 27. Enjin | 28. Akari | 29. Nox Veritas | 30. Dante | 31. Zarath | 32. Shizume | 33. Seykor
            </small>
            <p><strong>Nota Narrativa:</strong> O Fragmento de Sistema √© o S√≥cia "quase" funcionando como deveria ‚Äî e falhando logo em seguida. Ele n√£o muda o passado, apenas impede que o erro seja o fim da sua hist√≥ria.</p>
        `
  },
  // --- SLOT 6 ---
  // --- SLOT 6: MONSTRO ---
  monstro: {
    id: "monstro",
    name: "Monstro",
    icon: "üëπ",
    type: "Aberrante (Mut√°vel)",
    desc: `
            <p>O Monstro n√£o nasceu para ocupar um lugar no mundo ‚Äî ele nasceu fora dele. Sua exist√™ncia lembra a todos que nem tudo pode ser domado ou aceito. Ele √© visto antes de ser ouvido; olhares se desviam e m√£os procuram armas.</p>
            <p>Seu corpo √© "errado" aos olhos comuns: ossos, m√∫sculos e carne que se movem ou se regeneram de formas estranhas. O Monstro sobrevive porque aguenta mais do que deveria, vivendo na tens√£o entre o instinto selvagem e a centelha de escolha.</p>
            <p><em>Nota: Esta origem n√£o possui arqu√©tipos, iniciando obrigatoriamente com 1 Poder Principal Universal.</em></p>
        `,
    mechanic: {
      name: "Natureza Monstruosa",
      desc: `
                <p>O Monstro provoca rejei√ß√£o instintiva. Sofre <b>‚àí5 Dados Normais</b> em testes de Charm com humanos/sociedade comum. Em contrapartida, possui um corpo em muta√ß√£o:</p>
                <ul>
                    <li><b>Muta√ß√µes Iniciais:</b> Come√ßa com 3 Muta√ß√µes em locais espec√≠ficos (Benef√≠cios: +2 HP, +2 LAR, +1 Regen, +1 HAR, +1 Passo de Dano ou +1 Dado Normal no local).</li>
                    <li><b>Evolu√ß√£o Extrema:</b> Pode trocar 3 muta√ß√µes de um mesmo membro por um <b>Novo Membro</b> (Poder Secund√°rio).</li>
                    <li><b>Progress√£o:</b> N√£o ganha b√¥nus de HD em Status ao subir de n√≠vel; em vez disso, ganha <b>1 nova Muta√ß√£o Corporal</b> por n√≠vel.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Aberra√ß√£o",
        effect: "-2 Base Will. Recebe +1 HP em todas as partes. Ignora penalidades leves de dor/mutila√ß√£o e n√£o tem a√ß√µes interrompidas ao sofrer dano m√©dio/alto na rodada."
      },
      {
        name: "Presen√ßa Amea√ßadora",
        effect: "1x/cena: Intimida√ß√£o + 2 Dados para tentar Traumatizar o alvo. Penalidade: -2 Dados em Furtividade e Oculta√ß√£o (aura de perigo constante)."
      },
      {
        name: "Criatura Instintiva",
        effect: "Usa (1+N√≠vel) p/ cena: +1 Dado Normal em a√ß√£o instintiva. Consequ√™ncia: Na pr√≥xima rodada, o Mestre assume o controle do personagem (a√ß√£o puramente animal). -1 Dado em Mind."
      },
      {
        name: "Regenera√ß√£o Imperfeita",
        effect: "1x/cena: Cura (1+N√≠vel) HP em um local. Custo: Exaust√£o (N√≠vel do dano - 1). Curar estado 'Morrendo' custa +1 Exaust√£o adicional."
      },
      {
        name: "Ca√ßado pelo Mundo",
        effect: "O Mestre introduz amea√ßas recorrentes (ca√ßadores/autoridades). Em contrapartida, o Monstro recebe +1 WD em Resist√™ncia e Sobreviv√™ncia enquanto estiver sendo ca√ßado ou encurralado."
      }
    ],
    powers: `
            <hr>
            <h3>TABELA DE MUTA√á√ïES DISPON√çVEIS</h3>
            <p>Ao criar o personagem (3 iniciais) ou subir de n√≠vel (1 nova), escolha um local do corpo e um efeito:</p>
            <ul>
                <li><strong>Vitalidade:</strong> +2 de HP no local escolhido.</li>
                <li><strong>Coura√ßa:</strong> +2 de LAR (Impenetr√°vel) no local escolhido.</li>
                <li><strong>Cura Adaptativa:</strong> +1 de Regenera√ß√£o Constante no local escolhido.</li>
                <li><strong>Blindagem:</strong> +1 de HAR (Armadura) no local escolhido.</li>
                <li><strong>Instinto Assassino:</strong> +1 de Dano e avan√ßo de Passo (S > K > SK) com o local mutado.</li>
                <li><strong>Efici√™ncia Biol√≥gica:</strong> +1 Dado Normal em testes relacionados ao uso do local.</li>
            </ul>
            <p><strong>Nota:</strong> As muta√ß√µes s√£o vis√≠veis e justificam o preconceito social sofrido pela criatura.</p>
        `
  },
  // --- SLOT 7 ---
  // --- SLOT 7: JOGADOR ---
  jogador: {
    id: "jogador",
    name: "Jogador",
    icon: "üïπÔ∏è",
    type: "Sist√™mico (Lobby)",
    desc: `
            <p>Seres sequestrados de seus universos e mantidos no Lobby, um espa√ßo fora da realidade onde necessidades f√≠sicas n√£o existiam e tudo era percebido como valores matem√°ticos.</p>
            <p>Libertados recentemente, os Jogadores carregam res√≠duos desse estado absoluto e falhas severas de adapta√ß√£o ao mundo f√≠sico. Eles veem a realidade como um sistema a ser manipulado, mas sofrem quando o mundo real n√£o segue as regras l√≥gicas do Lobby.</p>
            <p><em>Regra de Poder: Ao menos 1 Poder deve ser Universal, sendo os demais de padr√£o Lend√°rio.</em></p>
        `,
    mechanic: {
      name: "System Points (SP)",
      desc: `
                <p>Recurso especial oriundo da experi√™ncia no Lobby. System Points permitem vencer circunst√¢ncias anormais e alterar resultados extremos (resistir a danos fatais ou aumentar rolagens efetuadas).</p>
                <ul>
                    <li><b>Recupera√ß√£o:</b> Obtidos ao realizar um <b>Sucesso Cr√≠tico</b>.</li>
                    <li><b>Uso:</b> Manipula√ß√£o direta da probabilidade e sobreviv√™ncia sist√™mica conforme documento espec√≠fico.</li>
                </ul>
            `
    },
    classes: [
      { name: "Aprimorado", benefit: "1 Poder Principal e 1 Habilidade Especial." },
      { name: "Combatente", benefit: "2 Poderes Secund√°rios Combativos." },
      { name: "Mago", benefit: "2 Poderes Secund√°rios M√°gicos." },
      { name: "Profissional", benefit: "2 Poderes Principais (Hyper Skill)." },
      { name: "Anormal", benefit: "1 Poder Principal e 1 Secund√°rio." },
      { name: "Casual", benefit: "1 Poder Principal e 1 Item Exclusivo." },
      { name: "Destruidor de Sistemas", benefit: "EXCLUSIVO SEASON 0: 4 Poderes (Principais/Secund√°rios/Hab) e 1 Item." }
    ],
    traits: [
      {
        name: "Consci√™ncia Sist√™mica",
        effect: "1x/cena: O Mestre revela se voc√™ est√° em desvantagem, paridade ou vantagem mec√¢nica. Penalidade: -2 Dados em empatia, leitura emocional e improviso social."
      },
      {
        name: "Corpo Inicializado",
        effect: "1x/cena: Anula completamente um dano ou efeito f√≠sico negativo. Ao fim da cena, sofre Exaust√£o proporcional (1 para leve, 2 para m√©dio, 3 para extremo)."
      },
      {
        name: "Eco de Poder Absoluto",
        effect: "1x/sess√£o: +2 Dados Normais em rolagens de um Poder espec√≠fico at√© o fim da cena. Ao final, sofre 1 de Exaust√£o obrigatoriamente."
      },
      {
        name: "Desacoplamento da Realidade",
        effect: "Perde 1 WP se obtiver Falha Cr√≠tica (todos < 5) ou se precisar rolar apenas 1 dado. Garante o uso de System Points."
      },
      {
        name: "Jogador Descontrolado",
        effect: "Requisitos secretos e isolamento podem ativar capacidades poderosas. Se ativado, o personagem perde a individualidade e torna-se uma marionete do Guia."
      }
    ],
    powers: `
            <hr>
            <h3>ARQUIVO LOG: LOBBY_DATA</h3>
            <p><strong>Criptografia Bin√°ria:</strong><br>
            01010010 01101111 01100010 01101111 01110011 00100000 01101110 11100011 01101111 00100000 01110100 01100101 01101101 00100000 01100001 00100000 01110011 01100101 01101110 01101000 01100001<br>
            01001110 11100011 01101111 00100000 01100101 01110010 01100001 01101101 00100000 00110110 00100000 01101100 01100101 01110100 01110010 01100001 01110011 00111111</p>
            
            <p><strong>Sinal de Sa√≠da (Morse):</strong><br>
            --- / .. -- .--. . .-. .. --- / -. .- ... -.-. . / -.. . / ..- -- / -. --- -- . / -....- / .---- ...--</p>
            
            <p><strong>Descri√ß√£o Sistem√°tica (Cifra):</strong><br>
            <em>Zr Raivr n Erfcbfgn, r ryn fr pbagrz rz zvaun ribyh√ß√£b, qrfqr dhr cbffhn n punir.</em><br>
            <em>Xdl√™ ryrnbnnnv √© wb Soarfda?</em></p>
        `
  },
  // --- SLOT 8 ---
  // --- SLOT 8: ENCARNA√á√ÉO ---
  encarnacao: {
    id: "encarnacao",
    name: "Encarna√ß√£o",
    icon: "üéá",
    type: "Divindade Fragmentada (Transcendental)",
    desc: `
            <p>A Encarna√ß√£o n√£o √© um escolhido; ela √© o retorno incompleto de algo que j√° foi absoluto. Um deus morreu ou foi expulso da realidade, e seu fragmento encontrou um corpo capaz de suportar a ideia de divindade.</p>
            <p>Diferente do Semi-Deus, que √© inspirado por um conceito, a Encarna√ß√£o <b>√©</b> o conceito tentando existir novamente. Ela n√£o pode ser criada no in√≠cio do jogo, surgindo apenas por ascens√£o narrativa, sacrif√≠cio ou colapso de um Semi-Deus.</p>
            <p><em>Nota: Inicia com a Fisiologia Semi-Divina M√≠tica e um Poder Principal Universal baseado no deus escolhido.</em></p>
        `,
    mechanic: {
      name: "F√© Encarnada",
      desc: `
                <p>Substitui√ß√£o total de Lealdades e Paix√µes por Aspectos do Deus Original (Dom√≠nios ou Absolutos).</p>
                <ul>
                    <li><b>Recupera√ß√£o:</b> +1 WP ao reafirmar um Aspecto (m√°x 2/cena).</li>
                    <li><b>Penalidade:</b> Agir contra um Aspecto custa -1 Base Will e imp√µe -2 Dados em todas as rolagens at√© o fim da cena (conflito de identidade).</li>
                </ul>
            `
    },
    divindades: [
      "1. Orfeu (Morto)",
      "2. Ryujin (Reencarnando)",
      "3. Saci (Morto)",
      "4. Erlang Shen (Reencarnando)",
      "5. Fenrir (Morto)",
      "6. Zeus (Vivo)",
      "7. Poseidon (Vivo)",
      "8. Hades (Vivo)",
      "9. Ares (Vivo)",
      "10. Guia (Vivo)",
      "11. M√£e Amorfa (Vivo)",
      "12. Pai Sem Rosto (Vivo)",
      "13. Midra (Vivo)",
      "14. Pele Divina (Vivo)",
      "15. Dumbledore (Vivo)",
      "16. Drag√£o Ancestral (Vivo)",
      "17. Aliado (Vivo)",
      "18. Mew (Vivo)",
      "19. Arceus (Vivo)"
    ],
    traits: [
      {
        name: "Corpo da Ideia Viva",
        effect: "+2 HP em todas as partes e 2 LAR. 1x/cena: reduz gravidade de dano se o ataque contrariar sua F√©. Se o dano for do mesmo dom√≠nio do deus original, sofre +1 Exaust√£o."
      },
      {
        name: "Milagre Manifesto",
        effect: "1x/sess√£o: recria temporariamente um Poder Lend√°rio para um √∫nico uso. Ap√≥s isso, entra em Eco Divino (-2 Dados em a√ß√µes n√£o alinhadas e n√£o recupera WP at√© o fim da sess√£o)."
      },
      {
        name: "Autoridade Primordial",
        effect: "+1 WD e +2 Dados contra mortais/cria√ß√µes. Contra divindades, jogadores descontrolados ou conceitos equivalentes, o b√¥nus desaparece e Falhas Cr√≠ticas tiram 1 WP."
      },
      {
        name: "Mem√≥ria Fragmentada do Absoluto",
        effect: "1x/sess√£o: obt√©m informa√ß√µes privilegiadas sobre locais/rituais ligados ao seu dom√≠nio. Risco: O Mestre pode impor Intrus√µes de Mem√≥ria ou Testes de Trauma."
      },
      {
        name: "Forma Divina & Colapso",
        effect: "1x/sess√£o: +2 Dados em um poder at√© o fim da cena. Se encontrar o Deus Original, sua Base Will cai para 0 instantaneamente (Colapso Metaf√≠sico)."
      }
    ],
    powers: `
            <hr>
            <h3>FISIOLOGIA SEMI-DIVINA (4 ND)</h3>
            <p><strong>Poder Principal M√≠tico (Custo: 8 Pontos por Dado)</strong></p>
            
            <p><b>N√™mesis e Fraqueza:</b> Definidos conforme o Deus Encarnado. Contato m√≠nimo desativa o poder; exposi√ß√£o consider√°vel ou ataques do N√™mesis causam 1 Killing Damage no Torso e +2 de dano recebido.</p>
            
            <p><b>Hyper Stat:</b> Este poder atua como um atributo √† escolha, permitindo quebrar o limite de 5. Pode-se comprar dados com XP tanto para a pool do poder quanto para o atributo puro.</p>
            
            <h4>A√á√ïES DE DOM√çNIO</h4>
            <ul>
                <li><b>Ataque:</b> Dano Shock equivalente a W. Usa o Hyper Stat. Pode gastar custo vari√°vel para efeitos tem√°ticos.</li>
                <li><b>Defesa:</b> Defesa natural. Pode gastar 2 WP para salvar terceiros e manter a capacidade at√© o fim da cena.</li>
                <li><b>Movimento:</b> Dist√¢ncia calculada via Hyper Stat (Tabela de Sprint).</li>
            </ul>
            <p><strong>Nota de Coer√™ncia:</strong> Tentar viver de forma mundana ou negar a natureza divina imp√µe -2 Dados em todas as rolagens da cena por perda de coer√™ncia ontol√≥gica.</p>
        `
  },
  // --- SLOT 9 ---
  // --- SLOT 10: PACTADO ---
  pactado: {
    id: "pactado",
    name: "Pactado",
    icon: "üë∫",
    type: "Sobrenatural (Vinculado)",
    desc: `
            <p>O Pactado n√£o conquistou seu poder atrav√©s de treino, heran√ßa ou sorte; ele o comprou. Ele √© algu√©m que, em um momento de necessidade, ambi√ß√£o ou desespero, aceitou os termos de uma entidade superior ‚Äî um Diabo, um Esp√≠rito ou uma Vontade Nexus.</p>
            <p>Seus poderes n√£o lhe pertencem; s√£o ferramentas emprestadas que exigem uma manuten√ß√£o constante de coer√™ncia e sacrif√≠cio. O Pactado caminha com uma sombra que n√£o √© sua, ouvindo uma voz que n√£o dorme, ciente de que cada milagre realizado aumenta o peso de uma d√≠vida que, cedo ou tarde, ser√° cobrada.</p>
        `,
    mechanic: {
      name: "Devil Points (DP)",
      desc: `
                <p>Representam picos de poder que distorcem a realidade. Diferente de outros pontos, DP s√£o obtidos apenas ao aceitar um <b>D√©bito</b> (concess√£o narrativa √† entidade). Limite M√°ximo: 2 + N√≠vel.</p>
                <ul>
                    <li><b>Gastar 1 DP permite:</b> +10 WP; +1 Largura; +2 Altura; +1 WD na pool; Sobreviver 1h a dano letal (coma); Anular Trauma; Resistir a Controle Mental; Melhorar Stats/Poderes momentaneamente.</li>
                    <li><b>D√≠vida Viva:</b> O personagem inicia com 3 DP adicionais (al√©m do limite) como cr√©dito de servi√ßos passados.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Ativando o Pacto",
        effect: "Os poderes n√£o s√£o passivos. Deve gastar 1 DP ou 1 Base WP para liberar acesso aos poderes por uma cena (ou 3 rodadas). Os poderes ativos possuem 10 Dados Normais (ou 5 HD) por padr√£o."
      },
      {
        name: "Contato com o Diabo",
        effect: "+1 WD para resistir a medo e coer√ß√£o. Em contrapartida, Falhas Cr√≠ticas nesses testes permitem que a entidade cause lapsos de controle ou impulsos estranhos no personagem."
      },
      {
        name: "Contrato",
        effect: "O jogador define um eixo moral/dire√ß√£o com o Mestre. Agir conforme o contrato concede +1 Dado de b√¥nus. Agir contra o contrato imp√µe -2 Dados pelo resto da sess√£o."
      },
      {
        name: "Segunda Voz",
        effect: "A entidade fala ativamente com o jogador (via Mestre). Obedecer √† voz concede +1 WD na a√ß√£o. Desobedecer conscientemente imp√µe -2 Dados Normais na cena/a√ß√£o por resist√™ncia do pacto."
      },
      {
        name: "D√≠vida Viva",
        effect: "Gastar DP nunca alivia a d√≠vida, apenas movimenta termos. Cada novo d√©bito torna a entidade mais exigente e presente, manifestando cobran√ßas narrativas e press√µes indiretas."
      }
    ],
    powers: `
            <hr>
            <h3>SISTEM√ÅTICA DO V√çNCULO</h3>
            <p>O Pactado possui <b>1 Poder Principal</b> e <b>1 Vari√°vel do Pacto</b> (Item, Habilidade ou Poder Secund√°rio) de qualidade <b>Lend√°ria</b>. Estes s√≥ podem ser utilizados enquanto o Pacto estiver Ativo.</p>
            <ul>
                <li><strong>Poderes Adormecidos:</strong> Quando o pacto n√£o est√° ativo, o personagem √© funcionalmente mundano em termos de poderes sobrenaturais.</li>
                <li><strong>Progress√£o:</strong> Embora iniciem com 10 Dados/5 HD, esses valores podem ser aprimorados com XP em n√≠veis superiores conforme as regras de Poderes Lend√°rios.</li>
            </ul>
            <p><strong>Nota:</strong> Zerar a reserva de Devil Points torna o Pactado vulner√°vel a interven√ß√µes diretas da entidade, pois n√£o h√° mais "cr√©dito" para negociar sua autonomia.</p>
        `
  },
  // --- SLOT 10 (IGNORADO / EXEMPLO / NOVO) ---
  custom: {
    id: "custom",
    name: "Ra√ßa Customizada",
    icon: "üõ†Ô∏è",
    type: "Homebrew",
    desc: "<p>Espa√ßo reservado para novas cria√ß√µes.</p>",
    mechanic: { name: "Em Constru√ß√£o", desc: "..." },
    traits: [],
    powers: ""
  },
  // --- SLOT: ARMADURADO ---
  armadurado: {
    id: "armadurado",
    name: "Armadurado",
    icon: "üõ°Ô∏è",
    type: "Simbi√≥tico (Conquista)",
    desc: `
            <p>O Armadurado n√£o veste uma armadura; ele coexiste com ela. A <b>Casca Irremov√≠vel</b> √© uma entidade viva, semi-viva ou plenamente inteligente, ligada permanentemente ao corpo e √† mente do hospedeiro.</p>
            <p>Esta √© uma origem de conquista, n√£o acess√≠vel no in√≠cio do jogo, representando um pacto irrevers√≠vel. Sem a Casca, o Armadurado √© um indiv√≠duo comum, privado de todos os seus poderes e considerado funcionalmente inferior a um humano comum devido √† sua depend√™ncia.</p>
            <p><em>Exemplos: Venom (Eddie Brock), Homem de Ferro (Tony Stark), Coura√ßa (Hexatombe).</em></p>
        `,
    mechanic: {
      name: "Casca Irremov√≠vel",
      desc: `
                <p>A armadura possui vontade pr√≥pria e uma reserva de <b>Willpower independente (N√≠vel + 2)</b>, sustentada por duas Paix√µes exclusivas da Casca. O usu√°rio compartilha os ganhos e perdas de WP com a armadura.</p>
                <ul>
                    <li><b>Depend√™ncia:</b> Se separado da Casca, todos os poderes e vantagens da origem ficam inativos.</li>
                    <li><b>Equipamento Base:</b> Recebe 1 Poder Principal (Focus Universal - Item com dados) e 1 Poder Principal M√≠tico (Qualidades gerais da armadura).</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Corpo Revestido",
        effect: "+2 HP em todas as partes e 2 LAR (Impenetr√°vel). 1x/cena: reduz categoria de dano em um n√≠vel ao custo de 1 Exaust√£o. A Exaust√£o s√≥ √© removida seguindo as Paix√µes da Armadura (sem ganhar WP). Se a Casca chegar a 0 HP, ela entra em estado de Morrendo/Destrui√ß√£o."
      },
      {
        name: "Vontade Sobreposta",
        effect: "O usu√°rio nunca sofre Falhas Cr√≠ticas. Em vez disso, a Casca assume o controle da a√ß√£o (conduzida pelo Mestre) para cumprir seus pr√≥prios objetivos. Cada uso sequente na mesma sess√£o custa 1 Willpower."
      },
      {
        name: "N√∫cleo de Persist√™ncia Artificial",
        effect: "1x/sess√£o: ao chegar a 0 HP ou morrer, permanece ativo por 1 rodada adicional ignorando penalidades (agindo de forma mec√¢nica). Ao fim da rodada, cai e a Casca perde 1 de Base Will. Pode conceder 1 rodada de 'Morrendo' contra dano massivo."
      },
      {
        name: "Interposi√ß√£o Blindada",
        effect: "(1+N√≠vel)x/cena: Converte uma defesa Self em Range para interceptar ataques contra aliados. O aliado ignora o dano se voc√™ mitigar com sucesso. Penalidade: -1 Dado Normal em a√ß√µes ofensivas at√© o fim da cena."
      },
      {
        name: "Fus√£o For√ßada",
        effect: "A Casca possui Estabilidade pr√≥pria (4 Dados + N√≠vel) que funciona como Augment para o usu√°rio contra medo, controle mental ou coer√ß√£o. Se o efeito passar, a Casca perde 1 de Base Will por sobrecarga cognitiva."
      }
    ],
    powers: `
            <hr>
            <h3>SISTEM√ÅTICA DA ARMADURA</h3>
            <p>A armadura √© tratada como um ser vivo e um objeto ao mesmo tempo. Para repar√°-la ou salv√°-la de um estado cr√≠tico, √© necess√°rio um teste de <b>Conhecimento</b> apropriado √† sua natureza:</p>
            <ul>
                <li><strong>Mec√¢nica:</strong> Engenharia / Tecnologia.</li>
                <li><strong>Org√¢nica:</strong> Primeiros Socorros / Medicina.</li>
                <li><strong>M√≠stica:</strong> Ocultismo / Arcanismo.</li>
            </ul>
            <p><strong>Foco e M√≠tico:</strong> O poder de Focus representa a durabilidade e ferramentas da armadura, enquanto o poder M√≠tico representa as capacidades sobre-humanas que ela concede ao hospedeiro.</p>
        `
  },
  // --- SLOT: CIDAD√ÉO DE NEW TOKYO ---
  "cidadao-new-tokyo": {
    id: "cidadao-new-tokyo",
    name: "Cidad√£o de New Tokyo",
    icon: "üèÆ",
    type: "Urbano (Legado)",
    desc: `
            <p>New Tokyo n√£o √© apenas uma localiza√ß√£o; √© um estado de esp√≠rito onde a tradi√ß√£o ancestral colide com a satura√ß√£o absoluta da Energia Nexus. Seus cidad√£os ‚Äî sejam humanos, alien√≠genas ou constructos ‚Äî s√£o moldados pela disciplina, pela press√£o social e pelo ritmo fren√©tico da metr√≥pole.</p>
            <p>Eles carregam o "Peso do A√ßo e do Esp√≠rito", herdando costumes r√≠gidos e uma conex√£o √∫nica com a tecnologia saturada de Nexus da cidade. S√£o conhecidos por sua busca pela perfei√ß√£o e por navegar nas complexas redes de influ√™ncia da maior cidade do mundo.</p>
            <p><em>Equipamento: Inicia com 1 Poder Principal Lend√°rio (Personalizado) e 1 Item Raro.</em></p>
        `,
    mechanic: {
      name: "Cidade Grande (Recursos e Contatos)",
      desc: `
                <p>O personagem sabe como a engrenagem urbana gira. Ele possui uma reserva de <b>5 Dados de Riqueza (+1 por N√≠vel)</b> por sess√£o.</p>
                <ul>
                    <li><b>Uso de Recursos:</b> Pode gastar esses dados para obter equipamentos, subornar NPCs, acessar informa√ß√µes restritas ou garantir transporte imediato.</li>
                    <li><b>Interven√ß√£o Narrativa:</b> Uma vez por sess√£o, pode declarar uma "Apari√ß√£o de Recurso" ou "Contato Conveniente" para mudar o rumo da cena (ex: um aliado aparece com um ve√≠culo, ou uma d√≠vida antiga √© cobrada para abrir uma porta selada).</li>
                    <li><b>D√≠vida:</b> O uso excessivo desses recursos implica em cobran√ßas futuras, favores devidos ou drenagem financeira narrativa.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "C√≥digo de Honra (Giri)",
        effect: "+1 Dado Normal em testes para proteger sua honra, cumprir uma promessa direta ou defender um inocente. Se quebrar sua palavra ou agir com covardia, sofre ‚àí2 Dados em Estabilidade e Mind at√© realizar uma repara√ß√£o."
      },
      {
        name: "Esp√≠rito de Resili√™ncia (Gambare)",
        effect: "Sempre que for alvo de um Trama Check (Teste de Trauma/Medo) de um oponente e for bem-sucedido em resistir, recebe +2 Dados Normais em Combate e Resist√™ncia at√© o fim da luta. Penalidade: Sofre Exaust√£o em dobro em esfor√ßos prolongados e n√£o pode declarar desist√™ncia volunt√°ria."
      },
      {
        name: "Caligrafia do Nexus",
        effect: "Recebe 2 pontos de Willpower Tempor√°rio por sess√£o, que podem ser gastos exclusivamente para ativar ou fortalecer seu Poder Principal Lend√°rio inicial. Penalidade: Sofre ‚àí1 Dado Normal em √°reas de 'Sil√™ncio M√°gico' ou polui√ß√£o n√£o-Nexus."
      },
      {
        name: "T√©cnica do Artes√£o (Shokunin)",
        effect: "Escolha uma Per√≠cia ou o uso do seu Item Raro: recebe +2 Dados Normais fixos nessa escolha (o item √© indestrut√≠vel por meios comuns). Penalidade: Sofre ‚àí2 Dados em qualquer a√ß√£o complexa em que n√£o possua ao menos 2 dados de per√≠cia (medo da mediocridade)."
      },
      {
        name: "M√°scara Social (Tatemae)",
        effect: "+2 Dados Normais para esconder emo√ß√µes, inten√ß√µes ou resistir a Intimida√ß√£o e Leitura de Mente. Penalidade: Recupera 1 ponto de Willpower a menos por descanso (necessita de isolamento ou hobbies espec√≠ficos para recuperar plenamente)."
      }
    ],
    powers: `
            <hr>
            <h3>ESTRUTURA DE PODER</h3>
            <p>O Cidad√£o de New Tokyo possui uma constru√ß√£o de poder focada em refinamento e especializa√ß√£o:</p>
            <ul>
                <li><strong>Legado de New Tokyo:</strong> Um Poder Principal de qualidade <b>Lend√°ria</b> definido pelo jogador. Representa uma t√©cnica suprema, uma heran√ßa biol√≥gica ou uma modifica√ß√£o cibern√©tica avan√ßada saturada pelo Nexus.</li>
                <li><strong>Rel√≠quia Urbana:</strong> Um <b>Item Raro</b> inicial que faz parte da identidade do personagem (ex: uma Katana de vibra√ß√£o, um terminal hacker customizado ou um amuleto espiritual moderno).</li>
            </ul>
        `
  },
  // --- SLOT: MESTRE DE JOGO (CONQUISTA) ---
  "mestre-de-jogo": {
    id: "mestre-de-jogo",
    name: "Mestre de Jogo",
    icon: "üé≠",
    type: "Conquista (Arquiteto)",
    desc: `
            <p>Voc√™ n√£o apenas habita a realidade; voc√™ a gerencia. O Mestre de Jogo √© algu√©m que conquistou o controle sobre um N√≥ de Nexus t√£o puro que sua percep√ß√£o se tornou "Meta-Sist√™mica". Ele enxerga a vida como uma sucess√£o de cenas, encontros e estat√≠sticas.</p>
            <p>Sua presen√ßa no campo de batalha √© como a de um diretor em um set de filmagem: ele n√£o √© o her√≥i que desfere o golpe final, mas √© quem garante que a luz esteja no lugar certo, que o cen√°rio desabe sobre o vil√£o e que o di√°logo tenha o impacto necess√°rio. √â uma exist√™ncia solit√°ria e cerebral, onde o controle absoluto cobra o pre√ßo da espontaneidade e da vitalidade f√≠sica.</p>
            <p><em>Condi√ß√£o de Conquista: Derrotar um Guardi√£o de N√≥ ou transcender a percep√ß√£o humana atrav√©s de um Bug Sist√™mico proposital.</em></p>
        `,
    mechanic: {
      name: "Jurisdi√ß√£o do Diretor (Pontos de Enredo)",
      desc: `
                <p>O Mestre de Jogo possui uma reserva de <b>Dados de Enredo (N√≠vel + 3)</b> por sess√£o. Ele pode gastar esses dados para realizar "Edi√ß√µes de Cena":</p>
                <ul>
                    <li><b>Inser√ß√£o Narrativa:</b> Gastar 1 dado para declarar a exist√™ncia de um objeto comum ou conveni√™ncia ambiental, desde que tenha impacto menor narrativamente. Como dizer que a porta est√° destrancada, que tinha uma ultima ma√ßa guardada no estoque de comida, e etc</li>
                    <li><b>Retcon Menor:</b> Gastar 2 dados para anular uma a√ß√£o de um NPC menor ou mudar um detalhe que acabou de ser narrado e que n√£o envolva dano direto.</li>
                    <li><b>Direcionamento de Foco:</b> Pode gastar dados para dar b√¥nus de +1 de Altura (Height) para a a√ß√£o de um aliado, narrando como o ambiente ou a sorte conspiram a favor dele.</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Consci√™ncia Meta-Sist√™mica",
        effect: "O personagem sempre sabe o HP aproximado e o n√≠vel de perigo de qualquer criatura que veja. Penalidade: Distanciamento Emocional. Sofre ‚àí2 Dados em testes de Empatia ou Socializa√ß√£o genu√≠na (ele v√™ pessoas como fichas)."
      },
      {
        name: "Cenografia Viva",
        effect: "Uma vez por rodada, ele pode conceder +1 WD (Wiggle Die) para a Defesa de um aliado ao editar o cen√°rio (ex: um galho cai na frente do tiro). Penalidade: Fragilidade do Diretor. O personagem sofre ‚àí1 HP em todas as partes do corpo; ele n√£o foi feito para estar na frente das c√¢meras."
      },
      {
        name: "Voz do Narrador",
        effect: "Sua fala possui autoridade absoluta sobre seres de mente fraca ou figurantes. Caso o Inimigo seja considerado um Minion, o mesmo pode gastar 1 de WP para comanda-lo de forma absoluta por 1 comando unico, que pode ser: A√ß√£o (uma das a√ß√µes que ele faz), fugir, parar, largar. Penalidade: Falta de Sutileza. Ele √© incapaz de sussurrar ou ser discreto; suas inten√ß√µes s√£o sempre percebidas como ordens, impondo ‚àí2 Dados em Furtividade e L√°bia Social."
      },
      {
        name: "Prepara√ß√£o de Cen√°rio",
        effect: "Se o personagem passar uma rodada inteira sem realizar a√ß√µes f√≠sicas (apenas observando), na pr√≥xima rodada ele pode aplicar dois Dados de Debuff em qualquer inimigo da cena apenas narrando sua falha de script. Penalidade: In√©rcia Cr√≠tica. Sofre ‚àí2 Dados em qualquer teste de Iniciativa ou rea√ß√£o puramente instintiva."
      },
      {
        name: "Plot Armor (Sacrif√≠cio de Figurante)",
        effect: "Uma vez por sess√£o, ao receber um dano que o levaria ao estado 'Morrendo', o Mestre de Jogo pode declarar que um objeto ou um NPC menor pr√≥ximo recebeu o golpe em seu lugar. Penalidade: Custo Sist√™mico. Ap√≥s usar este efeito, o NPC ou Item narrado √© Perdido."
      }
    ],
    powers: `
            <hr>
            <h3>ESTAT√çSTICAS DO ARQUITETO</h3>
            <p>O Mestre de Jogo n√£o busca poder bruto, mas sim a manipula√ß√£o das vari√°veis alheias:</p>
            <ul>
                <li><strong>Poder Principal (Autoridade Narrativa):</strong> Um poder de qualidade <b>Universal</b> O Usu√°rio pode escolher o tema do poder baseado no que preferir </li>
            </ul>
        `
  },
  // --- SLOT: SEQUESTRADO ---
  sequestrado: {
    id: "sequestrado",
    name: "Sequestrado",
    icon: "üìâ",
    type: "Inst√°vel (Res√≠duo de Dados)",
    desc: `
            <p>Voc√™ foi levado. Seus dados foram minerados, replicados e espalhados por incont√°veis realidades de teste no Lobby, mas, por algum motivo, voc√™ foi rotulado como "Valor Zero". Voc√™ n√£o √© um Jogador, pois sua conex√£o foi cortada; voc√™ n√£o √© um S√≥cia, pois o sistema se recusou a estabilizar sua forma.</p>
            <p>Sua exist√™ncia √© um erro de cache. Sua apar√™ncia flutua, seu hist√≥rico √© uma colagem de mem√≥rias de vers√µes suas que nunca existiram nesta linha do tempo, e o mundo parece ter dificuldade em registrar sua presen√ßa permanente. Voc√™ √© o Glitch que o sistema desistiu de corrigir.</p>
            <p><em>Equipamento: Inicia com 1 Poder Principal M√≠tico (Tema Personalizado).</em></p>
        `,
    mechanic: {
      name: "Renderiza√ß√£o Inst√°vel (Apar√™ncia Aleat√≥ria)",
      desc: `
                <p>O Sequestrado n√£o possui uma forma f√≠sica fixa. Seus dados de "textura" e "modelo" mudam constantemente.</p>
                <ul>
                    <li><b>Mudan√ßa de Estilo:</b> O Usu√°rio pode acabar mudando sua aparencia, o usu√°rio ter√° 3 artes diferentes, 1 no tema da mesa, uma pixelada, e uma versao realista, e ele pode alterar isso ao longo da sessao. Toda sessao deve rolar 1d3 para definir qual aparencia √©.</li>
                    <li><b>Vantagem de Anonimato:</b> Devido a essa muta√ß√£o visual, testes para reconhecer ou identificar o Sequestrado por meios convencionais sofrem <b>-2 Dados Normais</b>. Ele nunca √© a mesma pessoa por muito tempo. O Usu√°rio tambem recebe os seguintes bonifica√ß√µes de acordo com a aparencia: 1 - O Usu√°rio recebe +1 dado em Todos os testes fisicos (body e cordenation) na sessao, mas perde 1 dado em todos as mentais. (sentidos e mind) 2 - recebe +1 dado em todos os testes mentais (mind e sense), e menos 1 dado em todos os testes de carisma ou comando. 3 - recebe +1 em testes de carisma ou comando, e recebe -1 em testes fisicos (body e coordenation)</li>
                </ul>
            `
    },
    traits: [
      {
        name: "Avalia√ß√£o: Valor Zero",
        effect: "Para o sistema do Lobby e entidades de rastreamento (Rob√¥s, Vigilantes), voc√™ √© invis√≠vel ou considerado um 'objeto inanimado' at√© que use um poder. Recebe +2 Dados em Furtividade contra tecnologia. Penalidade: Invisibilidade Social. NPCs importantes tendem a ignorar sua opini√£o ou esquecer seu nome minutos ap√≥s a conversa caso tenha uma relacao recente ou n√£o relevante o bastante.."
      },
      {
        name: "Eco de Realidades Replicadas",
        effect: "Uma vez por cena, voc√™ pode acessar uma 'mem√≥ria de r√©plica'. Voce pode descrever o uso de uma pericia que voce nao tem dados, e realizar ela como se tivesse +2 dados, checando uma das milhares de variantes que voce podia ter se tornado. Penalidade: Fragmenta√ß√£o Mental. Se falhar nesse teste, voc√™ perde 1 de Willpower e sofre confus√£o narrativa (Lag existencial) pelo resto da cena, perdendo 1 dado em todas as a√ß√µes"
      },
      {
        name: "Corpo de Baixa Prioridade",
        effect: "Sendo 'lixo de dados', o dano letal demora a se fixar em voc√™. Voc√™ ignora o primeiro ponto de Killing Damage que receber em cada rodada. Penalidade: Rejei√ß√£o Curativa. Curas de origem tecnol√≥gica ou sist√™mica (Nexus) recuperam -1 de HP a menos em voc√™, pois seu c√≥digo n√£o aceita 'patches' oficiais."
      },
      {
        name: "Distor√ß√£o de Colis√£o (Noclip)",
        effect: "Uma vez por cena, voc√™ pode se mover atrav√©s de objetos s√≥lidos ou pessoas por uma √∫nica rodada como se fosse um holograma falho. Penalidade: Instabilidade F√≠sica. Ap√≥s usar este efeito, voc√™ n√£o pode carregar itens pesados ou usar armas de duas m√£os at√© o fim da cena, pois sua densidade molecular flutua perigosamente."
      },
      {
        name: "Satura√ß√£o de Erro",
        effect: "Sempre que voc√™ utiliza seu Poder M√≠tico, a realidade ao redor 'glitcha' (luzes piscam, sons distorcem), o que concede +1 WD em Intimida√ß√£o na rodada seguinte. Penalidade: Alerta de Erro. O uso de seu poder atrai a aten√ß√£o de entidades que buscam 'limpar' res√≠duos de dados, aumentando o risco de encontros perigosos com o sistema."
      }
    ],
    powers: `
            <hr>
            <h3>MANIFESTA√á√ÉO M√çTICA</h3>
            <p>O Sequestrado canaliza o vazio de sua exist√™ncia descartada em um poder de escala massiva:</p>
            <ul>
                <li><strong>Poder Principal M√≠tico:</strong> Um poder de <b>N√≠vel M√≠tico (8 pontos por dado)</b> com tema totalmente livre. Este poder representa a √∫nica parte do seu c√≥digo que o Lobby n√£o conseguiu replicar ‚Äî sua ess√™ncia original corrompida.</li>
                <li><strong>Propriedade 'Glitch':</strong> O jogador pode descrever visualmente seus efeitos como erros de sistema, distor√ß√µes de voxels ou c√≥digo bin√°rio vazando para a realidade f√≠sica.</li>
            </ul>
        `
  }
};
function Rs(l, e, t) {
  const i = l.slice();
  return i[70] = e[t], i[72] = t, i;
}
function Ms(l, e, t) {
  const i = l.slice();
  return i[73] = e[t], i[72] = t, i;
}
function Ns(l, e, t) {
  const i = l.slice();
  return i[75] = e[t], i;
}
function Ls(l) {
  let e, t, i, n, o, c = (
    /*activePopup*/
    l[12].title + ""
  ), f, u, d, p, m, b = (
    /*activePopup*/
    l[12].desc + ""
  ), v, h, _, w, k;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), o = B("DADOS_CRIPTOGRAFADOS // "), f = B(c), u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-times"></i>', p = g(), m = r("div"), s(d, "class", "close-btn svelte-1c7r4z0"), s(d, "type", "button"), s(d, "title", "Fechar Janela"), s(i, "class", "modal-header svelte-1c7r4z0"), s(m, "class", "modal-body custom-scroll svelte-1c7r4z0"), s(t, "class", "modal-window svelte-1c7r4z0"), s(t, "role", "dialog"), s(e, "class", "modal-backdrop svelte-1c7r4z0");
    },
    m(A, y) {
      q(A, e, y), a(e, t), a(t, i), a(i, n), a(n, o), a(n, f), a(i, u), a(i, d), a(t, p), a(t, m), m.innerHTML = b, _ = !0, w || (k = [
        R(d, "click", Lt(
          /*click_handler_1*/
          l[47]
        )),
        R(d, "mousedown", Lt(
          /*mousedown_handler*/
          l[46]
        )),
        R(t, "click", Lt(
          /*click_handler*/
          l[45]
        )),
        R(
          e,
          "click",
          /*click_handler_2*/
          l[48]
        )
      ], w = !0);
    },
    p(A, y) {
      (!_ || y[0] & /*activePopup*/
      4096) && c !== (c = /*activePopup*/
      A[12].title + "") && te(f, c), (!_ || y[0] & /*activePopup*/
      4096) && b !== (b = /*activePopup*/
      A[12].desc + "") && (m.innerHTML = b);
    },
    i(A) {
      _ || (A && Ne(() => {
        _ && (v || (v = We(t, Mt, {}, !0)), v.run(1));
      }), A && Ne(() => {
        _ && (h || (h = We(e, Qe, {}, !0)), h.run(1));
      }), _ = !0);
    },
    o(A) {
      A && (v || (v = We(t, Mt, {}, !1)), v.run(0)), A && (h || (h = We(e, Qe, {}, !1)), h.run(0)), _ = !1;
    },
    d(A) {
      A && P(e), A && v && v.end(), A && h && h.end(), w = !1, Te(k);
    }
  };
}
function Ps(l) {
  let e, t = (
    /*t*/
    l[75].name + ""
  ), i, n, o;
  function c() {
    return (
      /*click_handler_9*/
      l[58](
        /*t*/
        l[75]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "trait-tag svelte-1c7r4z0");
    },
    m(f, u) {
      q(f, e, u), a(e, i), n || (o = R(e, "click", c), n = !0);
    },
    p(f, u) {
      l = f, u[0] & /*originData*/
      8192 && t !== (t = /*t*/
      l[75].name + "") && te(i, t);
    },
    d(f) {
      f && P(e), n = !1, o();
    }
  };
}
function bm(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "-8 PT", s(e, "class", "cost-badge svelte-1c7r4z0"), s(e, "title", "Custo de Multiverso Adicional");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function qs(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k;
  function A(...O) {
    return (
      /*change_handler_3*/
      l[59](
        /*i*/
        l[72],
        ...O
      )
    );
  }
  function y(...O) {
    return (
      /*change_handler_4*/
      l[60](
        /*i*/
        l[72],
        ...O
      )
    );
  }
  let E = (
    /*i*/
    l[72] > 0 && bm()
  );
  function S() {
    return (
      /*click_handler_10*/
      l[61](
        /*i*/
        l[72]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("input"), o = g(), c = r("span"), c.textContent = "::", f = g(), u = r("input"), p = g(), m = r("div"), E && E.c(), b = g(), v = r("button"), v.innerHTML = '<i class="fas fa-trash"></i>', s(i, "class", "univ-input svelte-1c7r4z0"), i.value = n = /*item*/
      l[73].universe, s(i, "placeholder", "Universo..."), s(c, "class", "divider"), s(u, "class", "theme-input svelte-1c7r4z0"), u.value = d = /*item*/
      l[73].theme, s(u, "placeholder", "Tema..."), s(t, "class", "input-group svelte-1c7r4z0"), s(v, "class", "del-btn svelte-1c7r4z0"), s(m, "class", "controls svelte-1c7r4z0"), s(e, "class", "list-row svelte-1c7r4z0");
    },
    m(O, C) {
      q(O, e, C), a(e, t), a(t, i), a(t, o), a(t, c), a(t, f), a(t, u), a(e, p), a(e, m), E && E.m(m, null), a(m, b), a(m, v), _ = !0, w || (k = [
        R(i, "change", A),
        R(u, "change", y),
        R(v, "click", S)
      ], w = !0);
    },
    p(O, C) {
      l = O, (!_ || C[0] & /*originUniverses*/
      2 && n !== (n = /*item*/
      l[73].universe) && i.value !== n) && (i.value = n), (!_ || C[0] & /*originUniverses*/
      2 && d !== (d = /*item*/
      l[73].theme) && u.value !== d) && (u.value = d);
    },
    i(O) {
      _ || (O && Ne(() => {
        _ && (h || (h = We(e, yt, {}, !0)), h.run(1));
      }), _ = !0);
    },
    o(O) {
      O && (h || (h = We(e, yt, {}, !1)), h.run(0)), _ = !1;
    },
    d(O) {
      O && P(e), E && E.d(), O && h && h.end(), w = !1, Te(k);
    }
  };
}
function Us(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nenhum registro de origem.", s(e, "class", "empty-msg");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Gs(l) {
  let e, t, i, n, o, c, f, u, d, p = Hs(
    /*mot*/
    l[70].stars
  ) + "", m, b, v, h, _, w, k, A;
  function y(...O) {
    return (
      /*change_handler_5*/
      l[62](
        /*i*/
        l[72],
        ...O
      )
    );
  }
  function E(...O) {
    return (
      /*change_handler_6*/
      l[63](
        /*i*/
        l[72],
        ...O
      )
    );
  }
  function S() {
    return (
      /*click_handler_11*/
      l[64](
        /*i*/
        l[72]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), n = g(), o = r("div"), c = r("input"), u = g(), d = r("span"), m = B(p), b = g(), v = r("button"), v.innerHTML = '<i class="fas fa-trash"></i>', h = g(), s(t, "class", "full-input svelte-1c7r4z0"), t.value = i = /*mot*/
      l[70].text, s(t, "placeholder", "Escreva um objetivo..."), s(c, "type", "number"), s(c, "class", "num-input svelte-1c7r4z0"), s(c, "min", "1"), s(c, "max", "5"), c.value = f = /*mot*/
      l[70].stars, s(d, "class", "stars-render"), ae(d, "color", "var(--c-primary)"), s(v, "class", "del-btn svelte-1c7r4z0"), s(o, "class", "stars-ctrl svelte-1c7r4z0"), s(e, "class", "list-row column svelte-1c7r4z0");
    },
    m(O, C) {
      q(O, e, C), a(e, t), a(e, n), a(e, o), a(o, c), a(o, u), a(o, d), a(d, m), a(o, b), a(o, v), a(e, h), w = !0, k || (A = [
        R(t, "change", y),
        R(c, "change", E),
        R(v, "click", S)
      ], k = !0);
    },
    p(O, C) {
      l = O, (!w || C[0] & /*motivations*/
      131072 && i !== (i = /*mot*/
      l[70].text) && t.value !== i) && (t.value = i), (!w || C[0] & /*motivations*/
      131072 && f !== (f = /*mot*/
      l[70].stars) && c.value !== f) && (c.value = f), (!w || C[0] & /*motivations*/
      131072) && p !== (p = Hs(
        /*mot*/
        l[70].stars
      ) + "") && te(m, p);
    },
    i(O) {
      w || (O && Ne(() => {
        w && (_ || (_ = We(e, yt, {}, !0)), _.run(1));
      }), w = !0);
    },
    o(O) {
      O && (_ || (_ = We(e, yt, {}, !1)), _.run(0)), w = !1;
    },
    d(O) {
      O && P(e), O && _ && _.end(), k = !1, Te(A);
    }
  };
}
function vm(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De = (
    /*lvlInfo*/
    l[4].level + ""
  ), we, ke, me, re, ye, oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe, Le, qe, Me, Se, ve, Ue, Ve, rt, Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It, Dt, Ct, At, Et, Nt, ct, Ie, tt, Ye, bt, Jt, Zt, Yt, xt, ca, rl, Rl, bl, Vl, vl, Ml, Ea, Qt, fa, Nl, il, wt, Rt = (
    /*originData*/
    l[13].icon + ""
  ), ea, Ka, Wl, da, Xl, Gl, ua = (
    /*originData*/
    l[13].name.toUpperCase() + ""
  ), Jl, Za, Yl, Oa, Ql, hl, Wt, Hl, Cl, Il = (
    /*originData*/
    l[13].mechanic.name + ""
  ), Ll, Kl, Ft, Pl, $t, Zl, gl, zt, Bt, Ke, Ot, nt, el, hs, ta, Vi, gs, Sa, Ca, Wi, _s, xa, ks, $a, ws, Ia, Ta, gi, ys, Da, As, Ra, Ma, _i, Es, Na, Os, La, ki, Ss, Pa, Cs, wi, ei, Ht, Xi, Is, tl = (
    /*activePopup*/
    l[12] && Ls(l)
  ), qa = ce(
    /*originData*/
    l[13].traits
  ), cl = [];
  for (let lt = 0; lt < qa.length; lt += 1)
    cl[lt] = Ps(Ns(l, qa, lt));
  let pa = ce(
    /*originUniverses*/
    l[1]
  ), jt = [];
  for (let lt = 0; lt < pa.length; lt += 1)
    jt[lt] = qs(Ms(l, pa, lt));
  const j0 = (lt) => Ae(jt[lt], 1, 1, () => {
    jt[lt] = null;
  });
  let wl = (
    /*originUniverses*/
    l[1].length === 0 && Us()
  ), ma = ce(
    /*motivations*/
    l[17]
  ), Vt = [];
  for (let lt = 0; lt < ma.length; lt += 1)
    Vt[lt] = Gs(Rs(l, ma, lt));
  const V0 = (lt) => Ae(Vt[lt], 1, 1, () => {
    Vt[lt] = null;
  });
  return {
    c() {
      e = r("div"), tl && tl.c(), t = g(), i = r("div"), n = r("header"), o = r("div"), c = r("div"), f = r("img"), d = g(), p = r("div"), m = g(), b = r("div"), v = r("label"), v.textContent = "CODENAME", h = g(), _ = r("input"), k = g(), A = r("button"), y = r("i"), E = B(" ATUALIZAR XP E ORIGEM"), O = g(), C = r("div"), T = r("div"), N = r("span"), N.textContent = "Pontos de Ficha Totais", I = g(), D = r("span"), M = B(
        /*totalPointsCap*/
        l[6]
      ), G = g(), L = r("div"), U = r("span"), U.textContent = "Pontos de Ficha Gastos", z = g(), F = r("span"), W = B(
        /*spentPoints*/
        l[5]
      ), H = g(), V = r("div"), J = r("span"), J.textContent = "Pontos de Ficha Dispon√≠vel", j = g(), X = r("span"), K = B(
        /*availablePoints*/
        l[18]
      ), Z = g(), le = r("div"), $ = Ni("svg"), se = Ni("circle"), Y = Ni("circle"), Q = g(), ie = r("div"), ee = r("small"), ee.textContent = "LVL", pe = g(), Ee = r("strong"), we = B(De), ke = g(), me = r("section"), re = r("div"), ye = r("div"), oe = r("span"), oe.textContent = "BASE WILL", be = g(), de = r("div"), Oe = r("span"), _e = B(
        /*statCharm*/
        l[10]
      ), ue = B(` + 
                        `), Re = r("span"), Ce = B(
        /*statCommand*/
        l[9]
      ), He = B(` + 
                        `), Ge = r("span"), Xe = B(
        /*boughtBaseWill*/
        l[3]
      ), fe = B(`
                        = `), Le = r("strong"), qe = B(
        /*maxBaseWill*/
        l[8]
      ), Me = g(), Se = r("div"), ve = r("div"), Ue = r("button"), Ue.textContent = "-", Ve = g(), rt = r("span"), rt.textContent = "+3 XP", Tt = g(), ze = r("button"), ze.textContent = "+", it = g(), Ze = r("div"), ut = r("label"), ut.textContent = "ATUAL", Be = g(), Pe = r("input"), je = g(), xe = r("div"), St = r("div"), It = r("span"), It.textContent = "WILLPOWER", Dt = g(), Ct = r("div"), At = r("span"), Et = B(
        /*maxBaseWill*/
        l[8]
      ), Nt = B(` + 
                        `), ct = r("span"), Ie = B(
        /*boughtWillpower*/
        l[2]
      ), tt = B(`
                        = `), Ye = r("strong"), bt = B(
        /*maxWillpower*/
        l[7]
      ), Jt = g(), Zt = r("div"), Yt = r("div"), xt = r("button"), xt.textContent = "-", ca = g(), rl = r("span"), rl.textContent = "+1 XP", Rl = g(), bl = r("button"), bl.textContent = "+", Vl = g(), vl = r("div"), Ml = r("label"), Ml.textContent = "ATUAL", Ea = g(), Qt = r("input"), fa = g(), Nl = r("section"), il = r("div"), wt = r("div"), ea = B(Rt), Ka = g(), Wl = r("div"), da = r("small"), da.textContent = "ORIGEM:", Xl = g(), Gl = r("span"), Jl = B(ua), Za = g(), Yl = r("button"), Yl.innerHTML = '<i class="fas fa-file-alt"></i> Descri√ß√£o da Origem', Oa = g(), Ql = r("div"), hl = r("div"), Wt = r("span"), Wt.textContent = "MEC√ÇNICA √öNICA", Hl = g(), Cl = r("span"), Ll = B(Il), Kl = g(), Ft = r("div"), Pl = r("span"), Pl.textContent = "TRA√áOS ESPECIAIS", $t = g(), Zl = r("div");
      for (let lt = 0; lt < cl.length; lt += 1)
        cl[lt].c();
      gl = g(), zt = r("section"), Bt = r("div"), Ke = r("div"), Ot = r("span"), Ot.textContent = "ARQU√âTIPOS MULTIVERSAIS", nt = g(), el = r("button"), el.textContent = "+", hs = g(), ta = r("div");
      for (let lt = 0; lt < jt.length; lt += 1)
        jt[lt].c();
      Vi = g(), wl && wl.c(), gs = g(), Sa = r("div"), Ca = r("div"), Wi = r("span"), Wi.textContent = "LEALDADE & PAIX√îES", _s = g(), xa = r("button"), xa.textContent = "+", ks = g(), $a = r("div");
      for (let lt = 0; lt < Vt.length; lt += 1)
        Vt[lt].c();
      ws = g(), Ia = r("section"), Ta = r("div"), gi = r("div"), gi.textContent = "HIST√ìRIA & ANOTA√á√îES", ys = g(), Da = r("textarea"), As = g(), Ra = r("div"), Ma = r("div"), _i = r("div"), _i.textContent = "PERFIL PSICOL√ìGICO", Es = g(), Na = r("textarea"), Os = g(), La = r("div"), ki = r("div"), ki.textContent = "DADOS VISUAIS", Ss = g(), Pa = r("textarea"), Cs = g(), wi = r("div"), ei = r("button"), ei.innerHTML = '<i class="fas fa-save"></i> SALVAR ALTERA√á√ïES', at(f.src, u = /*actor*/
      l[0].img) || s(f, "src", u), s(f, "alt", "Avatar"), s(f, "class", "svelte-1c7r4z0"), s(p, "class", "scan-line"), s(c, "class", "portrait svelte-1c7r4z0"), s(v, "class", "svelte-1c7r4z0"), s(_, "type", "text"), s(_, "class", "name-input svelte-1c7r4z0"), _.value = w = /*actor*/
      l[0].name, s(y, "class", "fas fa-satellite-dish"), s(A, "class", S = "sync-btn " + /*isSyncing*/
      (l[11] ? "pulsing" : "") + " svelte-1c7r4z0"), s(b, "class", "info-col svelte-1c7r4z0"), s(o, "class", "id-card svelte-1c7r4z0"), s(N, "class", "lbl"), s(D, "class", "val svelte-1c7r4z0"), s(T, "class", "res-line svelte-1c7r4z0"), s(U, "class", "lbl"), s(F, "class", "val dim svelte-1c7r4z0"), s(L, "class", "res-line svelte-1c7r4z0"), s(J, "class", "lbl"), s(X, "class", "val svelte-1c7r4z0"), ae(
        X,
        "color",
        /*availablePoints*/
        l[18] < 0 ? "#ff3333" : "var(--c-primary)"
      ), s(V, "class", "res-line main svelte-1c7r4z0"), s(C, "class", "resource-display svelte-1c7r4z0"), s(se, "cx", "50"), s(se, "cy", "50"), s(se, "r", "45"), s(se, "class", "bg-ring svelte-1c7r4z0"), s(Y, "cx", "50"), s(Y, "cy", "50"), s(Y, "r", "45"), s(Y, "class", "prog-ring svelte-1c7r4z0"), s(
        Y,
        "stroke-dashoffset",
        /*strokeDashoffset*/
        l[19]
      ), s($, "viewBox", "0 0 100 100"), s($, "class", "svelte-1c7r4z0"), s(ee, "class", "svelte-1c7r4z0"), s(Ee, "class", "svelte-1c7r4z0"), s(ie, "class", "level-txt svelte-1c7r4z0"), s(le, "class", "level-orb svelte-1c7r4z0"), s(n, "class", "top-hud svelte-1c7r4z0"), s(oe, "class", "w-label svelte-1c7r4z0"), s(Oe, "title", "Charme"), s(Re, "title", "Comando"), s(Ge, "class", "bought svelte-1c7r4z0"), s(Ge, "title", "Comprado"), s(Le, "class", "svelte-1c7r4z0"), s(de, "class", "w-calc svelte-1c7r4z0"), s(ye, "class", "will-info svelte-1c7r4z0"), s(Ue, "class", "svelte-1c7r4z0"), s(rt, "class", "svelte-1c7r4z0"), s(ze, "class", "svelte-1c7r4z0"), s(ve, "class", "buyer svelte-1c7r4z0"), s(ut, "class", "svelte-1c7r4z0"), s(Pe, "type", "number"), Pe.value = /*currBaseWill*/
      l[21], s(Pe, "class", "svelte-1c7r4z0"), s(Ze, "class", "current-input-wrapper svelte-1c7r4z0"), s(Se, "class", "will-controls svelte-1c7r4z0"), s(re, "class", "will-row svelte-1c7r4z0"), s(It, "class", "w-label svelte-1c7r4z0"), s(At, "title", "Base Will"), s(ct, "class", "bought svelte-1c7r4z0"), s(ct, "title", "Comprado"), s(Ye, "class", "svelte-1c7r4z0"), s(Ct, "class", "w-calc svelte-1c7r4z0"), s(St, "class", "will-info svelte-1c7r4z0"), s(xt, "class", "svelte-1c7r4z0"), s(rl, "class", "svelte-1c7r4z0"), s(bl, "class", "svelte-1c7r4z0"), s(Yt, "class", "buyer svelte-1c7r4z0"), s(Ml, "class", "svelte-1c7r4z0"), s(Qt, "type", "number"), Qt.value = /*currWillpower*/
      l[20], s(Qt, "class", "svelte-1c7r4z0"), s(vl, "class", "current-input-wrapper svelte-1c7r4z0"), s(Zt, "class", "will-controls svelte-1c7r4z0"), s(xe, "class", "will-row svelte-1c7r4z0"), s(me, "class", "willpower-module svelte-1c7r4z0"), s(wt, "class", "origin-icon svelte-1c7r4z0"), s(da, "class", "svelte-1c7r4z0"), s(Gl, "class", "svelte-1c7r4z0"), s(Wl, "class", "origin-title svelte-1c7r4z0"), s(Yl, "class", "btn-info svelte-1c7r4z0"), s(il, "class", "origin-header svelte-1c7r4z0"), s(Wt, "class", "lbl svelte-1c7r4z0"), s(Cl, "class", "val svelte-1c7r4z0"), s(hl, "class", "detail-box mechanic svelte-1c7r4z0"), s(Pl, "class", "lbl svelte-1c7r4z0"), s(Zl, "class", "traits-list svelte-1c7r4z0"), s(Ft, "class", "detail-box traits svelte-1c7r4z0"), s(Ql, "class", "origin-details svelte-1c7r4z0"), s(Nl, "class", "origin-display svelte-1c7r4z0"), s(el, "class", "add-btn svelte-1c7r4z0"), s(el, "title", "Adicionar Universo (Custa 8 Pontos)"), s(Ke, "class", "list-head svelte-1c7r4z0"), s(ta, "class", "list-content svelte-1c7r4z0"), s(Bt, "class", "cyber-list svelte-1c7r4z0"), s(xa, "class", "add-btn svelte-1c7r4z0"), s(Ca, "class", "list-head svelte-1c7r4z0"), s($a, "class", "list-content svelte-1c7r4z0"), s(Sa, "class", "cyber-list svelte-1c7r4z0"), s(zt, "class", "dual-lists svelte-1c7r4z0"), s(gi, "class", "box-label svelte-1c7r4z0"), Da.value = /*loreContent*/
      l[16], s(Da, "class", "svelte-1c7r4z0"), s(Ta, "class", "text-box full svelte-1c7r4z0"), s(_i, "class", "box-label svelte-1c7r4z0"), s(Na, "class", "short svelte-1c7r4z0"), Na.value = /*localPsyche*/
      l[15], s(Ma, "class", "text-box svelte-1c7r4z0"), s(ki, "class", "box-label svelte-1c7r4z0"), s(Pa, "class", "short svelte-1c7r4z0"), Pa.value = /*localAppearance*/
      l[14], s(La, "class", "text-box svelte-1c7r4z0"), s(Ra, "class", "split-text svelte-1c7r4z0"), s(Ia, "class", "text-areas svelte-1c7r4z0"), s(ei, "class", "svelte-1c7r4z0"), s(wi, "class", "footer-save svelte-1c7r4z0"), s(i, "class", "content-scroll svelte-1c7r4z0"), s(e, "class", "bio-terminal svelte-1c7r4z0"), ae(
        e,
        "--c-primary",
        /*themeColor*/
        l[22]
      );
    },
    m(lt, vt) {
      q(lt, e, vt), tl && tl.m(e, null), a(e, t), a(e, i), a(i, n), a(n, o), a(o, c), a(c, f), a(c, d), a(c, p), a(o, m), a(o, b), a(b, v), a(b, h), a(b, _), a(b, k), a(b, A), a(A, y), a(A, E), a(n, O), a(n, C), a(C, T), a(T, N), a(T, I), a(T, D), a(D, M), a(C, G), a(C, L), a(L, U), a(L, z), a(L, F), a(F, W), a(C, H), a(C, V), a(V, J), a(V, j), a(V, X), a(X, K), a(n, Z), a(n, le), a(le, $), a($, se), a($, Y), a(le, Q), a(le, ie), a(ie, ee), a(ie, pe), a(ie, Ee), a(Ee, we), a(i, ke), a(i, me), a(me, re), a(re, ye), a(ye, oe), a(ye, be), a(ye, de), a(de, Oe), a(Oe, _e), a(de, ue), a(de, Re), a(Re, Ce), a(de, He), a(de, Ge), a(Ge, Xe), a(de, fe), a(de, Le), a(Le, qe), a(re, Me), a(re, Se), a(Se, ve), a(ve, Ue), a(ve, Ve), a(ve, rt), a(ve, Tt), a(ve, ze), a(Se, it), a(Se, Ze), a(Ze, ut), a(Ze, Be), a(Ze, Pe), a(me, je), a(me, xe), a(xe, St), a(St, It), a(St, Dt), a(St, Ct), a(Ct, At), a(At, Et), a(Ct, Nt), a(Ct, ct), a(ct, Ie), a(Ct, tt), a(Ct, Ye), a(Ye, bt), a(xe, Jt), a(xe, Zt), a(Zt, Yt), a(Yt, xt), a(Yt, ca), a(Yt, rl), a(Yt, Rl), a(Yt, bl), a(Zt, Vl), a(Zt, vl), a(vl, Ml), a(vl, Ea), a(vl, Qt), a(i, fa), a(i, Nl), a(Nl, il), a(il, wt), a(wt, ea), a(il, Ka), a(il, Wl), a(Wl, da), a(Wl, Xl), a(Wl, Gl), a(Gl, Jl), a(il, Za), a(il, Yl), a(Nl, Oa), a(Nl, Ql), a(Ql, hl), a(hl, Wt), a(hl, Hl), a(hl, Cl), a(Cl, Ll), a(Ql, Kl), a(Ql, Ft), a(Ft, Pl), a(Ft, $t), a(Ft, Zl);
      for (let ft = 0; ft < cl.length; ft += 1)
        cl[ft] && cl[ft].m(Zl, null);
      a(i, gl), a(i, zt), a(zt, Bt), a(Bt, Ke), a(Ke, Ot), a(Ke, nt), a(Ke, el), a(Bt, hs), a(Bt, ta);
      for (let ft = 0; ft < jt.length; ft += 1)
        jt[ft] && jt[ft].m(ta, null);
      a(ta, Vi), wl && wl.m(ta, null), a(zt, gs), a(zt, Sa), a(Sa, Ca), a(Ca, Wi), a(Ca, _s), a(Ca, xa), a(Sa, ks), a(Sa, $a);
      for (let ft = 0; ft < Vt.length; ft += 1)
        Vt[ft] && Vt[ft].m($a, null);
      a(i, ws), a(i, Ia), a(Ia, Ta), a(Ta, gi), a(Ta, ys), a(Ta, Da), a(Ia, As), a(Ia, Ra), a(Ra, Ma), a(Ma, _i), a(Ma, Es), a(Ma, Na), a(Ra, Os), a(Ra, La), a(La, ki), a(La, Ss), a(La, Pa), a(i, Cs), a(i, wi), a(wi, ei), Ht = !0, Xi || (Is = [
        R(
          c,
          "click",
          /*editImg*/
          l[34]
        ),
        R(
          _,
          "change",
          /*change_handler*/
          l[49]
        ),
        R(
          A,
          "click",
          /*importPlayerXP*/
          l[23]
        ),
        R(
          Ue,
          "click",
          /*click_handler_3*/
          l[50]
        ),
        R(
          ze,
          "click",
          /*click_handler_4*/
          l[51]
        ),
        R(
          Pe,
          "change",
          /*change_handler_1*/
          l[52]
        ),
        R(
          xt,
          "click",
          /*click_handler_5*/
          l[53]
        ),
        R(
          bl,
          "click",
          /*click_handler_6*/
          l[54]
        ),
        R(
          Qt,
          "change",
          /*change_handler_2*/
          l[55]
        ),
        R(
          Yl,
          "click",
          /*click_handler_7*/
          l[56]
        ),
        R(
          hl,
          "click",
          /*click_handler_8*/
          l[57]
        ),
        R(
          el,
          "click",
          /*addUniverse*/
          l[26]
        ),
        R(
          xa,
          "click",
          /*addMotivation*/
          l[30]
        ),
        R(
          Da,
          "change",
          /*change_handler_7*/
          l[65]
        ),
        R(
          Na,
          "change",
          /*change_handler_8*/
          l[66]
        ),
        R(
          Pa,
          "change",
          /*change_handler_9*/
          l[67]
        ),
        R(
          ei,
          "click",
          /*saveBioText*/
          l[33]
        )
      ], Xi = !0);
    },
    p(lt, vt) {
      if (/*activePopup*/
      lt[12] ? tl ? (tl.p(lt, vt), vt[0] & /*activePopup*/
      4096 && ne(tl, 1)) : (tl = Ls(lt), tl.c(), ne(tl, 1), tl.m(e, t)) : tl && ($e(), Ae(tl, 1, 1, () => {
        tl = null;
      }), et()), (!Ht || vt[0] & /*actor*/
      1 && !at(f.src, u = /*actor*/
      lt[0].img)) && s(f, "src", u), (!Ht || vt[0] & /*actor*/
      1 && w !== (w = /*actor*/
      lt[0].name) && _.value !== w) && (_.value = w), (!Ht || vt[0] & /*isSyncing*/
      2048 && S !== (S = "sync-btn " + /*isSyncing*/
      (lt[11] ? "pulsing" : "") + " svelte-1c7r4z0")) && s(A, "class", S), (!Ht || vt[0] & /*totalPointsCap*/
      64) && te(
        M,
        /*totalPointsCap*/
        lt[6]
      ), (!Ht || vt[0] & /*spentPoints*/
      32) && te(
        W,
        /*spentPoints*/
        lt[5]
      ), (!Ht || vt[0] & /*availablePoints*/
      262144) && te(
        K,
        /*availablePoints*/
        lt[18]
      ), (!Ht || vt[0] & /*availablePoints*/
      262144) && ae(
        X,
        "color",
        /*availablePoints*/
        lt[18] < 0 ? "#ff3333" : "var(--c-primary)"
      ), (!Ht || vt[0] & /*strokeDashoffset*/
      524288) && s(
        Y,
        "stroke-dashoffset",
        /*strokeDashoffset*/
        lt[19]
      ), (!Ht || vt[0] & /*lvlInfo*/
      16) && De !== (De = /*lvlInfo*/
      lt[4].level + "") && te(we, De), (!Ht || vt[0] & /*statCharm*/
      1024) && te(
        _e,
        /*statCharm*/
        lt[10]
      ), (!Ht || vt[0] & /*statCommand*/
      512) && te(
        Ce,
        /*statCommand*/
        lt[9]
      ), (!Ht || vt[0] & /*boughtBaseWill*/
      8) && te(
        Xe,
        /*boughtBaseWill*/
        lt[3]
      ), (!Ht || vt[0] & /*maxBaseWill*/
      256) && te(
        qe,
        /*maxBaseWill*/
        lt[8]
      ), (!Ht || vt[0] & /*currBaseWill*/
      2097152 && Pe.value !== /*currBaseWill*/
      lt[21]) && (Pe.value = /*currBaseWill*/
      lt[21]), (!Ht || vt[0] & /*maxBaseWill*/
      256) && te(
        Et,
        /*maxBaseWill*/
        lt[8]
      ), (!Ht || vt[0] & /*boughtWillpower*/
      4) && te(
        Ie,
        /*boughtWillpower*/
        lt[2]
      ), (!Ht || vt[0] & /*maxWillpower*/
      128) && te(
        bt,
        /*maxWillpower*/
        lt[7]
      ), (!Ht || vt[0] & /*currWillpower*/
      1048576 && Qt.value !== /*currWillpower*/
      lt[20]) && (Qt.value = /*currWillpower*/
      lt[20]), (!Ht || vt[0] & /*originData*/
      8192) && Rt !== (Rt = /*originData*/
      lt[13].icon + "") && te(ea, Rt), (!Ht || vt[0] & /*originData*/
      8192) && ua !== (ua = /*originData*/
      lt[13].name.toUpperCase() + "") && te(Jl, ua), (!Ht || vt[0] & /*originData*/
      8192) && Il !== (Il = /*originData*/
      lt[13].mechanic.name + "") && te(Ll, Il), vt[0] & /*activePopup, originData*/
      12288) {
        qa = ce(
          /*originData*/
          lt[13].traits
        );
        let ft;
        for (ft = 0; ft < qa.length; ft += 1) {
          const la = Ns(lt, qa, ft);
          cl[ft] ? cl[ft].p(la, vt) : (cl[ft] = Ps(la), cl[ft].c(), cl[ft].m(Zl, null));
        }
        for (; ft < cl.length; ft += 1)
          cl[ft].d(1);
        cl.length = qa.length;
      }
      if (vt[0] & /*removeUniverse, originUniverses, updateUniverse, commitUniverse*/
      939524098) {
        pa = ce(
          /*originUniverses*/
          lt[1]
        );
        let ft;
        for (ft = 0; ft < pa.length; ft += 1) {
          const la = Ms(lt, pa, ft);
          jt[ft] ? (jt[ft].p(la, vt), ne(jt[ft], 1)) : (jt[ft] = qs(la), jt[ft].c(), ne(jt[ft], 1), jt[ft].m(ta, Vi));
        }
        for ($e(), ft = pa.length; ft < jt.length; ft += 1)
          j0(ft);
        et();
      }
      if (/*originUniverses*/
      lt[1].length === 0 ? wl || (wl = Us(), wl.c(), wl.m(ta, null)) : wl && (wl.d(1), wl = null), vt[0] & /*motivations*/
      131072 | vt[1] & /*removeMotivation, commitMotivation*/
      3) {
        ma = ce(
          /*motivations*/
          lt[17]
        );
        let ft;
        for (ft = 0; ft < ma.length; ft += 1) {
          const la = Rs(lt, ma, ft);
          Vt[ft] ? (Vt[ft].p(la, vt), ne(Vt[ft], 1)) : (Vt[ft] = Gs(la), Vt[ft].c(), ne(Vt[ft], 1), Vt[ft].m($a, null));
        }
        for ($e(), ft = ma.length; ft < Vt.length; ft += 1)
          V0(ft);
        et();
      }
      (!Ht || vt[0] & /*loreContent*/
      65536) && (Da.value = /*loreContent*/
      lt[16]), (!Ht || vt[0] & /*localPsyche*/
      32768) && (Na.value = /*localPsyche*/
      lt[15]), (!Ht || vt[0] & /*localAppearance*/
      16384) && (Pa.value = /*localAppearance*/
      lt[14]), (!Ht || vt[0] & /*themeColor*/
      4194304) && ae(
        e,
        "--c-primary",
        /*themeColor*/
        lt[22]
      );
    },
    i(lt) {
      if (!Ht) {
        ne(tl);
        for (let vt = 0; vt < pa.length; vt += 1)
          ne(jt[vt]);
        for (let vt = 0; vt < ma.length; vt += 1)
          ne(Vt[vt]);
        Ht = !0;
      }
    },
    o(lt) {
      Ae(tl), jt = jt.filter(Boolean);
      for (let vt = 0; vt < jt.length; vt += 1)
        Ae(jt[vt]);
      Vt = Vt.filter(Boolean);
      for (let vt = 0; vt < Vt.length; vt += 1)
        Ae(Vt[vt]);
      Ht = !1;
    },
    d(lt) {
      lt && P(e), tl && tl.d(), Fe(cl, lt), Fe(jt, lt), wl && wl.d(), Fe(Vt, lt), Xi = !1, Te(Is);
    }
  };
}
const fl = "multiversus-rpg", hm = 150;
function Hs(l) {
  return "‚òÖ".repeat(Math.min(5, Math.max(1, l))) + "‚òÜ".repeat(5 - Math.min(5, Math.max(1, l)));
}
function gm(l, e, t) {
  let i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, { actor: G } = e, { flags: L = {} } = e, { system: U = {} } = e, z, F = !1, W = null, H = {
    name: "Desconhecido",
    icon: "‚ùì",
    mechanic: { name: "N/A", desc: "" },
    traits: [],
    desc: "",
    powers: ""
  };
  async function V(ve, Ue) {
    ve === "bio_universes" && t(1, u = Ue), ve === "bio_motivations" && t(17, f = Ue), await G.update({ [`flags.${fl}.${ve}`]: Ue }, { render: !1 });
  }
  async function J() {
    var ve;
    t(11, F = !0);
    try {
      const Ue = game.user.id, Ve = await $l.getPlayerData(Ue), rt = (ve = game.users.get(Ue)) == null ? void 0 : ve.getFlag(fl, "origin"), Tt = {
        [`flags.${fl}.xp`]: Ve.earnedXP || 0,
        [`flags.${fl}.bio_group`]: Ve.group || "Sem Grupo"
      };
      rt && (Tt[`flags.${fl}.origin`] = rt), await G.update(Tt, { render: !1 }), t(38, S = Ve.earnedXP || 0), rt && await j(rt), ui.notifications.info(`Sincroniza√ß√£o: ${S} XP recebidos. Origem atualizada.`);
    } catch (Ue) {
      console.error(Ue), ui.notifications.warn("Falha ao sincronizar com o Database. Verifique se o GM est√° online.");
    }
    t(11, F = !1);
  }
  async function j(ve) {
    try {
      const Ue = await I0.load();
      t(13, H = Ue[ve] || Ue.humano || H);
    } catch (Ue) {
      console.warn("OriginDB Offline", Ue);
    }
  }
  function X(ve, Ue) {
    if (I < (ve === "bw" ? 3 : 1) && Ue > 0)
      return ui.notifications.warn("XP Insuficiente para aprimoramento.");
    if (ve === "bw") {
      const rt = Math.max(0, m + Ue);
      G.update(
        {
          [`flags.${fl}.boughtBaseWill`]: rt
        },
        { render: !1 }
      );
    } else {
      const rt = Math.max(0, b + Ue);
      G.update(
        {
          [`flags.${fl}.boughtWillpower`]: rt
        },
        { render: !1 }
      );
    }
  }
  function K(ve, Ue) {
    const Ve = parseInt(Ue) || 0;
    ve === "bw" ? G.update({ [`flags.${fl}.currBaseWill`]: Ve }, { render: !1 }) : G.update(
      {
        [`flags.${fl}.currWillpower`]: Ve
      },
      { render: !1 }
    );
  }
  function Z() {
    const ve = [...u, { universe: "", theme: "" }];
    ve.length > 1 && I < 8 && ui.notifications.warn("Aten√ß√£o: Custo de 8 XP pendente!"), V("bio_universes", ve);
  }
  function le(ve) {
    V("bio_universes", u.filter((Ue, Ve) => Ve !== ve));
  }
  function $(ve, Ue, Ve) {
    t(1, u[ve][Ue] = Ve, u);
  }
  function se() {
    V("bio_universes", u);
  }
  function Y() {
    V("bio_motivations", [...f, { text: "", stars: 1 }]);
  }
  function Q(ve) {
    V("bio_motivations", f.filter((Ue, Ve) => Ve !== ve));
  }
  function ie() {
    V("bio_motivations", f);
  }
  function ee() {
    G.update(
      {
        [`flags.${fl}.bio_lore`]: n,
        [`flags.${fl}.bio_psyche`]: o,
        [`flags.${fl}.bio_appearance`]: c
      },
      { render: !1 }
    ), ui.notifications.info("DADOS BIOGR√ÅFICOS GRAVADOS.");
  }
  qt(() => {
    const ve = L.origin || "humano";
    j(ve);
  });
  async function pe() {
    new FilePicker({
      type: "image",
      current: G.img,
      callback: (ve) => G.update({ img: ve }, { render: !1 })
    }).render(!0);
  }
  function Ee(ve) {
    Ol.call(this, l, ve);
  }
  function De(ve) {
    Ol.call(this, l, ve);
  }
  const we = () => t(12, W = null), ke = () => t(12, W = null), me = (ve) => G.update({ name: ve.target.value }, { render: !1 }), re = () => X("bw", -1), ye = () => X("bw", 1), oe = (ve) => K("bw", ve.target.value), be = () => X("wp", -1), de = () => X("wp", 1), Oe = (ve) => K("wp", ve.target.value), _e = () => t(12, W = {
    title: H.name,
    desc: H.desc + "<hr>" + H.powers
  }), ue = () => t(12, W = {
    title: H.mechanic.name,
    desc: H.mechanic.desc
  }), Re = (ve) => t(12, W = { title: ve.name, desc: ve.effect }), Ce = (ve, Ue) => {
    $(ve, "universe", Ue.target.value), se();
  }, He = (ve, Ue) => {
    $(ve, "theme", Ue.target.value), se();
  }, Ge = (ve) => le(ve), Xe = (ve, Ue) => {
    t(17, f[ve].text = Ue.target.value, f), ie();
  }, fe = (ve, Ue) => {
    t(17, f[ve].stars = parseInt(Ue.target.value), f), ie();
  }, Le = (ve) => Q(ve), qe = (ve) => {
    t(16, n = ve.target.value), ee();
  }, Me = (ve) => {
    t(15, o = ve.target.value), ee();
  }, Se = (ve) => {
    t(14, c = ve.target.value), ee();
  };
  return l.$$set = (ve) => {
    "actor" in ve && t(0, G = ve.actor), "flags" in ve && t(35, L = ve.flags), "system" in ve && t(36, U = ve.system);
  }, l.$$.update = () => {
    var ve, Ue, Ve, rt, Tt, ze, it, Ze;
    l.$$.dirty[1] & /*flags*/
    16 && t(22, i = L.customColor || "#00ff41"), l.$$.dirty[1] & /*flags*/
    16 && t(16, n = L.bio_lore || ""), l.$$.dirty[1] & /*flags*/
    16 && t(15, o = L.bio_psyche || ""), l.$$.dirty[1] & /*flags*/
    16 && t(14, c = L.bio_appearance || ""), l.$$.dirty[1] & /*flags*/
    16 && t(17, f = L.bio_motivations || [{ text: "", stars: 1 }]), l.$$.dirty[1] & /*flags*/
    16 && t(1, u = L.bio_universes || [{ universe: "", theme: "" }]), l.$$.dirty[1] & /*system*/
    32 && t(10, d = Number(((Ue = (ve = U.stats) == null ? void 0 : ve.charm) == null ? void 0 : Ue.value) || ((rt = (Ve = U.attributes) == null ? void 0 : Ve.charm) == null ? void 0 : rt.value) || 0)), l.$$.dirty[1] & /*system*/
    32 && t(9, p = Number(((ze = (Tt = U.stats) == null ? void 0 : Tt.command) == null ? void 0 : ze.value) || ((Ze = (it = U.attributes) == null ? void 0 : it.command) == null ? void 0 : Ze.value) || 0)), l.$$.dirty[1] & /*flags*/
    16 && t(3, m = L.boughtBaseWill || 0), l.$$.dirty[1] & /*flags*/
    16 && t(2, b = L.boughtWillpower || 0), l.$$.dirty[0] & /*statCharm, statCommand, boughtBaseWill*/
    1544 && t(8, v = d + p + m), l.$$.dirty[0] & /*maxBaseWill, boughtWillpower*/
    260 && t(7, h = v + b), l.$$.dirty[0] & /*maxBaseWill*/
    256 | l.$$.dirty[1] & /*flags*/
    16 && t(21, _ = L.currBaseWill !== void 0 ? L.currBaseWill : v), l.$$.dirty[0] & /*maxWillpower*/
    128 | l.$$.dirty[1] & /*flags*/
    16 && t(20, w = L.currWillpower !== void 0 ? L.currWillpower : h), l.$$.dirty[0] & /*boughtBaseWill*/
    8 && t(44, k = m * 3), l.$$.dirty[0] & /*boughtWillpower*/
    4 && t(43, A = b * 1), l.$$.dirty[1] & /*costBaseWill, costWillpower*/
    12288 && t(39, y = k + A), l.$$.dirty[0] & /*originUniverses*/
    2 && t(40, E = Math.max(0, u.length - 1) * 8), l.$$.dirty[1] & /*flags*/
    16 && t(38, S = L.xp || 0), l.$$.dirty[1] & /*currentXP*/
    128 && t(6, O = hm + S), l.$$.dirty[1] & /*flags*/
    16 && t(42, C = L.statsCost || 0), l.$$.dirty[1] & /*flags*/
    16 && t(41, T = L.powersSpent || 0), l.$$.dirty[1] & /*statsCost, powersCost, universeCost, totalWillCost*/
    3840 && t(5, N = C + T + E + y), l.$$.dirty[0] & /*totalPointsCap, spentPoints*/
    96 && t(18, I = O - N), l.$$.dirty[0] & /*actor, spentPoints*/
    33 | l.$$.dirty[1] & /*saveTimeout, universeCost, totalWillCost*/
    832 && (z && clearTimeout(z), t(37, z = setTimeout(
      () => {
        G.update(
          {
            [`flags.${fl}.bioSpent`]: E,
            [`flags.${fl}.willSpent`]: y,
            [`flags.${fl}.totalSpent`]: N
          },
          { render: !1 }
        );
      },
      1e3
    ))), l.$$.dirty[1] & /*currentXP*/
    128 && t(4, D = C0.getLevelInfo(S)), l.$$.dirty[0] & /*lvlInfo*/
    16 && t(19, M = 283 - 283 * D.progress / 100);
  }, [
    G,
    u,
    b,
    m,
    D,
    N,
    O,
    h,
    v,
    p,
    d,
    F,
    W,
    H,
    c,
    o,
    n,
    f,
    I,
    M,
    w,
    _,
    i,
    J,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    L,
    U,
    z,
    S,
    y,
    E,
    T,
    C,
    A,
    k,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re,
    Ce,
    He,
    Ge,
    Xe,
    fe,
    Le,
    qe,
    Me,
    Se
  ];
}
class _m extends mt {
  constructor(e) {
    super(), pt(this, e, gm, vm, dt, { actor: 0, flags: 35, system: 36 }, null, [-1, -1, -1]);
  }
}
const sa = {
  terminal: {
    label: "TERMINAL_OS",
    class: "theme-terminal",
    soundPreset: "retro-beep",
    layout: "desktop",
    // Layout de √≠cones
    effects: ["scanlines", "vignette", "glitch"],
    vars: {
      "--c-primary": "#00ff41",
      "--font-main": "'Share Tech Mono', monospace",
      "--clip-path": "polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%)"
    }
  },
  chamas: {
    label: "PROTOCOLO_INFERNO",
    class: "theme-chamas",
    desc: "SISTEMA EM SOBREAQUECIMENTO. CRIPTOGRAFIA POR FUS√ÉO.",
    vars: {
      "--c-primary": "#ff4d00",
      // Laranja Incandescente
      "--c-secondary": "#ffcc00",
      // Brasa Viva
      "--c-bg": "#0a0500",
      // Preto Carbonizado
      "--c-text": "#ffd2b3",
      // Cinza P√™ssego
      "--font-head": "'Syncopate', sans-serif",
      "--font-body": "'Share Tech Mono', monospace",
      "--f-clip": "polygon(0 15px, 15px 0, 85% 0, 100% 15px, 100% 85%, 85% 100%, 15% 100%, 0 85%)",
      "--f-border": "2px solid #ff4d00",
      "--f-shadow": "0 0 30px rgba(255, 77, 0, 0.4), inset 0 0 50px rgba(0,0,0,0.9)"
    },
    extraCSS: `
        /* 1. MOTOR DE BRASAS (Cinzas em suspens√£o) */
        .theme-chamas .inner-terminal-screen::before {
            content: ""; position: absolute; inset: 0;
            background-image: 
                radial-gradient(circle, #ffcc00 1px, transparent 1px),
                radial-gradient(circle, #ff4d00 1.5px, transparent 1.5px);
            background-size: 80px 80px, 120px 120px;
            opacity: 0.2; z-index: 1; pointer-events: none;
            animation: embers-drift 12s linear infinite;
        }

        /* 2. LOGIN INFERNAL (Efeito de Derretimento e Fogo) */
        .theme-chamas .login-layer {
            background: #000 !important;
            overflow: hidden;
            perspective: 1000px;
        }

        /* Efeito de Ar Quente (Derretendo o fundo) */
        .theme-chamas .login-layer::before {
            content: ""; position: absolute; inset: -10%;
            background: radial-gradient(circle, #330a00 0%, #050505 100%);
            animation: heat-melt-bg 6s ease-in-out infinite alternate;
            opacity: 0.8; z-index: 0;
        }

        /* Bio-Scanner se Incendiando */
        .theme-chamas .bio-scanner {
            border: 4px solid #ff4d00 !important;
            box-shadow: 0 0 20px #ff4d00, 0 0 40px #990000, inset 0 0 30px #ff4d00 !important;
            animation: scanner-burn 0.6s infinite alternate !important;
            z-index: 2;
        }
        .theme-chamas .bio-img {
            filter: sepia(1) saturate(5) hue-rotate(-15deg) brightness(1.2);
            animation: img-flicker 0.1s infinite;
        }

        /* Letras e Blocos de Fogo (Brasa ao digitar) */
        .theme-chamas .digit-box {
            background: rgba(30, 10, 0, 0.8) !important;
            border: 2px solid #ff4d0033 !important;
            transition: 0.3s;
        }
        .theme-chamas .digit-box.filled {
            border-color: #ffcc00 !important;
            background: #ff4d00 !important;
            color: #fff !important;
            box-shadow: 0 0 25px #ff4d00, 0 -5px 15px #ffcc00 !important;
            text-shadow: 0 0 8px #fff, 0 -2px 10px #ffcc00 !important;
            transform: scale(1.15) translateY(-5px);
        }

        /* Mensagem de Login (Texto de Fogo) */
        .theme-chamas .login-msg {
            color: #ffcc00 !important;
            text-shadow: 0 0 10px #ff4d00, 0 0 20px #990000 !important;
            letter-spacing: 5px;
            animation: text-vibration 0.1s infinite;
        }

        /* 3. DESKTOP E INTERFACE (Estilo Hexagonal e Vidro) */
        .theme-chamas .wallpaper-layer {
            transform: translateZ(0); will-change: opacity;
            filter: contrast(1.2) brightness(0.5) sepia(0.2) !important;
        }
        .theme-chamas .icon-frame {
            border-color: #ff4d00 !important;
            background: rgba(40, 10, 0, 0.4) !important;
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%) !important;
        }
        .theme-chamas .icon-btn:hover .icon-frame {
            background: #ff4d00 !important;
            box-shadow: 0 0 30px #ff4d00, 0 0 10px #ffcc00 !important;
            color: #000 !important;
        }

        /* 4. EXTENS√ÉO COMBATE (Esp√≠rito do Hashira Rengoku) */
        .theme-chamas .orb-container {
            border-color: #ffcc00 !important;
            box-shadow: 0 0 20px #ff4d00, inset 0 0 20px #ff4d00 !important;
            background: radial-gradient(circle, #441100 0%, #000 100%) !important;
        }
        .theme-chamas .orb-liquid {
            background: linear-gradient(0deg, #990000 0%, #ff4d00 50%, #ffcc00 100%) !important;
            box-shadow: 0 0 30px #ff4d00 !important;
        }
        .theme-chamas .limb-row {
            border-left: 4px solid #990000 !important;
            background: linear-gradient(90deg, rgba(40,10,0,0.6) 0%, rgba(0,0,0,0.8) 100%) !important;
        }
        .theme-chamas .limb-row.selected {
            border-left: 6px solid #ffcc00 !important;
            box-shadow: -10px 0 20px rgba(255, 77, 0, 0.3) !important;
            transform: translateX(8px);
        }
        .theme-chamas .h-green { 
            color: #ffcc00 !important; 
            filter: drop-shadow(0 0 5px #ff4d00) !important;
            animation: rengoku-flicker 0.8s infinite alternate;
        }

        /* 5. MOTOR DE ANIMA√á√ïES */
        @keyframes heat-melt-bg {
            0% { transform: scale(1) rotate(0deg); filter: blur(4px); }
            100% { transform: scale(1.1) rotate(1deg); filter: blur(12px); }
        }
        @keyframes scanner-burn {
            from { box-shadow: 0 0 20px #ff4d00; border-color: #ff4d00; }
            to { box-shadow: 0 0 60px #ffcc00, 0 0 100px #ff4d00; border-color: #fff; }
        }
        @keyframes text-vibration {
            0% { transform: translate(0,0); }
            50% { transform: translate(1px, -1px); text-shadow: 2px 0 #ff4d00, -2px 0 #ffcc00; }
            100% { transform: translate(0,0); }
        }
        @keyframes embers-drift {
            from { background-position: 0 0; }
            to { background-position: -100px -600px; }
        }
        @keyframes rengoku-flicker {
            from { transform: scale(1); filter: brightness(1); }
            to { transform: scale(1.25); filter: brightness(1.6) drop-shadow(0 0 8px #ffcc00); }
        }
        @keyframes img-flicker {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.85; }
        }
            /* --- EXTENS√ÉO PERFIL: FORJA DE OBSIDIANA --- */

        /* 1. RETRATO E IDENTIDADE */
        .theme-chamas .portrait-frame {
            border: 2px solid #ffcc00 !important;
            box-shadow: 0 0 15px #ff4d00, inset 0 0 10px #ff4d00 !important;
            overflow: visible !important;
        }
        .theme-chamas .portrait-frame::after {
            content: ""; position: absolute; inset: -5px;
            border: 1px solid #ff4d00; opacity: 0.5;
            animation: pulse-border 2s infinite alternate;
        }
        .theme-chamas .input-name {
            color: #fff !important;
            text-shadow: 0 0 10px #ff4d00, 0 0 5px #ffcc00 !important;
            border-bottom-color: #ff4d00 !important;
        }

        /* 2. PAIN√âIS E M√ìDULOS (Estilo Vidro Vulc√¢nico) */
        .theme-chamas .cyber-panel, .theme-chamas .cyber-list {
            background: rgba(15, 5, 0, 0.9) !important;
            border-color: #331100 !important;
            box-shadow: inset 0 0 20px rgba(255, 77, 0, 0.1) !important;
        }
        .theme-chamas .panel-head, .theme-chamas .cyber-list header {
            background: linear-gradient(90deg, #441100 0%, #000 100%) !important;
            color: #ffcc00 !important;
            border-bottom-color: #ff4d00 !important;
        }

        /* 3. CAMPOS DE TEXTO (Brasa e Cinzas) */
        .theme-chamas textarea {
            background: rgba(10, 5, 0, 0.5) !important;
            color: #ffd2b3 !important;
            border: 1px solid #331100 !important;
            transition: 0.3s;
        }
        .theme-chamas textarea:focus {
            border-color: #ff4d00 !important;
            background: rgba(40, 10, 0, 0.3) !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.2) !important;
        }
        .theme-chamas .label-tab {
            background: #ff4d00 !important;
            color: #000 !important;
            font-weight: bold !important;
            border-right-color: #ffcc00 !important;
        }

        /* 4. ELEMENTOS DE LISTA (Nichirin Style) */
        .theme-chamas .list-item {
            border-left: 3px solid #990000 !important;
            background: rgba(255, 77, 0, 0.05) !important;
        }
        .theme-chamas .list-item:hover {
            border-left-color: #ffcc00 !important;
            background: rgba(255, 77, 0, 0.1) !important;
        }
        .theme-chamas .list-item input:focus {
            border-bottom-color: #ffcc00 !important;
            text-shadow: 0 0 5px #ffcc00 !important;
        }

        /* 5. MONITOR DE RECURSOS */
        .theme-chamas .resource-monitor {
            background: #000 !important;
            border-left: 4px solid #ff4d00 !important;
            box-shadow: -5px 0 15px rgba(255, 77, 0, 0.2) !important;
        }
        .theme-chamas .res-row.highlight .val.big {
            color: #fff !important;
            text-shadow: 0 0 10px #ffcc00, 0 0 20px #ff4d00 !important;
        }

        /* 6. BOT√ÉO DE SALVAMENTO PRINCIPAL (Chama em Fluxo) */
        .theme-chamas .btn-save-main {
            background: linear-gradient(90deg, #990000, #ff4d00, #ffcc00, #ff4d00, #990000) !important;
            background-size: 300% 100% !important;
            animation: fire-flow-save 4s linear infinite !important;
            color: #000 !important;
            border: none !important;
            font-size: 1.2em !important;
        }

        /* ANIMA√á√ïES EXCLUSIVAS PERFIL */
        @keyframes fire-flow-save {
            0% { background-position: 0% 50%; }
            100% { background-position: 150% 50%; }
        }
        @keyframes pulse-border {
            from { transform: scale(1); opacity: 0.3; }
            to { transform: scale(1.05); opacity: 0.7; }
        }

        /* --- EXTENS√ÉO ATRIBUTOS: FORJA DO HASHIRA --- */

        /* 1. HUD DE XP (Fornalha de Progress√£o) */
        .theme-chamas .xp-header {
            border: 2px solid #ff4d00 !important;
            background: linear-gradient(135deg, #1a0500 0%, #000 100%) !important;
            box-shadow: 0 0 20px rgba(255, 77, 0, 0.3), inset 0 0 15px rgba(255, 77, 0, 0.1) !important;
        }
        .theme-chamas .xp-fill {
            background: linear-gradient(90deg, #990000, #ff4d00, #ffcc00) !important;
            box-shadow: 0 0 15px #ff4d00 !important;
        }
        .theme-chamas .val.highlight {
            color: #fff !important;
            text-shadow: 0 0 10px #ffcc00, 0 0 20px #ff4d00 !important;
        }

        /* 2. BLOCOS DE ATRIBUTO (Obsidiana e Brasa) */
        .theme-chamas .stat-block {
            background: rgba(15, 5, 0, 0.7) !important;
            border-color: #331100 !important;
            transition: 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .theme-chamas .stat-block.open {
            border-color: #ff4d00 !important;
            box-shadow: 0 0 25px rgba(255, 77, 0, 0.2) !important;
            background: rgba(10, 5, 0, 0.95) !important;
        }
        .theme-chamas .stat-head {
            background: linear-gradient(90deg, rgba(153, 0, 0, 0.2) 0%, transparent 100%) !important;
        }
        .theme-chamas .open .label {
            color: #fff !important;
            text-shadow: 0 0 10px #ff4d00 !important;
        }

        /* 3. DADOS (Molten Metal Look) */
        .theme-chamas .die-group {
            background: #0a0500 !important;
            border-color: #441100 !important;
            color: #ffd2b3 !important;
        }
        .theme-chamas .die-group.hard.active {
            border-color: #ffcc00 !important;
            color: #ffcc00 !important;
            box-shadow: 0 0 15px rgba(255, 204, 0, 0.4) !important;
            text-shadow: 0 0 5px #fff !important;
        }
        .theme-chamas .die-group.wiggle.active {
            border-color: #ff4d00 !important;
            color: #fff !important;
            background: #990000 !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.6) !important;
        }

        /* 4. PER√çCIAS (L√¢minas de Nichirin) */
        .theme-chamas .skill-card {
            background: rgba(40, 10, 0, 0.3) !important;
            border-left: 3px solid #990000 !important;
            border-radius: 0 4px 4px 0 !important;
        }
        .theme-chamas .skill-card:hover {
            background: rgba(255, 77, 0, 0.1) !important;
            border-left-color: #ffcc00 !important;
            transform: translateX(5px);
        }
        .theme-chamas .skill-name {
            color: #fff !important;
            text-shadow: 0 0 5px rgba(255, 77, 0, 0.5) !important;
        }

        /* 5. BOT√ïES DE UPGRADE (Explos√£o Solar) */
        .theme-chamas .btn-up {
            border-color: #ff4d00 !important;
            background: rgba(153, 0, 0, 0.2) !important;
        }
        .theme-chamas .btn-up:hover {
            background: #ffcc00 !important;
            box-shadow: 0 0 15px #ffcc00 !important;
        }
        .theme-chamas .btn-up::after {
            color: #ffcc00 !important;
        }
        .theme-chamas .btn-up:hover::after {
            color: #000 !important;
        }

        /* 6. BOT√ÉO DE COMPRA (Calor Intenso) */
        .theme-chamas .btn-buy {
            background: linear-gradient(180deg, rgba(255, 77, 0, 0.1), rgba(255, 204, 0, 0.2)) !important;
            border-top: 1px solid #ff4d00 !important;
            color: #ffcc00 !important;
        }
        .theme-chamas .btn-buy:hover {
            background: #ff4d00 !important;
            color: #000 !important;
            box-shadow: 0 -5px 15px rgba(255, 77, 0, 0.4) !important;
        }

        /* 7. ADICIONAR PER√çCIA (Fuma√ßa e Cinzas) */
        .theme-chamas .btn-add-skill {
            border: 1px dashed #ff4d00 !important;
            color: #ff4d00 !important;
            background: rgba(0,0,0,0.3) !important;
        }
        .theme-chamas .btn-add-skill:hover {
            background: rgba(255, 77, 0, 0.15) !important;
            box-shadow: 0 0 10px rgba(255, 77, 0, 0.2) !important;
            text-shadow: 0 0 5px #ff4d00 !important;
        }

        /* --- EXTENS√ÉO INVENT√ÅRIO: ARSENAL DA FORJA --- */

        /* 1. HEADER E BARRA DE CAPACIDADE (Medidor de Press√£o T√©rmica) */
        .theme-chamas .inv-header {
            background: linear-gradient(90deg, #1a0500 0%, #000 100%) !important;
            border-left: 4px solid #ff4d00 !important;
            border-color: #331100 !important;
            box-shadow: 0 5px 15px rgba(0,0,0,0.5) !important;
        }
        .theme-chamas .cap-bar-bg {
            background: #050505 !important;
            border-color: #441100 !important;
        }
        .theme-chamas .cap-bar-fill {
            background: linear-gradient(90deg, #990000, #ff4d00, #ffcc00) !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.6) !important;
        }
        .theme-chamas .val {
            color: #ffcc00 !important;
            text-shadow: 0 0 10px #ff4d00 !important;
        }

        /* 2. TOOLBAR (Bot√µes de Comando) */
        .theme-chamas .btn-tool {
            background: rgba(40, 10, 0, 0.4) !important;
            border-color: #ff4d00 !important;
            color: #ffd2b3 !important;
        }
        .theme-chamas .btn-tool:hover {
            background: #ff4d00 !important;
            color: #000 !important;
            box-shadow: 0 0 15px #ff4d00 !important;
        }
        .theme-chamas .btn-tool.create {
            background: linear-gradient(135deg, #ff4d00, #ffcc00) !important;
            color: #000 !important;
            border: none !important;
        }

        /* 3. GRID E SLOTS VAZIOS (Brasas em Repouso) */
        .theme-chamas .empty-slot {
            background: rgba(15, 5, 0, 0.6) !important;
            border: 1px dashed #441100 !important;
            transition: 0.3s;
        }
        .theme-chamas .empty-slot:hover {
            border-color: #ff4d00 !important;
            background: rgba(255, 77, 0, 0.05) !important;
        }
        .theme-chamas .null-text {
            color: #331100 !important;
            text-shadow: none !important;
            font-weight: bold !important;
        }
        .theme-chamas .empty-slot:hover .null-text {
            color: #ff4d00 !important;
            text-shadow: 0 0 5px #ff4d00 !important;
        }

        /* 4. MODAL DE DETALHES E CRIA√á√ÉO (Cofre de Obsidiana) */
        .theme-chamas .modal-box {
            background: #050505 !important;
            border: 2px solid #ff4d00 !important;
            box-shadow: 0 0 50px #000, 0 0 20px rgba(255, 77, 0, 0.3) !important;
        }
        .theme-chamas .modal-header, .theme-chamas .big-header {
            background: linear-gradient(90deg, #441100 0%, #000 100%) !important;
            color: #ffcc00 !important;
            border-bottom: 1px solid #ff4d00 !important;
            text-shadow: 0 0 10px #ff4d00 !important;
        }

        /* 5. INPUTS E CAMPOS DENTRO DO MODAL */
        .theme-chamas .input-glow {
            background: #000 !important;
            border-color: #331100 !important;
            color: #ffd2b3 !important;
        }
        .theme-chamas .input-glow:focus {
            border-color: #ffcc00 !important;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.2) !important;
        }
        .theme-chamas .big-title {
            color: #fff !important;
            text-shadow: 0 0 15px #ff4d00 !important;
        }

        /* 6. TAGS DE RARIDADE (Temperas de Metal) */
        .theme-chamas .meta-tag { background: #111 !important; border-color: #333 !important; }
        .theme-chamas .meta-tag.r-comum { color: #888 !important; }
        .theme-chamas .meta-tag.r-raro { color: #00bfff !important; border-color: #00bfff !important; box-shadow: 0 0 5px #00bfff; }
        .theme-chamas .meta-tag.r-lend√°rio { 
            color: #ffcc00 !important; 
            border-color: #ffcc00 !important; 
            box-shadow: 0 0 10px #ffcc00;
            animation: item-glow 1.5s infinite alternate;
        }

        /* 7. BOT√ïES DE A√á√ÉO DO MODAL */
        .theme-chamas .btn-confirm {
            background: linear-gradient(90deg, #ff4d00, #ffcc00) !important;
            color: #000 !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.4) !important;
        }
        .theme-chamas .btn-confirm:hover {
            transform: scale(1.02);
            filter: brightness(1.2);
        }

        /* ANIMA√á√ïES EXCLUSIVAS INVENT√ÅRIO */
        @keyframes item-glow {
            from { opacity: 0.8; filter: brightness(1); }
            to { opacity: 1; filter: brightness(1.5); }
        }

        /* --- EXTENS√ÉO PODERES: MANIFESTO DAS CHAMAS --- */

        /* 1. HUD DE PODERES (Medidor de Energia T√©rmica) */
        .theme-chamas .hud-module {
            background: rgba(15, 5, 0, 0.8) !important;
            border-color: #331100 !important;
            box-shadow: inset 0 0 15px rgba(255, 77, 0, 0.1) !important;
        }
        .theme-chamas .hud-module.main {
            border-left: 4px solid #ff4d00 !important;
        }
        .theme-chamas .hud-value.xp {
            color: #ffcc00 !important;
            text-shadow: 0 0 15px #ff4d00, 0 0 5px #fff !important;
        }
        .theme-chamas .hud-bar-bg {
            background: #000 !important;
            border: 1px solid #331100 !important;
        }
        .theme-chamas .hud-bar-fill {
            background: linear-gradient(90deg, #990000, #ff4d00, #ffcc00) !important;
            box-shadow: 0 0 15px #ff4d00 !important;
        }

        /* 2. TOOLBAR E BUSCA (Comando Incandescente) */
        .theme-chamas .search-box {
            background: rgba(10, 5, 0, 0.6) !important;
            border-color: #331100 !important;
        }
        .theme-chamas .search-box:focus-within {
            border-color: #ff4d00 !important;
            box-shadow: 0 0 15px rgba(255, 77, 0, 0.2) !important;
        }
        .theme-chamas .prompt {
            color: #ffcc00 !important;
            text-shadow: 0 0 5px #ff4d00 !important;
        }
        .theme-chamas .btn-db {
            background: linear-gradient(135deg, #441100 0%, #000 100%) !important;
            border-color: #ff4d00 !important;
            color: #ff4d00 !important;
        }
        .theme-chamas .btn-db:hover {
            background: #ff4d00 !important;
            color: #000 !important;
            box-shadow: 0 0 20px #ff4d00 !important;
        }

        /* 3. LISTA DE PODERES (Pergaminhos de Cinza) */
        .theme-chamas .list-container {
            border-top: 1px solid #331100 !important;
            border-bottom: 1px solid #331100 !important;
        }
        .theme-chamas .list-container::-webkit-scrollbar-thumb {
            background: linear-gradient(to bottom, #ff4d00, #ffcc00) !important;
        }

        /* 4. EMPTY STATE (Brasas Apagadas) */
        .theme-chamas .empty-state {
            background: rgba(15, 5, 0, 0.4) !important;
            border: 1px dashed #441100 !important;
        }
        .theme-chamas .glitch-wrapper {
            color: #ff4d00 !important;
            text-shadow: 2px 2px #000, 0 0 20px #990000 !important;
            animation: fire-glitch 3s infinite !important;
        }
        .theme-chamas .empty-title {
            color: #ffcc00 !important;
            text-shadow: 0 0 5px #ff4d00 !important;
        }

        /* 5. FOOTER (Metadados T√©rmicos) */
        .theme-chamas .term-footer {
            color: #662200 !important;
            text-shadow: 0 0 2px #000 !important;
        }

        /* ANIMA√á√ïES EXCLUSIVAS DE PODERES */
        @keyframes fire-glitch {
            0% { transform: translate(0); filter: hue-rotate(0deg); }
            10% { transform: translate(-2px, 2px); filter: brightness(1.5); }
            20% { transform: translate(2px, -2px); text-shadow: 2px 0 #fff, -2px 0 #ff4d00; }
            30% { transform: translate(0); filter: hue-rotate(15deg); }
            100% { transform: translate(0); }
        }

        /* --- EXTENS√ÉO SOBREVIV√äNCIA: FORNALHA BIOM√âTRICA --- */

        /* 1. HEADER E CICLO (Sol de Kyojuro) */
        .theme-chamas .session-mini {
            background: rgba(40, 10, 0, 0.6) !important;
            border-color: #ff4d00 !important;
            box-shadow: inset 0 0 10px rgba(255, 77, 0, 0.2) !important;
        }
        .theme-chamas .cycle-icon {
            color: #ffcc00 !important;
            filter: drop-shadow(0 0 8px #ff4d00) !important;
            animation: sun-pulse 2s infinite alternate;
        }
        .theme-chamas .dot.filled {
            background: #ffcc00 !important;
            box-shadow: 0 0 10px #ff4d00, 0 0 5px #fff !important;
            border-color: #fff !important;
        }

        /* 2. BARRAS DE STATUS (N√≠veis de Incandesc√™ncia) */
        .theme-chamas .bio-col {
            background: rgba(15, 5, 0, 0.8) !important;
            border-color: #331100 !important;
        }
        .theme-chamas .bar-track {
            background: #000 !important;
            border: 1px solid #220a00 !important;
        }
        /* Gradientes de Fogo para todas as barras */
        .theme-chamas .bar-fill.red, 
        .theme-chamas .bar-fill.blue, 
        .theme-chamas .bar-fill.purple, 
        .theme-chamas .bar-fill.yellow {
            background: linear-gradient(90deg, #990000, #ff4d00, #ffcc00) !important;
            box-shadow: 0 0 10px #ff4d00 !important;
        }
        .theme-chamas .stat-header .crit {
            color: #fff !important;
            text-shadow: 0 0 10px #ff0000, 0 0 20px #ff4d00 !important;
        }

        /* 3. BOT√ïES DE CONSUMO E DESCANSO (Forja do Hashira) */
        .theme-chamas .btn-consume {
            background: #441100 !important;
            border-color: #ff4d00 !important;
            color: #ffcc00 !important;
        }
        .theme-chamas .btn-consume:hover {
            background: #ff4d00 !important;
            color: #000 !important;
            box-shadow: 0 0 15px #ff4d00 !important;
        }
        .theme-chamas .btn-rest:hover { border-color: #ffcc00 !important; color: #ffcc00 !important; }
        .theme-chamas .btn-sleep:hover { border-color: #ff4d00 !important; color: #ff4d00 !important; }

        /* 4. DISCIPLINAS E PER√çCIAS (L√¢minas Nichirin) */
        .theme-chamas .disc-row {
            border-left: 3px solid #990000 !important;
            background: rgba(40, 10, 0, 0.3) !important;
            transition: 0.2s;
        }
        .theme-chamas .disc-row:hover {
            border-left-color: #ffcc00 !important;
            background: rgba(255, 77, 0, 0.1) !important;
        }
        .theme-chamas .gm-adjust.plus {
            color: #ffcc00 !important;
            border-color: #ffcc00 !important;
        }

        /* 5. GRADE DE INVENT√ÅRIO (Grelha de Forja) */
        .theme-chamas .inv-slot {
            background: #000 !important;
            border-color: #220a00 !important;
        }
        .theme-chamas .inv-slot.has-item {
            background: #331100 !important;
            border-color: #ff4d00 !important;
            color: #ffcc00 !important;
            box-shadow: inset 0 0 10px rgba(255, 77, 0, 0.2) !important;
        }
        .theme-chamas .inv-slot:hover {
            border-color: #ffcc00 !important;
            box-shadow: 0 0 10px rgba(255, 204, 0, 0.3) !important;
        }

        /* 6. MODAIS E HELP TOOLTIP (Pergaminhos de Fogo) */
        .theme-chamas .help-tip {
            background: #441100 !important;
            border-color: #ff4d00 !important;
            color: #ffcc00 !important;
        }
        .theme-chamas .tip-content {
            background: #0a0500 !important;
            border: 2px solid #ff4d00 !important;
            box-shadow: 0 0 25px #000 !important;
        }
        .theme-chamas .modal-window {
            border-color: #ffcc00 !important;
            background: #050505 !important;
        }
        .theme-chamas .modal-header {
            background: #441100 !important;
            border-bottom: 2px solid #ff4d00 !important;
            color: #ffcc00 !important;
        }

        /* ANIMA√á√ïES EXCLUSIVAS SOBREVIV√äNCIA */
        @keyframes sun-pulse {
            from { transform: scale(1); filter: brightness(1) drop-shadow(0 0 5px #ff4d00); }
            to { transform: scale(1.2); filter: brightness(1.4) drop-shadow(0 0 15px #ffcc00); }
        }
    .theme-chamas button, 
    .theme-chamas .icon-btn,
    .theme-chamas [cursor="pointer"] {
        /* Vers√£o da espada com brilho mais intenso para √°reas clic√°veis */
        cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="%23ffffff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M14.5 4.5l-10 10a2 2 0 0 0 0 2.83L6 18.83a2 2 0 0 0 2.83 0l10-10-4.33-4.33z" fill="%2300e5ff"/><path d="M11.5 7.5L16 3l3 3-4.5 4.5"/><path d="M2 22l3-3"/></svg>') 0 0, pointer !important;
    }

/* --- ANIMA√á√ÉO: √çCONES EM CHAMAS (Corrigido) --- */
    .theme-chamas .icon-btn {
        position: relative !important;
        overflow: visible !important; /* Garante que o fogo n√£o seja cortado */
        background: transparent !important;
        z-index: 10; /* Eleva o bot√£o para frente de tudo */
    }

    .theme-chamas .icon-btn::before {
        content: "";
        position: absolute;
        width: 180%; height: 180%;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%) scale(0.5);
        
        /* Link do GIF de fogo intenso */
        background-image: url('modules/JB2A_DnD5e/Library/3rd_Level/Fireball/FireballLoop_01_Orange_800x800.webm');
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        
        /* O REM√âDIO: Mix-blend-mode precisa de um fundo escuro para brilhar */
        mix-blend-mode: screen !important;
        opacity: 0;
        pointer-events: none;
        z-index: -1; /* Fica logo atr√°s do √≠cone, mas ainda dentro do bot√£o */
        transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    }

    /* Gatilho de Hover */
    .theme-chamas .icon-btn:hover::before {
        opacity: 1 !important;
        transform: translate(-50%, -50%) scale(1.2);
        filter: brightness(1.5) contrast(1.2); /* For√ßa o brilho das chamas */
    }

    /* Brilho no √≠cone central para n√£o ser "comido" pelo fogo */
    .theme-chamas .icon-btn:hover i {
        color: #fff !important;
        text-shadow: 0 0 15px #ff4d00, 0 0 30px #fff !important;
        transition: 0.3s;
    }
        
    `
  },
  blue_magic: {
    label: "PROTOCOLO_BLUE_MAGIC",
    class: "theme-blue-magic",
    desc: "SINTONIA R√öNICA ESTABELECIDA. AGUARDANDO FLUXO DE MANA.",
    vars: {
      "--c-primary": "#00e5ff",
      // Azul Cyan El√©trico
      "--c-secondary": "#0044ff",
      // Azul Real Profundo
      "--c-bg": "#000814",
      // Espa√ßo Sideral/Abissal
      "--c-text": "#b3faff",
      // Luz Estelar Suave
      "--font-head": "'Cinzel', serif",
      "--font-body": "'Share Tech Mono', monospace",
      "--f-border": "1px solid rgba(0, 229, 255, 0.4)",
      "--f-shadow": "0 0 30px rgba(0, 68, 255, 0.5)"
    },
    extraCSS: `
        /* 1. FUNDO GERAL: PULSO MAGN√âTICO */
        .theme-blue-magic .inner-terminal-screen {
            background: radial-gradient(circle at center, #001a33 0%, #000814 100%) !important;
        }

        /* 2. LOGIN: RITUAL DE INVOCA√á√ÉO (O CORA√á√ÉO DO TEMA) */
        .theme-blue-magic .login-layer {
            background: #000814 !important;
            overflow: hidden;
        }

        /* Camada de C√≠rculos Girat√≥rios (GIF de Fundo M√°gico) */
        .theme-blue-magic .login-container::before {
            content: ""; position: absolute;
            width: 500px; height: 500px;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            /* Link de um c√≠rculo m√°gico transparente de alta qualidade */
            background-image: url('https://i.imgur.com/mhR9peK.png'); 
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0.4;
            mix-blend-mode: screen;
            z-index: 0;
            animation: ritual-pulse 4s ease-in-out infinite;
        }

        /* Bio-Scanner: O Selo Central */
        .theme-blue-magic .bio-scanner {
            border: 2px solid var(--c-primary) !important;
            background: rgba(0, 20, 40, 0.8) !important;
            box-shadow: 0 0 40px rgba(0, 229, 255, 0.6), inset 0 0 20px var(--c-primary) !important;
            z-index: 2;
            transition: 0.5s;
        }

        /* Quando estiver verificando (Scanning), o selo brilha intensamente */
        .theme-blue-magic .bio-scanner.scanning {
            animation: seal-awaken 0.5s infinite alternate !important;
            transform: scale(1.1) !important;
        }

        /* Feixe de luz vira uma "Onda de Mana" horizontal */
        .theme-blue-magic .scanner-beam {
            background: linear-gradient(to right, transparent, var(--c-primary), transparent) !important;
            height: 2px !important;
            box-shadow: 0 0 20px var(--c-primary) !important;
        }

        /* 3. INPUT DE SENHA: RUNAS ACENDENDO */
        .theme-blue-magic .digit-box {
            background: rgba(0, 10, 30, 0.9) !important;
            border: 1px solid rgba(0, 229, 255, 0.2) !important;
            border-radius: 50% !important; /* Caixas circulares como runas */
            transition: 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        .theme-blue-magic .digit-box.filled {
            border-color: var(--c-primary) !important;
            background: var(--c-primary) !important;
            color: #000 !important;
            box-shadow: 0 0 20px var(--c-primary), 0 0 40px var(--c-secondary) !important;
            transform: translateY(-10px) rotate(360deg); /* Runa sobe e gira ao ser ativada */
        }

        /* Texto de Login Estilo Or√°culo */
        .theme-blue-magic .login-msg {
            font-family: var(--font-head) !important;
            color: var(--c-primary) !important;
            text-shadow: 0 0 10px var(--c-primary) !important;
            letter-spacing: 4px;
            animation: oracle-flicker 2s infinite;
        }

        /* --- ANIMA√á√ïES EXCLUSIVAS DO RITUAL --- */
        @keyframes ritual-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1) rotate(0deg); opacity: 0.3; }
            50% { transform: translate(-50%, -50%) scale(1.1) rotate(180deg); opacity: 0.6; }
        }

        @keyframes seal-awaken {
            from { box-shadow: 0 0 20px var(--c-primary); }
            to { box-shadow: 0 0 60px var(--c-primary), 0 0 100px var(--c-secondary); }
        }

        @keyframes oracle-flicker {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; filter: brightness(1.5); }
        }

        /* Part√≠culas de Mana Flutuando no Fundo */
        .theme-blue-magic .login-layer::after {
            content: ""; position: absolute; inset: 0;
            background-image: radial-gradient(circle, var(--c-primary) 1px, transparent 1px);
            background-size: 50px 50px;
            opacity: 0.1;
            animation: mana-drift 10s linear infinite;
        }

        @keyframes mana-drift {
            from { background-position: 0 0; }
            to { background-position: 500px 500px; }
        }

/* Cursor de "M√£o M√≠stica" para bot√µes e itens clic√°veis */
.theme-blue-magic button, 
.theme-blue-magic [cursor="pointer"],
.theme-blue-magic .icon-btn {
    cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="%234df0ff" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M18 11V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v5"/><path d="M14 10V4a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v10"/><path d="M10 10.5V6a2 2 0 0 0-2-2v0a2 2 0 0 0-2 2v8"/><path d="M18 8a2 2 0 1 1 4 0v6a8 8 0 0 1-8 8h-2c-2.8 0-4.5-.86-5.99-2.34l-3.6-3.6a2 2 0 0 1 2.83-2.82L7 15"/><circle cx="12" cy="2" r="1" fill="%23fff"><animate attributeName="opacity" values="0;1;0" dur="1s" repeatCount="indefinite" /></circle></svg>') 12 0, pointer !important;
}

        /* --- 2. BARREIRA M√ÅGICA (Borda da Tela) --- */
        .theme-blue-magic .cyber-frame::after {
            content: ""; position: absolute; inset: 0;
            border: 2px solid var(--c-primary);
            box-shadow: 
                inset 0 0 20px var(--c-secondary),
                0 0 30px var(--c-primary);
            pointer-events: none; z-index: 100;
            /* Efeito de Escudo R√∫nico */
            background-image: url('https://www.transparenttextures.com/patterns/hexellence.png');
            opacity: 0.1;
            animation: barrier-ripple 4s ease-in-out infinite alternate;
        }

        /* --- 3. √çCONES DO DESKTOP: RITUAL SEM FRAME --- */
        
        .theme-blue-magic .icon-btn {
            position: relative; overflow: visible !important;
        }

        /* Remove o Frame Quadrado/Hexagonal */
        .theme-blue-magic .icon-frame {
            border: none !important;
            background: transparent !important;
            box-shadow: none !important;
            transform: scale(1.3); /* Aumenta o √≠cone central */
            z-index: 2;
        }

        /* O C√≠rculo Ritual√≠stico "Muito Doido" (Surge no Hover) */
        .theme-blue-magic .icon-btn::before {
            content: ""; position: absolute;
            width: 140px; height: 140px;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.5) rotate(0deg);
            /* GIF de C√≠rculo Ritual de Alta Complexidade */
            background-image: url('https://i.imgur.com/mhR9peK.png');
            background-size: contain;
            background-repeat: no-repeat;
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.175, 0.885, 0.32, 1.275);
            pointer-events: none;
            z-index: 1;
            mix-blend-mode: screen;
            filter: drop-shadow(0 0 10px var(--c-primary));
        }

        /* Hover: O C√≠rculo Desperta e Gira */
        .theme-blue-magic .icon-btn:hover::before {
            opacity: 0.8;
            transform: translate(-50%, -50%) scale(1) rotate(180deg);
        }

        /* Brilho no √≠cone ao passar o mouse */
        .theme-blue-magic .icon-btn:hover i {
            color: #fff !important;
            text-shadow: 0 0 20px var(--c-primary), 0 0 40px var(--c-secondary);
            transform: scale(1.2);
            transition: 0.3s;
        }

        /* --- 4. EFEITO GERAL DE MAGIA PULSANDO --- */
        .theme-blue-magic .inner-terminal-screen::after {
            content: ""; position: absolute; inset: 0;
            background: radial-gradient(circle, rgba(0, 229, 255, 0.05) 0%, transparent 70%);
            animation: global-mana-pulse 5s infinite ease-in-out;
            pointer-events: none; z-index: 5;
        }

        /* --- ANIMA√á√ïES DO MOTOR BLUE MAGIC --- */
        
        @keyframes barrier-ripple {
            0% { opacity: 0.05; box-shadow: inset 0 0 10px var(--c-secondary); }
            100% { opacity: 0.2; box-shadow: inset 0 0 40px var(--c-primary); }
        }

        @keyframes global-mana-pulse {
            0%, 100% { opacity: 0.2; transform: scale(1); }
            50% { opacity: 0.5; transform: scale(1.05); }
        }

        /* Ajuste do Texto (Label) para n√£o sumir no brilho */
        .theme-blue-magic .icon-label {
            background: rgba(0, 0, 0, 0.8) !important;
            border: 1px solid var(--c-primary) !important;
            color: var(--c-primary) !important;
            margin-top: 15px !important;
            z-index: 3;
        }
    `
  },
  lobby: {
    label: "LOBBY_TECH",
    class: "theme-lobby",
    desc: "SISTEMA DE RECEP√á√ÉO ATIVO. ACESSO RESTRITO.",
    vars: {
      "--c-primary": "#00f3ff",
      // Azul Neon Puro
      "--c-secondary": "#7000ff",
      // Roxo High-Tech
      "--c-bg": "#050508",
      // Escurid√£o Cibern√©tica
      "--c-text": "#c4f9ff",
      // Ciano Soft
      "--font-head": "'Rajdhani', sans-serif",
      "--font-body": "'Share Tech Mono', monospace",
      "--f-clip": "polygon(0 0, 100% 0, 100% 85%, 90% 100%, 0 100%)",
      "--f-border": "1px solid #00f3ff",
      "--f-shadow": "0 0 20px rgba(0, 243, 255, 0.3)"
    },
    extraCSS: `
/* --- 1. CURSOR PADR√ÉO: ROB√î COM PONTO T√ÅTICO --- */
        .theme-lobby, .theme-lobby * {
            /* O '1 1' define o ponto exato do clique no centro da bolinha vermelha */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><circle cx="1.5" cy="1.5" r="1.5" fill="%23ff0000" stroke="%23050508" stroke-width="0.5"/><g transform="translate(4, 4)" stroke="%2300f3ff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="12" height="8" rx="2" fill="rgba(0,243,255,0.1)"/><path d="M6 10h.01" stroke="%23fff"/><path d="M10 10h.01" stroke="%23fff"/><path d="M8 6V2L3 0" opacity="0.6"/></g></svg>') 1 1, auto !important;
        }

        /* --- CURSOR POINTER (LINKS/BOT√ïES): ROB√î ATIVO --- */
        /* O ponto vermelho pulsa para indicar intera√ß√£o */
        .theme-lobby button, 
        .theme-lobby .icon-btn,
        .theme-lobby [cursor="pointer"] {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><circle cx="1.5" cy="1.5" r="1.5" fill="%23ff0000"><animate attributeName="r" values="1.5;2.5;1.5" dur="0.8s" repeatCount="indefinite"/></circle><g transform="translate(4, 4)" stroke="%2300f3ff" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"><rect x="2" y="6" width="12" height="8" rx="2" fill="rgba(0,243,255,0.3)"/><path d="M6 10h.01" stroke="%23fff" stroke-width="2"/><path d="M10 10h.01" stroke="%23fff" stroke-width="2"/><path d="M8 6V2L3 0" stroke-width="2"/></g></svg>') 1 1, pointer !important;
        }

        /* --- 2. LOGIN: LETREIRO NEON --- */
        .theme-lobby .login-layer {
            background-color: #050508 !important;
            background-image: 
                linear-gradient(rgba(0, 243, 255, 0.03) 1px, transparent 1px),
                linear-gradient(90deg, rgba(0, 243, 255, 0.03) 1px, transparent 1px) !important;
            background-size: 40px 40px !important;
        }

        .theme-lobby .login-layer::before {
            content: "BEM VINDO AO LOBBY";
            position: absolute;
            top: 12%; left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-head);
            font-size: 2.2em;
            font-weight: 900;
            color: #00f3ff;
            text-shadow: 0 0 10px #00f3ff, 0 0 20px #00f3ff;
            letter-spacing: 6px;
            animation: lobby-flicker 4s infinite;
            z-index: 5;
        }

        /* --- 3. MOLDURA DE √çCONES (HUD) --- */
        .theme-lobby .icon-frame {
            border: 1px solid rgba(0, 243, 255, 0.2) !important;
            background: rgba(0, 15, 30, 0.6) !important;
            clip-path: polygon(15% 0, 100% 0, 100% 85%, 85% 100%, 0 100%, 0 15%) !important;
            transition: 0.3s;
        }

        .theme-lobby .icon-btn:hover .icon-frame {
            border-color: #00f3ff !important;
            box-shadow: 0 0 25px rgba(0, 243, 255, 0.5) !important;
            transform: translateY(-3px) scale(1.02);
            background: rgba(0, 243, 255, 0.1) !important;
        }

        /* --- 4. COMBATE E EASTER EGG --- */
        .theme-lobby .resources-panel {
            background: #080a0f !important;
            border: 1px solid #00f3ff !important;
            position: relative;
            overflow: hidden;
        }

        /* Easter Egg: Rodando apenas uma vez por entrada do mouse */
        .theme-lobby .resources-panel::after {
            content: "Voce Sabe a Senha?";
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-body);
            font-size: 10px;
            color: #00f3ff;
            opacity: 0;
            pointer-events: none;
            z-index: 10;
        }

        .theme-lobby .resources-panel:hover::after {
            animation: single-glitch-msg 1s steps(1) forwards;
        }

        /* Orbes em Barras de Energia */
        .theme-lobby .orb-container {
            border-radius: 2px !important;
            border: 1px solid #00f3ff !important;
            background: #000 !important;
            box-shadow: inset 0 0 10px rgba(0, 243, 255, 0.2) !important;
        }

        .theme-lobby .orb-liquid {
            background: linear-gradient(0deg, #0044ff 0%, #00f3ff 100%) !important;
            /* Efeito de Scanline na bateria */
            background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0,0,0,0.3) 3px) !important;
        }

        /* --- ANIMA√á√ïES LOBBY --- */
        @keyframes lobby-flicker {
            0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% { opacity: 1; filter: brightness(1.2); }
            20%, 22%, 24%, 55% { opacity: 0.4; filter: brightness(0.5); }
        }

        @keyframes single-glitch-msg {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            10% { opacity: 1; transform: translate(-52%, -50%); color: #fff; }
            20% { opacity: 1; transform: translate(-48%, -52%); }
            30% { opacity: 1; transform: translate(-50%, -50%); }
            80% { opacity: 1; }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(1.2); }
        }

        /* Membros e Vida */
        .theme-lobby .limb-row {
            background: rgba(0, 243, 255, 0.05) !important;
            border-left: 4px solid #7000ff !important;
        }
        .theme-lobby .limb-row.selected {
            background: rgba(0, 243, 255, 0.15) !important;
            border-left-color: #00f3ff !important;
        }
        .theme-lobby .h-green { color: #00f3ff !important; filter: drop-shadow(0 0 5px #00f3ff); }

        /* --- 3. MOLDURAS: DIAMANTES ROTATIVOS --- */
        .theme-lobby .icon-btn {
            position: relative;
            overflow: visible !important;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .theme-lobby .icon-frame {
            width: 50px !important;
            height: 50px !important;
            background: rgba(0, 243, 255, 0.1) !important;
            border: 1px solid rgba(0, 243, 255, 0.4) !important;
            /* Transforma o quadrado em Diamante */
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%) !important;
            transition: 0.3s;
            /* Rota√ß√£o constante mas lenta em repouso */
            animation: diamond-idle 10s linear infinite;
            z-index: 1;
        }

        /* --- 4. EFEITOS DE HOVER: ACELERA√á√ÉO E GLITCH --- */
        .theme-lobby .icon-btn:hover .icon-frame {
            border-color: var(--c-primary) !important;
            background: rgba(0, 243, 255, 0.2) !important;
            box-shadow: 0 0 20px var(--c-primary) !important;
            /* Acelera a rota√ß√£o no hover */
            animation: diamond-active 2s linear infinite;
        }

        /* O √çCONE CENTRAL: EST√ÅVEL MAS COM GLITCH */
        .theme-lobby .icon-btn i {
            position: absolute;
            z-index: 2;
            transition: 0.2s;
            color: var(--c-primary);
        }

        .theme-lobby .icon-btn:hover i {
            color: #fff !important;
            /* Aciona o Glitch de interfer√™ncia */
            animation: tech-glitch 0.3s infinite;
        }

        /* --- MOTOR DE ANIMA√á√ïES LOBBY --- */

        /* Rota√ß√£o lenta de espera */
        @keyframes diamond-idle {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Rota√ß√£o r√°pida de ativa√ß√£o */
        @keyframes diamond-active {
            from { transform: rotate(0deg) scale(1.1); }
            to { transform: rotate(360deg) scale(1.1); }
        }

        /* Efeito de Glitch Cyberpunk (Deslocamento de Cores) */
        @keyframes tech-glitch {
            0% { 
                transform: translate(0); 
                text-shadow: 2px 0 var(--c-secondary), -2px 0 var(--c-primary);
            }
            20% { 
                transform: translate(-3px, 1px); 
                text-shadow: -2px 0 var(--c-secondary), 2px 0 var(--c-primary);
                clip-path: inset(10% 0 30% 0); /* Corta fatias do √≠cone */
            }
            40% { 
                transform: translate(3px, -1px); 
                clip-path: inset(40% 0 10% 0);
            }
            60% { 
                transform: translate(-1px, 2px); 
                text-shadow: 1px 0 var(--c-secondary), -1px 0 #fff;
                clip-path: none;
            }
            80% { 
                transform: translate(2px, -2px);
            }
            100% { 
                transform: translate(0);
                text-shadow: 2px 0 var(--c-secondary), -2px 0 var(--c-primary);
            }
        }

        /* --- 1. WILLPOWER: BATERIA NEON --- */
        .theme-lobby .orb-container {
            width: 35px !important; 
            height: 55px !important;
            border-radius: 4px !important;
            border: 2px solid var(--c-primary) !important;
            background: #000 !important;
            clip-path: none !important;
            overflow: visible !important;
            position: relative;
        }

        /* O polo positivo da bateria */
        .theme-lobby .orb-container::before {
            content: ""; position: absolute; 
            top: -6px; left: 50%; transform: translateX(-50%);
            width: 14px; height: 6px; 
            background: var(--c-primary);
            border-radius: 1px;
            box-shadow: 0 0 10px var(--c-primary);
        }

        .theme-lobby .orb-liquid {
            background: linear-gradient(0deg, #0044ff 0%, #00f3ff 100%) !important;
            /* Segmentos de bateria */
            background-image: repeating-linear-gradient(
                0deg, 
                transparent, 
                transparent 5px, 
                rgba(0,0,0,0.4) 6px
            ) !important;
            opacity: 1 !important;
        }

        /* --- 2. BASE WILL: O PROCESSADOR ROB√î --- */
        .theme-lobby .hg-container {
            width: 50px !important;
            height: 50px !important;
            background: transparent !important;
            clip-path: none !important;
            border: none !important;
            display: flex; align-items: center; justify-content: center;
        }

        /* Transformando o container em um √≠cone de Rob√¥ via Mask */
        .theme-lobby .hg-container::after {
            content: ""; position: absolute; inset: 0;
            background-color: #222; /* Cor de fundo (vazio) */
            -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>') no-repeat center;
            mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>') no-repeat center;
        }

        .theme-lobby .hg-fill {
            background: var(--c-secondary) !important;
            z-index: 1;
            box-shadow: 0 0 15px var(--c-secondary) !important;
            /* Faz o preenchimento seguir a m√°scara do rob√¥ */
            -webkit-mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>') no-repeat center;
            mask: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="black"><path d="M12 8V4H8"/><rect width="16" height="12" x="4" y="8" rx="2"/><path d="M2 14h2"/><path d="M20 14h2"/><path d="M15 13v2"/><path d="M9 13v2"/></svg>') no-repeat center;
        }

        /* --- 3. STATUS DE VIDA: MINI-ROB√îS (Substituindo Cora√ß√µes) --- */
        
        /* O "Macete": Esconde o √≠cone de cora√ß√£o e coloca o rob√¥ no lugar */
        .theme-lobby .hearts-container i::before {
            content: "\f544" !important; /* C√≥digo FontAwesome do fa-robot */
            font-family: "Font Awesome 5 Free" !important;
            font-weight: 900 !important;
        }

        .theme-lobby .h-green { 
            color: var(--c-primary) !important; 
            filter: drop-shadow(0 0 3px var(--c-primary)) !important; 
        }
        .theme-lobby .h-red { 
            color: #ff0000 !important; 
            animation: lobby-flicker 0.2s infinite !important; 
        }

        /* --- 4. LINHAS DE MEMBROS: DIAMANTE TECH --- */
        .theme-lobby .limb-row {
            border: 1px solid rgba(0, 243, 255, 0.1) !important;
            background: rgba(0, 243, 255, 0.02) !important;
            clip-path: polygon(0 15%, 5% 0, 100% 0, 100% 85%, 95% 100%, 0 100%) !important;
            transition: 0.2s;
        }

        .theme-lobby .limb-row.selected {
            border-color: var(--c-primary) !important;
            background: rgba(0, 243, 255, 0.1) !important;
            box-shadow: inset 0 0 15px rgba(0, 243, 255, 0.2) !important;
        }

        /* Easter Egg ajustado para o novo painel */
        .theme-lobby .resources-panel:hover::after {
            content: "Voce Sabe a Senha?";
            animation: single-glitch-msg 1s steps(1) forwards;
        }

        /* --- 1. CONFIGURA√á√ïES LOBBY: TERMINAL DE ALTA SEGURAN√áA --- */
        .theme-lobby .terminal-wrapper {
            background: rgba(5, 5, 8, 0.9) !important;
            border: 1px solid var(--c-primary) !important;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1), inset 0 0 20px rgba(0, 0, 0, 1) !important;
            backdrop-filter: blur(10px) !important;
            overflow: hidden;
        }

        .theme-lobby .terminal-header {
            background: linear-gradient(90deg, var(--c-primary), var(--c-secondary)) !important;
            clip-path: polygon(0 0, 100% 0, 98% 100%, 2% 100%) !important;
            height: 35px;
        }

        .theme-lobby .profile-section {
            background: rgba(0, 20, 40, 0.4) !important;
            border-right: 1px solid rgba(0, 243, 255, 0.2) !important;
        }

        /* Avatar em Diamante Tech */
        .theme-lobby .avatar-uplink {
            border-radius: 0 !important;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%) !important;
            border: 1px solid var(--c-primary) !important;
            background: #000;
        }

        /* Inputs Neon */
        .theme-lobby input[type="text"], 
        .theme-lobby input[type="number"] {
            background: rgba(0,0,0,0.8) !important;
            border: none !important;
            border-bottom: 2px solid var(--c-secondary) !important;
            color: var(--c-primary) !important;
            transition: 0.3s;
        }

        .theme-lobby input:focus {
            border-bottom-color: var(--c-primary) !important;
            box-shadow: 0 5px 15px rgba(0, 243, 255, 0.1) !important;
        }

        /* Theme Cards (Estilo Glitch) */
        .theme-lobby .theme-card {
            background: rgba(0, 10, 20, 0.6) !important;
            border: 1px solid rgba(0, 243, 255, 0.1) !important;
            clip-path: polygon(0 0, 90% 0, 100% 30%, 100% 100%, 10% 100%, 0 70%) !important;
        }

        .theme-lobby .theme-card.active {
            border-color: var(--c-primary) !important;
            background: rgba(0, 243, 255, 0.1) !important;
            animation: border-glitch 0.3s infinite;
        }

        /* --- 2. O SISTEMA DE P√ÇNICO (EASTER EGG DUPLO) --- */

        /* Trigger: O efeito come√ßa quando o usu√°rio interage/passa o mouse na janela por um tempo */
        .theme-lobby .terminal-wrapper:hover::before {
            content: "Isso √© Medo?";
            position: absolute;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%);
            font-family: var(--font-head);
            font-size: 3em;
            color: var(--c-primary);
            opacity: 0;
            z-index: 1000;
            pointer-events: none;
            white-space: nowrap;
            /* Est√°gio 1: Lento, girando e subliminar */
            animation: subliminal-fear 8s ease-in-out forwards;
        }

        .theme-lobby .terminal-wrapper:hover::after {
            content: "Voce nao pode fugir de mim";
            position: fixed; /* Cobre a tela inteira do navegador */
            inset: 0;
            background: #000;
            color: #ff0000; /* Vermelho sangue para o Jump Scare */
            font-family: var(--font-head);
            font-size: 8vw;
            font-weight: 900;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 999999; /* Acima de TUDO no Foundry */
            opacity: 0;
            visibility: hidden;
            pointer-events: none;
            /* Est√°gio 2: O Jump Scare */
            animation: jump-scare-trigger 0.4s 8.5s linear forwards;
        }

        /* --- ANIMA√á√ïES DE TERROR TECNOL√ìGICO --- */

        /* Est√°gio 1: Texto girando e escrevendo lentamente */
        @keyframes subliminal-fear {
            0% { opacity: 0; transform: translate(-50%, -50%) rotate(0deg) scale(0.5); }
            20% { opacity: 0.03; }
            50% { opacity: 0.08; transform: translate(-50%, -50%) rotate(180deg) scale(1.2); }
            80% { opacity: 0.03; }
            100% { opacity: 0; transform: translate(-50%, -50%) rotate(360deg) scale(0.5); }
        }

        /* Est√°gio 2: Jump Scare e Blackout total */
        @keyframes jump-scare-trigger {
            0% { 
                visibility: visible; 
                opacity: 1; 
                background: #000;
                transform: scale(1);
            }
            20% { transform: scale(1.2) translate(5px, -5px); color: #fff; }
            40% { transform: scale(1.1) translate(-5px, 5px); text-shadow: 10px 0 #f00, -10px 0 #00f; }
            60% { transform: scale(1.3); background: #050000; }
            80% { transform: scale(1); opacity: 1; }
            100% { 
                visibility: hidden; 
                opacity: 0; 
            }
        }

/* --- 2. RESOURCE MONITOR: HACK DE N√çVEL E RUNAS (CORRIGIDO) --- */
        
        /* LINHA 1: FOR√áANDO N√çVEL 50 (O Glitch) */
        .theme-lobby .res-row:nth-child(1) .val.big {
            visibility: hidden;
            position: relative;
        }
        .theme-lobby .res-row:nth-child(1) .val.big::after {
            content: "50";
            visibility: visible;
            position: absolute;
            right: 0;
            color: var(--c-primary);
            text-shadow: 0 0 15px var(--c-primary);
            animation: tech-glitch 2s infinite; /* Pequenos tremores no n√∫mero */
        }

        /* LINHA 2: DISPON√çVEL -> RUNAS DISPON√çVEIS */
        .theme-lobby .res-row:nth-child(2) label {
            visibility: hidden;
            position: relative;
            white-space: nowrap;
        }
        .theme-lobby .res-row:nth-child(2) label::after {
            content: "RUNAS DISPON√çVEIS";
            visibility: visible;
            position: absolute;
            left: 0;
            color: var(--c-primary);
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* LINHA 3: GASTOS -> RUNAS GASTAS */
        .theme-lobby .res-row:nth-child(3) label {
            visibility: hidden;
            position: relative;
            white-space: nowrap;
        }
        .theme-lobby .res-row:nth-child(3) label::after {
            content: "RUNAS GASTAS";
            visibility: visible;
            position: absolute;
            left: 0;
            color: var(--c-secondary);
            font-weight: bold;
            letter-spacing: 1px;
        }

        /* Ajuste para n√£o sumir com os valores num√©ricos das runas */
        .theme-lobby .res-row:nth-child(2) .val,
        .theme-lobby .res-row:nth-child(3) .val {
            color: #fff !important;
            text-shadow: 0 0 5px var(--c-primary);
            z-index: 2;
        }

        /* --- 1. RENOMEA√á√ÉO DE ATRIBUTOS (HACK DE LABELS) --- */
        /* Corpo -> For√ßa + Vigor */
        .theme-lobby [data-stat="Corpo"] .label, 
        .theme-lobby .stat-block:nth-child(1) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Corpo"] .label::after, 
        .theme-lobby .stat-block:nth-child(1) .label::after { content: "FOR√áA + VIGOR"; font-size: 1.2rem; }

        /* Coordena√ß√£o -> Destreza + Arcano */
        .theme-lobby [data-stat="Coordena√ßao"] .label, 
        .theme-lobby .stat-block:nth-child(2) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Coordena√ßao"] .label::after, 
        .theme-lobby .stat-block:nth-child(2) .label::after { content: "DESTREZA + ARCANO"; font-size: 1.2rem; }

        /* Sentidos -> Mente + Arcano */
        .theme-lobby [data-stat="Sentidos"] .label, 
        .theme-lobby .stat-block:nth-child(3) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Sentidos"] .label::after, 
        .theme-lobby .stat-block:nth-child(3) .label::after { content: "MENTE + ARCANO"; font-size: 1.2rem; }

        /* Mente -> Mente + Intelig√™ncia + F√© */
        .theme-lobby [data-stat="Mente"] .label, 
        .theme-lobby .stat-block:nth-child(4) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Mente"] .label::after, 
        .theme-lobby .stat-block:nth-child(4) .label::after { content: "MENTE + INTELIG√äNCIA + F√â"; font-size: 0.9rem; }

        /* Charme -> F√© + Arcano */
        .theme-lobby [data-stat="Charme"] .label, 
        .theme-lobby .stat-block:nth-child(5) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Charme"] .label::after, 
        .theme-lobby .stat-block:nth-child(5) .label::after { content: "F√â + ARCANO"; font-size: 1.2rem; }

        /* Comando -> F√© + Intelig√™ncia */
        .theme-lobby [data-stat="Comando"] .label, 
        .theme-lobby .stat-block:nth-child(6) .label { font-size: 0 !important; }
        .theme-lobby [data-stat="Comando"] .label::after, 
        .theme-lobby .stat-block:nth-child(6) .label::after { content: "F√â + INTELIG√äNCIA"; font-size: 1.1rem; }

        /* --- 2. XP HUD: BARRA DE CARGA DE N√öCLEO --- */
        .theme-lobby .xp-header {
            background: linear-gradient(135deg, rgba(0, 243, 255, 0.1), rgba(0,0,0,0.8)) !important;
            border: 2px solid var(--c-primary) !important;
            clip-path: polygon(0 0, 100% 0, 100% 70%, 98% 100%, 0 100%) !important;
            position: relative;
            overflow: hidden;
        }

        .theme-lobby .xp-header::before {
            content: ""; position: absolute; inset: 0;
            background-image: repeating-linear-gradient(0deg, transparent, transparent 2px, rgba(0, 243, 255, 0.05) 3px);
            pointer-events: none;
        }

        .theme-lobby .val.highlight {
            color: #fff !important;
            text-shadow: 0 0 10px var(--c-primary), 0 0 20px var(--c-secondary) !important;
        }

        /* --- 3. STAT BLOCKS: M√ìDULOS DE DADOS --- */
        .theme-lobby .stat-block {
            background: rgba(0, 10, 20, 0.8) !important;
            border: 1px solid rgba(0, 243, 255, 0.2) !important;
            border-left: 4px solid var(--c-secondary) !important;
            clip-path: polygon(0 0, 97% 0, 100% 15%, 100% 100%, 3% 100%, 0 85%) !important;
            margin-bottom: 10px;
        }

        .theme-lobby .stat-block.open {
            border-left-color: var(--c-primary) !important;
            box-shadow: 0 0 30px rgba(0, 243, 255, 0.1) !important;
        }

        .theme-lobby .icon-box {
            background: #000 !important;
            border-radius: 0 !important;
            clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%) !important;
            border: 1px solid var(--c-primary) !important;
            color: #fff !important;
        }

        /* --- 4. DADOS (DICE GROUPS): CHIPS NEON --- */
        .theme-lobby .die-group {
            background: #000 !important;
            border: 1px solid #333 !important;
            border-radius: 0 !important;
            clip-path: polygon(0 0, 100% 0, 100% 80%, 80% 100%, 0 100%) !important;
            transition: 0.2s;
        }

        .theme-lobby .die-group.active {
            border-color: var(--c-primary) !important;
            background: rgba(0, 243, 255, 0.1) !important;
            box-shadow: 0 0 15px var(--c-primary) !important;
        }

        /* Wiggle Dice (Vermelho/Roxo Glitch) */
        .theme-lobby .die-group.wiggle.active {
            border-color: #ff0055 !important;
            color: #ff0055 !important;
            box-shadow: 0 0 15px #ff0055 !important;
            animation: tech-glitch 0.3s infinite;
        }

        /* Hard Dice (Dourado Neon) */
        .theme-lobby .die-group.hard.active {
            border-color: #ffcc00 !important;
            color: #ffcc00 !important;
            box-shadow: 0 0 15px #ffcc00 !important;
        }

        /* --- 5. SKILL CARDS: ENTRADAS DE LOG --- */
        .theme-lobby .skill-card {
            background: rgba(0, 243, 255, 0.03) !important;
            border: none !important;
            border-right: 2px solid rgba(0, 243, 255, 0.1) !important;
            border-radius: 0 !important;
        }

        .theme-lobby .skill-card:hover {
            background: rgba(112, 0, 255, 0.1) !important;
            border-right-color: var(--c-primary) !important;
            transform: translateX(5px);
        }

        .theme-lobby .ctrl-box {
            background: #000 !important;
            border: 1px solid rgba(0, 243, 255, 0.2) !important;
            border-radius: 0 !important;
        }

        /* --- 6. INPUTS DO GM: ACESSO DE ADMINISTRADOR --- */
        .theme-lobby .gm-input {
            background: rgba(112, 0, 255, 0.1) !important;
            border: 1px solid var(--c-secondary) !important;
            color: var(--c-primary) !important;
            text-shadow: 0 0 5px var(--c-primary) !important;
            font-family: var(--font-body) !important;
        }

        .theme-lobby .gm-input:focus {
            background: rgba(0, 243, 255, 0.1) !important;
            border-color: var(--c-primary) !important;
        }

        /* --- 1. MENSAGEM DE INTRUS√ÉO (O "VOICE" DO LOBBY) --- */
        .theme-lobby .testamento-root::before {
            content: "se depender de mim, n√£o";
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            font-family: var(--font-head);
            font-size: 1.5em;
            color: #fff;
            text-shadow: 2px 0 #ff003c, -2px 0 #00f3ff, 0 0 15px #ff003c;
            z-index: 1000;
            letter-spacing: 5px;
            text-transform: uppercase;
            font-weight: 900;
            animation: tech-glitch 0.2s infinite, voice-float 3s ease-in-out infinite;
            pointer-events: none;
        }

        /* --- 2. INTERFACE BUGADA (ESTRUTURA) --- */
        .theme-lobby .testamento-root {
            background: #000 !important;
            /* Filtro de ru√≠do constante na tela toda */
            filter: contrast(1.2) brightness(0.9);
        }

        /* Faz a sidebar tremer e mudar de cor */
        .theme-lobby .test-sidebar {
            background: rgba(112, 0, 255, 0.05) !important;
            border-right: 1px solid var(--c-primary) !important;
            animation: structure-shake 10s infinite;
        }

        /* Cart√£o de barreira piscando entre seguran√ßa e erro */
        .theme-lobby .barrier-card {
            border-color: #ff003c !important;
            background: rgba(5, 0, 0, 0.9) !important;
            box-shadow: 0 0 40px #ff003c !important;
            animation: alert-flash 0.5s infinite;
        }

        /* --- 3. EDITOR DE TEXTO "IMPOSS√çVEL" --- */
        .theme-lobby .main-textarea {
            color: var(--c-primary) !important;
            text-shadow: 1px 1px 0 var(--c-secondary);
            background: repeating-linear-gradient(
                0deg,
                rgba(0, 0, 0, 0.2),
                rgba(0, 0, 0, 0.2) 1px,
                transparent 1px,
                transparent 2px
            ) !important;
        }

        /* Quando voc√™ tenta escrever, o texto sofre glitch */
        .theme-lobby .main-textarea:focus {
            animation: tech-glitch 0.5s infinite;
            color: #fff !important;
        }

        /* --- 4. ABAS E BOT√ïES CORROMPIDOS --- */
        .theme-lobby .note-tab {
            clip-path: polygon(0 0, 90% 0, 100% 100%, 0% 100%) !important;
            border: 1px solid rgba(255, 0, 60, 0.2) !important;
        }

        .theme-lobby .note-tab.active {
            background: var(--c-secondary) !important;
            color: #fff !important;
            transform: skewX(-5deg);
        }

        /* O bot√£o de "Lacre" agora parece um erro cr√≠tico */
        .theme-lobby .btn-lacre.exposed {
            background: #ff003c !important;
            color: #fff !important;
            box-shadow: 0 0 20px #ff003c !important;
            animation: border-glitch 0.1s infinite;
        }

        /* --- MOTOR DE ANIMA√á√ïES "BUGADAS" --- */

        @keyframes voice-float {
            0%, 100% { top: 10px; transform: translateX(-50%) rotate(-1deg); }
            50% { top: 20px; transform: translateX(-50%) rotate(1deg); }
        }

        @keyframes alert-flash {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; border-color: #fff; }
        }

        @keyframes structure-shake {
            0%, 90%, 100% { transform: translate(0); }
            92% { transform: translate(2px, -1px) skewX(1deg); }
            94% { transform: translate(-2px, 2px) skewX(-1deg); }
            96% { transform: translate(5px, 0); filter: hue-rotate(90deg); }
            98% { transform: translate(-5px, 0); }
        }

        /* --- 1. RAIZ DO APP: INTERFER√äNCIA VISUAL --- */
        .theme-lobby .comms-app-root {
            background: #050508 !important;
            border: 1px solid var(--c-primary) !important;
            /* Efeito de Scanlines de Monitor CRT */
            background-image: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), 
                              linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06)) !important;
            background-size: 100% 4px, 3px 100% !important;
            box-shadow: inset 0 0 50px rgba(0,0,0,0.8);
        }

        /* --- 2. O BOT√ÉO "CHAMAR GUIA" (CLARO E VIS√çVEL) --- */
        /* Posicionado no cabe√ßalho do chat (.chat-info) */
        .theme-lobby .chat-info {
            position: relative;
            border-bottom: 2px solid var(--c-primary) !important;
            background: rgba(0, 20, 40, 0.6) !important;
        }

        .theme-lobby .chat-info::after {
            content: "\f544  CHAMAR GUIA"; /* √çcone Rob√¥ (FontAwesome) + Texto */
            font-family: "Font Awesome 5 Free", var(--font-head) !important;
            font-weight: 900;
            font-size: 11px;
            
            /* Estilo visual claro e destacado */
            color: #000; 
            background: var(--c-primary);
            border: 1px solid var(--c-secondary);
            
            /* Posicionamento no topo direito */
            position: absolute;
            right: 20px;
            top: 50%;
            transform: translateY(-50%);
            
            padding: 8px 15px;
            text-transform: uppercase;
            letter-spacing: 1px;
            
            /* Design Cyberpunk */
            clip-path: polygon(10% 0, 100% 0, 90% 100%, 0 100%);
            box-shadow: 0 0 15px rgba(0, 243, 255, 0.4);
            cursor: help; /* Indica que √© um bot√£o de ajuda/info */
            transition: 0.3s all ease-in-out;
            z-index: 5;
        }

        /* Efeito de Hover no bot√£o (brilho intenso) */
        .theme-lobby .chat-info:hover::after {
            background: #fff;
            color: var(--c-primary);
            box-shadow: 0 0 30px var(--c-primary);
            text-shadow: 0 0 5px var(--c-primary);
            border-color: #fff;
        }

        /* --- 3. MENSAGENS: EST√âTICA GLITCH --- */
        .theme-lobby .bubble {
            background: rgba(0, 20, 30, 0.8) !important;
            border: 1px solid rgba(0, 243, 255, 0.2) !important;
            border-left: 3px solid var(--c-primary) !important;
            clip-path: polygon(0 0, 100% 0, 100% 85%, 98% 100%, 0 100%) !important;
        }

        .theme-lobby .msg-block.me .bubble {
            border-left: 1px solid rgba(112, 0, 255, 0.2) !important;
            border-right: 3px solid var(--c-secondary) !important;
            background: rgba(112, 0, 255, 0.1) !important;
        }

        /* Efeito de Glitch no texto ao passar o mouse */
        .theme-lobby .b-text:hover {
            animation: tech-glitch 0.3s infinite;
            color: #fff !important;
            text-shadow: 2px 0 var(--c-secondary), -2px 0 var(--c-primary);
        }

        /* --- 4. COMPOSER: TERMINAL DE INPUT --- */
        .theme-lobby .chat-composer {
            border-top: 2px solid var(--c-primary) !important;
            background: rgba(0, 0, 0, 0.95) !important;
        }

        .theme-lobby .chat-input {
            border: 1px solid var(--c-primary) !important;
            background: #000 !important;
            color: var(--c-primary) !important;
            font-family: var(--font-body) !important;
        }
        .theme-lobby .chat-input:focus {
            box-shadow: 0 0 20px rgba(0, 243, 255, 0.2) inset !important;
        }

        /* --- ANIMA√á√ïES DE AMBIENTE --- */
        /* Tremedeira sutil na navega√ß√£o lateral para manter a tens√£o */
        .theme-lobby .app-nav {
            border-right: 1px solid var(--c-secondary) !important;
            animation: jitter 5s infinite;
        }

        @keyframes jitter {
            0%, 98%, 100% { transform: translate(0); border-color: var(--c-secondary); }
            99% { transform: translate(1px, -1px); border-color: var(--c-primary); filter: hue-rotate(20deg); }
        }

        /* --- GARANTIA DE VISIBILIDADE DO CONTAINER --- */
    .theme-lobby .os-container {
        position: relative;
        overflow: visible !important; /* Impede que o bot√£o seja cortado */
    }

    /* 1. O √çCONE DO ROBOZINHO (Centralizado) */
    .theme-lobby .os-container::before {
        content: "\f544"; /* √çcone do Rob√¥ */
        /* Tenta carregar a vers√£o 5 ou 6 do FontAwesome */
        font-family: "Font Awesome 5 Free", "Font Awesome 6 Free" !important;
        font-weight: 900;
        
        position: absolute;
        bottom: 70px; /* Altura do ch√£o */
        right: 45px;  /* Dist√¢ncia da direita */
        
        width: 60px;
        height: 60px;
        
        /* Cores e Estilo */
        color: var(--c-primary);
        background: rgba(0, 0, 0, 0.9);
        border: 2px solid var(--c-primary);
        
        /* Formato de Diamante */
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 24px;
        clip-path: polygon(50% 0%, 100% 50%, 50% 100%, 0% 50%);
        
        box-shadow: 0 0 20px var(--c-primary);
        z-index: 9999; /* Fica acima de TUDO */
        pointer-events: auto;
    }

    /* 2. O TEXTO (LOGO ABAIXO DO DIAMANTE) */
    .theme-lobby .os-container::after {
        content: "CHAMAR GUIA";
        position: absolute;
        bottom: 45px; /* Fica logo abaixo do √≠cone */
        right: 25px;
        width: 100px;
        
        font-family: var(--font-head), sans-serif !important;
        font-weight: 900;
        font-size: 10px;
        color: var(--c-primary);
        text-align: center;
        letter-spacing: 1px;
        
        /* Fundo sutil para legibilidade */
        background: rgba(0, 0, 0, 0.7);
        padding: 2px 5px;
        border: 1px solid var(--c-primary);
        clip-path: polygon(5% 0, 100% 0, 95% 100%, 0 100%);
        
        z-index: 10000;
        pointer-events: none;
        text-shadow: 0 0 5px #000;
    }

    /* --- EFEITO DE INTERA√á√ÉO --- */
    .theme-lobby .os-container:hover::before {
        filter: brightness(1.3);
        transform: scale(1.1);
        box-shadow: 0 0 30px var(--c-primary);
        transition: 0.2s;
    }
        
    `
  },
  antimatter: {
    label: "ANTI-MAT√âRIA",
    class: "theme-antimatter",
    desc: "O VAZIO CONSOME A REALIDADE. CUIDADO COM O HORIZONTE DE EVENTOS.",
    vars: {
      "--c-primary": "#bf00ff",
      // Roxo At√¥mico
      "--c-secondary": "#4b0082",
      // √çndigo Profundo
      "--c-bg": "#000000",
      // V√°cuo Absoluto
      "--c-text": "#e0ccff",
      // Lavanda P√°lido
      "--font-head": "'Orbitron', sans-serif",
      "--font-body": "'Share Tech Mono', monospace",
      "--f-clip": "circle(50% at 50% 50%)",
      "--f-border": "1px solid rgba(191, 0, 255, 0.3)",
      "--f-shadow": "0 0 20px rgba(75, 0, 130, 0.5)"
    },
    extraCSS: `
        /* --- 1. LOGIN: O BURACO NEGRO (HORIZONTE DE EVENTOS) --- */
        .theme-antimatter .login-layer {
            background: #000 !important;
            overflow: hidden;
        }

        /* O N√∫cleo do Buraco Negro */
        .theme-antimatter .login-layer::before {
            content: "";
            position: absolute;
            top: 50%; left: 50%;
            width: 200px; height: 200px;
            background: #000;
            border-radius: 50%;
            transform: translate(-50%, -50%);
            box-shadow: 
                0 0 60px 20px #bf00ff, 
                0 0 100px 40px #4b0082,
                inset 0 0 50px #4b0082;
            z-index: 1;
            animation: black-hole-pulse 4s ease-in-out infinite;
        }

        /* Disco de Acre√ß√£o (Anel Girat√≥rio) */
        .theme-antimatter .login-layer::after {
            content: "";
            position: absolute;
            top: 50%; left: 50%;
            width: 400px; height: 100px;
            border-radius: 50%;
            border: 2px solid var(--c-primary);
            transform: translate(-50%, -50%) rotateX(75deg);
            box-shadow: 0 0 30px var(--c-primary);
            filter: blur(2px);
            z-index: 0;
            animation: accretion-disk-spin 1s linear infinite;
        }

        /* --- 2. EFEITOS DE NEGATIVO (SUBVERS√ÉO) --- */
        
        /* Avatares em Negativo */
        .theme-antimatter .bio-img, 
        .theme-antimatter .portrait-frame img {
            filter: invert(1) hue-rotate(180deg) brightness(1.2) contrast(1.5) !important;
            mix-blend-mode: screen;
        }

        /* Molduras que "sugam" a luz */
        .theme-antimatter .icon-frame,
        .theme-antimatter .cyber-panel {
            background: rgba(20, 0, 40, 0.9) !important;
            border: 1px solid var(--c-primary) !important;
            box-shadow: inset 0 0 15px rgba(191, 0, 255, 0.2) !important;
        }

        /* --- 3. RECURSOS: ENERGIA NEGATIVA --- */
        .theme-antimatter .orb-liquid {
            background: linear-gradient(180deg, #000 0%, var(--c-primary) 100%) !important;
            filter: hue-rotate(-20deg);
        }

        .theme-antimatter .h-green { color: #fff !important; text-shadow: 0 0 10px var(--c-primary); }
        .theme-antimatter .h-red { color: var(--c-primary) !important; animation: void-flicker 0.1s infinite; }

        /* --- ANIMA√á√ïES DE ANTI-MAT√âRIA --- */
        
        @keyframes black-hole-pulse {
            0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 1; }
            50% { transform: translate(-50%, -50%) scale(1.1); opacity: 0.8; }
        }

        @keyframes accretion-disk-spin {
            from { transform: translate(-50%, -50%) rotateX(75deg) rotateZ(0deg); }
            to { transform: translate(-50%, -50%) rotateX(75deg) rotateZ(360deg); }
        }

        @keyframes void-flicker {
            0% { opacity: 1; filter: invert(0); }
            50% { opacity: 0.5; filter: invert(1); }
            100% { opacity: 1; filter: invert(0); }
        }

        /* Cursor de Singularidade */
        .theme-antimatter, .theme-antimatter * {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="%23bf00ff" stroke-width="2"><circle cx="12" cy="12" r="3" fill="black"/><path d="M12 2v4m0 12v4M2 12h4m12 0h4"/></svg>') 12 12, auto !important;
        }

        /* --- 1. CURSOR: BURACO NEGRO COM PONTO DE PRECIS√ÉO --- */
        .theme-antimatter, .theme-antimatter * {
            /* O '16 16' centraliza o clique exatamente no ponto vermelho do buraco negro */
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><circle cx="16" cy="16" r="6" fill="black" stroke="%23bf00ff" stroke-width="1"/><circle cx="16" cy="16" r="12" stroke="%23bf00ff" stroke-width="0.5" opacity="0.3"><animate attributeName="r" values="10;14;10" dur="2s" repeatCount="indefinite" /></circle><circle cx="16" cy="16" r="1.5" fill="%23ff0000" stroke="white" stroke-width="0.5"/></svg>') 16 16, auto !important;
        }

        /* Cursor ao passar em bot√µes: O buraco negro expande */
        .theme-antimatter button, .theme-antimatter .icon-btn, .theme-antimatter [cursor="pointer"] {
            cursor: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 32 32" fill="none"><circle cx="16" cy="16" r="8" fill="black" stroke="%23ff00ff" stroke-width="2"/><circle cx="16" cy="16" r="1.5" fill="%23ff0000"/></svg>') 16 16, pointer !important;
        }

        /* --- 2. MOLDURAS: HORIZONTE DE EVENTOS --- */
        .theme-antimatter .icon-frame {
            border: 1px solid rgba(191, 0, 255, 0.4) !important;
            background: radial-gradient(circle, rgba(75, 0, 130, 0.4) 0%, rgba(0, 0, 0, 1) 70%) !important;
            /* Formato Circular Irregular (Singularidade) */
            clip-path: circle(50% at 50% 50%) !important;
            transition: all 0.5s cubic-bezier(0.68, -0.55, 0.27, 1.55);
            position: relative;
        }

        /* --- 3. ANIMA√á√ÉO DE HOVER: COLAPSO GRAVITACIONAL --- */
        .theme-antimatter .icon-btn:hover .icon-frame {
            border-color: #fff !important;
            box-shadow: 0 0 30px #bf00ff, inset 0 0 20px #bf00ff !important;
            transform: scale(0.9) rotate(180deg); /* O √≠cone "encolhe" para dentro do buraco negro */
            filter: hue-rotate(90deg);
            background: #000 !important;
        }

        /* O √≠cone dentro sofre uma distor√ß√£o de espelho */
        .theme-antimatter .icon-btn:hover i {
            animation: void-distortion 0.4s infinite alternate;
            color: #fff !important;
        }

        /* --- MOTOR DE ANIMA√á√ÉO ANTI-MAT√âRIA --- */
        
        @keyframes void-distortion {
            0% { 
                transform: scale(1) skewX(0deg); 
                filter: blur(0px) brightness(1);
            }
            100% { 
                transform: scale(1.3) skewX(20deg); 
                filter: blur(2px) brightness(1.5);
                text-shadow: 0 0 10px #bf00ff, 5px 0 #ff00ff, -5px 0 #00ffff;
            }
        }

        /* Cantoneiras Estilo "Lente Gravitacional" */
        .theme-antimatter .icon-btn::before {
            content: "";
            position: absolute;
            inset: -5px;
            border: 1px solid var(--c-primary);
            border-radius: 50%;
            opacity: 0;
            transition: 0.3s;
            pointer-events: none;
        }

        .theme-antimatter .icon-btn:hover::before {
            opacity: 1;
            inset: -10px;
            border-width: 2px;
            animation: pulse-ring 1.5s linear infinite;
        }

        @keyframes pulse-ring {
            0% { transform: scale(0.8); opacity: 1; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        /* --- PERFIL ANTI-MAT√âRIA --- */
    
    /* Retrato: O C√≠rculo de Singularidade */
    .theme-antimatter .portrait-frame {
        border-radius: 50% !important;
        clip-path: circle(50% at 50% 50%) !important;
        border: 2px solid var(--c-primary) !important;
        box-shadow: 0 0 20px var(--c-primary), inset 0 0 15px var(--c-secondary) !important;
        overflow: hidden;
    }

    /* Efeito de Negativo Total no Avatar */
    .theme-antimatter .portrait-frame img {
        filter: invert(1) contrast(1.2) brightness(1.1) hue-rotate(180deg) !important;
        transition: 0.5s;
    }

    .theme-antimatter .portrait-frame:hover img {
        filter: invert(1) contrast(1.5) brightness(1.5) hue-rotate(220deg) !important;
        transform: scale(1.1);
    }

    /* Status: Carga Negativa (Substituindo Runas/XP) */
    .theme-antimatter .res-row label::after {
        color: var(--c-primary) !important;
        text-shadow: 0 0 10px var(--c-primary);
        content: "N√çVEL DE COLAPSO" !important;
    }

    .theme-antimatter .res-row:nth-child(2) label::after { content: "MAT√âRIA DISPON√çVEL" !important; }
    .theme-antimatter .res-row:nth-child(3) label::after { content: "ENERGIA DISPENSADA" !important; }

    /* Pain√©is que parecem flutuar no v√°cuo */
    .theme-antimatter .cyber-panel {
        background: rgba(0, 0, 0, 0.9) !important;
        border: 1px solid var(--c-secondary) !important;
        border-radius: 50px 5px 50px 5px !important; /* Curvaturas org√¢nicas */
        box-shadow: inset 0 0 20px rgba(75, 0, 130, 0.3) !important;
    }

    .theme-antimatter .panel-head {
        background: linear-gradient(90deg, var(--c-secondary), transparent) !important;
        border-bottom: 1px solid var(--c-primary) !important;
    }

    /* --- INVENT√ÅRIO ANTI-MAT√âRIA --- */

    .theme-antimatter .inventory-terminal {
        background: radial-gradient(circle at center, #1a002b 0%, #000 70%) !important;
    }

    /* Barra de Carga: Radia√ß√£o Hawking */
    .theme-antimatter .cap-bar-fill {
        background: linear-gradient(90deg, var(--c-secondary), #fff) !important;
        box-shadow: 0 0 20px #fff !important;
        filter: blur(1px);
    }

    /* Slots de Itens: Lentes Gravitacionais */
    .theme-antimatter .inv-grid .empty-slot {
        border-radius: 50% !important;
        border: 1px double var(--c-primary) !important;
        background: rgba(0, 0, 0, 0.5) !important;
        box-shadow: inset 0 0 10px var(--c-primary) !important;
        transition: 0.3s;
    }

    .theme-antimatter .inv-grid .empty-slot:hover {
        transform: scale(0.95);
        background: var(--c-secondary) !important;
        box-shadow: 0 0 20px var(--c-primary) !important;
    }

    /* O Bot√£o de Item Multiversal: IMPLOS√ÉO (Thanos Invertido) */
    .theme-antimatter .btn-multiversal {
        background: #000 !important;
        color: var(--c-primary) !important;
        border: 1px solid var(--c-primary) !important;
        box-shadow: 0 0 10px var(--c-primary) !important;
        clip-path: circle(50%) !important;
    }

    .theme-antimatter .btn-multiversal.snap-active {
        animation: antimatter-implosion 1.5s forwards cubic-bezier(0.6, -0.28, 0.735, 0.045) !important;
    }

    @keyframes antimatter-implosion {
        0% { transform: scale(1); filter: brightness(1); opacity: 1; }
        30% { transform: scale(1.2); filter: brightness(2) contrast(2); box-shadow: 0 0 50px #fff; }
        100% { transform: scale(0); filter: blur(10px); opacity: 0; }
    }

    /* --- 1. ATRIBUTOS: N√öCLEOS DE SINGULARIDADE --- */
    
    /* Moldura do √çcone do Atributo */
    .theme-antimatter .stat-block .icon-box {
        background: #000 !important;
        border: 2px solid var(--c-primary) !important;
        border-radius: 50% !important;
        clip-path: none !important; /* Remove o diamante do Lobby */
        box-shadow: 0 0 15px var(--c-primary), inset 0 0 10px var(--c-secondary) !important;
        position: relative;
        overflow: visible !important;
        animation: void-breathing 4s ease-in-out infinite;
    }

    /* O √çcone dentro do Atributo (Anima√ß√£o de Flutua√ß√£o no V√°cuo) */
    .theme-antimatter .stat-block .icon-box i {
        animation: icon-float-void 3s ease-in-out infinite;
        filter: drop-shadow(0 0 5px var(--c-primary));
    }

    /* --- 2. SISTEMA DE UPGRADE: MASSA CR√çTICA --- */
    
    /* Bot√£o de comprar dados (Die Groups) */
    .theme-antimatter .die-group {
        border-radius: 50% !important;
        border: 1px solid var(--c-secondary) !important;
        background: rgba(0, 0, 0, 0.8) !important;
        transition: 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    }

    .theme-antimatter .die-group.active {
        background: var(--c-secondary) !important;
        border-color: var(--c-primary) !important;
        box-shadow: 0 0 20px var(--c-primary) !important;
        animation: active-die-glow 2s infinite alternate;
    }

    /* Bot√£o de UP (O pequeno +) */
    .theme-antimatter .btn-up {
        background: #000 !important;
        border: 1px solid var(--c-primary) !important;
        box-shadow: 0 0 5px var(--c-primary) !important;
        transition: 0.3s;
    }

    .theme-antimatter .btn-up:hover {
        background: var(--c-primary) !important;
        transform: scale(1.3) rotate(90deg);
        box-shadow: 0 0 20px var(--c-primary) !important;
    }

    /* --- 3. ABA DE PODERES: MANIFESTA√á√ïES DO VAZIO --- */
    
    .theme-antimatter .power-card {
        background: rgba(20, 0, 40, 0.3) !important;
        border: 1px solid rgba(191, 0, 255, 0.2) !important;
        border-left: 5px solid var(--c-primary) !important;
        border-radius: 0 20px 0 20px !important;
        transition: 0.3s;
        overflow: hidden;
    }

    .theme-antimatter .power-card:hover {
        background: rgba(191, 0, 255, 0.1) !important;
        border-left-width: 10px !important;
        transform: translateX(10px);
        box-shadow: -10px 0 20px rgba(191, 0, 255, 0.2) !important;
    }

    /* √çcone do Poder: Horizonte de Eventos */
    .theme-antimatter .power-icon-frame {
        border-radius: 50% !important;
        border: 1px solid var(--c-primary) !important;
        animation: rotation-void 10s linear infinite;
    }

    /* --- MOTOR DE ANIMA√á√ïES ANTI-MAT√âRIA --- */

    /* Pulso de respira√ß√£o do v√°cuo */
    @keyframes void-breathing {
        0%, 100% { box-shadow: 0 0 15px var(--c-primary), inset 0 0 10px var(--c-secondary); transform: scale(1); }
        50% { box-shadow: 0 0 30px var(--c-primary), inset 0 0 20px var(--c-primary); transform: scale(1.05); }
    }

    /* Flutua√ß√£o suave dos √≠cones */
    @keyframes icon-float-void {
        0%, 100% { transform: translateY(0) rotate(0deg); filter: brightness(1); }
        50% { transform: translateY(-5px) rotate(10deg); filter: brightness(1.5); }
    }

    /* Rota√ß√£o lenta para elementos circulares */
    @keyframes rotation-void {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
    }

    /* Brilho inst√°vel para dados ativos */
    @keyframes active-die-glow {
        from { filter: saturate(1) brightness(1); }
        to { filter: saturate(2) brightness(1.3); box-shadow: 0 0 30px var(--c-primary); }
    }

    /* Estilo para as barras de progresso de poder (se houver) */
    .theme-antimatter .progress-fill {
        background: repeating-linear-gradient(
            45deg,
            var(--c-secondary),
            var(--c-secondary) 10px,
            var(--c-primary) 10px,
            var(--c-primary) 20px
        ) !important;
        animation: wave-move 2s linear infinite;
    }

    @keyframes wave-move {
        from { background-position: 0 0; }
        to { background-position: 40px 0; }
    }
    `
  }
};
function zs(l, e, t) {
  const i = l.slice();
  return i[27] = e[t][0], i[28] = e[t][1], i;
}
function km(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "[ ADMIN ACCESS ]", s(e, "class", "gm-tag svelte-10384l3");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function wm(l) {
  let e;
  return {
    c() {
      e = B("Pular tela de login e verifica√ß√£o de biometria.");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ym(l) {
  let e;
  return {
    c() {
      e = B("Configurar para o Jogador. (GM sempre ignora login).");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Am(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-eye"></i> GM: Voc√™ pode redefinir a senha do jogador aqui.', s(e, "class", "gm-note svelte-10384l3");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Bs(l) {
  let e;
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-check-circle check-icon svelte-10384l3");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Fs(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = (
    /*activeThemeKey*/
    l[2] === /*key*/
    l[27] && Bs()
  );
  function v() {
    return (
      /*click_handler*/
      l[21](
        /*key*/
        l[27]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("div"), i = g(), n = r("div"), o = r("span"), o.textContent = `${/*data*/
      l[28].label}`, c = g(), f = r("span"), f.textContent = `${/*data*/
      l[28].desc}`, u = g(), b && b.c(), d = g(), s(t, "class", "theme-preview svelte-10384l3"), s(o, "class", "theme-name svelte-10384l3"), s(f, "class", "theme-desc svelte-10384l3"), s(n, "class", "theme-info svelte-10384l3"), s(e, "class", "theme-card svelte-10384l3"), ae(
        e,
        "--preview-primary",
        /*data*/
        l[28].vars["--c-primary"]
      ), ae(
        e,
        "--preview-bg",
        /*data*/
        l[28].vars["--c-bg"]
      ), he(
        e,
        "active",
        /*activeThemeKey*/
        l[2] === /*key*/
        l[27]
      );
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f), a(e, u), b && b.m(e, null), a(e, d), p || (m = R(e, "click", v), p = !0);
    },
    p(h, _) {
      l = h, /*activeThemeKey*/
      l[2] === /*key*/
      l[27] ? b || (b = Bs(), b.c(), b.m(e, d)) : b && (b.d(1), b = null), _ & /*activeThemeKey, Object*/
      4 && he(
        e,
        "active",
        /*activeThemeKey*/
        l[2] === /*key*/
        l[27]
      );
    },
    d(h) {
      h && P(e), b && b.d(), p = !1, m();
    }
  };
}
function Em(l) {
  let e, t, i, n, o, c, f, u = (
    /*currentThemeData*/
    l[1].label + ""
  ), d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N = (
    /*actor*/
    l[0].name + ""
  ), I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe, Le, qe, Me, Se, ve, Ue, Ve, rt, Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It = (
    /*isGM*/
    l[11] && km()
  );
  function Dt(Ie, tt) {
    return (
      /*isGM*/
      Ie[11] ? ym : wm
    );
  }
  let At = Dt(l)(l), Et = (
    /*isGM*/
    l[11] && Am()
  ), Nt = ce(Object.entries(sa)), ct = [];
  for (let Ie = 0; Ie < Nt.length; Ie += 1)
    ct[Ie] = Fs(zs(l, Nt, Ie));
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), n = r("span"), o = g(), c = r("span"), f = B("SYS_CONFIG // "), d = B(u), p = g(), m = r("button"), m.textContent = "[ X ]", b = g(), v = r("div"), h = r("aside"), _ = r("div"), w = r("img"), A = g(), y = r("div"), y.innerHTML = '<i class="fas fa-camera"></i>', E = g(), S = r("div"), O = r("small"), O.textContent = "ID_USER", C = g(), T = r("div"), I = B(N), D = g(), It && It.c(), M = g(), G = r("main"), L = r("section"), U = r("h2"), U.textContent = ":: SEGURAN√áA & ACESSO ::", z = g(), F = r("div"), W = r("div"), H = r("div"), V = r("label"), V.textContent = "Fast Boot Protocol", J = g(), j = r("small"), At.c(), X = g(), K = r("label"), Z = r("input"), le = g(), $ = r("span"), se = g(), Y = r("div"), Q = r("div"), Q.innerHTML = '<label class="svelte-10384l3">C√≥digo de Acesso (PIN)</label> <small class="svelte-10384l3">Senha num√©rica de 6 d√≠gitos.</small>', ie = g(), ee = r("div"), pe = r("input"), Ee = g(), De = r("i"), we = g(), Et && Et.c(), ke = g(), me = r("section"), re = r("h2"), re.textContent = ":: TEMA VISUAL ::", ye = g(), oe = r("div");
      for (let Ie = 0; Ie < ct.length; Ie += 1)
        ct[Ie].c();
      be = g(), de = r("div"), Oe = r("label"), Oe.textContent = "Wallpaper do Terminal (URL)", _e = g(), ue = r("div"), Re = r("input"), He = g(), Ge = r("button"), Ge.innerHTML = '<i class="fas fa-sync-alt"></i>', Xe = g(), fe = r("section"), Le = r("h2"), Le.textContent = ":: RESOLU√á√ÉO ::", qe = g(), Me = r("div"), Se = r("div"), ve = r("span"), ve.textContent = "LARGURA", Ue = r("input"), Ve = g(), rt = r("span"), rt.textContent = "x", Tt = g(), ze = r("div"), it = r("span"), it.textContent = "ALTURA", Ze = r("input"), ut = g(), Be = r("button"), Be.innerHTML = '<i class="fas fa-undo"></i>', s(n, "class", "pulse-dot svelte-10384l3"), s(c, "class", "title"), s(i, "class", "branding"), s(m, "type", "button"), s(m, "class", "close-trigger svelte-10384l3"), s(t, "class", "terminal-header svelte-10384l3"), at(w.src, k = /*actorImg*/
      l[3]) || s(w, "src", k), s(w, "alt", "Uplink"), s(w, "class", "svelte-10384l3"), s(y, "class", "overlay svelte-10384l3"), s(_, "class", "avatar-uplink svelte-10384l3"), s(T, "class", "name svelte-10384l3"), s(S, "class", "actor-id"), s(h, "class", "profile-section svelte-10384l3"), s(U, "class", "group-title svelte-10384l3"), s(V, "class", "svelte-10384l3"), s(j, "class", "svelte-10384l3"), s(H, "class", "label-group svelte-10384l3"), s(Z, "type", "checkbox"), Z.checked = /*fastBoot*/
      l[9], s(Z, "class", "svelte-10384l3"), s($, "class", "slider round svelte-10384l3"), s(K, "class", "switch svelte-10384l3"), s(W, "class", "setting-row"), s(Q, "class", "label-group svelte-10384l3"), s(pe, "type", "text"), pe.value = /*password*/
      l[8], s(pe, "maxlength", "6"), s(pe, "placeholder", "SEM SENHA"), s(pe, "class", "pass-input svelte-10384l3"), s(De, "class", "fas fa-lock lock-icon svelte-10384l3"), s(ee, "class", "pass-input-wrapper svelte-10384l3"), s(Y, "class", "setting-row vertical"), s(F, "class", "security-panel svelte-10384l3"), s(L, "class", "group"), s(re, "class", "group-title svelte-10384l3"), s(oe, "class", "theme-grid svelte-10384l3"), s(Re, "type", "text"), s(Re, "placeholder", Ce = /*wallpaper*/
      l[10] || "Cole a URL aqui..."), s(Re, "class", "url-input svelte-10384l3"), s(Ge, "type", "button"), s(Ge, "class", "apply-btn svelte-10384l3"), s(Ge, "title", "Sincronizar Link"), s(ue, "class", "input-with-button svelte-10384l3"), s(de, "class", "setting-row vertical"), s(me, "class", "group"), s(Le, "class", "group-title svelte-10384l3"), s(ve, "class", "svelte-10384l3"), s(Ue, "type", "number"), Ue.value = /*winWidth*/
      l[7], s(Ue, "class", "svelte-10384l3"), s(Se, "class", "res-input svelte-10384l3"), s(rt, "class", "x"), s(it, "class", "svelte-10384l3"), s(Ze, "type", "number"), Ze.value = /*winHeight*/
      l[6], s(Ze, "class", "svelte-10384l3"), s(ze, "class", "res-input svelte-10384l3"), s(Be, "class", "reset-btn svelte-10384l3"), s(Be, "title", "Resetar"), s(Me, "class", "res-control svelte-10384l3"), s(fe, "class", "group"), s(G, "class", "settings-grid svelte-10384l3"), s(v, "class", "terminal-content svelte-10384l3"), s(e, "class", "terminal-wrapper svelte-10384l3"), s(
        e,
        "style",
        /*cssVariables*/
        l[5]
      );
    },
    m(Ie, tt) {
      q(Ie, e, tt), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(c, d), a(t, p), a(t, m), a(e, b), a(e, v), a(v, h), a(h, _), a(_, w), a(_, A), a(_, y), a(h, E), a(h, S), a(S, O), a(S, C), a(S, T), a(T, I), a(S, D), It && It.m(S, null), a(v, M), a(v, G), a(G, L), a(L, U), a(L, z), a(L, F), a(F, W), a(W, H), a(H, V), a(H, J), a(H, j), At.m(j, null), a(W, X), a(W, K), a(K, Z), a(K, le), a(K, $), a(F, se), a(F, Y), a(Y, Q), a(Y, ie), a(Y, ee), a(ee, pe), a(ee, Ee), a(ee, De), a(Y, we), Et && Et.m(Y, null), a(G, ke), a(G, me), a(me, re), a(me, ye), a(me, oe);
      for (let Ye = 0; Ye < ct.length; Ye += 1)
        ct[Ye] && ct[Ye].m(oe, null);
      a(me, be), a(me, de), a(de, Oe), a(de, _e), a(de, ue), a(ue, Re), x(
        Re,
        /*tempUrl*/
        l[4]
      ), a(ue, He), a(ue, Ge), a(G, Xe), a(G, fe), a(fe, Le), a(fe, qe), a(fe, Me), a(Me, Se), a(Se, ve), a(Se, Ue), a(Me, Ve), a(Me, rt), a(Me, Tt), a(Me, ze), a(ze, it), a(ze, Ze), a(Me, ut), a(Me, Be), je = !0, xe || (St = [
        R(
          m,
          "click",
          /*close*/
          l[19]
        ),
        R(
          _,
          "click",
          /*pickImage*/
          l[16]
        ),
        R(
          Z,
          "change",
          /*toggleFastBoot*/
          l[14]
        ),
        R(
          pe,
          "change",
          /*savePassword*/
          l[15]
        ),
        R(
          Re,
          "input",
          /*input2_input_handler*/
          l[22]
        ),
        R(
          Ge,
          "click",
          /*applyWallpaper*/
          l[13]
        ),
        R(
          Ue,
          "change",
          /*change_handler*/
          l[23]
        ),
        R(
          Ze,
          "change",
          /*change_handler_1*/
          l[24]
        ),
        R(
          Be,
          "click",
          /*resetWindow*/
          l[18]
        )
      ], xe = !0);
    },
    p(Ie, [tt]) {
      if ((!je || tt & /*currentThemeData*/
      2) && u !== (u = /*currentThemeData*/
      Ie[1].label + "") && te(d, u), (!je || tt & /*actorImg*/
      8 && !at(w.src, k = /*actorImg*/
      Ie[3])) && s(w, "src", k), (!je || tt & /*actor*/
      1) && N !== (N = /*actor*/
      Ie[0].name + "") && te(I, N), (!je || tt & /*fastBoot*/
      512) && (Z.checked = /*fastBoot*/
      Ie[9]), (!je || tt & /*password*/
      256 && pe.value !== /*password*/
      Ie[8]) && (pe.value = /*password*/
      Ie[8]), tt & /*Object, activeThemeKey, selectTheme*/
      4100) {
        Nt = ce(Object.entries(sa));
        let Ye;
        for (Ye = 0; Ye < Nt.length; Ye += 1) {
          const bt = zs(Ie, Nt, Ye);
          ct[Ye] ? ct[Ye].p(bt, tt) : (ct[Ye] = Fs(bt), ct[Ye].c(), ct[Ye].m(oe, null));
        }
        for (; Ye < ct.length; Ye += 1)
          ct[Ye].d(1);
        ct.length = Nt.length;
      }
      (!je || tt & /*wallpaper*/
      1024 && Ce !== (Ce = /*wallpaper*/
      Ie[10] || "Cole a URL aqui...")) && s(Re, "placeholder", Ce), tt & /*tempUrl*/
      16 && Re.value !== /*tempUrl*/
      Ie[4] && x(
        Re,
        /*tempUrl*/
        Ie[4]
      ), (!je || tt & /*winWidth*/
      128 && Ue.value !== /*winWidth*/
      Ie[7]) && (Ue.value = /*winWidth*/
      Ie[7]), (!je || tt & /*winHeight*/
      64 && Ze.value !== /*winHeight*/
      Ie[6]) && (Ze.value = /*winHeight*/
      Ie[6]), (!je || tt & /*cssVariables*/
      32) && s(
        e,
        "style",
        /*cssVariables*/
        Ie[5]
      );
    },
    i(Ie) {
      je || (Ie && Ne(() => {
        je && (Pe || (Pe = We(e, Qe, { duration: 200 }, !0)), Pe.run(1));
      }), je = !0);
    },
    o(Ie) {
      Ie && (Pe || (Pe = We(e, Qe, { duration: 200 }, !1)), Pe.run(0)), je = !1;
    },
    d(Ie) {
      Ie && P(e), It && It.d(), At.d(), Et && Et.d(), Fe(ct, Ie), Ie && Pe && Pe.end(), xe = !1, Te(St);
    }
  };
}
const js = "multiversus-rpg";
function Om(l, e, t) {
  let i, n, o, c, f, u, d, p, { actor: m } = e, { flags: b } = e;
  const v = ml(), h = game.user.isGM;
  let _ = m.img, w = "";
  async function k(L, U) {
    await m.update(
      {
        [`flags.${js}.sheetConfig.${L}`]: U
      },
      { render: !1 }
    );
  }
  function A(L) {
    k("theme", L);
  }
  function y() {
    if (!w) return ui.notifications.warn("Insira uma URL v√°lida.");
    k("wallpaper", w), ui.notifications.info("Wallpaper atualizado.");
  }
  function E(L) {
    const U = L.target.checked;
    k("fastBoot", U), U ? ui.notifications.info("Fast Boot ativado para este personagem.") : ui.notifications.info("Fast Boot desligado. Senha ser√° exigida.");
  }
  function S(L) {
    const z = L.target.value.slice(0, 6);
    k("password", z), z ? ui.notifications.info("Nova senha de acesso definida.") : ui.notifications.info("Senha removida.");
  }
  function O() {
    new FilePicker({
      type: "image",
      current: _,
      callback: async (L) => {
        t(3, _ = L), await m.update({ img: L });
      }
    }).browse();
  }
  async function C(L, U) {
    m.sheet.setPosition({ width: L, height: U }), await m.update(
      {
        [`flags.${js}.sheetConfig.windowSize`]: { width: L, height: U }
      },
      { render: !1 }
    );
  }
  function T() {
    C(800, 700);
  }
  function N() {
    v("close");
  }
  const I = (L) => A(L);
  function D() {
    w = this.value, t(4, w);
  }
  const M = (L) => C(Number(L.target.value), u), G = (L) => C(f, Number(L.target.value));
  return l.$$set = (L) => {
    "actor" in L && t(0, m = L.actor), "flags" in L && t(20, b = L.flags);
  }, l.$$.update = () => {
    var L, U, z, F, W, H, V, J;
    l.$$.dirty & /*flags*/
    1048576 && t(2, i = ((L = b.sheetConfig) == null ? void 0 : L.theme) || "terminal"), l.$$.dirty & /*flags*/
    1048576 && t(10, n = ((U = b.sheetConfig) == null ? void 0 : U.wallpaper) || ""), l.$$.dirty & /*flags*/
    1048576 && t(9, o = ((z = b.sheetConfig) == null ? void 0 : z.fastBoot) || !1), l.$$.dirty & /*flags*/
    1048576 && t(8, c = ((F = b.sheetConfig) == null ? void 0 : F.password) || ""), l.$$.dirty & /*flags*/
    1048576 && t(7, f = ((H = (W = b.sheetConfig) == null ? void 0 : W.windowSize) == null ? void 0 : H.width) || 800), l.$$.dirty & /*flags*/
    1048576 && t(6, u = ((J = (V = b.sheetConfig) == null ? void 0 : V.windowSize) == null ? void 0 : J.height) || 700), l.$$.dirty & /*activeThemeKey*/
    4 && t(1, d = sa[i] || sa.terminal), l.$$.dirty & /*currentThemeData*/
    2 && t(5, p = Object.entries(d.vars).map(([j, X]) => `${j}: ${X};`).join(" "));
  }, [
    m,
    d,
    i,
    _,
    w,
    p,
    u,
    f,
    c,
    o,
    n,
    h,
    A,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    b,
    I,
    D,
    M,
    G
  ];
}
class Sm extends mt {
  constructor(e) {
    super(), pt(this, e, Om, Em, dt, { actor: 0, flags: 20 });
  }
}
const ia = {
  nexus: {
    name: "NEXUS OS (Tech)",
    vars: {
      "--c-primary": "#00ff41",
      "--c-bg": "#050505",
      "--c-panel": "rgba(10, 10, 10, 0.95)",
      "--c-border": "#333",
      "--c-shock": "#eab308",
      "--c-kill": "#ef4444",
      "--f-main": "'Share Tech Mono', monospace",
      "--r-node": "4px",
      // Arredondamento do node
      "--r-slot": "0px"
      // Arredondamento do HP (quadrado)
    },
    // CSS Customizado para este tema (Muda formas e comportamentos)
    css: `
            .limb-node { border: 1px solid var(--c-border); box-shadow: 0 0 10px rgba(0,0,0,0.5); }
            .hp-slot { border: 1px solid #444; }
            .hp-slot.shock { box-shadow: 0 0 5px var(--c-shock); }
            .loc-tag { text-transform: uppercase; letter-spacing: 1px; }
        `
  },
  ether: {
    name: "ETHER CRYSTAL (Magic)",
    vars: {
      "--c-primary": "#00ffff",
      "--c-bg": "#0a0a15",
      "--c-panel": "rgba(20, 30, 50, 0.8)",
      "--c-border": "#4466aa",
      "--c-shock": "#d8b4fe",
      // Roxo claro
      "--c-kill": "#ff0055",
      // Magenta
      "--f-main": "'Cinzel', serif",
      "--r-node": "0px",
      "--r-slot": "0px"
    },
    css: `
            /* Transforma caixas em CRISTAIS */
            .hp-slot { 
                transform: rotate(45deg); 
                margin: 4px; 
                box-shadow: inset 0 0 2px rgba(255,255,255,0.3);
                border: 1px solid rgba(255,255,255,0.2);
            }
            .hp-grid { padding: 5px; } /* Espa√ßo extra para a rota√ß√£o */
            
            .limb-node { 
                background: linear-gradient(135deg, rgba(0,0,0,0.8), rgba(20,30,60,0.9));
                border: 1px solid var(--c-primary);
                box-shadow: 0 0 15px var(--c-primary);
            }
            .loc-tag { background: transparent; border: 1px solid var(--c-primary); color: var(--c-primary); }
        `
  },
  bio: {
    name: "SYMBIOTE (Organic)",
    vars: {
      "--c-primary": "#88ff00",
      "--c-bg": "#1a0505",
      "--c-panel": "rgba(40, 10, 10, 0.9)",
      "--c-border": "#500",
      "--c-shock": "#ffff00",
      "--c-kill": "#550000",
      "--f-main": "'Courier New', monospace",
      "--r-node": "15px",
      "--r-slot": "50%"
      // C√©lulas Redondas
    },
    css: `
            /* C√©lulas Vivas */
            .hp-slot { 
                border-radius: 50%; 
                border: none;
                background: #311;
                box-shadow: inset -2px -2px 5px rgba(0,0,0,0.5);
            }
            .hp-slot.shock, .hp-slot.killing {
                animation: pulseBio 2s infinite;
            }
            @keyframes pulseBio { 0% { transform: scale(0.95); } 50% { transform: scale(1.1); } 100% { transform: scale(0.95); } }
            
            .limb-node { border: 2px solid #500; }
        `
  }
};
function Vs(l, e, t) {
  const i = l.slice();
  return i[79] = e[t][0], i[80] = e[t][1], i;
}
function Ws(l, e, t) {
  const i = l.slice();
  return i[79] = e[t][0], i[83] = e[t][1], i;
}
function Xs(l, e, t) {
  const i = l.slice();
  return i[86] = e[t], i[87] = e, i[88] = t, i;
}
function Js(l, e, t) {
  const i = l.slice();
  i[89] = e[t], i[92] = t;
  const n = (
    /*getSlotState*/
    i[33](
      /*limb*/
      i[86],
      /*i*/
      i[92]
    )
  );
  return i[90] = n, i;
}
function Ys(l) {
  let e, t;
  return {
    c() {
      e = r("img"), at(e.src, t = /*currentBg*/
      l[17]) || s(e, "src", t), s(e, "class", "bg-layer svelte-y5s4xg"), s(e, "alt", "bg");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n[0] & /*currentBg*/
      131072 && !at(e.src, t = /*currentBg*/
      i[17]) && s(e, "src", t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function Qs(l) {
  let e, t, i, n, o, c, f, u;
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "IMG PERSONAGEM", i = g(), n = r("button"), n.textContent = "IMG FUNDO (GIF)", o = g(), c = r("button"), c.textContent = "+ MEMBRO", s(t, "class", "svelte-y5s4xg"), s(n, "class", "svelte-y5s4xg"), s(c, "class", "add svelte-y5s4xg"), s(e, "class", "edit-overlay-controls svelte-y5s4xg");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), f || (u = [
        R(
          t,
          "click",
          /*click_handler_4*/
          l[47]
        ),
        R(
          n,
          "click",
          /*click_handler_5*/
          l[48]
        ),
        R(
          c,
          "click",
          /*addLimb*/
          l[32]
        )
      ], f = !0);
    },
    p: ge,
    d(d) {
      d && P(e), f = !1, Te(u);
    }
  };
}
function Cm(l) {
  let e, t = (
    /*limb*/
    l[86].loc + ""
  ), i, n, o, c = (
    /*limb*/
    l[86].name + ""
  ), f;
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("span"), f = B(c), s(e, "class", "loc"), s(o, "class", "name svelte-y5s4xg");
    },
    m(u, d) {
      q(u, e, d), a(e, i), q(u, n, d), q(u, o, d), a(o, f);
    },
    p(u, d) {
      d[0] & /*currentLimbs*/
      8 && t !== (t = /*limb*/
      u[86].loc + "") && te(i, t), d[0] & /*currentLimbs*/
      8 && c !== (c = /*limb*/
      u[86].name + "") && te(f, c);
    },
    d(u) {
      u && (P(e), P(n), P(o));
    }
  };
}
function Im(l) {
  let e, t, i, n, o;
  function c() {
    l[49].call(
      e,
      /*each_value_2*/
      l[87],
      /*limb_index*/
      l[88]
    );
  }
  function f() {
    l[50].call(
      i,
      /*each_value_2*/
      l[87],
      /*limb_index*/
      l[88]
    );
  }
  return {
    c() {
      e = r("input"), t = g(), i = r("input"), s(e, "class", "mini-edit svelte-y5s4xg"), s(e, "placeholder", "Loc"), s(i, "class", "mini-edit svelte-y5s4xg");
    },
    m(u, d) {
      q(u, e, d), x(
        e,
        /*limb*/
        l[86].loc
      ), q(u, t, d), q(u, i, d), x(
        i,
        /*limb*/
        l[86].name
      ), n || (o = [
        R(e, "input", c),
        R(
          e,
          "change",
          /*saveData*/
          l[20]
        ),
        R(i, "input", f),
        R(
          i,
          "change",
          /*saveData*/
          l[20]
        )
      ], n = !0);
    },
    p(u, d) {
      l = u, d[0] & /*currentLimbs*/
      8 && e.value !== /*limb*/
      l[86].loc && x(
        e,
        /*limb*/
        l[86].loc
      ), d[0] & /*currentLimbs*/
      8 && i.value !== /*limb*/
      l[86].name && x(
        i,
        /*limb*/
        l[86].name
      );
    },
    d(u) {
      u && (P(e), P(t), P(i)), n = !1, Te(o);
    }
  };
}
function Ks(l) {
  let e;
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-biohazard"), ae(
        e,
        "color",
        /*slot*/
        l[90].data.color
      );
    },
    m(t, i) {
      q(t, e, i);
    },
    p(t, i) {
      i[0] & /*currentLimbs*/
      8 && ae(
        e,
        "color",
        /*slot*/
        t[90].data.color
      );
    },
    d(t) {
      t && P(e);
    }
  };
}
function Zs(l) {
  let e, t, i, n, o, c, f = (
    /*slot*/
    l[90].status === "trauma" && Ks(l)
  );
  function u(...p) {
    return (
      /*drop_handler*/
      l[51](
        /*limb*/
        l[86],
        /*i*/
        l[92],
        ...p
      )
    );
  }
  function d() {
    return (
      /*contextmenu_handler*/
      l[52](
        /*limb*/
        l[86],
        /*slot*/
        l[90]
      )
    );
  }
  return {
    c() {
      e = r("div"), f && f.c(), t = g(), s(e, "class", i = "hp-slot " + /*slot*/
      l[90].status + " svelte-y5s4xg"), s(e, "title", n = /*slot*/
      l[90].status === "trauma" ? (
        /*slot*/
        l[90].data.label
      ) : "");
    },
    m(p, m) {
      q(p, e, m), f && f.m(e, null), a(e, t), o || (c = [
        R(e, "dragover", ri(
          /*dragover_handler_1*/
          l[42]
        )),
        R(e, "drop", Lt(u)),
        R(e, "contextmenu", Lt(ri(d)))
      ], o = !0);
    },
    p(p, m) {
      l = p, /*slot*/
      l[90].status === "trauma" ? f ? f.p(l, m) : (f = Ks(l), f.c(), f.m(e, t)) : f && (f.d(1), f = null), m[0] & /*currentLimbs*/
      8 && i !== (i = "hp-slot " + /*slot*/
      l[90].status + " svelte-y5s4xg") && s(e, "class", i), m[0] & /*currentLimbs*/
      8 && n !== (n = /*slot*/
      l[90].status === "trauma" ? (
        /*slot*/
        l[90].data.label
      ) : "") && s(e, "title", n);
    },
    d(p) {
      p && P(e), f && f.d(), o = !1, Te(c);
    }
  };
}
function xs(l) {
  let e, t = (
    /*limb*/
    l[86].lar + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "a-flag l svelte-y5s4xg");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*currentLimbs*/
      8 && t !== (t = /*limb*/
      n[86].lar + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function $s(l) {
  let e, t = (
    /*limb*/
    l[86].har + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "a-flag h svelte-y5s4xg");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*currentLimbs*/
      8 && t !== (t = /*limb*/
      n[86].har + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function en(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_6*/
      l[53](
        /*limb*/
        l[86]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "√ó", s(e, "class", "node-del svelte-y5s4xg");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", Lt(n)), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function tn(l, e) {
  let t, i, n, o, c, f, u, d, p, m, b, v, h;
  function _(N, I) {
    return (
      /*editingMode*/
      N[5] ? Im : Cm
    );
  }
  let w = _(e), k = w(e), A = ce(Array(
    /*limb*/
    e[86].hp
  )), y = [];
  for (let N = 0; N < A.length; N += 1)
    y[N] = Zs(Js(e, A, N));
  let E = (
    /*limb*/
    e[86].lar > 0 && xs(e)
  ), S = (
    /*limb*/
    e[86].har > 0 && $s(e)
  ), O = (
    /*editingMode*/
    e[5] && en(e)
  );
  function C(...N) {
    return (
      /*dragstart_handler*/
      e[54](
        /*limb*/
        e[86],
        ...N
      )
    );
  }
  function T() {
    return (
      /*click_handler_7*/
      e[55](
        /*limb*/
        e[86]
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), k.c(), n = g(), o = r("div");
      for (let N = 0; N < y.length; N += 1)
        y[N].c();
      c = g(), f = r("div"), E && E.c(), u = g(), S && S.c(), d = g(), O && O.c(), p = g(), s(i, "class", "node-header svelte-y5s4xg"), s(o, "class", "hp-grid svelte-y5s4xg"), s(f, "class", "armor-flags svelte-y5s4xg"), s(t, "class", m = "limb-node " + /*selectedLimbId*/
      (e[2] === /*limb*/
      e[86].id ? "selected" : "") + " svelte-y5s4xg"), ae(
        t,
        "left",
        /*limb*/
        e[86].x + "%"
      ), ae(
        t,
        "top",
        /*limb*/
        e[86].y + "%"
      ), s(
        t,
        "draggable",
        /*editingMode*/
        e[5]
      ), this.first = t;
    },
    m(N, I) {
      q(N, t, I), a(t, i), k.m(i, null), a(t, n), a(t, o);
      for (let D = 0; D < y.length; D += 1)
        y[D] && y[D].m(o, null);
      a(t, c), a(t, f), E && E.m(f, null), a(f, u), S && S.m(f, null), a(t, d), O && O.m(t, null), a(t, p), v || (h = [
        R(t, "dragstart", C),
        R(t, "click", T)
      ], v = !0);
    },
    p(N, I) {
      if (e = N, w === (w = _(e)) && k ? k.p(e, I) : (k.d(1), k = w(e), k && (k.c(), k.m(i, null))), I[0] & /*currentLimbs, onTraumaDrop, removeTrauma*/
      100663304 | I[1] & /*getSlotState*/
      4) {
        A = ce(Array(
          /*limb*/
          e[86].hp
        ));
        let D;
        for (D = 0; D < A.length; D += 1) {
          const M = Js(e, A, D);
          y[D] ? y[D].p(M, I) : (y[D] = Zs(M), y[D].c(), y[D].m(o, null));
        }
        for (; D < y.length; D += 1)
          y[D].d(1);
        y.length = A.length;
      }
      /*limb*/
      e[86].lar > 0 ? E ? E.p(e, I) : (E = xs(e), E.c(), E.m(f, u)) : E && (E.d(1), E = null), /*limb*/
      e[86].har > 0 ? S ? S.p(e, I) : (S = $s(e), S.c(), S.m(f, null)) : S && (S.d(1), S = null), /*editingMode*/
      e[5] ? O ? O.p(e, I) : (O = en(e), O.c(), O.m(t, p)) : O && (O.d(1), O = null), I[0] & /*selectedLimbId, currentLimbs*/
      12 && m !== (m = "limb-node " + /*selectedLimbId*/
      (e[2] === /*limb*/
      e[86].id ? "selected" : "") + " svelte-y5s4xg") && s(t, "class", m), I[0] & /*currentLimbs*/
      8 && ae(
        t,
        "left",
        /*limb*/
        e[86].x + "%"
      ), I[0] & /*currentLimbs*/
      8 && ae(
        t,
        "top",
        /*limb*/
        e[86].y + "%"
      ), I[0] & /*editingMode*/
      32 && s(
        t,
        "draggable",
        /*editingMode*/
        e[5]
      );
    },
    i(N) {
      N && (b || Ne(() => {
        b = st(t, Qe, {}), b.start();
      }));
    },
    o: ge,
    d(N) {
      N && P(t), k.d(), Fe(y, N), E && E.d(), S && S.d(), O && O.d(), v = !1, Te(h);
    }
  };
}
function ln(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G;
  return {
    c() {
      e = r("div"), t = r("label"), i = B("L "), n = r("input"), o = g(), c = r("label"), f = B("H "), u = r("input"), d = g(), p = r("label"), m = B("HP "), b = r("input"), v = g(), h = r("div"), _ = r("div"), w = r("label"), w.textContent = "SHOCK", k = r("input"), A = g(), y = r("div"), E = r("label"), E.textContent = "KILL", S = r("input"), O = g(), C = r("button"), C.textContent = "DANO", T = g(), N = r("div"), I = r("input"), D = r("button"), D.textContent = "+", s(n, "type", "number"), s(n, "class", "svelte-y5s4xg"), s(u, "type", "number"), s(u, "class", "svelte-y5s4xg"), s(b, "type", "number"), s(b, "class", "svelte-y5s4xg"), s(e, "class", "armor-edit svelte-y5s4xg"), ae(w, "color", "var(--c-shock)"), s(k, "type", "number"), s(k, "class", "svelte-y5s4xg"), s(_, "class", "grp"), ae(E, "color", "var(--c-kill)"), s(S, "type", "number"), s(S, "class", "svelte-y5s4xg"), s(y, "class", "grp"), s(h, "class", "dmg-inputs svelte-y5s4xg"), s(C, "class", "btn-hit svelte-y5s4xg"), s(I, "type", "number"), s(I, "placeholder", "Cura"), s(I, "class", "svelte-y5s4xg"), s(D, "class", "svelte-y5s4xg"), s(N, "class", "heal-row svelte-y5s4xg");
    },
    m(L, U) {
      q(L, e, U), a(e, t), a(t, i), a(t, n), x(
        n,
        /*selectedLimb*/
        l[16].lar
      ), a(e, o), a(e, c), a(c, f), a(c, u), x(
        u,
        /*selectedLimb*/
        l[16].har
      ), a(e, d), a(e, p), a(p, m), a(p, b), x(
        b,
        /*selectedLimb*/
        l[16].hp
      ), q(L, v, U), q(L, h, U), a(h, _), a(_, w), a(_, k), x(
        k,
        /*inputShock*/
        l[11]
      ), a(h, A), a(h, y), a(y, E), a(y, S), x(
        S,
        /*inputKilling*/
        l[12]
      ), q(L, O, U), q(L, C, U), q(L, T, U), q(L, N, U), a(N, I), x(
        I,
        /*inputHeal*/
        l[13]
      ), a(N, D), M || (G = [
        R(
          n,
          "input",
          /*input0_input_handler_1*/
          l[56]
        ),
        R(
          n,
          "change",
          /*saveData*/
          l[20]
        ),
        R(
          u,
          "input",
          /*input1_input_handler_1*/
          l[57]
        ),
        R(
          u,
          "change",
          /*saveData*/
          l[20]
        ),
        R(
          b,
          "input",
          /*input2_input_handler*/
          l[58]
        ),
        R(
          b,
          "change",
          /*saveData*/
          l[20]
        ),
        R(
          k,
          "input",
          /*input3_input_handler*/
          l[59]
        ),
        R(
          S,
          "input",
          /*input4_input_handler*/
          l[60]
        ),
        R(
          C,
          "click",
          /*applyDamage*/
          l[21]
        ),
        R(
          I,
          "input",
          /*input5_input_handler*/
          l[61]
        ),
        R(
          D,
          "click",
          /*applyHeal*/
          l[22]
        )
      ], M = !0);
    },
    p(L, U) {
      U[0] & /*selectedLimb*/
      65536 && Je(n.value) !== /*selectedLimb*/
      L[16].lar && x(
        n,
        /*selectedLimb*/
        L[16].lar
      ), U[0] & /*selectedLimb*/
      65536 && Je(u.value) !== /*selectedLimb*/
      L[16].har && x(
        u,
        /*selectedLimb*/
        L[16].har
      ), U[0] & /*selectedLimb*/
      65536 && Je(b.value) !== /*selectedLimb*/
      L[16].hp && x(
        b,
        /*selectedLimb*/
        L[16].hp
      ), U[0] & /*inputShock*/
      2048 && Je(k.value) !== /*inputShock*/
      L[11] && x(
        k,
        /*inputShock*/
        L[11]
      ), U[0] & /*inputKilling*/
      4096 && Je(S.value) !== /*inputKilling*/
      L[12] && x(
        S,
        /*inputKilling*/
        L[12]
      ), U[0] & /*inputHeal*/
      8192 && Je(I.value) !== /*inputHeal*/
      L[13] && x(
        I,
        /*inputHeal*/
        L[13]
      );
    },
    d(L) {
      L && (P(e), P(v), P(h), P(O), P(C), P(T), P(N)), M = !1, Te(G);
    }
  };
}
function an(l) {
  let e, t, i, n, o = (
    /*data*/
    l[83].label + ""
  ), c, f, u, d, p, m;
  function b() {
    return (
      /*click_handler_9*/
      l[63](
        /*key*/
        l[79]
      )
    );
  }
  function v(...h) {
    return (
      /*dragstart_handler_1*/
      l[64](
        /*key*/
        l[79],
        ...h
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("span"), c = B(o), f = g(), u = r("button"), u.textContent = "√ó", d = g(), s(t, "class", "fas fa-virus"), ae(
        t,
        "color",
        /*data*/
        l[83].color
      ), s(n, "class", "t-name"), s(u, "class", "t-del svelte-y5s4xg"), s(e, "class", "t-item svelte-y5s4xg"), s(e, "draggable", "true");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(e, i), a(e, n), a(n, c), a(e, f), a(e, u), a(e, d), p || (m = [
        R(u, "click", b),
        R(e, "dragstart", v)
      ], p = !0);
    },
    p(h, _) {
      l = h, _[0] & /*traumaDB*/
      16 && ae(
        t,
        "color",
        /*data*/
        l[83].color
      ), _[0] & /*traumaDB*/
      16 && o !== (o = /*data*/
      l[83].label + "") && te(c, o);
    },
    d(h) {
      h && P(e), p = !1, Te(m);
    }
  };
}
function sn(l) {
  let e, t, i, n, o = (
    /*imgModalType*/
    l[9] === "sil" ? "PERSONAGEM" : "FUNDO"
  ), c, f, u, d, p, m, b, v, h, _, w, k, A, y;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), n = B("SELECIONAR "), c = B(o), f = g(), u = r("p"), u.textContent = "Cole uma URL da internet (Discord/Imgur) ou abra a pasta.", d = g(), p = r("input"), m = g(), b = r("div"), v = r("button"), v.textContent = "USAR URL", h = g(), _ = r("button"), _.textContent = "PASTA üìÇ", w = g(), k = r("button"), k.textContent = "CANCELAR", ae(u, "font-size", "10px"), ae(u, "color", "#888"), ae(u, "margin-bottom", "10px"), s(p, "type", "text"), s(p, "placeholder", "https://..."), p.autofocus = !0, s(p, "class", "svelte-y5s4xg"), s(v, "class", "svelte-y5s4xg"), ae(_, "background", "#444"), s(_, "class", "svelte-y5s4xg"), s(b, "class", "row svelte-y5s4xg"), s(k, "class", "close-btn svelte-y5s4xg"), ae(k, "margin-top", "5px"), s(t, "class", "modal-win svelte-y5s4xg"), s(e, "class", "modal-overlay svelte-y5s4xg");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(i, n), a(i, c), a(t, f), a(t, u), a(t, d), a(t, p), x(
        p,
        /*imgModalUrl*/
        l[10]
      ), a(t, m), a(t, b), a(b, v), a(b, h), a(b, _), a(t, w), a(t, k), p.focus(), A || (y = [
        R(
          p,
          "input",
          /*input_input_handler*/
          l[65]
        ),
        R(
          v,
          "click",
          /*click_handler_10*/
          l[66]
        ),
        R(
          _,
          "click",
          /*openFilePicker*/
          l[31]
        ),
        R(
          k,
          "click",
          /*click_handler_11*/
          l[67]
        )
      ], A = !0);
    },
    p(E, S) {
      S[0] & /*imgModalType*/
      512 && o !== (o = /*imgModalType*/
      E[9] === "sil" ? "PERSONAGEM" : "FUNDO") && te(c, o), S[0] & /*imgModalUrl*/
      1024 && p.value !== /*imgModalUrl*/
      E[10] && x(
        p,
        /*imgModalUrl*/
        E[10]
      );
    },
    d(E) {
      E && P(e), A = !1, Te(y);
    }
  };
}
function nn(l) {
  let e, t, i, n, o, c, f, u, d, p = ce(Object.entries(ia || {})), m = [];
  for (let b = 0; b < p.length; b += 1)
    m[b] = on(Vs(l, p, b));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "TEMAS VISUAIS", n = g(), o = r("div");
      for (let b = 0; b < m.length; b += 1)
        m[b].c();
      c = g(), f = r("button"), f.textContent = "FECHAR", s(o, "class", "theme-list svelte-y5s4xg"), s(f, "class", "close-btn svelte-y5s4xg"), s(t, "class", "modal-win svelte-y5s4xg"), s(e, "class", "modal-overlay svelte-y5s4xg");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let h = 0; h < m.length; h += 1)
        m[h] && m[h].m(o, null);
      a(t, c), a(t, f), u || (d = R(
        f,
        "click",
        /*click_handler_13*/
        l[69]
      ), u = !0);
    },
    p(b, v) {
      if (v[0] & /*currentThemeKey*/
      1) {
        p = ce(Object.entries(ia || {}));
        let h;
        for (h = 0; h < p.length; h += 1) {
          const _ = Vs(b, p, h);
          m[h] ? m[h].p(_, v) : (m[h] = on(_), m[h].c(), m[h].m(o, null));
        }
        for (; h < m.length; h += 1)
          m[h].d(1);
        m.length = p.length;
      }
    },
    d(b) {
      b && P(e), Fe(m, b), u = !1, d();
    }
  };
}
function on(l) {
  let e, t = (
    /*val*/
    l[80].name + ""
  ), i, n, o, c;
  function f() {
    return (
      /*click_handler_12*/
      l[68](
        /*key*/
        l[79]
      )
    );
  }
  return {
    c() {
      e = r("button"), i = B(t), s(e, "class", n = "theme-btn " + /*key*/
      (l[79] === /*currentThemeKey*/
      l[0] ? "selected" : "") + " svelte-y5s4xg");
    },
    m(u, d) {
      q(u, e, d), a(e, i), o || (c = R(e, "click", f), o = !0);
    },
    p(u, d) {
      l = u, d[0] & /*currentThemeKey*/
      1 && n !== (n = "theme-btn " + /*key*/
      (l[79] === /*currentThemeKey*/
      l[0] ? "selected" : "") + " svelte-y5s4xg") && s(e, "class", n);
    },
    d(u) {
      u && P(e), o = !1, c();
    }
  };
}
function rn(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "NOVA CONDI√á√ÉO", n = g(), o = r("input"), c = g(), f = r("input"), u = g(), d = r("input"), p = g(), m = r("div"), b = r("input"), v = g(), h = r("button"), h.textContent = "SALVAR", _ = g(), w = r("button"), w.textContent = "CANCEL", s(o, "type", "text"), s(o, "placeholder", "ID (ex: acid)"), s(o, "class", "svelte-y5s4xg"), s(f, "type", "text"), s(f, "placeholder", "Nome (ex: √Åcido)"), s(f, "class", "svelte-y5s4xg"), s(d, "type", "text"), s(d, "placeholder", "Desc"), s(d, "class", "svelte-y5s4xg"), s(b, "type", "color"), s(b, "class", "svelte-y5s4xg"), s(h, "class", "svelte-y5s4xg"), s(w, "class", "close-btn svelte-y5s4xg"), s(m, "class", "row svelte-y5s4xg"), s(t, "class", "modal-win trauma-form svelte-y5s4xg"), s(e, "class", "modal-overlay svelte-y5s4xg");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(t, i), a(t, n), a(t, o), x(
        o,
        /*newTrauma*/
        l[14].key
      ), a(t, c), a(t, f), x(
        f,
        /*newTrauma*/
        l[14].label
      ), a(t, u), a(t, d), x(
        d,
        /*newTrauma*/
        l[14].desc
      ), a(t, p), a(t, m), a(m, b), x(
        b,
        /*newTrauma*/
        l[14].color
      ), a(m, v), a(m, h), a(m, _), a(m, w), k || (A = [
        R(
          o,
          "input",
          /*input0_input_handler_2*/
          l[70]
        ),
        R(
          f,
          "input",
          /*input1_input_handler_2*/
          l[71]
        ),
        R(
          d,
          "input",
          /*input2_input_handler_1*/
          l[72]
        ),
        R(
          b,
          "input",
          /*input3_input_handler_1*/
          l[73]
        ),
        R(
          h,
          "click",
          /*createGlobalTrauma*/
          l[27]
        ),
        R(
          w,
          "click",
          /*click_handler_14*/
          l[74]
        )
      ], k = !0);
    },
    p(y, E) {
      E[0] & /*newTrauma*/
      16384 && o.value !== /*newTrauma*/
      y[14].key && x(
        o,
        /*newTrauma*/
        y[14].key
      ), E[0] & /*newTrauma*/
      16384 && f.value !== /*newTrauma*/
      y[14].label && x(
        f,
        /*newTrauma*/
        y[14].label
      ), E[0] & /*newTrauma*/
      16384 && d.value !== /*newTrauma*/
      y[14].desc && x(
        d,
        /*newTrauma*/
        y[14].desc
      ), E[0] & /*newTrauma*/
      16384 && x(
        b,
        /*newTrauma*/
        y[14].color
      );
    },
    d(y) {
      y && P(e), k = !1, Te(A);
    }
  };
}
function Tm(l) {
  let e, t, i = `<style>${/*theme*/
  l[19].css || ""}</style>`, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G = [], L = /* @__PURE__ */ new Map(), U, z, F, W, H = (
    /*selectedLimb*/
    (l[16] ? (
      /*selectedLimb*/
      l[16].name
    ) : "SELECIONE ALVO") + ""
  ), V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De = (
    /*currentBg*/
    l[17] && Ys(l)
  ), we = (
    /*editingMode*/
    l[5] && Qs(l)
  ), ke = ce(
    /*currentLimbs*/
    l[3]
  );
  const me = (_e) => (
    /*limb*/
    _e[86].id
  );
  for (let _e = 0; _e < ke.length; _e += 1) {
    let ue = Xs(l, ke, _e), Re = me(ue);
    L.set(Re, G[_e] = tn(Re, ue));
  }
  let re = (
    /*selectedLimb*/
    l[16] && ln(l)
  ), ye = ce(Object.entries(
    /*traumaDB*/
    l[4]
  )), oe = [];
  for (let _e = 0; _e < ye.length; _e += 1)
    oe[_e] = an(Ws(l, ye, _e));
  let be = (
    /*showImgModal*/
    l[8] && sn(l)
  ), de = (
    /*showConfig*/
    l[6] && nn(l)
  ), Oe = (
    /*showTraumaCreator*/
    l[7] && rn(l)
  );
  return {
    c() {
      e = r("div"), t = new ps(!1), n = g(), o = r("div"), c = r("div"), f = r("button"), u = B("BASE"), p = g(), m = r("button"), b = B("TRANSFORMA√á√ÉO"), h = g(), _ = r("div"), w = r("button"), k = r("i"), y = g(), E = r("button"), E.innerHTML = '<i class="fas fa-palette"></i>', S = g(), O = r("div"), C = r("div"), De && De.c(), T = g(), N = r("img"), D = g(), we && we.c(), M = g();
      for (let _e = 0; _e < G.length; _e += 1)
        G[_e].c();
      U = g(), z = r("div"), F = r("div"), W = r("div"), V = B(H), J = g(), re && re.c(), j = g(), X = r("div"), K = r("div"), Z = r("span"), Z.textContent = "CONDI√á√ïES", le = g(), $ = r("button"), $.textContent = "+", se = g(), Y = r("div");
      for (let _e = 0; _e < oe.length; _e += 1)
        oe[_e].c();
      Q = g(), be && be.c(), ie = g(), de && de.c(), ee = g(), Oe && Oe.c(), t.a = n, s(f, "class", d = "tab " + /*activeForm*/
      (l[1] === "base" ? "active" : "") + " svelte-y5s4xg"), s(m, "class", v = "tab " + /*activeForm*/
      (l[1] === "trans" ? "active trans-mode" : "") + " svelte-y5s4xg"), s(c, "class", "tabs svelte-y5s4xg"), s(k, "class", "fas fa-edit"), s(w, "class", A = "tool-btn " + /*editingMode*/
      (l[5] ? "on" : "") + " svelte-y5s4xg"), s(w, "title", "Modo Edi√ß√£o"), s(E, "class", "tool-btn svelte-y5s4xg"), s(E, "title", "Temas"), s(_, "class", "tools"), s(o, "class", "dash-header svelte-y5s4xg"), at(N.src, I = /*currentImg*/
      l[18]) || s(N, "src", I), s(N, "class", "silhouette-layer svelte-y5s4xg"), s(N, "alt", "silhouette"), s(C, "class", "canvas-area svelte-y5s4xg"), s(W, "class", "calc-title svelte-y5s4xg"), s(F, "class", "calc-box svelte-y5s4xg"), s($, "class", "add-cond svelte-y5s4xg"), s(K, "class", "box-title svelte-y5s4xg"), s(Y, "class", "t-list custom-scroll svelte-y5s4xg"), s(X, "class", "trauma-box svelte-y5s4xg"), s(z, "class", "sidebar svelte-y5s4xg"), s(O, "class", "dash-content svelte-y5s4xg"), s(e, "class", "body-dashboard svelte-y5s4xg"), ae(
        e,
        "--c-primary",
        /*theme*/
        l[19].vars["--c-primary"]
      ), ae(
        e,
        "--c-bg",
        /*theme*/
        l[19].vars["--c-bg"]
      ), ae(
        e,
        "--c-panel",
        /*theme*/
        l[19].vars["--c-panel"]
      ), ae(
        e,
        "--c-shock",
        /*theme*/
        l[19].vars["--c-shock"]
      ), ae(
        e,
        "--c-kill",
        /*theme*/
        l[19].vars["--c-kill"]
      ), ae(
        e,
        "--f-main",
        /*theme*/
        l[19].vars["--f-main"]
      ), ae(
        e,
        "--r-node",
        /*theme*/
        l[19].vars["--r-node"]
      ), ae(
        e,
        "--r-slot",
        /*theme*/
        l[19].vars["--r-slot"]
      );
    },
    m(_e, ue) {
      q(_e, e, ue), t.m(i, e), a(e, n), a(e, o), a(o, c), a(c, f), a(f, u), a(c, p), a(c, m), a(m, b), a(o, h), a(o, _), a(_, w), a(w, k), a(_, y), a(_, E), a(e, S), a(e, O), a(O, C), De && De.m(C, null), a(C, T), a(C, N), a(C, D), we && we.m(C, null), a(C, M);
      for (let Re = 0; Re < G.length; Re += 1)
        G[Re] && G[Re].m(C, null);
      a(O, U), a(O, z), a(z, F), a(F, W), a(W, V), a(F, J), re && re.m(F, null), a(z, j), a(z, X), a(X, K), a(K, Z), a(K, le), a(K, $), a(X, se), a(X, Y);
      for (let Re = 0; Re < oe.length; Re += 1)
        oe[Re] && oe[Re].m(Y, null);
      a(e, Q), be && be.m(e, null), a(e, ie), de && de.m(e, null), a(e, ee), Oe && Oe.m(e, null), pe || (Ee = [
        R(
          f,
          "click",
          /*click_handler*/
          l[43]
        ),
        R(
          m,
          "click",
          /*click_handler_1*/
          l[44]
        ),
        R(
          w,
          "click",
          /*click_handler_2*/
          l[45]
        ),
        R(
          E,
          "click",
          /*click_handler_3*/
          l[46]
        ),
        R(C, "dragover", ri(
          /*dragover_handler*/
          l[41]
        )),
        R(
          C,
          "drop",
          /*onCanvasDrop*/
          l[24]
        ),
        R(
          $,
          "click",
          /*click_handler_8*/
          l[62]
        )
      ], pe = !0);
    },
    p(_e, ue) {
      if (ue[0] & /*theme*/
      524288 && i !== (i = `<style>${/*theme*/
      _e[19].css || ""}</style>`) && t.p(i), ue[0] & /*activeForm*/
      2 && d !== (d = "tab " + /*activeForm*/
      (_e[1] === "base" ? "active" : "") + " svelte-y5s4xg") && s(f, "class", d), ue[0] & /*activeForm*/
      2 && v !== (v = "tab " + /*activeForm*/
      (_e[1] === "trans" ? "active trans-mode" : "") + " svelte-y5s4xg") && s(m, "class", v), ue[0] & /*editingMode*/
      32 && A !== (A = "tool-btn " + /*editingMode*/
      (_e[5] ? "on" : "") + " svelte-y5s4xg") && s(w, "class", A), /*currentBg*/
      _e[17] ? De ? De.p(_e, ue) : (De = Ys(_e), De.c(), De.m(C, T)) : De && (De.d(1), De = null), ue[0] & /*currentImg*/
      262144 && !at(N.src, I = /*currentImg*/
      _e[18]) && s(N, "src", I), /*editingMode*/
      _e[5] ? we ? we.p(_e, ue) : (we = Qs(_e), we.c(), we.m(C, M)) : we && (we.d(1), we = null), ue[0] & /*selectedLimbId, currentLimbs, editingMode, onNodeDragStart, saveData, onTraumaDrop, removeTrauma*/
      110100524 | ue[1] & /*getSlotState*/
      4 && (ke = ce(
        /*currentLimbs*/
        _e[3]
      ), G = Tl(G, ue, me, 1, _e, ke, L, C, Qa, tn, null, Xs)), ue[0] & /*selectedLimb*/
      65536 && H !== (H = /*selectedLimb*/
      (_e[16] ? (
        /*selectedLimb*/
        _e[16].name
      ) : "SELECIONE ALVO") + "") && te(V, H), /*selectedLimb*/
      _e[16] ? re ? re.p(_e, ue) : (re = ln(_e), re.c(), re.m(F, null)) : re && (re.d(1), re = null), ue[0] & /*draggingTrauma, traumaDB, deleteGlobalTrauma*/
      268468240) {
        ye = ce(Object.entries(
          /*traumaDB*/
          _e[4]
        ));
        let Re;
        for (Re = 0; Re < ye.length; Re += 1) {
          const Ce = Ws(_e, ye, Re);
          oe[Re] ? oe[Re].p(Ce, ue) : (oe[Re] = an(Ce), oe[Re].c(), oe[Re].m(Y, null));
        }
        for (; Re < oe.length; Re += 1)
          oe[Re].d(1);
        oe.length = ye.length;
      }
      /*showImgModal*/
      _e[8] ? be ? be.p(_e, ue) : (be = sn(_e), be.c(), be.m(e, ie)) : be && (be.d(1), be = null), /*showConfig*/
      _e[6] ? de ? de.p(_e, ue) : (de = nn(_e), de.c(), de.m(e, ee)) : de && (de.d(1), de = null), /*showTraumaCreator*/
      _e[7] ? Oe ? Oe.p(_e, ue) : (Oe = rn(_e), Oe.c(), Oe.m(e, null)) : Oe && (Oe.d(1), Oe = null), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--c-primary",
        /*theme*/
        _e[19].vars["--c-primary"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--c-bg",
        /*theme*/
        _e[19].vars["--c-bg"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--c-panel",
        /*theme*/
        _e[19].vars["--c-panel"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--c-shock",
        /*theme*/
        _e[19].vars["--c-shock"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--c-kill",
        /*theme*/
        _e[19].vars["--c-kill"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--f-main",
        /*theme*/
        _e[19].vars["--f-main"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--r-node",
        /*theme*/
        _e[19].vars["--r-node"]
      ), ue[0] & /*theme*/
      524288 && ae(
        e,
        "--r-slot",
        /*theme*/
        _e[19].vars["--r-slot"]
      );
    },
    i(_e) {
      for (let ue = 0; ue < ke.length; ue += 1)
        ne(G[ue]);
    },
    o: ge,
    d(_e) {
      _e && P(e), De && De.d(), we && we.d();
      for (let ue = 0; ue < G.length; ue += 1)
        G[ue].d();
      re && re.d(), Fe(oe, _e), be && be.d(), de && de.d(), Oe && Oe.d(), pe = !1, Te(Ee);
    }
  };
}
const _l = "multiversus-rpg";
function cn(l, e, t = Object) {
  return game.settings.settings.has(`${_l}.${l}`) || game.settings.register(_l, l, {
    name: l,
    scope: "world",
    config: !1,
    type: t,
    default: e,
    onChange: () => {
    }
  }), game.settings.get(_l, l);
}
function Dm(l, e, t) {
  let i, n, o, c, f, { actor: u } = e, d = cn("combatThemeKey", "nexus", String), m = cn("traumaDB", {
    bullet: {
      icon: "Running Round",
      color: "#fbbf24",
      label: "Bala",
      desc: "Cirurgia."
    },
    cut: {
      icon: "Bleeding Eye",
      color: "#ef4444",
      label: "Corte",
      desc: "Sutura."
    },
    break: {
      icon: "Broken Bone",
      color: "#fff",
      label: "Fratura",
      desc: "Tala."
    }
  }, Object);
  const b = {
    vars: {
      "--c-primary": "#00ff41",
      "--c-bg": "#050505",
      "--c-panel": "#111",
      "--c-shock": "#eab308",
      "--c-kill": "#ef4444",
      "--r-node": "4px",
      "--r-slot": "0px"
    },
    css: ""
  }, v = [
    {
      id: "leg-l",
      name: "P.ESQ",
      loc: "1",
      hp: 4,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 65,
      y: 75
    },
    {
      id: "leg-r",
      name: "P.DIR",
      loc: "2",
      hp: 4,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 35,
      y: 75
    },
    {
      id: "arm-l",
      name: "B.ESQ",
      loc: "3-4",
      hp: 4,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 80,
      y: 40
    },
    {
      id: "arm-r",
      name: "B.DIR",
      loc: "5-6",
      hp: 4,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 20,
      y: 40
    },
    {
      id: "torso",
      name: "TORSO",
      loc: "7-9",
      hp: 7,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 50,
      y: 40
    },
    {
      id: "head",
      name: "CABE√áA",
      loc: "10",
      hp: 4,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 50,
      y: 10
    }
  ];
  let h = "base", _ = u.getFlag(_l, "bg_base") || "", w = u.getFlag(_l, "img_base") || "icons/svg/mystery-man.svg", k = u.getFlag(_l, "bg_trans") || "", A = u.getFlag(_l, "img_trans") || "icons/svg/mystery-man.svg", y = u.getFlag(_l, "limbs_base") || JSON.parse(JSON.stringify(v)), E = u.getFlag(_l, "limbs_trans") || JSON.parse(JSON.stringify(v));
  y = y.map((Be) => ({ ...Be, trauma: Be.trauma || [] })), E = E.map((Be) => ({ ...Be, trauma: Be.trauma || [] }));
  let S = null, O = !1, C = !1, T = !1, N = !1, I = "", D = "", M = null, G = null, L = null, U = {
    key: "",
    label: "",
    color: "#ffffff",
    desc: "",
    icon: "Biohazard"
  };
  async function z() {
    const Be = h === "base" ? "limbs_base" : "limbs_trans";
    h === "base" ? t(39, y = n) : t(40, E = n), await u.update(
      {
        [`flags.${_l}.${Be}`]: n
      },
      { render: !1 }
    );
  }
  async function F() {
    if (!f) return ui.notifications.warn("Selecione um membro!");
    let Be = Number(M || 0), Pe = Number(G || 0);
    const je = Number(f.lar || 0), xe = Number(f.har || 0);
    xe > 0 && (Be = Math.max(0, Be - xe * 2), Pe = Math.max(0, Pe - xe));
    let St = Math.max(0, Be - je), It = Math.min(Pe, je), Dt = Pe - It;
    St += It;
    let Ct = f.killing, At = f.shock;
    const Et = f.hp, Nt = f.trauma.length;
    let ct = Ct + Dt;
    if (ct >= Et)
      t(16, f.killing = Et, f), t(16, f.shock = 0, f);
    else {
      let Ie = At + St, tt = Et - Nt, Ye = ct + Ie;
      if (Ye > tt) {
        let bt = Ye - tt;
        ct += bt, t(16, f.killing = Math.min(tt, ct), f), t(16, f.shock = Math.max(0, tt - f.killing), f);
      } else
        t(16, f.killing = ct, f), t(16, f.shock = Ie, f);
    }
    z(), t(11, M = null), t(12, G = null), f.killing >= f.hp && ui.notifications.error(`${f.name} DESTRU√çDO!`);
  }
  async function W() {
    if (!f) return;
    let Be = Number(L || 0);
    for (; Be > 0; )
      if (f.killing > 0)
        t(16, f.killing--, f), Be--;
      else if (f.shock > 0)
        t(16, f.shock--, f), Be--;
      else break;
    z(), t(13, L = null);
  }
  let H = null;
  function V(Be, Pe) {
    O && (H = Pe);
  }
  function J(Be) {
    if (!O || !H) return;
    const Pe = Be.currentTarget.getBoundingClientRect(), je = (Be.clientX - Pe.left) / Pe.width * 100, xe = (Be.clientY - Pe.top) / Pe.height * 100, St = n.findIndex((It) => It.id === H.id);
    t(3, n[St].x = je, n), t(3, n[St].y = xe, n), H = null, z();
  }
  let j = null;
  function X(Be, Pe, je) {
    if (!j) return;
    const xe = n.findIndex((It) => It.id === Pe), St = n[xe];
    St.trauma = St.trauma.filter((It) => It.index !== je), St.trauma.push({
      id: foundry.utils.randomID(),
      type: j,
      index: je
    }), St.killing <= je && (St.killing = je + 1), t(15, j = null), z();
  }
  function K(Be, Pe) {
    const je = n.findIndex((xe) => xe.id === Be);
    t(3, n[je].trauma = n[je].trauma.filter((xe) => xe.id !== Pe), n), z();
  }
  async function Z() {
    if (!U.key || !U.label) return ui.notifications.warn("Preencha ID e Nome.");
    const Be = {
      ...m,
      [U.key]: { ...U }
    };
    try {
      await game.settings.set(_l, "traumaDB", Be);
    } catch (Pe) {
      console.warn("Sem permiss√£o para salvar Trauma globalmente. Salvando na sess√£o.", Pe);
    }
    t(4, m = Be), t(7, T = !1), t(14, U = {
      key: "",
      label: "",
      color: "#ffffff",
      desc: "",
      icon: "Biohazard"
    });
  }
  async function le(Be) {
    const Pe = { ...m };
    delete Pe[Be];
    try {
      await game.settings.set(_l, "traumaDB", Pe);
    } catch (je) {
      console.warn("Sem permiss√£o para deletar global.", je);
    }
    t(4, m = Pe);
  }
  function $(Be) {
    t(9, I = Be), t(10, D = ""), t(8, N = !0);
  }
  async function se(Be) {
    h === "base" ? I === "sil" ? t(36, w = Be) : t(35, _ = Be) : I === "sil" ? t(38, A = Be) : t(37, k = Be);
    const je = `${I === "sil" ? "img" : "bg"}_${h}`;
    await u.update({ [`flags.${_l}.${je}`]: Be }, { render: !1 }), t(8, N = !1);
  }
  function Y() {
    new FilePicker({
      type: "image",
      callback: (Be) => se(Be)
    }).browse();
  }
  async function Q() {
    const Be = {
      id: foundry.utils.randomID(),
      name: "NOVO",
      loc: "0",
      hp: 3,
      lar: 0,
      har: 0,
      killing: 0,
      shock: 0,
      trauma: [],
      x: 50,
      y: 50
    };
    t(3, n = [...n, Be]), z();
  }
  function ie(Be, Pe) {
    const je = Be.trauma.find((xe) => xe.index === Pe);
    return je ? {
      status: "trauma",
      data: m[je.type] || m.bullet,
      id: je.id
    } : Pe < Be.killing ? { status: "killing" } : Pe < Be.killing + Be.shock ? { status: "shock" } : { status: "empty" };
  }
  function ee(Be) {
    Ol.call(this, l, Be);
  }
  function pe(Be) {
    Ol.call(this, l, Be);
  }
  const Ee = () => t(1, h = "base"), De = () => t(1, h = "trans"), we = () => t(5, O = !O), ke = () => t(6, C = !0), me = () => $("sil"), re = () => $("bg");
  function ye(Be, Pe) {
    Be[Pe].loc = this.value, t(3, n), t(1, h), t(39, y), t(40, E);
  }
  function oe(Be, Pe) {
    Be[Pe].name = this.value, t(3, n), t(1, h), t(39, y), t(40, E);
  }
  const be = (Be, Pe, je) => X(je, Be.id, Pe), de = (Be, Pe) => K(Be.id, Pe.id), Oe = (Be) => {
    t(3, n = n.filter((Pe) => Pe.id !== Be.id)), z();
  }, _e = (Be, Pe) => V(Pe, Be), ue = (Be) => t(2, S = Be.id);
  function Re() {
    f.lar = Je(this.value), t(16, f), t(3, n), t(2, S), t(1, h), t(39, y), t(40, E);
  }
  function Ce() {
    f.har = Je(this.value), t(16, f), t(3, n), t(2, S), t(1, h), t(39, y), t(40, E);
  }
  function He() {
    f.hp = Je(this.value), t(16, f), t(3, n), t(2, S), t(1, h), t(39, y), t(40, E);
  }
  function Ge() {
    M = Je(this.value), t(11, M);
  }
  function Xe() {
    G = Je(this.value), t(12, G);
  }
  function fe() {
    L = Je(this.value), t(13, L);
  }
  const Le = () => t(7, T = !0), qe = (Be) => le(Be), Me = (Be, Pe) => {
    t(15, j = Be);
  };
  function Se() {
    D = this.value, t(10, D);
  }
  const ve = () => se(D), Ue = () => t(8, N = !1), Ve = async (Be) => {
    await game.settings.set(_l, "combatThemeKey", Be), t(0, d = Be);
  }, rt = () => t(6, C = !1);
  function Tt() {
    U.key = this.value, t(14, U);
  }
  function ze() {
    U.label = this.value, t(14, U);
  }
  function it() {
    U.desc = this.value, t(14, U);
  }
  function Ze() {
    U.color = this.value, t(14, U);
  }
  const ut = () => t(7, T = !1);
  return l.$$set = (Be) => {
    "actor" in Be && t(34, u = Be.actor);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*currentThemeKey*/
    1 && t(19, i = (ia == null ? void 0 : ia[d]) || (ia == null ? void 0 : ia.nexus) || b), l.$$.dirty[0] & /*activeForm*/
    2 | l.$$.dirty[1] & /*limbsBase, limbsTrans*/
    768 && t(3, n = h === "base" ? y : E), l.$$.dirty[0] & /*activeForm*/
    2 | l.$$.dirty[1] & /*imgBase, imgTrans*/
    160 && t(18, o = h === "base" ? w : A), l.$$.dirty[0] & /*activeForm*/
    2 | l.$$.dirty[1] & /*bgBase, bgTrans*/
    80 && t(17, c = h === "base" ? _ : k), l.$$.dirty[0] & /*currentLimbs, selectedLimbId*/
    12 && t(16, f = n.find((Be) => Be.id === S));
  }, [
    d,
    h,
    S,
    n,
    m,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    j,
    f,
    c,
    o,
    i,
    z,
    F,
    W,
    V,
    J,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    u,
    _,
    w,
    k,
    A,
    y,
    E,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re,
    Ce,
    He,
    Ge,
    Xe,
    fe,
    Le,
    qe,
    Me,
    Se,
    ve,
    Ue,
    Ve,
    rt,
    Tt,
    ze,
    it,
    Ze,
    ut
  ];
}
class Rm extends mt {
  constructor(e) {
    super(), pt(this, e, Dm, Tm, dt, { actor: 34 }, null, [-1, -1, -1]);
  }
}
function fn(l, e, t) {
  const i = l.slice();
  return i[53] = e[t][0], i[54] = e[t][1], i;
}
function Mm(l, e, t) {
  const i = l.slice();
  return i[53] = e[t], i;
}
function dn(l, e, t) {
  var o, c;
  const i = l.slice();
  i[59] = e[t];
  const n = (
    /*pockets*/
    ((c = (o = i[9]) == null ? void 0 : o.ORGANISMO) == null ? void 0 : c[
      /*t*/
      i[59]
    ]) || 0
  );
  return i[60] = n, i;
}
function un(l, e, t) {
  const i = l.slice();
  return i[63] = e[t], i;
}
function pn(l, e, t) {
  const i = l.slice();
  return i[66] = e[t], i;
}
function mn(l, e, t) {
  const i = l.slice();
  return i[69] = e[t], i;
}
function bn(l, e, t) {
  const i = l.slice();
  return i[72] = e[t][0], i[73] = e[t][1], i;
}
function vn(l, e, t) {
  const i = l.slice();
  return i[76] = e[t], i[78] = t, i;
}
function hn(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "dot svelte-kmel7x"), he(
        e,
        "filled",
        /*i*/
        l[78] >= /*session*/
        l[8].actions_used
      );
    },
    m(t, i) {
      q(t, e, i);
    },
    p(t, i) {
      i[0] & /*session*/
      256 && he(
        e,
        "filled",
        /*i*/
        t[78] >= /*session*/
        t[8].actions_used
      );
    },
    d(t) {
      t && P(e);
    }
  };
}
function Nm(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-sync"></i>', s(e, "class", "gm-reset-btn svelte-kmel7x"), s(e, "title", "Resetar");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*gmResetSession*/
        l[19]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Lm(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus svelte-kmel7x"), s(n, "class", "fas fa-plus svelte-kmel7x"), s(e, "class", "gm-tiny-ctrl svelte-kmel7x");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler_1*/
          l[28]
        ),
        R(
          n,
          "click",
          /*click_handler_2*/
          l[29]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function Pm(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus svelte-kmel7x"), s(n, "class", "fas fa-plus svelte-kmel7x"), s(e, "class", "gm-tiny-ctrl svelte-kmel7x");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler_3*/
          l[30]
        ),
        R(
          n,
          "click",
          /*click_handler_4*/
          l[31]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function qm(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus svelte-kmel7x"), s(n, "class", "fas fa-plus svelte-kmel7x"), s(e, "class", "gm-tiny-ctrl svelte-kmel7x");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler_6*/
          l[33]
        ),
        R(
          n,
          "click",
          /*click_handler_7*/
          l[34]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function Um(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_11*/
      l[38](
        /*key*/
        l[72]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "-", s(e, "class", "gm-adjust minus svelte-kmel7x");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function gn(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_12*/
      l[39](
        /*key*/
        l[72]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "+", s(e, "class", "gm-adjust plus svelte-kmel7x");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function _n(l) {
  let e, t, i, n, o = (
    /*key*/
    l[72].toUpperCase() + ""
  ), c, f, u, d, p, m = (
    /*val*/
    l[73] + ""
  ), b, v, h, _;
  function w() {
    return (
      /*click_handler_10*/
      l[37](
        /*val*/
        l[73],
        /*key*/
        l[72]
      )
    );
  }
  let k = (
    /*isGM*/
    l[11] && Um(l)
  ), A = (
    /*availablePoints*/
    (l[7] > 0 || /*isGM*/
    l[11]) && gn(l)
  );
  return {
    c() {
      e = r("div"), t = r("button"), i = r("i"), n = g(), c = B(o), f = g(), u = r("div"), k && k.c(), d = g(), p = r("span"), b = B(m), v = g(), A && A.c(), s(i, "class", "fas fa-dice-d20"), s(t, "class", "roll-btn svelte-kmel7x"), s(p, "class", "val"), s(u, "class", "val-ctrl svelte-kmel7x"), s(e, "class", "disc-row svelte-kmel7x");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(t, i), a(t, n), a(t, c), a(e, f), a(e, u), k && k.m(u, null), a(u, d), a(u, p), a(p, b), a(u, v), A && A.m(u, null), h || (_ = R(t, "click", w), h = !0);
    },
    p(y, E) {
      l = y, E[0] & /*disciplines*/
      4 && o !== (o = /*key*/
      l[72].toUpperCase() + "") && te(c, o), /*isGM*/
      l[11] && k.p(l, E), E[0] & /*disciplines*/
      4 && m !== (m = /*val*/
      l[73] + "") && te(b, m), /*availablePoints*/
      l[7] > 0 || /*isGM*/
      l[11] ? A ? A.p(l, E) : (A = gn(l), A.c(), A.m(u, null)) : A && (A.d(1), A = null);
    },
    d(y) {
      y && P(e), k && k.d(), A && A.d(), h = !1, _();
    }
  };
}
function kn(l) {
  let e, t = (
    /*r*/
    l[69].label + ""
  ), i;
  return {
    c() {
      e = r("div"), i = B(t), s(e, "class", "col-rarity"), ae(
        e,
        "color",
        /*r*/
        l[69].color
      );
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function wn(l) {
  var u, d;
  let e, t = (
    /*pockets*/
    (((d = (u = l[9]) == null ? void 0 : u[
      /*type*/
      l[63]
    ]) == null ? void 0 : d[
      /*tier*/
      l[66]
    ]) || 0) + ""
  ), i, n, o;
  function c() {
    return (
      /*click_handler_15*/
      l[42](
        /*type*/
        l[63],
        /*tier*/
        l[66]
      )
    );
  }
  function f() {
    return (
      /*contextmenu_handler*/
      l[43](
        /*type*/
        l[63],
        /*tier*/
        l[66]
      )
    );
  }
  return {
    c() {
      var p, m;
      e = r("div"), i = B(t), s(e, "class", "inv-slot svelte-kmel7x"), s(
        e,
        "title",
        /*isGM*/
        l[11] ? "GM: Clique esquerdo para add, direito para remover" : ""
      ), he(
        e,
        "has-item",
        /*pockets*/
        (((m = (p = l[9]) == null ? void 0 : p[
          /*type*/
          l[63]
        ]) == null ? void 0 : m[
          /*tier*/
          l[66]
        ]) || 0) > 0
      );
    },
    m(p, m) {
      q(p, e, m), a(e, i), n || (o = [
        R(e, "click", c),
        R(e, "contextmenu", ri(f))
      ], n = !0);
    },
    p(p, m) {
      var b, v, h, _;
      l = p, m[0] & /*pockets*/
      512 && t !== (t = /*pockets*/
      (((v = (b = l[9]) == null ? void 0 : b[
        /*type*/
        l[63]
      ]) == null ? void 0 : v[
        /*tier*/
        l[66]
      ]) || 0) + "") && te(i, t), m[0] & /*pockets*/
      512 && he(
        e,
        "has-item",
        /*pockets*/
        (((_ = (h = l[9]) == null ? void 0 : h[
          /*type*/
          l[63]
        ]) == null ? void 0 : _[
          /*tier*/
          l[66]
        ]) || 0) > 0
      );
    },
    d(p) {
      p && P(e), n = !1, Te(o);
    }
  };
}
function yn(l) {
  let e, t, i, n, o = ce([1, 2, 3, 4, 5, 6]), c = [];
  for (let f = 0; f < 6; f += 1)
    c[f] = wn(pn(l, o, f));
  return {
    c() {
      e = r("div"), t = r("div"), t.textContent = `${/*type*/
      l[63]}`, i = g();
      for (let f = 0; f < 6; f += 1)
        c[f].c();
      n = g(), s(t, "class", "type-name svelte-kmel7x"), s(e, "class", "inv-row svelte-kmel7x");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i);
      for (let d = 0; d < 6; d += 1)
        c[d] && c[d].m(e, null);
      a(e, n);
    },
    p(f, u) {
      if (u[0] & /*isGM, pockets, gmAddItem*/
      264704) {
        o = ce([1, 2, 3, 4, 5, 6]);
        let d;
        for (d = 0; d < 6; d += 1) {
          const p = pn(f, o, d);
          c[d] ? c[d].p(p, u) : (c[d] = wn(p), c[d].c(), c[d].m(e, n));
        }
        for (; d < 6; d += 1)
          c[d].d(1);
      }
    },
    d(f) {
      f && P(e), Fe(c, f);
    }
  };
}
function An(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k = ce([1, 2, 3, 4, 5, 6]), A = [];
  for (let y = 0; y < 6; y += 1)
    A[y] = En(dn(l, k, y));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), n.textContent = "CONSUMIR ORGANISMO", o = g(), c = r("i"), f = g(), u = r("div"), d = r("p"), d.textContent = "Selecione a qualidade do suprimento:", p = g(), m = r("div");
      for (let y = 0; y < 6; y += 1)
        A[y].c();
      s(c, "class", "fas fa-times close svelte-kmel7x"), s(i, "class", "modal-header svelte-kmel7x"), s(m, "class", "consumables-list svelte-kmel7x"), s(u, "class", "modal-body svelte-kmel7x"), s(t, "class", "modal-window svelte-kmel7x"), s(e, "class", "modal-overlay svelte-kmel7x");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(u, p), a(u, m);
      for (let S = 0; S < 6; S += 1)
        A[S] && A[S].m(m, null);
      h = !0, _ || (w = R(
        c,
        "click",
        /*click_handler_17*/
        l[45]
      ), _ = !0);
    },
    p(y, E) {
      if (E[0] & /*pockets, isGM, consumeOrganism, RARITY_MAP*/
      72192) {
        k = ce([1, 2, 3, 4, 5, 6]);
        let S;
        for (S = 0; S < 6; S += 1) {
          const O = dn(y, k, S);
          A[S] ? A[S].p(O, E) : (A[S] = En(O), A[S].c(), A[S].m(m, null));
        }
        for (; S < 6; S += 1)
          A[S].d(1);
      }
    },
    i(y) {
      h || (y && (b || Ne(() => {
        b = st(t, Mt, {}), b.start();
      })), y && Ne(() => {
        h && (v || (v = We(e, Qe, {}, !0)), v.run(1));
      }), h = !0);
    },
    o(y) {
      y && (v || (v = We(e, Qe, {}, !1)), v.run(0)), h = !1;
    },
    d(y) {
      y && P(e), Fe(A, y), y && v && v.end(), _ = !1, w();
    }
  };
}
function En(l) {
  let e, t, i, n, o, c, f, u = (
    /*qty*/
    l[60] + ""
  ), d, p, m, b, v, h, _, w, k;
  function A() {
    return (
      /*click_handler_18*/
      l[46](
        /*t*/
        l[59]
      )
    );
  }
  function y() {
    return (
      /*click_handler_19*/
      l[47](
        /*t*/
        l[59]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("span"), i = B("T"), n = B(
        /*t*/
        l[59]
      ), o = g(), c = r("span"), f = B("Qtd: "), d = B(u), p = g(), m = r("div"), b = r("button"), b.textContent = `Comer (+${/*t*/
      l[59]})`, v = g(), h = r("button"), h.textContent = `Beber (+${/*t*/
      l[59] * 2})`, _ = g(), s(t, "class", "badge svelte-kmel7x"), ae(
        t,
        "background",
        /*RARITY_MAP*/
        l[12][
          /*t*/
          l[59]
        ].color
      ), s(b, "class", "svelte-kmel7x"), s(h, "class", "svelte-kmel7x"), s(m, "class", "c-actions svelte-kmel7x"), s(e, "class", "consumable-item svelte-kmel7x"), he(
        e,
        "disabled",
        /*qty*/
        l[60] <= 0 && !/*isGM*/
        l[11]
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(e, o), a(e, c), a(c, f), a(c, d), a(e, p), a(e, m), a(m, b), a(m, v), a(m, h), a(e, _), w || (k = [
        R(b, "click", A),
        R(h, "click", y)
      ], w = !0);
    },
    p(E, S) {
      l = E, S[0] & /*pockets*/
      512 && u !== (u = /*qty*/
      l[60] + "") && te(d, u), S[0] & /*pockets, isGM*/
      2560 && he(
        e,
        "disabled",
        /*qty*/
        l[60] <= 0 && !/*isGM*/
        l[11]
      );
    },
    d(E) {
      E && P(e), w = !1, Te(k);
    }
  };
}
function On(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D = ce(["MATERIA", "ORGANISMO", "ENERGIA", "NUCLEO"]), M = [];
  for (let U = 0; U < 4; U += 1)
    M[U] = Gm(Mm(l, D, U));
  let G = ce(Object.entries(
    /*RARITY_MAP*/
    l[12]
  )), L = [];
  for (let U = 0; U < G.length; U += 1)
    L[U] = Sn(fn(l, G, U));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), n.textContent = "CANAL DE REQUISI√á√ÉO", o = g(), c = r("i"), f = g(), u = r("div"), d = r("label"), d.textContent = "Tipo:", p = g(), m = r("select");
      for (let U = 0; U < 4; U += 1)
        M[U].c();
      b = g(), v = r("label"), v.textContent = "Raridade:", h = g(), _ = r("select");
      for (let U = 0; U < L.length; U += 1)
        L[U].c();
      w = g(), k = r("label"), k.textContent = "Quantidade:", A = g(), y = r("input"), E = g(), S = r("button"), S.textContent = "ENVIAR", s(c, "class", "fas fa-times close svelte-kmel7x"), s(i, "class", "modal-header svelte-kmel7x"), s(m, "class", "svelte-kmel7x"), /*requestSelection*/
      l[6].type === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[49].call(m)
      )), s(_, "class", "svelte-kmel7x"), /*requestSelection*/
      l[6].tier === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[50].call(_)
      )), s(y, "type", "number"), s(y, "min", "1"), s(y, "class", "svelte-kmel7x"), s(S, "class", "send-btn svelte-kmel7x"), s(u, "class", "modal-body svelte-kmel7x"), s(t, "class", "modal-window svelte-kmel7x"), s(e, "class", "modal-overlay svelte-kmel7x");
    },
    m(U, z) {
      q(U, e, z), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(u, p), a(u, m);
      for (let F = 0; F < 4; F += 1)
        M[F] && M[F].m(m, null);
      ot(
        m,
        /*requestSelection*/
        l[6].type,
        !0
      ), a(u, b), a(u, v), a(u, h), a(u, _);
      for (let F = 0; F < L.length; F += 1)
        L[F] && L[F].m(_, null);
      ot(
        _,
        /*requestSelection*/
        l[6].tier,
        !0
      ), a(u, w), a(u, k), a(u, A), a(u, y), x(
        y,
        /*requestSelection*/
        l[6].qty
      ), a(u, E), a(u, S), T = !0, N || (I = [
        R(
          c,
          "click",
          /*click_handler_20*/
          l[48]
        ),
        R(
          m,
          "change",
          /*select0_change_handler*/
          l[49]
        ),
        R(
          _,
          "change",
          /*select1_change_handler*/
          l[50]
        ),
        R(
          y,
          "input",
          /*input_input_handler*/
          l[51]
        ),
        R(
          S,
          "click",
          /*sendRequest*/
          l[22]
        )
      ], N = !0);
    },
    p(U, z) {
      if (z[0] & /*requestSelection*/
      64 && ot(
        m,
        /*requestSelection*/
        U[6].type
      ), z[0] & /*RARITY_MAP*/
      4096) {
        G = ce(Object.entries(
          /*RARITY_MAP*/
          U[12]
        ));
        let F;
        for (F = 0; F < G.length; F += 1) {
          const W = fn(U, G, F);
          L[F] ? L[F].p(W, z) : (L[F] = Sn(W), L[F].c(), L[F].m(_, null));
        }
        for (; F < L.length; F += 1)
          L[F].d(1);
        L.length = G.length;
      }
      z[0] & /*requestSelection*/
      64 && ot(
        _,
        /*requestSelection*/
        U[6].tier
      ), z[0] & /*requestSelection*/
      64 && Je(y.value) !== /*requestSelection*/
      U[6].qty && x(
        y,
        /*requestSelection*/
        U[6].qty
      );
    },
    i(U) {
      T || (U && (O || Ne(() => {
        O = st(t, Mt, {}), O.start();
      })), U && Ne(() => {
        T && (C || (C = We(e, Qe, {}, !0)), C.run(1));
      }), T = !0);
    },
    o(U) {
      U && (C || (C = We(e, Qe, {}, !1)), C.run(0)), T = !1;
    },
    d(U) {
      U && P(e), Fe(M, U), Fe(L, U), U && C && C.end(), N = !1, Te(I);
    }
  };
}
function Gm(l) {
  let e;
  return {
    c() {
      e = r("option"), e.textContent = `${/*k*/
      l[53]}`, e.__value = /*k*/
      l[53], x(e, e.__value);
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Sn(l) {
  let e, t = (
    /*v*/
    l[54].label + ""
  ), i, n, o = (
    /*k*/
    l[53] + ""
  ), c;
  return {
    c() {
      e = r("option"), i = B(t), n = B(" - Tier "), c = B(o), e.__value = /*k*/
      l[53], x(e, e.__value);
    },
    m(f, u) {
      q(f, e, u), a(e, i), a(e, n), a(e, c);
    },
    p: ge,
    d(f) {
      f && P(e);
    }
  };
}
function Hm(l) {
  let e, t, i, n, o, c, f, u, d = (
    /*actor*/
    l[0].name + ""
  ), p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M = (
    /*session*/
    l[8].actions_used + ""
  ), G, L, U = (
    /*session*/
    l[8].actions_max + ""
  ), z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q = (
    /*bio*/
    l[10].fome + ""
  ), ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be = (
    /*bio*/
    l[10].sede + ""
  ), de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe, Le, qe, Me, Se, ve, Ue, Ve, rt = (
    /*bio*/
    l[10].exaustao + ""
  ), Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It, Dt = (
    /*bio*/
    (l[10].wp || 10) + ""
  ), Ct, At, Et, Nt, ct, Ie, tt, Ye, bt, Jt, Zt, Yt, xt, ca, rl, Rl, bl, Vl, vl, Ml, Ea, Qt, fa, Nl, il, wt, Rt, ea, Ka, Wl, da, Xl, Gl, ua, Jl, Za, Yl, Oa, Ql, hl = ce(Array(
    /*session*/
    l[8].actions_max
  )), Wt = [];
  for (let Ke = 0; Ke < hl.length; Ke += 1)
    Wt[Ke] = hn(vn(l, hl, Ke));
  let Hl = (
    /*isGM*/
    l[11] && Nm(l)
  ), Cl = (
    /*isGM*/
    l[11] && Lm(l)
  ), Il = (
    /*isGM*/
    l[11] && Pm(l)
  ), Ll = (
    /*isGM*/
    l[11] && qm(l)
  ), Kl = ce(Object.entries(
    /*disciplines*/
    l[2]
  )), Ft = [];
  for (let Ke = 0; Ke < Kl.length; Ke += 1)
    Ft[Ke] = _n(bn(l, Kl, Ke));
  let Pl = ce(Object.values(
    /*RARITY_MAP*/
    l[12]
  )), $t = [];
  for (let Ke = 0; Ke < Pl.length; Ke += 1)
    $t[Ke] = kn(mn(l, Pl, Ke));
  let Zl = ce(["MATERIA", "ORGANISMO", "ENERGIA", "NUCLEO"]), gl = [];
  for (let Ke = 0; Ke < 4; Ke += 1)
    gl[Ke] = yn(un(l, Zl, Ke));
  let zt = (
    /*showConsumeModal*/
    l[5] && An(l)
  ), Bt = (
    /*showRequestModal*/
    l[4] && On(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("img"), c = g(), f = r("div"), u = r("span"), p = B(d), m = g(), b = r("span"), v = B("N√çVEL "), h = B(
        /*level*/
        l[3]
      ), _ = g(), w = r("span"), k = B("PTS: "), A = B(
        /*availablePoints*/
        l[7]
      ), y = g(), E = r("div"), S = r("div"), O = r("i"), T = g(), N = r("div"), I = r("small"), D = B("A√á√ïES "), G = B(M), L = B("/"), z = B(U), F = g(), W = r("div");
      for (let Ke = 0; Ke < Wt.length; Ke += 1)
        Wt[Ke].c();
      H = g(), Hl && Hl.c(), V = g(), J = r("div"), j = r("div"), X = r("div"), X.textContent = "METABOLISMO", K = g(), Z = r("div"), le = r("div"), $ = r("label"), $.textContent = "FOME", se = g(), Y = r("span"), ie = B(Q), ee = g(), Cl && Cl.c(), pe = g(), Ee = r("div"), De = r("div"), we = g(), ke = r("div"), me = r("div"), re = r("label"), re.textContent = "SEDE", ye = g(), oe = r("span"), de = B(be), Oe = g(), Il && Il.c(), _e = g(), ue = r("div"), Re = r("div"), Ce = g(), He = r("div"), Ge = r("button"), Ge.innerHTML = '<i class="fas fa-utensils"></i> COMER / BEBER', Xe = g(), fe = r("div"), Le = r("div"), Le.textContent = "FADIGA", qe = g(), Me = r("div"), Se = r("div"), ve = r("label"), ve.textContent = "EXAUST√ÉO", Ue = g(), Ve = r("span"), Tt = B(rt), ze = g(), Ll && Ll.c(), it = g(), Ze = r("div"), ut = r("div"), Be = g(), Pe = r("div"), je = r("div"), xe = r("label"), xe.textContent = "SANIDADE (WP)", St = g(), It = r("span"), Ct = B(Dt), At = g(), Et = r("div"), Nt = r("div"), ct = g(), Ie = r("div"), tt = r("button"), tt.innerHTML = '<i class="fas fa-coffee"></i> DESCANSAR <small>(-1 A√ß√£o)</small>', Ye = g(), bt = r("button"), bt.innerHTML = '<i class="fas fa-bed"></i> DORMIR <small>(-2 A√ß√µes)</small>', Jt = g(), Zt = r("hr"), Yt = g(), xt = r("div"), xt.textContent = "PER√çCIAS DE CAMPO", ca = g(), rl = r("div");
      for (let Ke = 0; Ke < Ft.length; Ke += 1)
        Ft[Ke].c();
      Rl = g(), bl = r("div"), Vl = r("button"), Vl.innerHTML = '<i class="fas fa-dice"></i> A√á√ÉO NORMAL', vl = g(), Ml = r("div"), Ml.innerHTML = '<span>?</span> <div class="tip-content svelte-kmel7x"><p class="svelte-kmel7x">A <b>A√ß√£o Normal</b> n√£o consome Fadiga, gasta 1 de Fome e 1 de Sede. Rola os dados normais para medir o sucesso.</p> <hr class="svelte-kmel7x"/> <p class="svelte-kmel7x">O <b>Esfor√ßo</b> √© para a√ß√µes primordiais: gasta mais recursos, gera stress, mas concede <b>+1WD</b>.</p></div>', Ea = g(), Qt = r("button"), Qt.innerHTML = '<i class="fas fa-fist-raised"></i> REALIZAR ESFOR√áO <small>(Gasta Bio, +1 A√ß√£o)</small>', fa = g(), Nl = r("hr"), il = g(), wt = r("div"), Rt = r("div"), ea = r("div"), ea.textContent = "RECURSO", Ka = g();
      for (let Ke = 0; Ke < $t.length; Ke += 1)
        $t[Ke].c();
      Wl = g();
      for (let Ke = 0; Ke < 4; Ke += 1)
        gl[Ke].c();
      da = g(), Xl = r("div"), Gl = r("button"), Gl.innerHTML = '<i class="fas fa-satellite-dish"></i> REQUISITAR SUPRIMENTO', ua = g(), Jl = r("button"), Jl.innerHTML = '<i class="fas fa-save"></i> SALVAR DADOS', Za = g(), zt && zt.c(), Yl = g(), Bt && Bt.c(), at(n.src, o = /*actor*/
      l[0].img) || s(n, "src", o), s(n, "alt", "Avatar"), s(n, "class", "svelte-kmel7x"), s(u, "class", "name svelte-kmel7x"), s(w, "class", "pts-tag svelte-kmel7x"), he(
        w,
        "has-pts",
        /*availablePoints*/
        l[7] > 0
      ), s(b, "class", "lvl svelte-kmel7x"), s(f, "class", "names svelte-kmel7x"), s(i, "class", "char-id svelte-kmel7x"), s(O, "class", C = "fas " + /*session*/
      (l[8].day_state === "DIA" ? "fa-sun" : "fa-moon")), s(S, "class", "cycle-icon svelte-kmel7x"), s(I, "class", "svelte-kmel7x"), s(W, "class", "dots svelte-kmel7x"), s(N, "class", "actions-track svelte-kmel7x"), s(E, "class", "session-mini svelte-kmel7x"), s(t, "class", "header-row svelte-kmel7x"), s(X, "class", "col-title svelte-kmel7x"), s(Y, "class", "svelte-kmel7x"), he(
        Y,
        "crit",
        /*bio*/
        l[10].fome <= 0
      ), s(le, "class", "stat-header svelte-kmel7x"), s(De, "class", "bar-fill red svelte-kmel7x"), ae(De, "width", Math.max(
        0,
        /*bio*/
        l[10].fome * 10
      ) + "%"), s(Ee, "class", "bar-track svelte-kmel7x"), s(Z, "class", "stat-group svelte-kmel7x"), s(oe, "class", "svelte-kmel7x"), he(
        oe,
        "crit",
        /*bio*/
        l[10].sede <= 0
      ), s(me, "class", "stat-header svelte-kmel7x"), s(Re, "class", "bar-fill blue svelte-kmel7x"), ae(Re, "width", Math.max(
        0,
        /*bio*/
        l[10].sede * 10
      ) + "%"), s(ue, "class", "bar-track svelte-kmel7x"), s(ke, "class", "stat-group svelte-kmel7x"), s(Ge, "class", "btn-consume svelte-kmel7x"), s(He, "class", "action-row svelte-kmel7x"), s(j, "class", "bio-col svelte-kmel7x"), s(Le, "class", "col-title svelte-kmel7x"), s(Ve, "class", "svelte-kmel7x"), he(
        Ve,
        "crit",
        /*bio*/
        l[10].exaustao <= 0
      ), s(Se, "class", "stat-header svelte-kmel7x"), s(ut, "class", "bar-fill purple svelte-kmel7x"), ae(ut, "width", Math.max(
        0,
        /*bio*/
        l[10].exaustao * 10
      ) + "%"), s(Ze, "class", "bar-track svelte-kmel7x"), s(Me, "class", "stat-group svelte-kmel7x"), s(je, "class", "stat-header svelte-kmel7x"), s(Nt, "class", "bar-fill yellow svelte-kmel7x"), ae(
        Nt,
        "width",
        /*bio*/
        (l[10].wp || 10) * 10 + "%"
      ), s(Et, "class", "bar-track svelte-kmel7x"), s(Pe, "class", "stat-group svelte-kmel7x"), s(tt, "class", "btn-rest svelte-kmel7x"), s(bt, "class", "btn-sleep svelte-kmel7x"), s(Ie, "class", "action-row vertical svelte-kmel7x"), s(fe, "class", "bio-col svelte-kmel7x"), s(J, "class", "bio-layout svelte-kmel7x"), s(Zt, "class", "divider svelte-kmel7x"), s(xt, "class", "section-title svelte-kmel7x"), s(Vl, "class", "btn-normal svelte-kmel7x"), s(Ml, "class", "help-tip svelte-kmel7x"), s(bl, "class", "action-combo svelte-kmel7x"), s(Qt, "class", "btn-effort full-width svelte-kmel7x"), s(rl, "class", "disciplines-container svelte-kmel7x"), s(Nl, "class", "divider svelte-kmel7x"), s(ea, "class", "col-type"), s(Rt, "class", "inv-header-row svelte-kmel7x"), s(wt, "class", "inv-section svelte-kmel7x"), s(Gl, "class", "btn-req svelte-kmel7x"), s(Jl, "class", "btn-manual-save svelte-kmel7x"), s(Xl, "class", "footer-actions svelte-kmel7x"), s(e, "class", "survival-app svelte-kmel7x"), ae(
        e,
        "--c-local",
        /*themeColor*/
        l[1] || "#00ff41"
      );
    },
    m(Ke, Ot) {
      q(Ke, e, Ot), a(e, t), a(t, i), a(i, n), a(i, c), a(i, f), a(f, u), a(u, p), a(f, m), a(f, b), a(b, v), a(b, h), a(b, _), a(b, w), a(w, k), a(w, A), a(t, y), a(t, E), a(E, S), a(S, O), a(E, T), a(E, N), a(N, I), a(I, D), a(I, G), a(I, L), a(I, z), a(N, F), a(N, W);
      for (let nt = 0; nt < Wt.length; nt += 1)
        Wt[nt] && Wt[nt].m(W, null);
      a(E, H), Hl && Hl.m(E, null), a(e, V), a(e, J), a(J, j), a(j, X), a(j, K), a(j, Z), a(Z, le), a(le, $), a(le, se), a(le, Y), a(Y, ie), a(le, ee), Cl && Cl.m(le, null), a(Z, pe), a(Z, Ee), a(Ee, De), a(j, we), a(j, ke), a(ke, me), a(me, re), a(me, ye), a(me, oe), a(oe, de), a(me, Oe), Il && Il.m(me, null), a(ke, _e), a(ke, ue), a(ue, Re), a(j, Ce), a(j, He), a(He, Ge), a(J, Xe), a(J, fe), a(fe, Le), a(fe, qe), a(fe, Me), a(Me, Se), a(Se, ve), a(Se, Ue), a(Se, Ve), a(Ve, Tt), a(Se, ze), Ll && Ll.m(Se, null), a(Me, it), a(Me, Ze), a(Ze, ut), a(fe, Be), a(fe, Pe), a(Pe, je), a(je, xe), a(je, St), a(je, It), a(It, Ct), a(Pe, At), a(Pe, Et), a(Et, Nt), a(fe, ct), a(fe, Ie), a(Ie, tt), a(Ie, Ye), a(Ie, bt), a(e, Jt), a(e, Zt), a(e, Yt), a(e, xt), a(e, ca), a(e, rl);
      for (let nt = 0; nt < Ft.length; nt += 1)
        Ft[nt] && Ft[nt].m(rl, null);
      a(rl, Rl), a(rl, bl), a(bl, Vl), a(bl, vl), a(bl, Ml), a(rl, Ea), a(rl, Qt), a(e, fa), a(e, Nl), a(e, il), a(e, wt), a(wt, Rt), a(Rt, ea), a(Rt, Ka);
      for (let nt = 0; nt < $t.length; nt += 1)
        $t[nt] && $t[nt].m(Rt, null);
      a(wt, Wl);
      for (let nt = 0; nt < 4; nt += 1)
        gl[nt] && gl[nt].m(wt, null);
      a(e, da), a(e, Xl), a(Xl, Gl), a(Xl, ua), a(Xl, Jl), a(e, Za), zt && zt.m(e, null), a(e, Yl), Bt && Bt.m(e, null), Oa || (Ql = [
        R(
          S,
          "click",
          /*click_handler*/
          l[27]
        ),
        R(
          Ge,
          "click",
          /*click_handler_5*/
          l[32]
        ),
        R(
          tt,
          "click",
          /*click_handler_8*/
          l[35]
        ),
        R(
          bt,
          "click",
          /*click_handler_9*/
          l[36]
        ),
        R(
          Vl,
          "click",
          /*click_handler_13*/
          l[40]
        ),
        R(
          Qt,
          "click",
          /*click_handler_14*/
          l[41]
        ),
        R(
          Gl,
          "click",
          /*click_handler_16*/
          l[44]
        ),
        R(
          Jl,
          "click",
          /*manualSave*/
          l[14]
        )
      ], Oa = !0);
    },
    p(Ke, Ot) {
      if (Ot[0] & /*actor*/
      1 && !at(n.src, o = /*actor*/
      Ke[0].img) && s(n, "src", o), Ot[0] & /*actor*/
      1 && d !== (d = /*actor*/
      Ke[0].name + "") && te(p, d), Ot[0] & /*level*/
      8 && te(
        h,
        /*level*/
        Ke[3]
      ), Ot[0] & /*availablePoints*/
      128 && te(
        A,
        /*availablePoints*/
        Ke[7]
      ), Ot[0] & /*availablePoints*/
      128 && he(
        w,
        "has-pts",
        /*availablePoints*/
        Ke[7] > 0
      ), Ot[0] & /*session*/
      256 && C !== (C = "fas " + /*session*/
      (Ke[8].day_state === "DIA" ? "fa-sun" : "fa-moon")) && s(O, "class", C), Ot[0] & /*session*/
      256 && M !== (M = /*session*/
      Ke[8].actions_used + "") && te(G, M), Ot[0] & /*session*/
      256 && U !== (U = /*session*/
      Ke[8].actions_max + "") && te(z, U), Ot[0] & /*session*/
      256) {
        hl = ce(Array(
          /*session*/
          Ke[8].actions_max
        ));
        let nt;
        for (nt = 0; nt < hl.length; nt += 1) {
          const el = vn(Ke, hl, nt);
          Wt[nt] ? Wt[nt].p(el, Ot) : (Wt[nt] = hn(el), Wt[nt].c(), Wt[nt].m(W, null));
        }
        for (; nt < Wt.length; nt += 1)
          Wt[nt].d(1);
        Wt.length = hl.length;
      }
      if (
        /*isGM*/
        Ke[11] && Hl.p(Ke, Ot), Ot[0] & /*bio*/
        1024 && Q !== (Q = /*bio*/
        Ke[10].fome + "") && te(ie, Q), Ot[0] & /*bio*/
        1024 && he(
          Y,
          "crit",
          /*bio*/
          Ke[10].fome <= 0
        ), /*isGM*/
        Ke[11] && Cl.p(Ke, Ot), Ot[0] & /*bio*/
        1024 && ae(De, "width", Math.max(
          0,
          /*bio*/
          Ke[10].fome * 10
        ) + "%"), Ot[0] & /*bio*/
        1024 && be !== (be = /*bio*/
        Ke[10].sede + "") && te(de, be), Ot[0] & /*bio*/
        1024 && he(
          oe,
          "crit",
          /*bio*/
          Ke[10].sede <= 0
        ), /*isGM*/
        Ke[11] && Il.p(Ke, Ot), Ot[0] & /*bio*/
        1024 && ae(Re, "width", Math.max(
          0,
          /*bio*/
          Ke[10].sede * 10
        ) + "%"), Ot[0] & /*bio*/
        1024 && rt !== (rt = /*bio*/
        Ke[10].exaustao + "") && te(Tt, rt), Ot[0] & /*bio*/
        1024 && he(
          Ve,
          "crit",
          /*bio*/
          Ke[10].exaustao <= 0
        ), /*isGM*/
        Ke[11] && Ll.p(Ke, Ot), Ot[0] & /*bio*/
        1024 && ae(ut, "width", Math.max(
          0,
          /*bio*/
          Ke[10].exaustao * 10
        ) + "%"), Ot[0] & /*bio*/
        1024 && Dt !== (Dt = /*bio*/
        (Ke[10].wp || 10) + "") && te(Ct, Dt), Ot[0] & /*bio*/
        1024 && ae(
          Nt,
          "width",
          /*bio*/
          (Ke[10].wp || 10) * 10 + "%"
        ), Ot[0] & /*upgradeSkill, disciplines, availablePoints, isGM, downgradeSkill*/
        3147908
      ) {
        Kl = ce(Object.entries(
          /*disciplines*/
          Ke[2]
        ));
        let nt;
        for (nt = 0; nt < Kl.length; nt += 1) {
          const el = bn(Ke, Kl, nt);
          Ft[nt] ? Ft[nt].p(el, Ot) : (Ft[nt] = _n(el), Ft[nt].c(), Ft[nt].m(rl, Rl));
        }
        for (; nt < Ft.length; nt += 1)
          Ft[nt].d(1);
        Ft.length = Kl.length;
      }
      if (Ot[0] & /*RARITY_MAP*/
      4096) {
        Pl = ce(Object.values(
          /*RARITY_MAP*/
          Ke[12]
        ));
        let nt;
        for (nt = 0; nt < Pl.length; nt += 1) {
          const el = mn(Ke, Pl, nt);
          $t[nt] ? $t[nt].p(el, Ot) : ($t[nt] = kn(el), $t[nt].c(), $t[nt].m(Rt, null));
        }
        for (; nt < $t.length; nt += 1)
          $t[nt].d(1);
        $t.length = Pl.length;
      }
      if (Ot[0] & /*isGM, pockets, gmAddItem*/
      264704) {
        Zl = ce(["MATERIA", "ORGANISMO", "ENERGIA", "NUCLEO"]);
        let nt;
        for (nt = 0; nt < 4; nt += 1) {
          const el = un(Ke, Zl, nt);
          gl[nt] ? gl[nt].p(el, Ot) : (gl[nt] = yn(el), gl[nt].c(), gl[nt].m(wt, null));
        }
        for (; nt < 4; nt += 1)
          gl[nt].d(1);
      }
      /*showConsumeModal*/
      Ke[5] ? zt ? (zt.p(Ke, Ot), Ot[0] & /*showConsumeModal*/
      32 && ne(zt, 1)) : (zt = An(Ke), zt.c(), ne(zt, 1), zt.m(e, Yl)) : zt && ($e(), Ae(zt, 1, 1, () => {
        zt = null;
      }), et()), /*showRequestModal*/
      Ke[4] ? Bt ? (Bt.p(Ke, Ot), Ot[0] & /*showRequestModal*/
      16 && ne(Bt, 1)) : (Bt = On(Ke), Bt.c(), ne(Bt, 1), Bt.m(e, null)) : Bt && ($e(), Ae(Bt, 1, 1, () => {
        Bt = null;
      }), et()), Ot[0] & /*themeColor*/
      2 && ae(
        e,
        "--c-local",
        /*themeColor*/
        Ke[1] || "#00ff41"
      );
    },
    i(Ke) {
      ne(zt), ne(Bt);
    },
    o(Ke) {
      Ae(zt), Ae(Bt);
    },
    d(Ke) {
      Ke && P(e), Fe(Wt, Ke), Hl && Hl.d(), Cl && Cl.d(), Il && Il.d(), Ll && Ll.d(), Fe(Ft, Ke), Fe($t, Ke), Fe(gl, Ke), zt && zt.d(), Bt && Bt.d(), Oa = !1, Te(Ql);
    }
  };
}
const Cn = "multiversus-rpg";
function zm(l, e, t) {
  let i, n, o, c, f, u, d, p, m, { actor: b } = e, { themeColor: v } = e, { flags: h = {} } = e;
  const _ = game.user.isGM, w = {
    1: { label: "C", color: "#999" },
    2: { label: "R", color: "#3b82f6" },
    3: { label: "L", color: "#f59e0b" },
    4: { label: "M", color: "#ef4444" },
    5: { label: "U", color: "#10b981" },
    6: { label: "MV", color: "#7c3aed" }
  };
  let k = !1, A = !1, y = { type: "MATERIA", tier: 1, qty: 1 };
  async function E() {
    const ye = { bio: n, session: o, disciplines: c };
    await b.update(
      {
        [`flags.${Cn}.survival_data`]: ye
      },
      { render: !1 }
    );
  }
  async function S() {
    await b.update({ "system.pockets": f }, { render: !1 });
  }
  async function O() {
    await E(), await S(), ui.notifications.info("Dados de Sobreviv√™ncia Salvos!");
  }
  async function C(ye) {
    if (!_ && o.actions_used >= o.actions_max)
      return ui.notifications.warn("Sem a√ß√µes dispon√≠veis.");
    let oe = "", be = 0, de = { ...n }, Oe = { ...o };
    if (ye === "NORMAL_ACTION")
      be = 1, de.fome = Math.max(-10, de.fome - 1), de.sede = Math.max(-10, de.sede - 1), oe = `üé≤ <b>${b.name}</b> realizou uma A√ß√£o Normal. (-1 Fome, -1 Sede)`;
    else if (ye === "EFFORT")
      be = 1, de.fome = Math.max(-10, de.fome - 1), de.sede = Math.max(-10, de.sede - 2), oe = `üò§ <b>${b.name}</b> realizou um Esfor√ßo F√≠sico.`;
    else if (ye === "REST_SIMPLE")
      be = 1, de.exaustao = Math.min(10, de.exaustao + 1), de.fome = Math.max(-10, de.fome - 1), de.sede = Math.max(-10, de.sede - 1), de.wp = Math.min(20, (de.wp || 0) + 1), oe = `‚òï <b>${b.name}</b> descansou (+1 WP).`;
    else if (ye === "REST_DEEP") {
      if (!_ && Oe.actions_max - Oe.actions_used < 2)
        return ui.notifications.warn("Precisa de 2 a√ß√µes para Sono Profundo.");
      be = 2, de.exaustao = Math.min(10, de.exaustao + 2), de.fome = Math.max(-10, de.fome - 2), de.sede = Math.max(-10, de.sede - 2), de.wp = Math.min(20, (de.wp || 0) + 2), oe = `üí§ <b>${b.name}</b> dormiu profundamente (+2 WP).`;
    }
    _ || (Oe.actions_used += be), (de.fome <= 0 || de.sede <= 0 || de.exaustao <= 0) && (oe += '<br><span style="color:red; font-weight:bold;">ALERTA: Sinais Vitais Cr√≠ticos!</span>'), t(10, n = de), t(8, o = Oe), ChatMessage.create({ content: oe }), await E();
  }
  async function T(ye, oe) {
    if (f.ORGANISMO || t(9, f.ORGANISMO = {}, f), (f.ORGANISMO[ye] || 0) <= 0 && !_) return ui.notifications.warn("Sem estoque.");
    if (!_) {
      let Re = { ...f };
      Re.ORGANISMO[ye]--, t(9, f = Re), await S();
    }
    const de = ye, Oe = ye * 2;
    let _e = { ...n }, ue = "";
    oe === "EAT" ? (_e.fome = Math.min(10, _e.fome + de), ue = `üçñ <b>${b.name}</b> comeu T${ye} (+${de} Fome).`) : (_e.sede = Math.min(10, _e.sede + Oe), ue = `üíß <b>${b.name}</b> bebeu T${ye} (+${Oe} Sede).`), t(10, n = _e), ChatMessage.create({ content: ue }), t(5, A = !1), await E();
  }
  async function N(ye, oe) {
    let be = { ...n };
    be[ye] = Math.max(-10, Math.min(10, be[ye] + oe)), t(10, n = be), await E();
  }
  async function I(ye, oe, be) {
    f[ye] || t(9, f[ye] = {}, f);
    let de = { ...f };
    const Oe = de[ye][oe] || 0;
    de[ye][oe] = Math.max(0, Oe + be), t(9, f = de), await S(), ui.notifications.info("Estoque atualizado.");
  }
  async function D() {
    t(8, o.actions_used = 0, o), t(8, o = { ...o }), await E(), ui.notifications.info("A√ß√µes resetadas.");
  }
  async function M(ye) {
    if (!_ && m <= 0) return ui.notifications.warn("Sem pontos.");
    let oe = { ...c };
    oe[ye]++, t(2, c = oe), await E();
  }
  async function G(ye) {
    if (_ && c[ye] > 0) {
      let oe = { ...c };
      oe[ye]--, t(2, c = oe), await E();
    }
  }
  async function L() {
    const ye = w[y.tier].label, oe = `
            <div class="chat-card" style="background:#050505; border:1px solid #00ff41; color:#00ff41; padding:10px;">
                <h3 style="border-bottom:1px solid #333; margin-bottom:5px;">Requisi√ß√£o de Suprimento</h3>
                <p><b>${b.name}</b> solicita:</p>
                <div style="background:#111; padding:5px; font-weight:bold; text-align:center;">
                    ${y.qty}x ${y.type} [${ye}]
                </div>
            </div>`;
    await ChatMessage.create({ content: oe }), t(4, k = !1), ui.notifications.info("Enviado.");
  }
  const U = () => {
    _ && (t(8, o.day_state = o.day_state === "DIA" ? "NOITE" : "DIA", o), E());
  }, z = () => N("fome", -1), F = () => N("fome", 1), W = () => N("sede", -1), H = () => N("sede", 1), V = () => t(5, A = !0), J = () => N("exaustao", -1), j = () => N("exaustao", 1), X = () => C("REST_SIMPLE"), K = () => C("REST_DEEP"), Z = (ye, oe) => new Roll(`${ye}d10`).toMessage({ flavor: `Teste de ${oe.toUpperCase()}` }), le = (ye) => G(ye), $ = (ye) => M(ye), se = () => C("NORMAL_ACTION"), Y = () => C("EFFORT"), Q = (ye, oe) => _ ? I(ye, oe, 1) : null, ie = (ye, oe) => _ ? I(ye, oe, -1) : null, ee = () => t(4, k = !0), pe = () => t(5, A = !1), Ee = (ye) => T(ye, "EAT"), De = (ye) => T(ye, "DRINK"), we = () => t(4, k = !1);
  function ke() {
    y.type = Gt(this), t(6, y);
  }
  function me() {
    y.tier = Gt(this), t(6, y);
  }
  function re() {
    y.qty = Je(this.value), t(6, y);
  }
  return l.$$set = (ye) => {
    "actor" in ye && t(0, b = ye.actor), "themeColor" in ye && t(1, v = ye.themeColor), "flags" in ye && t(23, h = ye.flags);
  }, l.$$.update = () => {
    var ye, oe;
    l.$$.dirty[0] & /*flags, actor*/
    8388609 && t(26, i = h && h.survival_data ? h.survival_data : ((oe = (ye = b.flags) == null ? void 0 : ye[Cn]) == null ? void 0 : oe.survival_data) || {}), l.$$.dirty[0] & /*survivalData*/
    67108864 && t(10, n = i.bio || { fome: 10, sede: 10, exaustao: 10, wp: 10 }), l.$$.dirty[0] & /*survivalData*/
    67108864 && t(8, o = i.session || {
      actions_max: 2,
      actions_used: 0,
      day_state: "DIA",
      stress_counter: 0
    }), l.$$.dirty[0] & /*survivalData*/
    67108864 && t(2, c = i.disciplines || {
      extracao: 0,
      engenharia: 0,
      sintetica: 0,
      sobrevivencia: 0
    }), l.$$.dirty[0] & /*actor*/
    1 && t(9, f = b.system.pockets || {
      MATERIA: {},
      ORGANISMO: {},
      ENERGIA: {},
      NUCLEO: {}
    }), l.$$.dirty[0] & /*actor*/
    1 && t(3, u = b.system.level || 1), l.$$.dirty[0] & /*level*/
    8 && t(25, d = 10 + (u - 1) * 2), l.$$.dirty[0] & /*disciplines*/
    4 && t(24, p = Object.values(c).reduce((be, de) => be + Number(de), 0)), l.$$.dirty[0] & /*totalPoints, spentPoints*/
    50331648 && t(7, m = d - p);
  }, [
    b,
    v,
    c,
    u,
    k,
    A,
    y,
    m,
    o,
    f,
    n,
    _,
    w,
    E,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    h,
    p,
    d,
    i,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re
  ];
}
class Bm extends mt {
  constructor(e) {
    super(), pt(this, e, zm, Hm, dt, { actor: 0, themeColor: 1, flags: 23 }, null, [-1, -1, -1]);
  }
}
const Ga = [];
function jl(l, e = ge) {
  let t;
  const i = /* @__PURE__ */ new Set();
  function n(f) {
    if (dt(l, f) && (l = f, t)) {
      const u = !Ga.length;
      for (const d of i)
        d[1](), Ga.push(d, l);
      if (u) {
        for (let d = 0; d < Ga.length; d += 2)
          Ga[d][0](Ga[d + 1]);
        Ga.length = 0;
      }
    }
  }
  function o(f) {
    n(f(l));
  }
  function c(f, u = ge) {
    const d = [f, u];
    return i.add(d), i.size === 1 && (t = e(n, o) || ge), f(l), () => {
      i.delete(d), i.size === 0 && t && (t(), t = null);
    };
  }
  return { set: n, update: o, subscribe: c };
}
const Fm = {
  version: "1.1",
  description: "Base de dados consolidada de arqu√©tipos para NPCs da Divis√£o Gama. Efeitos mec√¢nicos fixos para suporte a Ativos e Jogadores.",
  system_ref: "Multiversus RPG / ORE"
}, jm = {
  label: "O Mentor",
  archetype_ref: "The Sage / Old Man",
  description: "Possui conhecimento antigo ou t√©cnico. Age como conselheiro e evita que o grupo cometa erros est√∫pidos.",
  narrative_hook: "Passa o ciclo ensinando outros ou revisando planos t√°ticos.",
  effect: {
    label: "Sabedoria Compartilhada",
    desc: "Uma vez por sess√£o, permite que um Jogador refa√ßa um teste de Per√≠cia Mental (Engenharia ou Sint√©tica) que tenha falhado.",
    type: "reroll_mechanic",
    value: 1
  }
}, Vm = {
  label: "O Her√≥i",
  archetype_ref: "The Hero / Protagonist",
  description: "Corajoso, altru√≠sta e inspirador. Tende a se colocar em risco para proteger a integridade da base.",
  narrative_hook: "Voluntaria-se para as tarefas mais perigosas ou discursa para elevar o moral do pelot√£o.",
  effect: {
    label: "Presen√ßa Inspiradora",
    desc: "No in√≠cio de cada ciclo, remove 1 ponto de Exaust√£o ou restaura 1 WP de um Jogador √† escolha.",
    type: "recovery_mechanic",
    value: 2
  }
}, Wm = {
  label: "O Alien",
  archetype_ref: "The Outsider / Weirdo",
  description: "Estranho, desconectado ou literalmente n√£o-humano. V√™ o mundo de forma diferente e encontra coisas que ningu√©m mais v√™.",
  narrative_hook: "Fica encarando o vazio ou coletando sucata que parece in√∫til, mas pulsa com energia residual.",
  effect: {
    label: "Sintonia do Vazio",
    desc: "Gera automaticamente +1 Unidade de N√öCLEO (Tier respectivo ao do NPC) por ciclo, encontrado em locais improv√°veis.",
    type: "resource_gen",
    resource: "NUCLEO",
    value: 1
  }
}, Xm = {
  label: "O Executor",
  archetype_ref: "The Slasher / Anti-Hero",
  description: "Frio, eficiente e levemente perturbador. Resolve problemas com viol√™ncia extrema ou pragmatismo cruel.",
  narrative_hook: "Afia l√¢minas compulsivamente ou vigia o per√≠metro em sil√™ncio absoluto, emanando inten√ß√£o assassina.",
  effect: {
    label: "Solu√ß√£o Final",
    desc: "Em combate, o primeiro ataque bem-sucedido de um aliado apoiado por este NPC causa +2 de dano SK.",
    type: "combat_buff",
    value: 2
  }
}, Jm = {
  label: "O Coletor",
  archetype_ref: "The Scavenger / Mad Max",
  description: "Especialista em detritos. Consegue identificar metais raros e componentes √∫teis em pilhas de lixo inerte.",
  narrative_hook: "Sempre retorna de explora√ß√µes carregando fardos pesados de metal e componentes eletr√¥nicos.",
  effect: {
    label: "Olho para Sucata",
    desc: "Ao realizar uma coleta de MAT√âRIA, o grupo recebe +2 Unidades adicionais de recursos comuns (Gravetos, Sucata ou Pedra).",
    type: "resource_gen",
    resource: "MATERIA",
    value: 2
  }
}, Ym = {
  label: "O Zelador",
  archetype_ref: "The Caretaker / Alfred",
  description: "Respons√°vel pela manuten√ß√£o f√≠sica e emocional da base. Garante que as necessidades b√°sicas de todos sejam supridas.",
  narrative_hook: "Prepara a fornalha, organiza as camas e garante que o estoque de √°gua n√£o seja corrompido.",
  effect: {
    label: "Conforto da Base",
    desc: "Jogadores descansando na presen√ßa deste NPC recuperam +1 ponto adicional de Sanidade e ignoram 1 n√≠vel de Sede.",
    type: "survival_buff",
    value: 1
  }
}, Qm = {
  label: "O Armeiro",
  archetype_ref: "The Tech Wizard / Q",
  description: "G√™nio da engenharia de gambiarra. Sabe como extrair o m√°ximo de energia com o m√≠nimo de instabilidade.",
  narrative_hook: "Vive desmontando as armas dos jogadores para 'melhorar o fluxo de mana'.",
  effect: {
    label: "Calibragem Geta",
    desc: "Ao criar itens que usam ENERGIA, reduz o valor de INSTABILIDADE (Flaws) em -1 ponto (M√≠nimo 0).",
    type: "crafting_buff",
    value: -1
  }
}, Km = {
  label: "O Fantasma",
  archetype_ref: "The Scout / Solid Snake",
  description: "Especialista em infiltra√ß√£o. Sua presen√ßa √© t√£o sutil que ele pode estar na mesma sala sem ser notado por sensores.",
  narrative_hook: "Relata rastro de inimigos e Bosses antes mesmo de serem detectados pelo radar da base.",
  effect: {
    label: "Previs√£o T√°tica",
    desc: "Na fase de Declara√ß√£o de combate, permite que um Ativo mude sua a√ß√£o ap√≥s o inimigo ter declarado a dele.",
    type: "tactical_buff",
    value: "reaction_priority"
  }
}, Zm = {
  label: "O Sortudo",
  archetype_ref: "The Fool / Jack Sparrow",
  description: "Um sobrevivente improv√°vel. A realidade parece cometer erros favor√°veis sempre que ele est√° em perigo.",
  narrative_hook: "Encontra recursos raros 'trope√ßando' neles ou escapa de execu√ß√µes por puro azar do carrasco.",
  effect: {
    label: "Aura Probabil√≠stica",
    desc: "Uma vez por sess√£o, permite que um Jogador ignore os efeitos de uma Falha Cr√≠tica (Botch) e a transforme em erro comum.",
    type: "luck_mechanic",
    value: 1
  }
}, xm = {
  label: "O Protetor",
  archetype_ref: "The Wall / Muscle",
  description: "Uma fortaleza de carne ou metal. Sua √∫nica diretriz √© ser o escudo final entre a amea√ßa e o grupo.",
  narrative_hook: "Bloqueia entradas durante alertas ou carrega aliados feridos para fora da zona de morte.",
  effect: {
    label: "Interposi√ß√£o Absoluta",
    desc: "Pode absorver 1 hit de dano f√≠sico direcionado a um Ativo por combate, sem necessidade de rolagem de defesa.",
    type: "defense_buff",
    value: 1
  }
}, $m = {
  label: "O Profeta",
  archetype_ref: "The Zealot / Morpheus",
  description: "Enxerga os padr√µes do Lobby. Sua obsess√£o pelo N√∫cleo permite extrair pot√™ncias que outros temem tocar.",
  narrative_hook: "Medita diante de cristais Nexus e fala sobre a 'grande s√≠ntese' que est√° por vir.",
  effect: {
    label: "Vontade Catalisadora",
    desc: "Ao usar um N√öCLEO no sintetizador, aumenta a VOLATILIDADE (PB) em +1 ponto, permitindo itens de Tier superior.",
    type: "core_buff",
    value: 1
  }
}, Va = {
  _METADATA: Fm,
  MENTOR: jm,
  HEROI: Vm,
  ALIEN: Wm,
  SLASHER: Xm,
  COLETOR: Jm,
  ZELADOR: Ym,
  ESPECIALISTA: Qm,
  FANTASMA: Km,
  SORTUDO: Zm,
  BRUTO: xm,
  PROFETA: $m
}, e1 = {
  COLETOR: {
    label: "Coletor / Minerador",
    description: "Respons√°vel pela extra√ß√£o de recursos f√≠sicos.",
    output_resource: "MATERIA",
    icon: "fas fa-hammer",
    behavior: "Gera unidades de Mat√©ria do Tier 1 (Comum) por Ciclo. A quantidade depende da raridade."
  },
  PROVIDENT: {
    label: "Agricultor / Ca√ßador",
    description: "Respons√°vel por comida, √°gua e biologia.",
    output_resource: "ORGANISMO",
    icon: "fas fa-seedling",
    behavior: "Gera unidades de Organismo do Tier 1 (Comum) por Ciclo."
  },
  TECNICO: {
    label: "Engenheiro / T√©cnico",
    description: "Respons√°vel pela manuten√ß√£o de energia e fluxo.",
    output_resource: "ENERGIA",
    icon: "fas fa-plug",
    behavior: "Gera unidades de Energia do Tier 1 (Comum) por Ciclo."
  },
  GUARDA: {
    label: "Seguran√ßa / Soldado",
    description: "Respons√°vel pela defesa da base e apoio t√°tico.",
    output_resource: "DEFESA",
    icon: "fas fa-shield-alt",
    behavior: "N√£o gera recursos. Fornece B√¥nus de Dados (+d) para combate ou aumenta o HAR da Base."
  }
}, t1 = {
  COMUM: {
    tier: 1,
    label: "Comum",
    production_val: 2,
    combat_dice: 1,
    desc: "Um trabalhador ou civil treinado."
  },
  RARO: {
    tier: 2,
    label: "Raro",
    production_val: 4,
    combat_dice: 2,
    desc: "Especialista veterano com ferramentas melhores."
  },
  LENDARIO: {
    tier: 3,
    label: "Lend√°rio",
    production_val: 8,
    combat_dice: 3,
    desc: "Mestre de of√≠cio. Um em um milh√£o."
  },
  MITICO: {
    tier: 4,
    label: "M√≠tico",
    production_val: 16,
    combat_dice: 4,
    desc: "Her√≥i de lendas ou ser biologicamente aprimorado."
  },
  UNIVERSAL: {
    tier: 5,
    label: "Universal",
    production_val: 32,
    combat_dice: 6,
    desc: "Entidade capaz de alterar o ambiente local com a mente."
  },
  MULTIVERSAL: {
    tier: 6,
    label: "Multiversal",
    production_val: 64,
    combat_dice: 8,
    desc: "Realidade distorcida para gerar recursos infinitos."
  },
  ONIPOTENTE: {
    tier: 7,
    label: "Onipotente",
    production_val: 132,
    combat_dice: 10,
    desc: "Deus Ex Machina. Produ√ß√£o narrativa."
  }
}, zl = {
  ROLES: e1,
  RARITY_SCALE: t1
}, l1 = {
  name: "Novo Assentamento",
  active: !0,
  inventory: {
    MATERIA: {
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0
    },
    ORGANISMO: {
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0
    },
    ENERGIA: {
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0
    },
    NUCLEO: {
      1: 0,
      2: 0,
      3: 0,
      4: 0,
      5: 0,
      6: 0,
      7: 0
    }
  },
  population: {
    count: 0,
    sustenance_cost: 0,
    morale: 10
  },
  npcs: [],
  structures: {
    REFINARIA: {
      label: "Refinaria de Mat√©ria",
      active: !0,
      tier: 1,
      upgrades: []
    },
    OFICINA: {
      label: "Oficina de Engenharia",
      active: !0,
      tier: 1,
      upgrades: []
    },
    LABORATORIO: {
      label: "Laborat√≥rio Sint√©tico",
      active: !1,
      tier: 0,
      upgrades: []
    },
    TERMINAL: {
      label: "Terminal Nexus",
      active: !1,
      tier: 0,
      upgrades: []
    }
  }
}, a1 = {
  id: "",
  name: "Sobrevivente Desconhecido",
  role: "COLETOR",
  rarity: "COMUM",
  personality: "HEROI",
  assigned: !0,
  status: {
    hp_current: 5,
    state: "ACTIVE"
  },
  stats: {
    production_bonus: 2,
    combat_dice: 1,
    personality_effect: "Presen√ßa Inspiradora"
  }
}, rs = {
  BASE: l1,
  NPC: a1
}, dl = "multiversus-rpg";
class Ut {
  static init() {
    game.settings.register(dl, "factions_data", {
      scope: "world",
      config: !1,
      type: Array,
      default: []
    }), game.settings.register(dl, "structure_blueprints", {
      scope: "world",
      config: !1,
      type: Array,
      default: []
    }), game.socket.on(`module.${dl}`, async (e) => {
      var t;
      game.user.id === ((t = game.users.activeGM) == null ? void 0 : t.id) && (e.type === "REQUEST_SAVE_GROUPS" && (console.log("[Nexus DB] GM processando save de grupos..."), await game.settings.set(dl, "factions_data", e.data), game.socket.emit(`module.${dl}`, { type: "GROUP_UPDATE" }), Hooks.callAll("nexusGroupUpdate")), e.type === "REQUEST_SAVE_BLUEPRINTS" && (await game.settings.set(dl, "structure_blueprints", e.data), game.socket.emit(`module.${dl}`, { type: "GROUP_UPDATE" }), Hooks.callAll("nexusGroupUpdate"))), e.type === "GROUP_UPDATE" && Hooks.callAll("nexusGroupUpdate");
    }), console.log("MULTIVERSUS | Database de Fac√ß√µes Iniciada.");
  }
  // --- LEITURA ---
  static getGroups() {
    return game.settings.get(dl, "factions_data") || [];
  }
  static getBlueprints() {
    return game.settings.get(dl, "structure_blueprints") || [];
  }
  // --- ESCRITA SEGURA ---
  static async updateGroups(e) {
    if (game.user.isGM)
      await game.settings.set(dl, "factions_data", e), game.socket.emit(`module.${dl}`, { type: "GROUP_UPDATE" }), Hooks.callAll("nexusGroupUpdate");
    else {
      if (!game.users.activeGM)
        return ui.notifications.error("Nenhum Mestre online para salvar as altera√ß√µes.");
      game.socket.emit(`module.${dl}`, {
        type: "REQUEST_SAVE_GROUPS",
        data: e
      }), Hooks.callAll("nexusGroupUpdate");
    }
  }
  static async updateGroupData(e, t) {
    const i = this.getGroups(), n = i.findIndex((o) => o.id === e);
    n !== -1 && (i[n] = foundry.utils.mergeObject(i[n], t), await this.updateGroups(i));
  }
  // =================================================================
  //                          A√á√ïES DE GRUPO
  // =================================================================
  static async createGroup(e, t, i = "", n = !1) {
    const o = this.getGroups();
    if (o.find((u) => u.name === e)) throw new Error("Nome j√° existe.");
    const c = JSON.parse(JSON.stringify(rs.BASE || {})), f = {
      ...c,
      id: foundry.utils.randomID(),
      name: e,
      password: i,
      leader: t,
      members: [t],
      // L√≠der j√° entra como membro
      isNomad: n,
      createdAt: Date.now(),
      // Garante inicializa√ß√£o de objetos vitais
      resources: c.resources || { metal: 0, fuel: 0, tech: 0 },
      bio: c.bio || { fome: 10, sede: 10, exaustao: 0 },
      baseStats: c.baseStats || { hp: 20, maxHp: 20, har: 0, lar: 0, protection: 1 },
      structures: [],
      missions: [],
      // Importante: Inicializa todos os tipos de material para evitar undefined
      inventory: { MATERIA: {}, ENERGIA: {}, ORGANISMO: {}, NUCLEO: {}, ...c.inventory || {} },
      npcs: [],
      population: { count: 0, max: 10 }
    };
    return o.push(f), await this.updateGroups(o), f;
  }
  static async renameGroup(e, t) {
    const i = this.getGroups(), n = i.find((o) => o.id === e);
    n && (n.name = t, await this.updateGroups(i));
  }
  static async deleteGroup(e) {
    let t = this.getGroups();
    const i = t.filter((n) => n.id !== e);
    i.length !== t.length && await this.updateGroups(i);
  }
  static async joinGroup(e, t, i = "") {
    const n = this.getGroups(), o = n.find((c) => c.id === e);
    if (!o) throw new Error("Grupo inexistente.");
    if (o.members.includes(t)) throw new Error("J√° √© membro.");
    if (o.password && o.password !== "" && !game.user.isGM && i !== o.password)
      throw new Error("Senha Incorreta.");
    this.removeMemberFromAll(n, t), o.members.push(t), await this.updateGroups(n);
  }
  static async leaveGroup(e) {
    const t = this.getGroups();
    this.removeMemberFromAll(t, e), await this.updateGroups(t);
  }
  // Helper interno: Remove usu√°rio de qualquer grupo e limpa grupos n√¥mades vazios
  static removeMemberFromAll(e, t) {
    for (let i = e.length - 1; i >= 0; i--) {
      const n = e[i];
      n.members = n.members.filter((o) => o !== t), n.isNomad && n.members.length === 0 && e.splice(i, 1);
    }
  }
  static getUserGroup(e) {
    return this.getGroups().find((t) => t.members.includes(e));
  }
  // =================================================================
  //                          ESTRUTURAS (BLUEPRINTS)
  // =================================================================
  static async updateBlueprints(e) {
    if (game.user.isGM)
      await game.settings.set(dl, "structure_blueprints", e), game.socket.emit(`module.${dl}`, { type: "GROUP_UPDATE" }), Hooks.callAll("nexusGroupUpdate");
    else {
      if (!game.users.activeGM) return;
      game.socket.emit(`module.${dl}`, { type: "REQUEST_SAVE_BLUEPRINTS", data: e });
    }
  }
  static async saveBlueprint(e) {
    const t = this.getBlueprints(), i = t.findIndex((n) => n.id === e.id);
    i !== -1 ? t[i] = e : t.push(e), await this.updateBlueprints(t);
  }
  static async deleteBlueprint(e) {
    let t = this.getBlueprints();
    t = t.filter((i) => i.id !== e), await this.updateBlueprints(t);
  }
  static async buildStructure(e, t) {
    const i = this.getGroups(), n = i.find((c) => c.id === e);
    if (!n) return;
    const o = JSON.parse(JSON.stringify(t));
    o.instanceId = foundry.utils.randomID(), o.active = !0, o.currentHp = o.stats.hp, Array.isArray(n.structures) || (n.structures = []), n.structures.push(o), await this.updateGroups(i);
  }
  static async deleteStructureInstance(e, t) {
    const i = this.getGroups(), n = i.find((o) => o.id === e);
    n && (n.structures = n.structures.filter((o) => o.instanceId !== t), await this.updateGroups(i));
  }
  // =================================================================
  //                          CICLO E NPCS
  // =================================================================
  static async runNPCCycle(e) {
    const t = this.getGroups(), i = t.find((d) => d.id === e);
    if (!i) return;
    let n = [], o = { produced: {} }, f = (i.npcs ? i.npcs.length : 0) * 2, u = 0;
    i.inventory || (i.inventory = { ORGANISMO: {} }), i.inventory.ORGANISMO || (i.inventory.ORGANISMO = {});
    for (let d = 1; d <= 7 && !(f <= 0); d++) {
      let p = i.inventory.ORGANISMO[d] || 0, m = Math.min(p, f);
      m > 0 && (i.inventory.ORGANISMO[d] -= m, f -= m, u += m);
    }
    if (f > 0 ? (i.bio.fome = Math.max(0, i.bio.fome - 2), i.bio.sede = Math.max(0, i.bio.sede - 2), n.push(`<span style="color:red">‚ö†Ô∏è Escassez! Sinais vitais reduzidos. (Faltou: ${f} un)</span>`)) : n.push(`<span style="color:green">‚úÖ Sustento garantido. Consumido: ${u} Organismos.</span>`), i.npcs && i.npcs.forEach((d) => {
      const p = zl.ROLES ? zl.ROLES[d.role] : null;
      if (!p || p.output_resource === "DEFESA") return;
      let m = d.stats.production_bonus || 2;
      const b = p.output_resource;
      o.produced[b] || (o.produced[b] = 0), o.produced[b] += m, i.inventory[b] || (i.inventory[b] = {}), i.inventory[b][1] = (i.inventory[b][1] || 0) + m;
    }), Object.keys(o.produced).length > 0)
      for (const [d, p] of Object.entries(o.produced))
        n.push(`Produzido: <b>${p}x ${d}</b> (Comum)`);
    else
      n.push("Sem produ√ß√£o neste ciclo.");
    await this.updateGroups(t), ChatMessage.create({
      content: `
            <div style="background:#050505; color:#00ff41; border:1px solid #00ff41; padding:10px; font-family:'Share Tech Mono'">
                <h3 style="border-bottom:1px solid #00ff41; margin-top:0;">RELAT√ìRIO DE CICLO</h3>
                ${n.join("<br>")}
            </div>`
    });
  }
  static async generateRandomNPC(e) {
    const t = this.getGroups(), i = t.find((b) => b.id === e);
    if (!i) return;
    const n = Object.keys(zl.ROLES), o = n[Math.floor(Math.random() * n.length)], c = Object.keys(Va), f = c[Math.floor(Math.random() * c.length)], u = Va[f], d = "COMUM", p = zl.RARITY_SCALE[d], m = JSON.parse(JSON.stringify(rs.NPC || {}));
    m.id = foundry.utils.randomID(), m.name = `Sobrevivente ${Math.floor(Math.random() * 1e3)}`, m.role = o, m.personality = f, m.rarity = d, m.img = "icons/svg/mystery-man.svg", m.description = u.description, m.stats = {
      production_bonus: p.production_val,
      combat_dice: p.combat_dice,
      personality_effect: u.effect.label
    }, i.npcs || (i.npcs = []), i.npcs.push(m), i.population.count++, await this.updateGroups(t);
  }
  static async deleteNPC(e, t) {
    const i = this.getGroups(), n = i.find((o) => o.id === e);
    n && (n.npcs = n.npcs.filter((o) => o.id !== t), n.population.count = Math.max(0, n.population.count - 1), await this.updateGroups(i));
  }
  // =================================================================
  //                          MISS√ïES
  // =================================================================
  static async addMission(e, t) {
    const i = this.getGroups(), n = i.find((c) => c.id === e);
    if (!n) return;
    const o = {
      id: foundry.utils.randomID(),
      title: t.title,
      difficulty: t.difficulty,
      desc: t.desc,
      objectives: t.objectives.map((c) => ({
        text: c.text,
        hidden: c.hidden,
        completed: !1
      })),
      rewards: t.rewards,
      status: "ACTIVE"
    };
    n.missions || (n.missions = []), n.missions.push(o), await this.updateGroups(i);
  }
  static async toggleObjective(e, t, i, n) {
    const o = this.getGroups(), f = o.find((u) => u.id === e).missions.find((u) => u.id === t);
    f && f.objectives[i] && (f.objectives[i][n] = !f.objectives[i][n], await this.updateGroups(o));
  }
  static async deleteMission(e, t) {
    const i = this.getGroups(), n = i.find((o) => o.id === e);
    n.missions = n.missions.filter((o) => o.id !== t), await this.updateGroups(i);
  }
}
function i1(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-circle-notch fa-spin"></i> Sincronizando Dashboard...', ae(e, "padding", "20px"), ae(e, "color", "#00ff41"), ae(e, "text-align", "center"), ae(e, "opacity", "0.7");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function s1(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $ = (
    /*baseBio*/
    l[3].fome + ""
  ), se, Y, Q, ie, ee, pe, Ee, De, we, ke, me, re, ye = (
    /*baseBio*/
    l[3].sede + ""
  ), oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe, Le = (
    /*baseBio*/
    l[3].exaustao + ""
  ), qe, Me, Se, ve, Ue, Ve, rt, Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It, Dt, Ct, At, Et, Nt, ct, Ie, tt, Ye, bt, Jt = (
    /*isGM*/
    l[6] && n1(l)
  ), Zt = (
    /*isGM*/
    l[6] && o1(l)
  ), Yt = (
    /*isGM*/
    l[6] && r1(l)
  ), xt = (
    /*isGM*/
    l[6] && c1(l)
  );
  function ca(wt, Rt) {
    return (
      /*isGM*/
      wt[6] ? d1 : f1
    );
  }
  let Rl = ca(l)(l);
  function bl(wt, Rt) {
    return (
      /*isGM*/
      wt[6] ? p1 : u1
    );
  }
  let vl = bl(l)(l);
  function Ml(wt, Rt) {
    return (
      /*isGM*/
      wt[6] ? b1 : m1
    );
  }
  let Qt = Ml(l)(l);
  function fa(wt, Rt) {
    return (
      /*isGM*/
      wt[6] ? h1 : v1
    );
  }
  let il = fa(l)(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.innerHTML = '<i class="fas fa-apple-alt"></i> LOG√çSTICA DE SOBREVIV√äNCIA', n = g(), o = r("div"), c = r("div"), f = r("span"), f.textContent = "POPULA√á√ÉO", u = g(), d = r("span"), p = B(
        /*npcCount*/
        l[2]
      ), m = g(), b = r("div"), v = r("span"), v.textContent = "CONSUMO / A√á√ÉO", h = g(), _ = r("span"), w = B("-"), k = B(
        /*costPerAction*/
        l[1]
      ), A = g(), y = r("small"), y.textContent = "un.", E = g(), S = r("div"), O = r("span"), O.textContent = "CUSTO DO DIA", C = g(), T = r("span"), N = B(
        /*totalCycleCost*/
        l[5]
      ), I = g(), D = r("small"), D.textContent = "un.", M = g(), Jt && Jt.c(), G = g(), L = r("div"), U = r("header"), U.innerHTML = '<i class="fas fa-users"></i> SINAIS VITAIS DO GRUPO', z = g(), F = r("div"), W = r("div"), H = r("div"), V = r("label"), V.textContent = "FOME", J = g(), Zt && Zt.c(), j = g(), X = r("div"), K = r("div"), Z = g(), le = r("span"), se = B($), Y = B("/10"), Q = g(), ie = r("div"), ee = r("div"), pe = r("label"), pe.textContent = "SEDE", Ee = g(), Yt && Yt.c(), De = g(), we = r("div"), ke = r("div"), me = g(), re = r("span"), oe = B(ye), be = B("/10"), de = g(), Oe = r("div"), _e = r("div"), ue = r("label"), ue.textContent = "EXAUST√ÉO", Re = g(), xt && xt.c(), Ce = g(), He = r("div"), Ge = r("div"), Xe = g(), fe = r("span"), qe = B(Le), Me = B("/10"), Se = g(), ve = r("div"), Ue = r("header"), Ue.innerHTML = '<i class="fas fa-shield-alt"></i> INTEGRIDADE ESTRUTURAL', Ve = g(), rt = r("div"), Tt = r("div"), ze = r("label"), ze.textContent = "HP DA BASE", it = g(), Ze = r("span"), Rl.c(), ut = g(), Be = r("div"), Pe = r("div"), je = g(), xe = r("div"), St = r("div"), It = r("label"), It.textContent = "HAR (Blindagem)", Dt = g(), vl.c(), Ct = g(), At = r("div"), Et = r("label"), Et.textContent = "LAR (Leve)", Nt = g(), Qt.c(), ct = g(), Ie = r("div"), tt = r("label"), tt.textContent = "PROTE√á√ÉO", Ye = g(), il.c(), s(i, "class", "sus-header svelte-16empi4"), s(f, "class", "lbl svelte-16empi4"), s(d, "class", "val svelte-16empi4"), s(c, "class", "sus-item svelte-16empi4"), s(v, "class", "lbl svelte-16empi4"), s(y, "class", "svelte-16empi4"), s(_, "class", "val svelte-16empi4"), s(b, "class", "sus-item alert svelte-16empi4"), s(O, "class", "lbl svelte-16empi4"), s(D, "class", "svelte-16empi4"), s(T, "class", "val svelte-16empi4"), s(S, "class", "sus-item svelte-16empi4"), s(o, "class", "sus-grid svelte-16empi4"), s(t, "class", "sustenance-panel svelte-16empi4"), s(U, "class", "svelte-16empi4"), s(H, "class", "stat-top svelte-16empi4"), s(K, "class", "bar-fill red svelte-16empi4"), ae(
        K,
        "width",
        /*baseBio*/
        l[3].fome * 10 + "%"
      ), s(le, "class", "bar-text svelte-16empi4"), s(X, "class", "bar-container svelte-16empi4"), s(W, "class", "stat-item svelte-16empi4"), s(ee, "class", "stat-top svelte-16empi4"), s(ke, "class", "bar-fill blue svelte-16empi4"), ae(
        ke,
        "width",
        /*baseBio*/
        l[3].sede * 10 + "%"
      ), s(re, "class", "bar-text svelte-16empi4"), s(we, "class", "bar-container svelte-16empi4"), s(ie, "class", "stat-item svelte-16empi4"), s(_e, "class", "stat-top svelte-16empi4"), s(Ge, "class", "bar-fill purple svelte-16empi4"), ae(
        Ge,
        "width",
        /*baseBio*/
        (l[3].exaustao || 0) * 10 + "%"
      ), s(fe, "class", "bar-text svelte-16empi4"), s(He, "class", "bar-container svelte-16empi4"), s(Oe, "class", "stat-item svelte-16empi4"), s(F, "class", "stats-row svelte-16empi4"), s(L, "class", "section-box svelte-16empi4"), s(Ue, "class", "svelte-16empi4"), s(Ze, "class", "hp-val"), s(Tt, "class", "hp-labels svelte-16empi4"), s(Pe, "class", "hp-bar-fill svelte-16empi4"), ae(
        Pe,
        "width",
        /*baseStats*/
        l[4].hp / /*baseStats*/
        l[4].maxHp * 100 + "%"
      ), s(Be, "class", "hp-bar-track svelte-16empi4"), s(rt, "class", "hp-section svelte-16empi4"), s(It, "class", "svelte-16empi4"), s(St, "class", "def-card svelte-16empi4"), s(Et, "class", "svelte-16empi4"), s(At, "class", "def-card svelte-16empi4"), s(tt, "class", "svelte-16empi4"), s(Ie, "class", "def-card svelte-16empi4"), s(xe, "class", "def-grid svelte-16empi4"), s(ve, "class", "section-box stats-box svelte-16empi4"), s(e, "class", "dashboard-container svelte-16empi4");
    },
    m(wt, Rt) {
      q(wt, e, Rt), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(c, f), a(c, u), a(c, d), a(d, p), a(o, m), a(o, b), a(b, v), a(b, h), a(b, _), a(_, w), a(_, k), a(_, A), a(_, y), a(o, E), a(o, S), a(S, O), a(S, C), a(S, T), a(T, N), a(T, I), a(T, D), a(t, M), Jt && Jt.m(t, null), a(e, G), a(e, L), a(L, U), a(L, z), a(L, F), a(F, W), a(W, H), a(H, V), a(H, J), Zt && Zt.m(H, null), a(W, j), a(W, X), a(X, K), a(X, Z), a(X, le), a(le, se), a(le, Y), a(F, Q), a(F, ie), a(ie, ee), a(ee, pe), a(ee, Ee), Yt && Yt.m(ee, null), a(ie, De), a(ie, we), a(we, ke), a(we, me), a(we, re), a(re, oe), a(re, be), a(F, de), a(F, Oe), a(Oe, _e), a(_e, ue), a(_e, Re), xt && xt.m(_e, null), a(Oe, Ce), a(Oe, He), a(He, Ge), a(He, Xe), a(He, fe), a(fe, qe), a(fe, Me), a(e, Se), a(e, ve), a(ve, Ue), a(ve, Ve), a(ve, rt), a(rt, Tt), a(Tt, ze), a(Tt, it), a(Tt, Ze), Rl.m(Ze, null), a(rt, ut), a(rt, Be), a(Be, Pe), a(ve, je), a(ve, xe), a(xe, St), a(St, It), a(St, Dt), vl.m(St, null), a(xe, Ct), a(xe, At), a(At, Et), a(At, Nt), Qt.m(At, null), a(xe, ct), a(xe, Ie), a(Ie, tt), a(Ie, Ye), il.m(Ie, null);
    },
    p(wt, Rt) {
      Rt & /*npcCount*/
      4 && te(
        p,
        /*npcCount*/
        wt[2]
      ), Rt & /*costPerAction*/
      2 && te(
        k,
        /*costPerAction*/
        wt[1]
      ), Rt & /*totalCycleCost*/
      32 && te(
        N,
        /*totalCycleCost*/
        wt[5]
      ), /*isGM*/
      wt[6] && Jt.p(wt, Rt), /*isGM*/
      wt[6] && Zt.p(wt, Rt), Rt & /*baseBio*/
      8 && ae(
        K,
        "width",
        /*baseBio*/
        wt[3].fome * 10 + "%"
      ), Rt & /*baseBio*/
      8 && $ !== ($ = /*baseBio*/
      wt[3].fome + "") && te(se, $), /*isGM*/
      wt[6] && Yt.p(wt, Rt), Rt & /*baseBio*/
      8 && ae(
        ke,
        "width",
        /*baseBio*/
        wt[3].sede * 10 + "%"
      ), Rt & /*baseBio*/
      8 && ye !== (ye = /*baseBio*/
      wt[3].sede + "") && te(oe, ye), /*isGM*/
      wt[6] && xt.p(wt, Rt), Rt & /*baseBio*/
      8 && ae(
        Ge,
        "width",
        /*baseBio*/
        (wt[3].exaustao || 0) * 10 + "%"
      ), Rt & /*baseBio*/
      8 && Le !== (Le = /*baseBio*/
      wt[3].exaustao + "") && te(qe, Le), Rl.p(wt, Rt), Rt & /*baseStats*/
      16 && ae(
        Pe,
        "width",
        /*baseStats*/
        wt[4].hp / /*baseStats*/
        wt[4].maxHp * 100 + "%"
      ), vl.p(wt, Rt), Qt.p(wt, Rt), il.p(wt, Rt);
    },
    i(wt) {
      wt && (bt || Ne(() => {
        bt = st(e, Qe, {}), bt.start();
      }));
    },
    o: ge,
    d(wt) {
      wt && P(e), Jt && Jt.d(), Zt && Zt.d(), Yt && Yt.d(), xt && xt.d(), Rl.d(), vl.d(), Qt.d(), il.d();
    }
  };
}
function n1(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-sync"></i> EXECUTAR CICLO DI√ÅRIO', s(e, "class", "cycle-btn svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*runCycle*/
        l[8]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function o1(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus-square svelte-16empi4"), s(n, "class", "fas fa-plus-square svelte-16empi4"), s(e, "class", "gm-ctrl svelte-16empi4");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler*/
          l[10]
        ),
        R(
          n,
          "click",
          /*click_handler_1*/
          l[11]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function r1(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus-square svelte-16empi4"), s(n, "class", "fas fa-plus-square svelte-16empi4"), s(e, "class", "gm-ctrl svelte-16empi4");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler_2*/
          l[12]
        ),
        R(
          n,
          "click",
          /*click_handler_3*/
          l[13]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function c1(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-minus-square svelte-16empi4"), s(n, "class", "fas fa-plus-square svelte-16empi4"), s(e, "class", "gm-ctrl svelte-16empi4");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*click_handler_4*/
          l[14]
        ),
        R(
          n,
          "click",
          /*click_handler_5*/
          l[15]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function f1(l) {
  let e = (
    /*baseStats*/
    l[4].hp + ""
  ), t, i, n = (
    /*baseStats*/
    l[4].maxHp + ""
  ), o;
  return {
    c() {
      t = B(e), i = B(" / "), o = B(n);
    },
    m(c, f) {
      q(c, t, f), q(c, i, f), q(c, o, f);
    },
    p(c, f) {
      f & /*baseStats*/
      16 && e !== (e = /*baseStats*/
      c[4].hp + "") && te(t, e), f & /*baseStats*/
      16 && n !== (n = /*baseStats*/
      c[4].maxHp + "") && te(o, n);
    },
    d(c) {
      c && (P(t), P(i), P(o));
    }
  };
}
function d1(l) {
  let e, t, i, n, o;
  return {
    c() {
      e = r("input"), t = B(` / 
                            `), i = r("input"), s(e, "type", "number"), s(e, "class", "inline-input svelte-16empi4"), s(i, "type", "number"), s(i, "class", "inline-input svelte-16empi4");
    },
    m(c, f) {
      q(c, e, f), x(
        e,
        /*baseStats*/
        l[4].hp
      ), q(c, t, f), q(c, i, f), x(
        i,
        /*baseStats*/
        l[4].maxHp
      ), n || (o = [
        R(
          e,
          "input",
          /*input0_input_handler*/
          l[16]
        ),
        R(
          e,
          "change",
          /*updateStats*/
          l[7]
        ),
        R(
          i,
          "input",
          /*input1_input_handler*/
          l[17]
        ),
        R(
          i,
          "change",
          /*updateStats*/
          l[7]
        )
      ], n = !0);
    },
    p(c, f) {
      f & /*baseStats*/
      16 && Je(e.value) !== /*baseStats*/
      c[4].hp && x(
        e,
        /*baseStats*/
        c[4].hp
      ), f & /*baseStats*/
      16 && Je(i.value) !== /*baseStats*/
      c[4].maxHp && x(
        i,
        /*baseStats*/
        c[4].maxHp
      );
    },
    d(c) {
      c && (P(e), P(t), P(i)), n = !1, Te(o);
    }
  };
}
function u1(l) {
  let e, t = (
    /*baseStats*/
    l[4].har + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "val svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && t !== (t = /*baseStats*/
      n[4].har + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function p1(l) {
  let e, t, i;
  return {
    c() {
      e = r("input"), s(e, "type", "number"), s(e, "class", "svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), x(
        e,
        /*baseStats*/
        l[4].har
      ), t || (i = [
        R(
          e,
          "input",
          /*input_input_handler*/
          l[18]
        ),
        R(
          e,
          "change",
          /*updateStats*/
          l[7]
        )
      ], t = !0);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && Je(e.value) !== /*baseStats*/
      n[4].har && x(
        e,
        /*baseStats*/
        n[4].har
      );
    },
    d(n) {
      n && P(e), t = !1, Te(i);
    }
  };
}
function m1(l) {
  let e, t = (
    /*baseStats*/
    l[4].lar + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "val svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && t !== (t = /*baseStats*/
      n[4].lar + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function b1(l) {
  let e, t, i;
  return {
    c() {
      e = r("input"), s(e, "type", "number"), s(e, "class", "svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), x(
        e,
        /*baseStats*/
        l[4].lar
      ), t || (i = [
        R(
          e,
          "input",
          /*input_input_handler_1*/
          l[19]
        ),
        R(
          e,
          "change",
          /*updateStats*/
          l[7]
        )
      ], t = !0);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && Je(e.value) !== /*baseStats*/
      n[4].lar && x(
        e,
        /*baseStats*/
        n[4].lar
      );
    },
    d(n) {
      n && P(e), t = !1, Te(i);
    }
  };
}
function v1(l) {
  let e, t = (
    /*baseStats*/
    l[4].protection + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "val svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && t !== (t = /*baseStats*/
      n[4].protection + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function h1(l) {
  let e, t, i;
  return {
    c() {
      e = r("input"), s(e, "type", "number"), s(e, "class", "svelte-16empi4");
    },
    m(n, o) {
      q(n, e, o), x(
        e,
        /*baseStats*/
        l[4].protection
      ), t || (i = [
        R(
          e,
          "input",
          /*input_input_handler_2*/
          l[20]
        ),
        R(
          e,
          "change",
          /*updateStats*/
          l[7]
        )
      ], t = !0);
    },
    p(n, o) {
      o & /*baseStats*/
      16 && Je(e.value) !== /*baseStats*/
      n[4].protection && x(
        e,
        /*baseStats*/
        n[4].protection
      );
    },
    d(n) {
      n && P(e), t = !1, Te(i);
    }
  };
}
function g1(l) {
  let e;
  function t(o, c) {
    return (
      /*group*/
      o[0] && /*group*/
      o[0].id ? s1 : i1
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      n.c(), e = Pt();
    },
    m(o, c) {
      n.m(o, c), q(o, e, c);
    },
    p(o, [c]) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), ne(n, 1), n.m(e.parentNode, e)));
    },
    i(o) {
      ne(n);
    },
    o: ge,
    d(o) {
      o && P(e), n.d(o);
    }
  };
}
function _1(l, e, t) {
  let i, n, o, c, f, { group: u = null } = e, { isLeader: d = !1 } = e;
  const p = game.user.isGM;
  async function m() {
    !p || !u || !u.id || (await Ut.updateGroupData(u.id, { baseStats: n, bio: i }), ui.notifications.info("Estat√≠sticas da Base Atualizadas."));
  }
  async function b() {
    !p || !u || !u.id || await Ut.runNPCCycle(u.id);
  }
  const v = () => {
    t(3, i.fome--, i), m();
  }, h = () => {
    t(3, i.fome++, i), m();
  }, _ = () => {
    t(3, i.sede--, i), m();
  }, w = () => {
    t(3, i.sede++, i), m();
  }, k = () => {
    t(3, i.exaustao--, i), m();
  }, A = () => {
    t(3, i.exaustao++, i), m();
  };
  function y() {
    n.hp = Je(this.value), t(4, n), t(0, u);
  }
  function E() {
    n.maxHp = Je(this.value), t(4, n), t(0, u);
  }
  function S() {
    n.har = Je(this.value), t(4, n), t(0, u);
  }
  function O() {
    n.lar = Je(this.value), t(4, n), t(0, u);
  }
  function C() {
    n.protection = Je(this.value), t(4, n), t(0, u);
  }
  return l.$$set = (T) => {
    "group" in T && t(0, u = T.group), "isLeader" in T && t(9, d = T.isLeader);
  }, l.$$.update = () => {
    l.$$.dirty & /*group*/
    1 && t(3, i = u && u.bio ? u.bio : { fome: 10, sede: 10, exaustao: 0 }), l.$$.dirty & /*group*/
    1 && t(4, n = u && u.baseStats ? u.baseStats : {
      hp: 20,
      maxHp: 20,
      har: 0,
      lar: 0,
      protection: 1
    }), l.$$.dirty & /*group*/
    1 && t(2, o = u && u.npcs ? u.npcs.length : 0), l.$$.dirty & /*npcCount*/
    4 && t(1, c = o), l.$$.dirty & /*costPerAction*/
    2 && t(5, f = c * 2);
  }, [
    u,
    c,
    o,
    i,
    n,
    f,
    p,
    m,
    b,
    d,
    v,
    h,
    _,
    w,
    k,
    A,
    y,
    E,
    S,
    O,
    C
  ];
}
class k1 extends mt {
  constructor(e) {
    super(), pt(this, e, _1, g1, dt, { group: 0, isLeader: 9 });
  }
}
const w1 = {
  label: "Mat√©ria",
  description: "Recursos estruturais para constru√ß√£o e fabrica√ß√£o de equipamentos f√≠sicos.",
  color: "#a1a1aa",
  icon: "fas fa-cube",
  base_mechanic: "structure",
  tiers: {
    1: {
      label: "Comum",
      har: 0,
      hp_mod: 1,
      desc: "Sucata, madeira simples, pedra bruta."
    },
    2: {
      label: "Raro",
      har: 1,
      hp_mod: 2,
      desc: "A√ßo refor√ßado, pol√≠meros industriais."
    },
    3: {
      label: "Lend√°rio",
      har: 2,
      hp_mod: 4,
      desc: "Ligas espaciais, tit√¢nio enriquecido."
    },
    4: {
      label: "M√≠tico",
      har: 3,
      hp_mod: 6,
      desc: "Materiais com propriedades an√¥malas latentes."
    },
    5: {
      label: "Universal",
      har: 5,
      hp_mod: 10,
      desc: "Mat√©ria densa de estrelas de n√™utrons ou metais divinos."
    },
    6: {
      label: "Multiversal",
      har: 10,
      hp_mod: 20,
      desc: "Fragmentos da muralha da realidade. Indestrut√≠vel por meios convencionais."
    },
    7: {
      label: "Onipotente",
      har: 20,
      hp_mod: 40,
      desc: "Mat√©ria conceitual pura."
    }
  }
}, y1 = {
  label: "Organismo",
  description: "Recursos biol√≥gicos. Consum√≠veis para sobreviv√™ncia ou insumos gen√©ticos.",
  color: "#4ade80",
  icon: "fas fa-leaf",
  base_mechanic: "consumable_bio",
  tiers: {
    1: {
      label: "Comum",
      sustento: 1,
      heal: 1,
      sede: 2,
      desc: "Ra√ß√£o padr√£o, √°gua filtrada, carne de ca√ßa."
    },
    2: {
      label: "Raro",
      sustento: 2,
      heal: 2,
      sede: 4,
      desc: "Nutrientes concentrados, ervas medicinais."
    },
    3: {
      label: "Lend√°rio",
      sustento: 3,
      heal: 3,
      sede: 6,
      desc: "N√©ctar vital, carne de bestas alpha."
    },
    4: {
      label: "M√≠tico",
      sustento: 4,
      heal: 4,
      sede: 8,
      desc: "Ambr√≥sia, frutas de √°rvores sagradas."
    },
    5: {
      label: "Universal",
      sustento: 5,
      heal: 5,
      sede: 10,
      desc: "Ess√™ncia vital pura."
    },
    6: {
      label: "Multiversal",
      sustento: 6,
      heal: 6,
      sede: 12,
      desc: "Biomassa eterna. N√£o apodrece."
    },
    7: {
      label: "Onipotente",
      sustento: 7,
      heal: 10,
      sede: 20,
      desc: "Vida em estado l√≠quido."
    }
  }
}, A1 = {
  label: "Energia",
  description: "Combust√≠vel para m√°quinas e muni√ß√£o para armas energ√©ticas.",
  color: "#facc15",
  icon: "fas fa-bolt",
  base_mechanic: "fuel",
  tiers: {
    1: {
      label: "Comum",
      power: 1,
      volatility: "Baixa",
      desc: "Baterias AA, Carv√£o, Gasolina."
    },
    2: {
      label: "Raro",
      power: 2,
      volatility: "M√©dia",
      desc: "C√©lulas de Hidrog√™nio, Plut√¥nio Civil."
    },
    3: {
      label: "Lend√°rio",
      power: 3,
      volatility: "Alta",
      desc: "Reatores Arc, Plasma Inst√°vel."
    },
    4: {
      label: "M√≠tico",
      power: 4,
      volatility: "Perigosa",
      desc: "Energia de Ponto Zero."
    },
    5: {
      label: "Universal",
      power: 5,
      volatility: "Extrema",
      desc: "Fiss√£o de buraco negro."
    },
    6: {
      label: "Multiversal",
      power: 6,
      volatility: "Cr√≠tica",
      desc: "Entropia reversa."
    },
    7: {
      label: "Onipotente",
      power: 7,
      volatility: "M√°xima",
      desc: "O pr√≥prio Big Bang engarrafado."
    }
  }
}, E1 = {
  label: "N√∫cleo",
  description: "Anomalias cristalizadas. Restauram Willpower (WP) e alteram a realidade.",
  color: "#c084fc",
  icon: "fas fa-atom",
  base_mechanic: "consumable_will",
  tiers: {
    1: {
      label: "Comum",
      wp_restore: 2,
      instability: 1,
      desc: "Poeira de Nexus residual."
    },
    2: {
      label: "Raro",
      wp_restore: 4,
      instability: 2,
      desc: "Fragmento de cristal brilhante."
    },
    3: {
      label: "Lend√°rio",
      wp_restore: 6,
      instability: 3,
      desc: "Geodo pulsante de realidade."
    },
    4: {
      label: "M√≠tico",
      wp_restore: 8,
      instability: 4,
      desc: "Cora√ß√£o de uma anomalia viva."
    },
    5: {
      label: "Universal",
      wp_restore: 10,
      instability: 5,
      desc: "Tesseract est√°vel."
    },
    6: {
      label: "Multiversal",
      wp_restore: 12,
      instability: 6,
      desc: "Fragmento do c√≥digo-fonte do universo."
    },
    7: {
      label: "Onipotente",
      wp_restore: 20,
      instability: 7,
      desc: "A Singularidade."
    }
  }
}, ol = {
  MATERIA: w1,
  ORGANISMO: y1,
  ENERGIA: A1,
  NUCLEO: E1
};
function In(l, e, t) {
  const i = l.slice();
  return i[56] = e[t], i[57] = e, i[58] = t, i;
}
function Tn(l, e, t) {
  const i = l.slice();
  return i[53] = e[t], i[59] = e, i[58] = t, i;
}
function O1(l, e, t) {
  const i = l.slice();
  return i[60] = e[t], i;
}
function Dn(l, e, t) {
  const i = l.slice();
  return i[63] = e[t], i;
}
function Rn(l, e, t) {
  const i = l.slice();
  i[49] = e[t];
  const n = (
    /*checkResources*/
    i[14](
      /*bp*/
      i[49].costs
    )
  );
  return i[50] = n, i;
}
function Mn(l, e, t) {
  const i = l.slice();
  return i[53] = e[t], i;
}
function Nn(l, e, t) {
  const i = l.slice();
  return i[43] = e[t], i;
}
function Ln(l, e, t) {
  const i = l.slice();
  return i[46] = e[t], i;
}
function S1(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Carregando Estruturas...", ae(e, "padding", "20px"), ae(e, "color", "#ccc"), ae(e, "text-align", "center");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function C1(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = (
    /*isGM*/
    l[6] && I1(l)
  );
  function v(w, k) {
    if (
      /*activeTab*/
      w[2] === "built"
    ) return R1;
    if (
      /*activeTab*/
      w[2] === "blueprints"
    ) return D1;
    if (
      /*activeTab*/
      w[2] === "creator"
    ) return T1;
  }
  let h = v(l), _ = h && h(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("button"), i.textContent = "BASE OPERACIONAL", n = g(), o = r("button"), o.textContent = "PROJETOS", c = g(), b && b.c(), f = g(), u = r("div"), _ && _.c(), s(i, "class", "svelte-ap4pdm"), he(
        i,
        "active",
        /*activeTab*/
        l[2] === "built"
      ), s(o, "class", "svelte-ap4pdm"), he(
        o,
        "active",
        /*activeTab*/
        l[2] === "blueprints"
      ), s(t, "class", "tabs svelte-ap4pdm"), s(u, "class", "content-area custom-scroll svelte-ap4pdm"), s(e, "class", "structures-layout svelte-ap4pdm");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, n), a(t, o), a(t, c), b && b.m(t, null), a(e, f), a(e, u), _ && _.m(u, null), p || (m = [
        R(
          i,
          "click",
          /*click_handler*/
          l[19]
        ),
        R(
          o,
          "click",
          /*click_handler_1*/
          l[20]
        )
      ], p = !0);
    },
    p(w, k) {
      k[0] & /*activeTab*/
      4 && he(
        i,
        "active",
        /*activeTab*/
        w[2] === "built"
      ), k[0] & /*activeTab*/
      4 && he(
        o,
        "active",
        /*activeTab*/
        w[2] === "blueprints"
      ), /*isGM*/
      w[6] && b.p(w, k), h === (h = v(w)) && _ ? _.p(w, k) : (_ && _.d(1), _ = h && h(w), _ && (_.c(), _.m(u, null)));
    },
    i(w) {
      w && (d || Ne(() => {
        d = st(e, Qe, {}), d.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), b && b.d(), _ && _.d(), p = !1, Te(m);
    }
  };
}
function I1(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "CRIADOR (GM)", s(e, "class", "gm-tab svelte-ap4pdm"), he(
        e,
        "active",
        /*activeTab*/
        l[2] === "creator"
      );
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_2*/
        l[21]
      ), t = !0);
    },
    p(n, o) {
      o[0] & /*activeTab*/
      4 && he(
        e,
        "active",
        /*activeTab*/
        n[2] === "creator"
      );
    },
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function T1(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe = ce(
    /*draft*/
    l[4].costs
  ), Ee = [];
  for (let ke = 0; ke < pe.length; ke += 1)
    Ee[ke] = qn(Tn(l, pe, ke));
  let De = ce(
    /*draft*/
    l[4].effects
  ), we = [];
  for (let ke = 0; ke < De.length; ke += 1)
    we[ke] = Un(In(l, De, ke));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("input"), n = g(), o = r("input"), c = g(), f = r("textarea"), u = g(), d = r("div"), p = r("label"), m = B("HP "), b = r("input"), v = g(), h = r("label"), _ = B("HAR "), w = r("input"), k = g(), A = r("label"), y = B("LAR "), E = r("input"), S = g(), O = r("label"), C = B("PROT "), T = r("input"), N = g(), I = r("div"), D = r("div"), M = B("CUSTOS DE CONSTRU√á√ÉO "), G = r("i"), L = g();
      for (let ke = 0; ke < Ee.length; ke += 1)
        Ee[ke].c();
      U = g(), z = r("div"), F = r("div"), W = B("EFEITOS (Bot√µes de Chat) "), H = r("i"), V = g();
      for (let ke = 0; ke < we.length; ke += 1)
        we[ke].c();
      J = g(), j = r("div"), X = r("div"), X.textContent = "ORACLE SCRIPT ENGINE (JS)", K = g(), Z = r("textarea"), le = g(), $ = r("small"), $.textContent = "Contexto: structure, group, actor, game, ui, GroupDatabase", se = g(), Y = r("div"), Q = r("button"), Q.textContent = "SALVAR PROJETO GLOBAL", s(i, "type", "text"), s(i, "placeholder", "Nome da Estrutura"), s(i, "class", "svelte-ap4pdm"), s(o, "type", "text"), s(o, "placeholder", "√çcone (fas fa-...)"), s(o, "class", "svelte-ap4pdm"), s(t, "class", "form-row svelte-ap4pdm"), s(f, "rows", "2"), s(f, "placeholder", "Descri√ß√£o tem√°tica..."), s(f, "class", "svelte-ap4pdm"), s(b, "type", "number"), s(b, "class", "svelte-ap4pdm"), s(p, "class", "svelte-ap4pdm"), s(w, "type", "number"), s(w, "class", "svelte-ap4pdm"), s(h, "class", "svelte-ap4pdm"), s(E, "type", "number"), s(E, "class", "svelte-ap4pdm"), s(A, "class", "svelte-ap4pdm"), s(T, "type", "number"), s(T, "class", "svelte-ap4pdm"), s(O, "class", "svelte-ap4pdm"), s(d, "class", "stats-inputs svelte-ap4pdm"), s(G, "class", "fas fa-plus"), s(D, "class", "le-head svelte-ap4pdm"), s(I, "class", "list-editor svelte-ap4pdm"), s(H, "class", "fas fa-plus"), s(F, "class", "le-head svelte-ap4pdm"), s(z, "class", "list-editor svelte-ap4pdm"), s(X, "class", "le-head svelte-ap4pdm"), s(Z, "class", "code-area svelte-ap4pdm"), s(j, "class", "script-editor"), s(Q, "class", "save-bp svelte-ap4pdm"), s(Y, "class", "creator-footer"), s(e, "class", "creator-panel svelte-ap4pdm");
    },
    m(ke, me) {
      q(ke, e, me), a(e, t), a(t, i), x(
        i,
        /*draft*/
        l[4].name
      ), a(t, n), a(t, o), x(
        o,
        /*draft*/
        l[4].icon
      ), a(e, c), a(e, f), x(
        f,
        /*draft*/
        l[4].description
      ), a(e, u), a(e, d), a(d, p), a(p, m), a(p, b), x(
        b,
        /*draft*/
        l[4].stats.hp
      ), a(d, v), a(d, h), a(h, _), a(h, w), x(
        w,
        /*draft*/
        l[4].stats.har
      ), a(d, k), a(d, A), a(A, y), a(A, E), x(
        E,
        /*draft*/
        l[4].stats.lar
      ), a(d, S), a(d, O), a(O, C), a(O, T), x(
        T,
        /*draft*/
        l[4].stats.protection
      ), a(e, N), a(e, I), a(I, D), a(D, M), a(D, G), a(I, L);
      for (let re = 0; re < Ee.length; re += 1)
        Ee[re] && Ee[re].m(I, null);
      a(e, U), a(e, z), a(z, F), a(F, W), a(F, H), a(z, V);
      for (let re = 0; re < we.length; re += 1)
        we[re] && we[re].m(z, null);
      a(e, J), a(e, j), a(j, X), a(j, K), a(j, Z), x(
        Z,
        /*draft*/
        l[4].script
      ), a(j, le), a(j, $), a(e, se), a(e, Y), a(Y, Q), ie || (ee = [
        R(
          i,
          "input",
          /*input0_input_handler*/
          l[28]
        ),
        R(
          o,
          "input",
          /*input1_input_handler*/
          l[29]
        ),
        R(
          f,
          "input",
          /*textarea0_input_handler*/
          l[30]
        ),
        R(
          b,
          "input",
          /*input2_input_handler*/
          l[31]
        ),
        R(
          w,
          "input",
          /*input3_input_handler*/
          l[32]
        ),
        R(
          E,
          "input",
          /*input4_input_handler*/
          l[33]
        ),
        R(
          T,
          "input",
          /*input5_input_handler*/
          l[34]
        ),
        R(
          G,
          "click",
          /*addCostRow*/
          l[8]
        ),
        R(
          H,
          "click",
          /*addEffectRow*/
          l[10]
        ),
        R(
          Z,
          "input",
          /*textarea1_input_handler*/
          l[42]
        ),
        R(
          Q,
          "click",
          /*saveBlueprint*/
          l[12]
        )
      ], ie = !0);
    },
    p(ke, me) {
      if (me[0] & /*draft*/
      16 && i.value !== /*draft*/
      ke[4].name && x(
        i,
        /*draft*/
        ke[4].name
      ), me[0] & /*draft*/
      16 && o.value !== /*draft*/
      ke[4].icon && x(
        o,
        /*draft*/
        ke[4].icon
      ), me[0] & /*draft*/
      16 && x(
        f,
        /*draft*/
        ke[4].description
      ), me[0] & /*draft*/
      16 && Je(b.value) !== /*draft*/
      ke[4].stats.hp && x(
        b,
        /*draft*/
        ke[4].stats.hp
      ), me[0] & /*draft*/
      16 && Je(w.value) !== /*draft*/
      ke[4].stats.har && x(
        w,
        /*draft*/
        ke[4].stats.har
      ), me[0] & /*draft*/
      16 && Je(E.value) !== /*draft*/
      ke[4].stats.lar && x(
        E,
        /*draft*/
        ke[4].stats.lar
      ), me[0] & /*draft*/
      16 && Je(T.value) !== /*draft*/
      ke[4].stats.protection && x(
        T,
        /*draft*/
        ke[4].stats.protection
      ), me[0] & /*removeCostRow, draft*/
      528) {
        pe = ce(
          /*draft*/
          ke[4].costs
        );
        let re;
        for (re = 0; re < pe.length; re += 1) {
          const ye = Tn(ke, pe, re);
          Ee[re] ? Ee[re].p(ye, me) : (Ee[re] = qn(ye), Ee[re].c(), Ee[re].m(I, null));
        }
        for (; re < Ee.length; re += 1)
          Ee[re].d(1);
        Ee.length = pe.length;
      }
      if (me[0] & /*removeEffectRow, draft*/
      2064) {
        De = ce(
          /*draft*/
          ke[4].effects
        );
        let re;
        for (re = 0; re < De.length; re += 1) {
          const ye = In(ke, De, re);
          we[re] ? we[re].p(ye, me) : (we[re] = Un(ye), we[re].c(), we[re].m(z, null));
        }
        for (; re < we.length; re += 1)
          we[re].d(1);
        we.length = De.length;
      }
      me[0] & /*draft*/
      16 && x(
        Z,
        /*draft*/
        ke[4].script
      );
    },
    d(ke) {
      ke && P(e), Fe(Ee, ke), Fe(we, ke), ie = !1, Te(ee);
    }
  };
}
function D1(l) {
  let e, t = ce(
    /*blueprints*/
    l[3]
  ), i = [];
  for (let n = 0; n < t.length; n += 1)
    i[n] = zn(Rn(l, t, n));
  return {
    c() {
      e = r("div");
      for (let n = 0; n < i.length; n += 1)
        i[n].c();
      s(e, "class", "bp-grid svelte-ap4pdm");
    },
    m(n, o) {
      q(n, e, o);
      for (let c = 0; c < i.length; c += 1)
        i[c] && i[c].m(e, null);
    },
    p(n, o) {
      if (o[0] & /*checkResources, blueprints, isGM, build, group, RARITY_COLORS, deleteBlueprint, initCreator*/
      319689) {
        t = ce(
          /*blueprints*/
          n[3]
        );
        let c;
        for (c = 0; c < t.length; c += 1) {
          const f = Rn(n, t, c);
          i[c] ? i[c].p(f, o) : (i[c] = zn(f), i[c].c(), i[c].m(e, null));
        }
        for (; c < i.length; c += 1)
          i[c].d(1);
        i.length = t.length;
      }
    },
    d(n) {
      n && P(e), Fe(i, n);
    }
  };
}
function R1(l) {
  let e, t, i = (
    /*builtStructures*/
    l[5].length === 0 && Bn()
  ), n = ce(
    /*builtStructures*/
    l[5]
  ), o = [];
  for (let c = 0; c < n.length; c += 1)
    o[c] = Wn(Nn(l, n, c));
  return {
    c() {
      i && i.c(), e = g(), t = r("div");
      for (let c = 0; c < o.length; c += 1)
        o[c].c();
      s(t, "class", "struct-grid svelte-ap4pdm");
    },
    m(c, f) {
      i && i.m(c, f), q(c, e, f), q(c, t, f);
      for (let u = 0; u < o.length; u += 1)
        o[u] && o[u].m(t, null);
    },
    p(c, f) {
      if (/*builtStructures*/
      c[5].length === 0 ? i || (i = Bn(), i.c(), i.m(e.parentNode, e)) : i && (i.d(1), i = null), f[0] & /*runScript, builtStructures, demolish, isGM, isLeader*/
      196706) {
        n = ce(
          /*builtStructures*/
          c[5]
        );
        let u;
        for (u = 0; u < n.length; u += 1) {
          const d = Nn(c, n, u);
          o[u] ? o[u].p(d, f) : (o[u] = Wn(d), o[u].c(), o[u].m(t, null));
        }
        for (; u < o.length; u += 1)
          o[u].d(1);
        o.length = n.length;
      }
    },
    d(c) {
      c && (P(e), P(t)), i && i.d(c), Fe(o, c);
    }
  };
}
function Pn(l) {
  let e, t = (
    /*k*/
    l[63] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*k*/
      l[63], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function M1(l) {
  let e;
  return {
    c() {
      e = r("option"), e.textContent = `Tier ${/*t*/
      l[60]}`, e.__value = /*t*/
      l[60], x(e, e.__value);
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function qn(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = ce(Object.keys(ol)), v = [];
  for (let E = 0; E < b.length; E += 1)
    v[E] = Pn(Dn(l, b, E));
  function h() {
    l[35].call(
      t,
      /*each_value_5*/
      l[59],
      /*i*/
      l[58]
    );
  }
  let _ = ce([1, 2, 3, 4, 5, 6, 7]), w = [];
  for (let E = 0; E < 7; E += 1)
    w[E] = M1(O1(l, _, E));
  function k() {
    l[36].call(
      n,
      /*each_value_5*/
      l[59],
      /*i*/
      l[58]
    );
  }
  function A() {
    l[37].call(
      c,
      /*each_value_5*/
      l[59],
      /*i*/
      l[58]
    );
  }
  function y() {
    return (
      /*click_handler_9*/
      l[38](
        /*i*/
        l[58]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("select");
      for (let E = 0; E < v.length; E += 1)
        v[E].c();
      i = g(), n = r("select");
      for (let E = 0; E < 7; E += 1)
        w[E].c();
      o = g(), c = r("input"), f = g(), u = r("i"), d = g(), s(t, "class", "svelte-ap4pdm"), /*c*/
      l[53].type === void 0 && Ne(h), s(n, "class", "svelte-ap4pdm"), /*c*/
      l[53].tier === void 0 && Ne(k), s(c, "type", "number"), ae(c, "width", "50px"), s(c, "class", "svelte-ap4pdm"), s(u, "class", "fas fa-times svelte-ap4pdm"), s(e, "class", "le-row svelte-ap4pdm");
    },
    m(E, S) {
      q(E, e, S), a(e, t);
      for (let O = 0; O < v.length; O += 1)
        v[O] && v[O].m(t, null);
      ot(
        t,
        /*c*/
        l[53].type,
        !0
      ), a(e, i), a(e, n);
      for (let O = 0; O < 7; O += 1)
        w[O] && w[O].m(n, null);
      ot(
        n,
        /*c*/
        l[53].tier,
        !0
      ), a(e, o), a(e, c), x(
        c,
        /*c*/
        l[53].qty
      ), a(e, f), a(e, u), a(e, d), p || (m = [
        R(t, "change", h),
        R(n, "change", k),
        R(c, "input", A),
        R(u, "click", y)
      ], p = !0);
    },
    p(E, S) {
      if (l = E, S & /*Object*/
      0) {
        b = ce(Object.keys(ol));
        let O;
        for (O = 0; O < b.length; O += 1) {
          const C = Dn(l, b, O);
          v[O] ? v[O].p(C, S) : (v[O] = Pn(C), v[O].c(), v[O].m(t, null));
        }
        for (; O < v.length; O += 1)
          v[O].d(1);
        v.length = b.length;
      }
      S[0] & /*draft*/
      16 && ot(
        t,
        /*c*/
        l[53].type
      ), S[0] & /*draft*/
      16 && ot(
        n,
        /*c*/
        l[53].tier
      ), S[0] & /*draft*/
      16 && Je(c.value) !== /*c*/
      l[53].qty && x(
        c,
        /*c*/
        l[53].qty
      );
    },
    d(E) {
      E && P(e), Fe(v, E), Fe(w, E), p = !1, Te(m);
    }
  };
}
function Un(l) {
  let e, t, i, n, o, c, f, u, d;
  function p() {
    l[39].call(
      t,
      /*each_value_4*/
      l[57],
      /*i*/
      l[58]
    );
  }
  function m() {
    l[40].call(
      n,
      /*each_value_4*/
      l[57],
      /*i*/
      l[58]
    );
  }
  function b() {
    return (
      /*click_handler_10*/
      l[41](
        /*i*/
        l[58]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("input"), o = g(), c = r("i"), f = g(), s(t, "type", "text"), s(t, "placeholder", "Nome do Bot√£o"), s(t, "class", "svelte-ap4pdm"), s(n, "type", "text"), s(n, "placeholder", "Texto do Chat..."), s(n, "class", "svelte-ap4pdm"), s(c, "class", "fas fa-times svelte-ap4pdm"), s(e, "class", "le-row svelte-ap4pdm");
    },
    m(v, h) {
      q(v, e, h), a(e, t), x(
        t,
        /*e*/
        l[56].label
      ), a(e, i), a(e, n), x(
        n,
        /*e*/
        l[56].desc
      ), a(e, o), a(e, c), a(e, f), u || (d = [
        R(t, "input", p),
        R(n, "input", m),
        R(c, "click", b)
      ], u = !0);
    },
    p(v, h) {
      l = v, h[0] & /*draft*/
      16 && t.value !== /*e*/
      l[56].label && x(
        t,
        /*e*/
        l[56].label
      ), h[0] & /*draft*/
      16 && n.value !== /*e*/
      l[56].desc && x(
        n,
        /*e*/
        l[56].desc
      );
    },
    d(v) {
      v && P(e), u = !1, Te(d);
    }
  };
}
function N1(l) {
  let e, t, i, n, o, c;
  function f() {
    return (
      /*click_handler_6*/
      l[25](
        /*bp*/
        l[49]
      )
    );
  }
  function u() {
    return (
      /*click_handler_7*/
      l[26](
        /*bp*/
        l[49]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("i"), s(t, "class", "fas fa-edit svelte-ap4pdm"), s(n, "class", "fas fa-trash svelte-ap4pdm"), s(e, "class", "gm-tools svelte-ap4pdm");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), o || (c = [
        R(t, "click", f),
        R(n, "click", u)
      ], o = !0);
    },
    p(d, p) {
      l = d;
    },
    d(d) {
      d && P(e), o = !1, Te(c);
    }
  };
}
function Gn(l) {
  let e, t = (
    /*c*/
    l[53].qty + ""
  ), i, n, o = (
    /*c*/
    l[53].type + ""
  ), c, f, u, d, p = (
    /*c*/
    l[53].tier + ""
  ), m;
  return {
    c() {
      var b, v;
      e = r("div"), i = B(t), n = B("x "), c = B(o), f = g(), u = r("span"), d = B("T"), m = B(p), ae(
        u,
        "color",
        /*RARITY_COLORS*/
        l[18][
          /*c*/
          l[53].tier
        ]
      ), s(e, "class", "cost-tag svelte-ap4pdm"), he(
        e,
        "ok",
        /*group*/
        (((v = (b = l[0].inventory) == null ? void 0 : b[
          /*c*/
          l[53].type
        ]) == null ? void 0 : v[
          /*c*/
          l[53].tier
        ]) || 0) >= /*c*/
        l[53].qty
      );
    },
    m(b, v) {
      q(b, e, v), a(e, i), a(e, n), a(e, c), a(e, f), a(e, u), a(u, d), a(u, m);
    },
    p(b, v) {
      var h, _;
      v[0] & /*blueprints*/
      8 && t !== (t = /*c*/
      b[53].qty + "") && te(i, t), v[0] & /*blueprints*/
      8 && o !== (o = /*c*/
      b[53].type + "") && te(c, o), v[0] & /*blueprints*/
      8 && p !== (p = /*c*/
      b[53].tier + "") && te(m, p), v[0] & /*blueprints*/
      8 && ae(
        u,
        "color",
        /*RARITY_COLORS*/
        b[18][
          /*c*/
          b[53].tier
        ]
      ), v[0] & /*group, blueprints*/
      9 && he(
        e,
        "ok",
        /*group*/
        (((_ = (h = b[0].inventory) == null ? void 0 : h[
          /*c*/
          b[53].type
        ]) == null ? void 0 : _[
          /*c*/
          b[53].tier
        ]) || 0) >= /*c*/
        b[53].qty
      );
    },
    d(b) {
      b && P(e);
    }
  };
}
function Hn(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "GR√ÅTIS", s(e, "class", "free svelte-ap4pdm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function zn(l) {
  let e, t, i, n = (
    /*bp*/
    l[49].name + ""
  ), o, c, f, u, d, p = (
    /*bp*/
    l[49].stats.hp + ""
  ), m, b, v = (
    /*bp*/
    l[49].stats.har + ""
  ), h, _, w = (
    /*bp*/
    l[49].stats.protection + ""
  ), k, A, y, E, S, O, C, T, N, I, D, M = (
    /*isGM*/
    l[6] && N1(l)
  ), G = ce(
    /*bp*/
    l[49].costs
  ), L = [];
  for (let F = 0; F < G.length; F += 1)
    L[F] = Gn(Mn(l, G, F));
  let U = (
    /*bp*/
    l[49].costs.length === 0 && Hn()
  );
  function z() {
    return (
      /*click_handler_8*/
      l[27](
        /*bp*/
        l[49]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("strong"), o = B(n), c = g(), M && M.c(), f = g(), u = r("div"), d = B("HP:"), m = B(p), b = B(" | HAR:"), h = B(v), _ = B(" | PROT:"), k = B(w), A = g(), y = r("div");
      for (let F = 0; F < L.length; F += 1)
        L[F].c();
      E = g(), U && U.c(), S = g(), O = r("button"), C = B("CONSTRUIR"), N = g(), s(t, "class", "bp-head svelte-ap4pdm"), s(u, "class", "bp-stats svelte-ap4pdm"), s(y, "class", "costs-list svelte-ap4pdm"), s(O, "class", "build-btn svelte-ap4pdm"), O.disabled = T = !/*canBuild*/
      l[50] && !/*isGM*/
      l[6], s(e, "class", "bp-card svelte-ap4pdm"), he(e, "disabled", !/*canBuild*/
      l[50] && !/*isGM*/
      l[6]);
    },
    m(F, W) {
      q(F, e, W), a(e, t), a(t, i), a(i, o), a(t, c), M && M.m(t, null), a(e, f), a(e, u), a(u, d), a(u, m), a(u, b), a(u, h), a(u, _), a(u, k), a(e, A), a(e, y);
      for (let H = 0; H < L.length; H += 1)
        L[H] && L[H].m(y, null);
      a(y, E), U && U.m(y, null), a(e, S), a(e, O), a(O, C), a(e, N), I || (D = R(O, "click", z), I = !0);
    },
    p(F, W) {
      if (l = F, W[0] & /*blueprints*/
      8 && n !== (n = /*bp*/
      l[49].name + "") && te(o, n), /*isGM*/
      l[6] && M.p(l, W), W[0] & /*blueprints*/
      8 && p !== (p = /*bp*/
      l[49].stats.hp + "") && te(m, p), W[0] & /*blueprints*/
      8 && v !== (v = /*bp*/
      l[49].stats.har + "") && te(h, v), W[0] & /*blueprints*/
      8 && w !== (w = /*bp*/
      l[49].stats.protection + "") && te(k, w), W[0] & /*group, blueprints, RARITY_COLORS*/
      262153) {
        G = ce(
          /*bp*/
          l[49].costs
        );
        let H;
        for (H = 0; H < G.length; H += 1) {
          const V = Mn(l, G, H);
          L[H] ? L[H].p(V, W) : (L[H] = Gn(V), L[H].c(), L[H].m(y, E));
        }
        for (; H < L.length; H += 1)
          L[H].d(1);
        L.length = G.length;
      }
      /*bp*/
      l[49].costs.length === 0 ? U || (U = Hn(), U.c(), U.m(y, null)) : U && (U.d(1), U = null), W[0] & /*blueprints*/
      8 && T !== (T = !/*canBuild*/
      l[50] && !/*isGM*/
      l[6]) && (O.disabled = T), W[0] & /*checkResources, blueprints, isGM*/
      16456 && he(e, "disabled", !/*canBuild*/
      l[50] && !/*isGM*/
      l[6]);
    },
    d(F) {
      F && P(e), M && M.d(), Fe(L, F), U && U.d(), I = !1, D();
    }
  };
}
function Bn(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nenhuma estrutura funcional. V√° em Projetos para construir.", s(e, "class", "empty svelte-ap4pdm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Fn(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_3*/
      l[22](
        /*struct*/
        l[43]
      )
    );
  }
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-trash del-btn svelte-ap4pdm");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function jn(l) {
  let e, t, i, n = (
    /*eff*/
    l[46].label + ""
  ), o, c, f, u;
  function d() {
    return (
      /*click_handler_4*/
      l[23](
        /*eff*/
        l[46],
        /*struct*/
        l[43]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("i"), i = g(), o = B(n), c = g(), s(t, "class", "fas fa-bolt"), s(e, "class", "eff-btn svelte-ap4pdm");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, o), a(e, c), f || (u = R(e, "click", d), f = !0);
    },
    p(p, m) {
      l = p, m[0] & /*builtStructures*/
      32 && n !== (n = /*eff*/
      l[46].label + "") && te(o, n);
    },
    d(p) {
      p && P(e), f = !1, u();
    }
  };
}
function Vn(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_5*/
      l[24](
        /*struct*/
        l[43]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-terminal"></i> EXECUTAR SISTEMA', s(e, "class", "script-btn svelte-ap4pdm");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function Wn(l) {
  let e, t, i, n, o, c, f = (
    /*struct*/
    l[43].name + ""
  ), u, d, p, m, b = (
    /*struct*/
    (l[43].currentHp ?? /*struct*/
    l[43].stats.hp) + ""
  ), v, h, _ = (
    /*struct*/
    l[43].stats.hp + ""
  ), w, k, A, y, E, S, O = (
    /*struct*/
    l[43].stats.har + ""
  ), C, T, N, I, D = (
    /*struct*/
    l[43].stats.lar + ""
  ), M, G, L, U, z = (
    /*struct*/
    l[43].stats.protection + ""
  ), F, W, H, V = (
    /*struct*/
    l[43].description + ""
  ), J, j, X, K, Z, le = (
    /*isGM*/
    (l[6] || /*isLeader*/
    l[1]) && Fn(l)
  ), $ = ce(
    /*struct*/
    l[43].effects
  ), se = [];
  for (let Q = 0; Q < $.length; Q += 1)
    se[Q] = jn(Ln(l, $, Q));
  let Y = (
    /*struct*/
    l[43].script && /*struct*/
    l[43].script.length > 10 && Vn(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), c = r("span"), u = B(f), d = g(), p = r("div"), m = B("HP "), v = B(b), h = B("/"), w = B(_), k = g(), le && le.c(), A = g(), y = r("div"), E = r("span"), S = B("HAR: "), C = B(O), T = g(), N = r("span"), I = B("LAR: "), M = B(D), G = g(), L = r("span"), U = B("PROT: "), F = B(z), W = g(), H = r("div"), J = B(V), j = g(), X = r("div");
      for (let Q = 0; Q < se.length; Q += 1)
        se[Q].c();
      K = g(), Y && Y.c(), Z = g(), s(i, "class", n = Ul(
        /*struct*/
        l[43].icon
      ) + " svelte-ap4pdm"), s(c, "class", "s-name svelte-ap4pdm"), s(p, "class", "hp-badge svelte-ap4pdm"), s(t, "class", "head svelte-ap4pdm"), s(E, "title", "Blindagem"), s(N, "title", "Armadura Leve"), s(L, "title", "Prote√ß√£o Geral"), s(y, "class", "stats-row svelte-ap4pdm"), s(H, "class", "desc svelte-ap4pdm"), s(X, "class", "effects-list svelte-ap4pdm"), s(e, "class", "struct-card svelte-ap4pdm");
    },
    m(Q, ie) {
      q(Q, e, ie), a(e, t), a(t, i), a(t, o), a(t, c), a(c, u), a(t, d), a(t, p), a(p, m), a(p, v), a(p, h), a(p, w), a(t, k), le && le.m(t, null), a(e, A), a(e, y), a(y, E), a(E, S), a(E, C), a(y, T), a(y, N), a(N, I), a(N, M), a(y, G), a(y, L), a(L, U), a(L, F), a(e, W), a(e, H), a(H, J), a(e, j), a(e, X);
      for (let ee = 0; ee < se.length; ee += 1)
        se[ee] && se[ee].m(X, null);
      a(e, K), Y && Y.m(e, null), a(e, Z);
    },
    p(Q, ie) {
      if (ie[0] & /*builtStructures*/
      32 && n !== (n = Ul(
        /*struct*/
        Q[43].icon
      ) + " svelte-ap4pdm") && s(i, "class", n), ie[0] & /*builtStructures*/
      32 && f !== (f = /*struct*/
      Q[43].name + "") && te(u, f), ie[0] & /*builtStructures*/
      32 && b !== (b = /*struct*/
      (Q[43].currentHp ?? /*struct*/
      Q[43].stats.hp) + "") && te(v, b), ie[0] & /*builtStructures*/
      32 && _ !== (_ = /*struct*/
      Q[43].stats.hp + "") && te(w, _), /*isGM*/
      Q[6] || /*isLeader*/
      Q[1] ? le ? le.p(Q, ie) : (le = Fn(Q), le.c(), le.m(t, null)) : le && (le.d(1), le = null), ie[0] & /*builtStructures*/
      32 && O !== (O = /*struct*/
      Q[43].stats.har + "") && te(C, O), ie[0] & /*builtStructures*/
      32 && D !== (D = /*struct*/
      Q[43].stats.lar + "") && te(M, D), ie[0] & /*builtStructures*/
      32 && z !== (z = /*struct*/
      Q[43].stats.protection + "") && te(F, z), ie[0] & /*builtStructures*/
      32 && V !== (V = /*struct*/
      Q[43].description + "") && te(J, V), ie[0] & /*builtStructures*/
      32) {
        $ = ce(
          /*struct*/
          Q[43].effects
        );
        let ee;
        for (ee = 0; ee < $.length; ee += 1) {
          const pe = Ln(Q, $, ee);
          se[ee] ? se[ee].p(pe, ie) : (se[ee] = jn(pe), se[ee].c(), se[ee].m(X, null));
        }
        for (; ee < se.length; ee += 1)
          se[ee].d(1);
        se.length = $.length;
      }
      /*struct*/
      Q[43].script && /*struct*/
      Q[43].script.length > 10 ? Y ? Y.p(Q, ie) : (Y = Vn(Q), Y.c(), Y.m(e, Z)) : Y && (Y.d(1), Y = null);
    },
    d(Q) {
      Q && P(e), le && le.d(), Fe(se, Q), Y && Y.d();
    }
  };
}
function L1(l) {
  let e;
  function t(o, c) {
    return (
      /*group*/
      o[0] && /*group*/
      o[0].id ? C1 : S1
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      n.c(), e = Pt();
    },
    m(o, c) {
      n.m(o, c), q(o, e, c);
    },
    p(o, c) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), ne(n, 1), n.m(e.parentNode, e)));
    },
    i(o) {
      ne(n);
    },
    o: ge,
    d(o) {
      o && P(e), n.d(o);
    }
  };
}
async function P1(l, e) {
  const t = `
            <div style="background:#050505; border:1px solid #00ff41; padding:10px; color:#fff; font-family:'Share Tech Mono'">
                <h3 style="color:#00ff41; border-bottom:1px solid #333; margin:0 0 5px 0;">${e}</h3>
                <div style="font-weight:bold; color:#facc15;">SYSTEM: ${l.label}</div>
                <div style="font-size:12px; margin-top:5px;">${l.desc}</div>
            </div>`;
  ChatMessage.create({ content: t });
}
function q1(l, e, t) {
  let i, { group: n = null } = e, { isLeader: o } = e;
  const c = game.user.isGM;
  let f = "built", u = [], d = {
    id: "",
    name: "",
    icon: "fas fa-home",
    description: "",
    stats: {
      hp: 20,
      maxHp: 20,
      har: 0,
      lar: 0,
      protection: 0
    },
    costs: [],
    effects: [],
    script: "// Escreva JS aqui. Vari√°veis: actor, group, structure, ui..."
  };
  function p(Q = null) {
    Q ? t(4, d = JSON.parse(JSON.stringify(Q))) : t(4, d = {
      id: foundry.utils.randomID(),
      name: "Nova Estrutura",
      icon: "fas fa-cube",
      description: "",
      stats: { hp: 20, har: 0, lar: 0, protection: 0 },
      costs: [],
      effects: [],
      script: `// Exemplo: Curar o grupo ao ativar
// group.bio.hp += 1;
// ui.notifications.info("Sistema Ativado!");`
    }), t(2, f = "creator");
  }
  function m() {
    t(4, d.costs = [...d.costs, { type: "MATERIA", tier: 1, qty: 10 }], d);
  }
  function b(Q) {
    t(4, d.costs = d.costs.filter((ie, ee) => ee !== Q), d);
  }
  function v() {
    t(
      4,
      d.effects = [
        ...d.effects,
        {
          label: "Novo Efeito",
          desc: "Descri√ß√£o..."
        }
      ],
      d
    );
  }
  function h(Q) {
    t(4, d.effects = d.effects.filter((ie, ee) => ee !== Q), d);
  }
  async function _() {
    if (!d.name) return ui.notifications.warn("Nome obrigat√≥rio.");
    t(4, d.stats.maxHp = d.stats.hp, d), await Ut.saveBlueprint(d), ui.notifications.info("Projeto Salvo na Database Global."), t(2, f = "blueprints");
  }
  async function w(Q) {
    await Ut.deleteBlueprint(Q);
  }
  function k(Q) {
    var ie, ee;
    if (!n || !Q || Q.length === 0) return !0;
    for (let pe of Q)
      if ((((ee = (ie = n.inventory) == null ? void 0 : ie[pe.type]) == null ? void 0 : ee[pe.tier]) || 0) < pe.qty) return !1;
    return !0;
  }
  async function A(Q) {
    if (n) {
      if (!o && !c) return ui.notifications.warn("Apenas o l√≠der constr√≥i.");
      if (!c && !k(Q.costs)) return ui.notifications.warn("Recursos insuficientes.");
      if (!c) {
        n.inventory || t(
          0,
          n.inventory = {
            MATERIA: {},
            ORGANISMO: {},
            ENERGIA: {},
            NUCLEO: {}
          },
          n
        );
        for (let ie of Q.costs)
          n.inventory[ie.type] || t(0, n.inventory[ie.type] = {}, n), t(0, n.inventory[ie.type][ie.tier] -= ie.qty, n);
      }
      await Ut.buildStructure(n.id, Q), await Ut.updateGroupData(n.id, { inventory: n.inventory }), ui.notifications.info(`${Q.name} constru√≠do!`), t(2, f = "built");
    }
  }
  async function y(Q) {
    n && (!o && !c || await Ut.deleteStructureInstance(n.id, Q));
  }
  async function E(Q) {
    if (!(!Q.script || Q.script.length < 5)) {
      ui.notifications.info(`Executando protocolos de ${Q.name}...`);
      try {
        const ie = Object.getPrototypeOf(async function() {
        }).constructor, ee = new ie("structure", "group", "actor", "game", "ui", "GroupDatabase", Q.script), pe = async () => {
          await Ut.updateGroupData(n.id, { structures: n.structures });
        };
        await ee(Q, n, game.user.character, game, ui, Ut), await pe();
      } catch (ie) {
        console.error(ie), ui.notifications.error(`Erro no Script: ${ie.message}`);
      }
    }
  }
  const S = {
    1: "#999",
    2: "#3b82f6",
    3: "#f59e0b",
    4: "#ef4444",
    5: "#10b981",
    6: "#7c3aed",
    7: "#000"
  }, O = () => t(2, f = "built"), C = () => t(2, f = "blueprints"), T = () => p(), N = (Q) => y(Q.instanceId), I = (Q, ie) => P1(Q, ie.name), D = (Q) => E(Q), M = (Q) => p(Q), G = (Q) => w(Q.id), L = (Q) => A(Q);
  function U() {
    d.name = this.value, t(4, d);
  }
  function z() {
    d.icon = this.value, t(4, d);
  }
  function F() {
    d.description = this.value, t(4, d);
  }
  function W() {
    d.stats.hp = Je(this.value), t(4, d);
  }
  function H() {
    d.stats.har = Je(this.value), t(4, d);
  }
  function V() {
    d.stats.lar = Je(this.value), t(4, d);
  }
  function J() {
    d.stats.protection = Je(this.value), t(4, d);
  }
  function j(Q, ie) {
    Q[ie].type = Gt(this), t(4, d);
  }
  function X(Q, ie) {
    Q[ie].tier = Gt(this), t(4, d);
  }
  function K(Q, ie) {
    Q[ie].qty = Je(this.value), t(4, d);
  }
  const Z = (Q) => b(Q);
  function le(Q, ie) {
    Q[ie].label = this.value, t(4, d);
  }
  function $(Q, ie) {
    Q[ie].desc = this.value, t(4, d);
  }
  const se = (Q) => h(Q);
  function Y() {
    d.script = this.value, t(4, d);
  }
  return l.$$set = (Q) => {
    "group" in Q && t(0, n = Q.group), "isLeader" in Q && t(1, o = Q.isLeader);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*group*/
    1 && t(5, i = n && Array.isArray(n.structures) ? n.structures : []);
  }, t(3, u = Ut.getBlueprints()), [
    n,
    o,
    f,
    u,
    d,
    i,
    c,
    p,
    m,
    b,
    v,
    h,
    _,
    w,
    k,
    A,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y
  ];
}
class U1 extends mt {
  constructor(e) {
    super(), pt(this, e, q1, L1, dt, { group: 0, isLeader: 1 }, null, [-1, -1, -1]);
  }
}
function Xn(l, e, t) {
  const i = l.slice();
  return i[44] = e[t], i;
}
function Jn(l, e, t) {
  const i = l.slice();
  i[40] = e[t], i[42] = e, i[43] = t;
  const n = (
    /*getEffectData*/
    i[22](
      /*npc*/
      i[40].personality
    )
  );
  return i[41] = n, i;
}
function Yn(l, e, t) {
  const i = l.slice();
  return i[44] = e[t], i;
}
function Qn(l, e, t) {
  const i = l.slice();
  return i[49] = e[t], i;
}
function Kn(l, e, t) {
  const i = l.slice();
  return i[49] = e[t], i;
}
function Zn(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y = (
    /*draftNPC*/
    (l[3].name || "Nome") + ""
  ), Q, ie, ee, pe, Ee = (
    /*getRoleLabel*/
    l[19](
      /*draftNPC*/
      l[3].role
    ) + ""
  ), De, we, ke, me = (
    /*draftNPC*/
    l[3].rarity + ""
  ), re, ye, oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe = (
    /*previewEffect*/
    l[6].label + ""
  ), fe, Le, qe, Me = (
    /*previewEffect*/
    l[6].desc + ""
  ), Se, ve, Ue, Ve, rt = (
    /*draftNPC*/
    (l[3].description || /*getRoleDesc*/
    l[20](
      /*draftNPC*/
      l[3].role
    )) + ""
  ), Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It, Dt = ce(
    /*rolesList*/
    l[9]
  ), Ct = [];
  for (let Ie = 0; Ie < Dt.length; Ie += 1)
    Ct[Ie] = xn(Kn(l, Dt, Ie));
  let At = ce(
    /*rarityList*/
    l[10]
  ), Et = [];
  for (let Ie = 0; Ie < At.length; Ie += 1)
    Et[Ie] = $n(Qn(l, At, Ie));
  let Nt = ce(
    /*personalityList*/
    l[11]
  ), ct = [];
  for (let Ie = 0; Ie < Nt.length; Ie += 1)
    ct[Ie] = eo(Yn(l, Nt, Ie));
  return {
    c() {
      e = r("div"), t = r("div"), t.textContent = "NOVO REGISTRO", i = g(), n = r("div"), o = r("div"), c = r("div"), f = r("label"), f.textContent = "Nome", u = r("input"), d = g(), p = r("div"), m = r("label"), m.textContent = "Fun√ß√£o", b = g(), v = r("select");
      for (let Ie = 0; Ie < Ct.length; Ie += 1)
        Ct[Ie].c();
      h = g(), _ = r("div"), w = r("div"), k = r("label"), k.textContent = "Raridade", A = g(), y = r("select");
      for (let Ie = 0; Ie < Et.length; Ie += 1)
        Et[Ie].c();
      E = g(), S = r("div"), O = r("label"), O.textContent = "Personalidade", C = g(), T = r("select");
      for (let Ie = 0; Ie < ct.length; Ie += 1)
        ct[Ie].c();
      N = g(), I = r("div"), D = r("label"), D.textContent = "URL Imagem", M = r("input"), G = g(), L = r("div"), U = r("label"), U.textContent = "Hist√≥rico (Opcional)", z = r("textarea"), F = g(), W = r("div"), H = r("small"), H.textContent = "PREVIEW", V = g(), J = r("div"), j = r("div"), X = r("div"), K = r("i"), le = g(), $ = r("div"), se = r("div"), Q = B(Y), ie = g(), ee = r("div"), pe = r("span"), De = B(Ee), we = g(), ke = r("span"), re = B(me), ye = g(), oe = r("div"), be = r("div"), de = r("img"), _e = g(), ue = r("div"), Re = r("div"), Ce = r("div"), He = r("i"), Ge = g(), fe = B(Xe), Le = g(), qe = r("div"), Se = B(Me), ve = g(), Ue = r("div"), Ve = r("p"), Tt = B(rt), it = g(), Ze = r("div"), ut = r("button"), ut.textContent = "CANCELAR", Be = g(), Pe = r("button"), Pe.textContent = "CONFIRMAR", s(t, "class", "creation-header svelte-1wz9djc"), s(f, "class", "svelte-1wz9djc"), s(u, "type", "text"), s(u, "class", "svelte-1wz9djc"), s(c, "class", "f-group svelte-1wz9djc"), s(m, "class", "svelte-1wz9djc"), s(v, "class", "svelte-1wz9djc"), /*draftNPC*/
      l[3].role === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[28].call(v)
      )), s(p, "class", "f-group svelte-1wz9djc"), s(k, "class", "svelte-1wz9djc"), s(y, "class", "svelte-1wz9djc"), /*draftNPC*/
      l[3].rarity === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[29].call(y)
      )), s(w, "class", "f-group svelte-1wz9djc"), s(O, "class", "svelte-1wz9djc"), s(T, "class", "svelte-1wz9djc"), /*draftNPC*/
      l[3].personality === void 0 && Ne(() => (
        /*select2_change_handler*/
        l[30].call(T)
      )), s(S, "class", "f-group svelte-1wz9djc"), s(_, "class", "f-row svelte-1wz9djc"), s(D, "class", "svelte-1wz9djc"), s(M, "type", "text"), s(M, "class", "svelte-1wz9djc"), s(I, "class", "f-group svelte-1wz9djc"), s(U, "class", "svelte-1wz9djc"), s(z, "rows", "2"), s(z, "class", "svelte-1wz9djc"), s(L, "class", "f-group svelte-1wz9djc"), s(o, "class", "form-col"), s(H, "class", "svelte-1wz9djc"), s(K, "class", Z = Ul(
        /*getRoleIcon*/
        l[18](
          /*draftNPC*/
          l[3].role
        )
      ) + " svelte-1wz9djc"), s(X, "class", "role-icon svelte-1wz9djc"), s(se, "class", "name svelte-1wz9djc"), s(pe, "class", "badge role svelte-1wz9djc"), s(ke, "class", "badge rarity svelte-1wz9djc"), s(ee, "class", "badges svelte-1wz9djc"), s($, "class", "npc-basic svelte-1wz9djc"), s(j, "class", "npc-head svelte-1wz9djc"), at(de.src, Oe = /*draftNPC*/
      l[3].img) || s(de, "src", Oe), s(de, "alt", "NPC"), s(de, "class", "svelte-1wz9djc"), s(be, "class", "img-box svelte-1wz9djc"), s(He, "class", "fas fa-star"), s(Ce, "class", "eff-head svelte-1wz9djc"), s(qe, "class", "eff-desc svelte-1wz9djc"), s(Re, "class", "trait-effect svelte-1wz9djc"), s(Ve, "class", "svelte-1wz9djc"), s(Ue, "class", "desc-box svelte-1wz9djc"), s(ue, "class", "details svelte-1wz9djc"), s(oe, "class", "npc-body svelte-1wz9djc"), s(J, "class", ze = "npc-card rarity-" + /*draftNPC*/
      l[3].rarity + " preview-card svelte-1wz9djc"), s(W, "class", "preview-col svelte-1wz9djc"), s(n, "class", "creation-body svelte-1wz9djc"), s(ut, "class", "btn-cancel svelte-1wz9djc"), s(Pe, "class", "btn-confirm svelte-1wz9djc"), s(Ze, "class", "creation-footer svelte-1wz9djc"), s(e, "class", "creation-panel svelte-1wz9djc");
    },
    m(Ie, tt) {
      q(Ie, e, tt), a(e, t), a(e, i), a(e, n), a(n, o), a(o, c), a(c, f), a(c, u), x(
        u,
        /*draftNPC*/
        l[3].name
      ), a(o, d), a(o, p), a(p, m), a(p, b), a(p, v);
      for (let Ye = 0; Ye < Ct.length; Ye += 1)
        Ct[Ye] && Ct[Ye].m(v, null);
      ot(
        v,
        /*draftNPC*/
        l[3].role,
        !0
      ), a(o, h), a(o, _), a(_, w), a(w, k), a(w, A), a(w, y);
      for (let Ye = 0; Ye < Et.length; Ye += 1)
        Et[Ye] && Et[Ye].m(y, null);
      ot(
        y,
        /*draftNPC*/
        l[3].rarity,
        !0
      ), a(_, E), a(_, S), a(S, O), a(S, C), a(S, T);
      for (let Ye = 0; Ye < ct.length; Ye += 1)
        ct[Ye] && ct[Ye].m(T, null);
      ot(
        T,
        /*draftNPC*/
        l[3].personality,
        !0
      ), a(o, N), a(o, I), a(I, D), a(I, M), x(
        M,
        /*draftNPC*/
        l[3].img
      ), a(o, G), a(o, L), a(L, U), a(L, z), x(
        z,
        /*draftNPC*/
        l[3].description
      ), a(n, F), a(n, W), a(W, H), a(W, V), a(W, J), a(J, j), a(j, X), a(X, K), a(j, le), a(j, $), a($, se), a(se, Q), a($, ie), a($, ee), a(ee, pe), a(pe, De), a(ee, we), a(ee, ke), a(ke, re), a(J, ye), a(J, oe), a(oe, be), a(be, de), a(oe, _e), a(oe, ue), a(ue, Re), a(Re, Ce), a(Ce, He), a(Ce, Ge), a(Ce, fe), a(Re, Le), a(Re, qe), a(qe, Se), a(ue, ve), a(ue, Ue), a(Ue, Ve), a(Ve, Tt), a(e, it), a(e, Ze), a(Ze, ut), a(Ze, Be), a(Ze, Pe), xe = !0, St || (It = [
        R(
          u,
          "input",
          /*input0_input_handler*/
          l[27]
        ),
        R(
          v,
          "change",
          /*select0_change_handler*/
          l[28]
        ),
        R(
          y,
          "change",
          /*select1_change_handler*/
          l[29]
        ),
        R(
          T,
          "change",
          /*select2_change_handler*/
          l[30]
        ),
        R(
          M,
          "input",
          /*input1_input_handler*/
          l[31]
        ),
        R(
          z,
          "input",
          /*textarea_input_handler*/
          l[32]
        ),
        R(
          ut,
          "click",
          /*cancelCreation*/
          l[14]
        ),
        R(
          Pe,
          "click",
          /*confirmCreation*/
          l[13]
        )
      ], St = !0);
    },
    p(Ie, tt) {
      if (tt[0] & /*draftNPC, rolesList*/
      520 && u.value !== /*draftNPC*/
      Ie[3].name && x(
        u,
        /*draftNPC*/
        Ie[3].name
      ), tt[0] & /*rolesList, getRoleLabel*/
      524800) {
        Dt = ce(
          /*rolesList*/
          Ie[9]
        );
        let Ye;
        for (Ye = 0; Ye < Dt.length; Ye += 1) {
          const bt = Kn(Ie, Dt, Ye);
          Ct[Ye] ? Ct[Ye].p(bt, tt) : (Ct[Ye] = xn(bt), Ct[Ye].c(), Ct[Ye].m(v, null));
        }
        for (; Ye < Ct.length; Ye += 1)
          Ct[Ye].d(1);
        Ct.length = Dt.length;
      }
      if (tt[0] & /*draftNPC, rolesList*/
      520 && ot(
        v,
        /*draftNPC*/
        Ie[3].role
      ), tt[0] & /*rarityList*/
      1024) {
        At = ce(
          /*rarityList*/
          Ie[10]
        );
        let Ye;
        for (Ye = 0; Ye < At.length; Ye += 1) {
          const bt = Qn(Ie, At, Ye);
          Et[Ye] ? Et[Ye].p(bt, tt) : (Et[Ye] = $n(bt), Et[Ye].c(), Et[Ye].m(y, null));
        }
        for (; Ye < Et.length; Ye += 1)
          Et[Ye].d(1);
        Et.length = At.length;
      }
      if (tt[0] & /*draftNPC, rolesList*/
      520 && ot(
        y,
        /*draftNPC*/
        Ie[3].rarity
      ), tt[0] & /*personalityList, getPersLabel*/
      2099200) {
        Nt = ce(
          /*personalityList*/
          Ie[11]
        );
        let Ye;
        for (Ye = 0; Ye < Nt.length; Ye += 1) {
          const bt = Yn(Ie, Nt, Ye);
          ct[Ye] ? ct[Ye].p(bt, tt) : (ct[Ye] = eo(bt), ct[Ye].c(), ct[Ye].m(T, null));
        }
        for (; Ye < ct.length; Ye += 1)
          ct[Ye].d(1);
        ct.length = Nt.length;
      }
      tt[0] & /*draftNPC, rolesList*/
      520 && ot(
        T,
        /*draftNPC*/
        Ie[3].personality
      ), tt[0] & /*draftNPC, rolesList*/
      520 && M.value !== /*draftNPC*/
      Ie[3].img && x(
        M,
        /*draftNPC*/
        Ie[3].img
      ), tt[0] & /*draftNPC, rolesList*/
      520 && x(
        z,
        /*draftNPC*/
        Ie[3].description
      ), (!xe || tt[0] & /*draftNPC, rolesList*/
      520 && Z !== (Z = Ul(
        /*getRoleIcon*/
        Ie[18](
          /*draftNPC*/
          Ie[3].role
        )
      ) + " svelte-1wz9djc")) && s(K, "class", Z), (!xe || tt[0] & /*draftNPC*/
      8) && Y !== (Y = /*draftNPC*/
      (Ie[3].name || "Nome") + "") && te(Q, Y), (!xe || tt[0] & /*draftNPC*/
      8) && Ee !== (Ee = /*getRoleLabel*/
      Ie[19](
        /*draftNPC*/
        Ie[3].role
      ) + "") && te(De, Ee), (!xe || tt[0] & /*draftNPC*/
      8) && me !== (me = /*draftNPC*/
      Ie[3].rarity + "") && te(re, me), (!xe || tt[0] & /*draftNPC, rolesList*/
      520 && !at(de.src, Oe = /*draftNPC*/
      Ie[3].img)) && s(de, "src", Oe), (!xe || tt[0] & /*previewEffect*/
      64) && Xe !== (Xe = /*previewEffect*/
      Ie[6].label + "") && te(fe, Xe), (!xe || tt[0] & /*previewEffect*/
      64) && Me !== (Me = /*previewEffect*/
      Ie[6].desc + "") && te(Se, Me), (!xe || tt[0] & /*draftNPC*/
      8) && rt !== (rt = /*draftNPC*/
      (Ie[3].description || /*getRoleDesc*/
      Ie[20](
        /*draftNPC*/
        Ie[3].role
      )) + "") && te(Tt, rt), (!xe || tt[0] & /*draftNPC, rolesList*/
      520 && ze !== (ze = "npc-card rarity-" + /*draftNPC*/
      Ie[3].rarity + " preview-card svelte-1wz9djc")) && s(J, "class", ze);
    },
    i(Ie) {
      xe || (Ie && Ne(() => {
        xe && (je || (je = We(e, yt, {}, !0)), je.run(1));
      }), xe = !0);
    },
    o(Ie) {
      Ie && (je || (je = We(e, yt, {}, !1)), je.run(0)), xe = !1;
    },
    d(Ie) {
      Ie && P(e), Fe(Ct, Ie), Fe(Et, Ie), Fe(ct, Ie), Ie && je && je.end(), St = !1, Te(It);
    }
  };
}
function xn(l) {
  let e, t = (
    /*getRoleLabel*/
    l[19](
      /*r*/
      l[49]
    ) + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[49], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function $n(l) {
  let e, t = (
    /*r*/
    l[49] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[49], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function eo(l) {
  let e, t = (
    /*getPersLabel*/
    l[21](
      /*p*/
      l[44]
    ) + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*p*/
      l[44], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function G1(l) {
  let e, t = [], i = /* @__PURE__ */ new Map(), n, o = ce(
    /*playerList*/
    l[7]
  );
  const c = (f) => (
    /*p*/
    f[44].id
  );
  for (let f = 0; f < o.length; f += 1) {
    let u = Xn(l, o, f), d = c(u);
    i.set(d, t[f] = to(d, u));
  }
  return {
    c() {
      e = r("div");
      for (let f = 0; f < t.length; f += 1)
        t[f].c();
      s(e, "class", "player-grid svelte-1wz9djc");
    },
    m(f, u) {
      q(f, e, u);
      for (let d = 0; d < t.length; d += 1)
        t[d] && t[d].m(e, null);
      n = !0;
    },
    p(f, u) {
      u[0] & /*playerList, group*/
      129 && (o = ce(
        /*playerList*/
        f[7]
      ), $e(), t = Tl(t, u, c, 1, f, o, i, e, Ya, to, null, Xn), et());
    },
    i(f) {
      if (!n) {
        for (let u = 0; u < o.length; u += 1)
          ne(t[u]);
        n = !0;
      }
    },
    o(f) {
      for (let u = 0; u < t.length; u += 1)
        Ae(t[u]);
      n = !1;
    },
    d(f) {
      f && P(e);
      for (let u = 0; u < t.length; u += 1)
        t[u].d();
    }
  };
}
function H1(l) {
  let e, t, i, n, o, c = [], f = /* @__PURE__ */ new Map(), u, d = (
    /*isGM*/
    l[1] && lo(l)
  ), p = ce(
    /*npcList*/
    l[8]
  );
  const m = (b) => (
    /*npc*/
    b[40].id
  );
  for (let b = 0; b < p.length; b += 1) {
    let v = Jn(l, p, b), h = m(v);
    f.set(h, c[b] = so(h, v));
  }
  return {
    c() {
      e = r("div"), t = r("span"), t.textContent = "Habitantes da Base", i = g(), d && d.c(), n = g(), o = r("div");
      for (let b = 0; b < c.length; b += 1)
        c[b].c();
      s(e, "class", "npc-controls svelte-1wz9djc"), s(o, "class", "npc-grid svelte-1wz9djc");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, i), d && d.m(e, null), q(b, n, v), q(b, o, v);
      for (let h = 0; h < c.length; h += 1)
        c[h] && c[h].m(o, null);
      u = !0;
    },
    p(b, v) {
      /*isGM*/
      b[1] ? d ? d.p(b, v) : (d = lo(b), d.c(), d.m(e, null)) : d && (d.d(1), d = null), v[0] & /*npcList, editingNPC, getRoleDesc, getEffectData, getPersLabel, saveEdit, deleteNPC, isGM, getRoleLabel, getRoleIcon*/
      8323362 && (p = ce(
        /*npcList*/
        b[8]
      ), $e(), c = Tl(c, v, m, 1, b, p, f, o, Ya, so, null, Jn), et());
    },
    i(b) {
      if (!u) {
        for (let v = 0; v < p.length; v += 1)
          ne(c[v]);
        u = !0;
      }
    },
    o(b) {
      for (let v = 0; v < c.length; v += 1)
        Ae(c[v]);
      u = !1;
    },
    d(b) {
      b && (P(e), P(n), P(o)), d && d.d();
      for (let v = 0; v < c.length; v += 1)
        c[v].d();
    }
  };
}
function to(l, e) {
  let t, i, n, o, c, f = (
    /*p*/
    e[44].name + ""
  ), u, d, p, m = (
    /*p*/
    e[44].id === /*group*/
    e[0].leader ? "L√çDER" : "MEMBRO"
  ), b, v, h, _;
  return {
    key: l,
    first: null,
    c() {
      var w;
      t = r("div"), i = r("img"), o = g(), c = r("span"), u = B(f), d = g(), p = r("span"), b = B(m), v = g(), at(i.src, n = /*p*/
      ((w = e[44].character) == null ? void 0 : w.img) || "icons/svg/mystery-man.svg") || s(i, "src", n), s(i, "alt", "P"), s(i, "class", "svelte-1wz9djc"), s(p, "class", "role svelte-1wz9djc"), ae(
        p,
        "background",
        /*p*/
        e[44].id === /*group*/
        e[0].leader ? "#004400" : "#222"
      ), ae(
        p,
        "color",
        /*p*/
        e[44].id === /*group*/
        e[0].leader ? "#00ff41" : "#aaa"
      ), s(t, "class", "player-card svelte-1wz9djc"), this.first = t;
    },
    m(w, k) {
      q(w, t, k), a(t, i), a(t, o), a(t, c), a(c, u), a(t, d), a(t, p), a(p, b), a(t, v), _ = !0;
    },
    p(w, k) {
      var A;
      e = w, (!_ || k[0] & /*playerList*/
      128 && !at(i.src, n = /*p*/
      ((A = e[44].character) == null ? void 0 : A.img) || "icons/svg/mystery-man.svg")) && s(i, "src", n), (!_ || k[0] & /*playerList*/
      128) && f !== (f = /*p*/
      e[44].name + "") && te(u, f), (!_ || k[0] & /*playerList, group*/
      129) && m !== (m = /*p*/
      e[44].id === /*group*/
      e[0].leader ? "L√çDER" : "MEMBRO") && te(b, m), (!_ || k[0] & /*playerList, group*/
      129) && ae(
        p,
        "background",
        /*p*/
        e[44].id === /*group*/
        e[0].leader ? "#004400" : "#222"
      ), (!_ || k[0] & /*playerList, group*/
      129) && ae(
        p,
        "color",
        /*p*/
        e[44].id === /*group*/
        e[0].leader ? "#00ff41" : "#aaa"
      );
    },
    i(w) {
      _ || (w && Ne(() => {
        _ && (h || (h = We(t, yt, {}, !0)), h.run(1));
      }), _ = !0);
    },
    o(w) {
      w && (h || (h = We(t, yt, {}, !1)), h.run(0)), _ = !1;
    },
    d(w) {
      w && P(t), w && h && h.end();
    }
  };
}
function lo(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-edit"></i> MANUAL', i = g(), n = r("button"), n.innerHTML = '<i class="fas fa-dice"></i> ALEAT√ìRIO', s(t, "class", "manual-btn svelte-1wz9djc"), s(n, "class", "add-btn svelte-1wz9djc"), s(e, "class", "gm-actions svelte-1wz9djc");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), o || (c = [
        R(
          t,
          "click",
          /*startCreation*/
          l[12]
        ),
        R(
          n,
          "click",
          /*generateNPC*/
          l[15]
        )
      ], o = !0);
    },
    p: ge,
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function z1(l) {
  let e, t = (
    /*npc*/
    l[40].name + ""
  ), i;
  return {
    c() {
      e = r("div"), i = B(t), s(e, "class", "name svelte-1wz9djc");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*npcList*/
      256 && t !== (t = /*npc*/
      n[40].name + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function B1(l) {
  let e, t, i;
  function n() {
    l[33].call(
      e,
      /*each_value*/
      l[42],
      /*npc_index*/
      l[43]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "type", "text"), s(e, "class", "edit-name svelte-1wz9djc");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*npc*/
        l[40].name
      ), t || (i = R(e, "input", n), t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*npcList*/
      256 && e.value !== /*npc*/
      l[40].name && x(
        e,
        /*npc*/
        l[40].name
      );
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function ao(l) {
  let e;
  function t(o, c) {
    return (
      /*editingNPC*/
      o[5] === /*npc*/
      o[40].id ? j1 : F1
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      e = r("div"), n.c(), s(e, "class", "card-tools svelte-1wz9djc");
    },
    m(o, c) {
      q(o, e, c), n.m(e, null);
    },
    p(o, c) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), n.m(e, null)));
    },
    d(o) {
      o && P(e), n.d();
    }
  };
}
function F1(l) {
  let e, t, i, n, o;
  function c() {
    return (
      /*click_handler_3*/
      l[35](
        /*npc*/
        l[40]
      )
    );
  }
  function f() {
    return (
      /*click_handler_4*/
      l[36](
        /*npc*/
        l[40]
      )
    );
  }
  return {
    c() {
      e = r("i"), t = g(), i = r("i"), s(e, "class", "fas fa-pen edit svelte-1wz9djc"), s(i, "class", "fas fa-trash del svelte-1wz9djc");
    },
    m(u, d) {
      q(u, e, d), q(u, t, d), q(u, i, d), n || (o = [
        R(e, "click", c),
        R(i, "click", f)
      ], n = !0);
    },
    p(u, d) {
      l = u;
    },
    d(u) {
      u && (P(e), P(t), P(i)), n = !1, Te(o);
    }
  };
}
function j1(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_2*/
      l[34](
        /*npc*/
        l[40]
      )
    );
  }
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-save save svelte-1wz9djc");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function io(l) {
  let e, t, i;
  function n() {
    l[37].call(
      e,
      /*each_value*/
      l[42],
      /*npc_index*/
      l[43]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "type", "text"), s(e, "placeholder", "URL"), s(e, "class", "svelte-1wz9djc");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*npc*/
        l[40].img
      ), t || (i = R(e, "input", n), t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*npcList*/
      256 && e.value !== /*npc*/
      l[40].img && x(
        e,
        /*npc*/
        l[40].img
      );
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function V1(l) {
  let e, t = (
    /*npc*/
    (l[40].description || /*getRoleDesc*/
    l[20](
      /*npc*/
      l[40].role
    )) + ""
  ), i;
  return {
    c() {
      e = r("p"), i = B(t), s(e, "class", "svelte-1wz9djc");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*npcList*/
      256 && t !== (t = /*npc*/
      (n[40].description || /*getRoleDesc*/
      n[20](
        /*npc*/
        n[40].role
      )) + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function W1(l) {
  let e, t, i;
  function n() {
    l[38].call(
      e,
      /*each_value*/
      l[42],
      /*npc_index*/
      l[43]
    );
  }
  return {
    c() {
      e = r("textarea"), s(e, "rows", "3"), s(e, "class", "svelte-1wz9djc");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*npc*/
        l[40].description
      ), t || (i = R(e, "input", n), t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*npcList*/
      256 && x(
        e,
        /*npc*/
        l[40].description
      );
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function so(l, e) {
  let t, i, n, o, c, f, u, d, p, m, b = (
    /*getRoleLabel*/
    e[19](
      /*npc*/
      e[40].role
    ) + ""
  ), v, h, _, w = (
    /*npc*/
    e[40].rarity + ""
  ), k, A, y, E, S, O, C, T, N, I, D, M, G = (
    /*getPersLabel*/
    e[21](
      /*npc*/
      e[40].personality
    ) + ""
  ), L, U, z, F, W, H, V = (
    /*effect*/
    e[41].label + ""
  ), J, j, X, K = (
    /*effect*/
    e[41].desc + ""
  ), Z, le, $, se, Y, Q, ie, ee, pe = (
    /*npc*/
    e[40].stats.production_bonus + ""
  ), Ee, De, we, ke, me, re, ye = (
    /*npc*/
    e[40].stats.combat_dice + ""
  ), oe, be, de, Oe, _e, ue;
  function Re(Me, Se) {
    return (
      /*editingNPC*/
      Me[5] === /*npc*/
      Me[40].id ? B1 : z1
    );
  }
  let Ce = Re(e), He = Ce(e), Ge = (
    /*isGM*/
    e[1] && ao(e)
  ), Xe = (
    /*editingNPC*/
    e[5] === /*npc*/
    e[40].id && io(e)
  );
  function fe(Me, Se) {
    return (
      /*editingNPC*/
      Me[5] === /*npc*/
      Me[40].id ? W1 : V1
    );
  }
  let Le = fe(e), qe = Le(e);
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), n = r("div"), o = r("i"), f = g(), u = r("div"), He.c(), d = g(), p = r("div"), m = r("span"), v = B(b), h = g(), _ = r("span"), k = B(w), A = g(), Ge && Ge.c(), y = g(), E = r("div"), S = r("div"), Xe && Xe.c(), O = g(), C = r("img"), N = g(), I = r("div"), D = r("div"), M = r("strong"), L = B(G), U = g(), z = r("div"), F = r("div"), W = r("i"), H = g(), J = B(V), j = g(), X = r("div"), Z = B(K), le = g(), $ = r("div"), qe.c(), se = g(), Y = r("div"), Q = r("span"), ie = r("i"), ee = B(" Prod: "), Ee = B(pe), De = B("x"), we = g(), ke = r("span"), me = r("i"), re = B(" Combate: "), oe = B(ye), be = B("d"), de = g(), s(o, "class", c = Ul(
        /*getRoleIcon*/
        e[18](
          /*npc*/
          e[40].role
        )
      ) + " svelte-1wz9djc"), s(n, "class", "role-icon svelte-1wz9djc"), s(m, "class", "badge role svelte-1wz9djc"), s(_, "class", "badge rarity svelte-1wz9djc"), s(p, "class", "badges svelte-1wz9djc"), s(u, "class", "npc-basic svelte-1wz9djc"), s(i, "class", "npc-head svelte-1wz9djc"), at(C.src, T = /*npc*/
      e[40].img || "icons/svg/mystery-man.svg") || s(C, "src", T), s(C, "alt", "NPC"), s(C, "class", "svelte-1wz9djc"), s(S, "class", "img-box svelte-1wz9djc"), s(M, "class", "svelte-1wz9djc"), s(D, "class", "trait svelte-1wz9djc"), s(W, "class", "fas fa-star"), s(F, "class", "eff-head svelte-1wz9djc"), s(X, "class", "eff-desc svelte-1wz9djc"), s(z, "class", "trait-effect svelte-1wz9djc"), s($, "class", "desc-box svelte-1wz9djc"), s(I, "class", "details svelte-1wz9djc"), s(E, "class", "npc-body svelte-1wz9djc"), s(ie, "class", "fas fa-cogs"), s(me, "class", "fas fa-fist-raised"), s(Y, "class", "npc-footer svelte-1wz9djc"), s(t, "class", Oe = "npc-card rarity-" + /*npc*/
      e[40].rarity + " svelte-1wz9djc"), this.first = t;
    },
    m(Me, Se) {
      q(Me, t, Se), a(t, i), a(i, n), a(n, o), a(i, f), a(i, u), He.m(u, null), a(u, d), a(u, p), a(p, m), a(m, v), a(p, h), a(p, _), a(_, k), a(i, A), Ge && Ge.m(i, null), a(t, y), a(t, E), a(E, S), Xe && Xe.m(S, null), a(S, O), a(S, C), a(E, N), a(E, I), a(I, D), a(D, M), a(M, L), a(I, U), a(I, z), a(z, F), a(F, W), a(F, H), a(F, J), a(z, j), a(z, X), a(X, Z), a(I, le), a(I, $), qe.m($, null), a(t, se), a(t, Y), a(Y, Q), a(Q, ie), a(Q, ee), a(Q, Ee), a(Q, De), a(Y, we), a(Y, ke), a(ke, me), a(ke, re), a(ke, oe), a(ke, be), a(t, de), ue = !0;
    },
    p(Me, Se) {
      e = Me, (!ue || Se[0] & /*npcList*/
      256 && c !== (c = Ul(
        /*getRoleIcon*/
        e[18](
          /*npc*/
          e[40].role
        )
      ) + " svelte-1wz9djc")) && s(o, "class", c), Ce === (Ce = Re(e)) && He ? He.p(e, Se) : (He.d(1), He = Ce(e), He && (He.c(), He.m(u, d))), (!ue || Se[0] & /*npcList*/
      256) && b !== (b = /*getRoleLabel*/
      e[19](
        /*npc*/
        e[40].role
      ) + "") && te(v, b), (!ue || Se[0] & /*npcList*/
      256) && w !== (w = /*npc*/
      e[40].rarity + "") && te(k, w), /*isGM*/
      e[1] ? Ge ? Ge.p(e, Se) : (Ge = ao(e), Ge.c(), Ge.m(i, null)) : Ge && (Ge.d(1), Ge = null), /*editingNPC*/
      e[5] === /*npc*/
      e[40].id ? Xe ? Xe.p(e, Se) : (Xe = io(e), Xe.c(), Xe.m(S, O)) : Xe && (Xe.d(1), Xe = null), (!ue || Se[0] & /*npcList*/
      256 && !at(C.src, T = /*npc*/
      e[40].img || "icons/svg/mystery-man.svg")) && s(C, "src", T), (!ue || Se[0] & /*npcList*/
      256) && G !== (G = /*getPersLabel*/
      e[21](
        /*npc*/
        e[40].personality
      ) + "") && te(L, G), (!ue || Se[0] & /*npcList*/
      256) && V !== (V = /*effect*/
      e[41].label + "") && te(J, V), (!ue || Se[0] & /*npcList*/
      256) && K !== (K = /*effect*/
      e[41].desc + "") && te(Z, K), Le === (Le = fe(e)) && qe ? qe.p(e, Se) : (qe.d(1), qe = Le(e), qe && (qe.c(), qe.m($, null))), (!ue || Se[0] & /*npcList*/
      256) && pe !== (pe = /*npc*/
      e[40].stats.production_bonus + "") && te(Ee, pe), (!ue || Se[0] & /*npcList*/
      256) && ye !== (ye = /*npc*/
      e[40].stats.combat_dice + "") && te(oe, ye), (!ue || Se[0] & /*npcList*/
      256 && Oe !== (Oe = "npc-card rarity-" + /*npc*/
      e[40].rarity + " svelte-1wz9djc")) && s(t, "class", Oe);
    },
    i(Me) {
      ue || (Me && Ne(() => {
        ue && (_e || (_e = We(t, Qe, {}, !0)), _e.run(1));
      }), ue = !0);
    },
    o(Me) {
      Me && (_e || (_e = We(t, Qe, {}, !1)), _e.run(0)), ue = !1;
    },
    d(Me) {
      Me && P(t), He.d(), Ge && Ge.d(), Xe && Xe.d(), qe.d(), Me && _e && _e.end();
    }
  };
}
function X1(l) {
  let e, t, i, n, o = (
    /*npcList*/
    l[8].length + ""
  ), c, f, u, d, p, m = (
    /*playerList*/
    l[7].length + ""
  ), b, v, h, _, w, k, A, y, E, S, O, C = (
    /*isCreating*/
    l[2] && Zn(l)
  );
  const T = [H1, G1], N = [];
  function I(D, M) {
    return (
      /*activeTab*/
      D[4] === "npcs" && !/*isCreating*/
      D[2] ? 0 : (
        /*activeTab*/
        D[4] === "players" ? 1 : -1
      )
    );
  }
  return ~(k = I(l)) && (A = N[k] = T[k](l)), {
    c() {
      e = r("div"), t = r("div"), i = r("button"), n = B("POPULA√á√ÉO ("), c = B(o), f = B(")"), u = g(), d = r("button"), p = B("JOGADORES ("), b = B(m), v = B(")"), h = g(), _ = r("div"), C && C.c(), w = g(), A && A.c(), s(i, "class", "svelte-1wz9djc"), he(
        i,
        "active",
        /*activeTab*/
        l[4] === "npcs"
      ), s(d, "class", "svelte-1wz9djc"), he(
        d,
        "active",
        /*activeTab*/
        l[4] === "players"
      ), s(t, "class", "tabs svelte-1wz9djc"), s(_, "class", "content-scroll custom-scroll svelte-1wz9djc"), s(e, "class", "members-container svelte-1wz9djc");
    },
    m(D, M) {
      q(D, e, M), a(e, t), a(t, i), a(i, n), a(i, c), a(i, f), a(t, u), a(t, d), a(d, p), a(d, b), a(d, v), a(e, h), a(e, _), C && C.m(_, null), a(_, w), ~k && N[k].m(_, null), E = !0, S || (O = [
        R(
          i,
          "click",
          /*click_handler*/
          l[25]
        ),
        R(
          d,
          "click",
          /*click_handler_1*/
          l[26]
        )
      ], S = !0);
    },
    p(D, M) {
      (!E || M[0] & /*npcList*/
      256) && o !== (o = /*npcList*/
      D[8].length + "") && te(c, o), (!E || M[0] & /*activeTab*/
      16) && he(
        i,
        "active",
        /*activeTab*/
        D[4] === "npcs"
      ), (!E || M[0] & /*playerList*/
      128) && m !== (m = /*playerList*/
      D[7].length + "") && te(b, m), (!E || M[0] & /*activeTab*/
      16) && he(
        d,
        "active",
        /*activeTab*/
        D[4] === "players"
      ), /*isCreating*/
      D[2] ? C ? (C.p(D, M), M[0] & /*isCreating*/
      4 && ne(C, 1)) : (C = Zn(D), C.c(), ne(C, 1), C.m(_, w)) : C && ($e(), Ae(C, 1, 1, () => {
        C = null;
      }), et());
      let G = k;
      k = I(D), k === G ? ~k && N[k].p(D, M) : (A && ($e(), Ae(N[G], 1, 1, () => {
        N[G] = null;
      }), et()), ~k ? (A = N[k], A ? A.p(D, M) : (A = N[k] = T[k](D), A.c()), ne(A, 1), A.m(_, null)) : A = null);
    },
    i(D) {
      E || (ne(C), ne(A), D && (y || Ne(() => {
        y = st(e, Qe, {}), y.start();
      })), E = !0);
    },
    o(D) {
      Ae(C), Ae(A), E = !1;
    },
    d(D) {
      D && P(e), C && C.d(), ~k && N[k].d(), S = !1, Te(O);
    }
  };
}
function J1(l, e, t) {
  let i, n, { group: o = {} } = e, { isLeader: c = !1 } = e, { isGM: f = !1 } = e, u = "npcs", d = null, p = !1, m = null, b = 0;
  function v() {
    t(24, b++, b);
  }
  qt(() => {
    Hooks.on("userConnected", v), Hooks.on("updateUser", v);
  }), ra(() => {
    Hooks.off("userConnected", v), Hooks.off("updateUser", v);
  });
  const h = Object.keys(zl.ROLES), _ = Object.keys(zl.RARITY_SCALE), w = Object.keys(Va);
  let k = { label: "", desc: "" };
  function A() {
    t(3, m = JSON.parse(JSON.stringify(rs.NPC))), t(3, m.id = foundry.utils.randomID(), m), t(3, m.img = "icons/svg/mystery-man.svg", m), t(2, p = !0);
  }
  async function y() {
    if (!m.name) return ui.notifications.warn("O NPC precisa de um nome.");
    o.npcs || t(0, o.npcs = [], o), o.population || t(0, o.population = { count: 0 }, o);
    const $ = [...o.npcs, m], se = {
      ...o.population,
      count: o.population.count + 1
    };
    await Ut.updateGroupData(o.id, { npcs: $, population: se }), t(2, p = !1), t(3, m = null), ui.notifications.info("Habitante registrado.");
  }
  function E() {
    t(2, p = !1), t(3, m = null);
  }
  async function S() {
    f && await Ut.generateRandomNPC(o.id);
  }
  async function O($) {
    f && await Ut.deleteNPC(o.id, $);
  }
  async function C($) {
    const se = [...o.npcs], Y = se.findIndex((Q) => Q.id === $.id);
    Y !== -1 && (se[Y] = $, await Ut.updateGroupData(o.id, { npcs: se })), t(5, d = null);
  }
  function T($) {
    var se;
    return ((se = zl.ROLES[$]) == null ? void 0 : se.icon) || "fas fa-user";
  }
  function N($) {
    var se;
    return ((se = zl.ROLES[$]) == null ? void 0 : se.label) || $;
  }
  function I($) {
    var se;
    return ((se = zl.ROLES[$]) == null ? void 0 : se.description) || "";
  }
  function D($) {
    var se;
    return ((se = Va[$]) == null ? void 0 : se.label) || $;
  }
  function M($) {
    const se = Va[$];
    return !se || !se.effect ? { label: "Sem Efeito", desc: "" } : se.effect;
  }
  const G = () => t(4, u = "npcs"), L = () => t(4, u = "players");
  function U() {
    m.name = this.value, t(3, m), t(2, p), t(9, h);
  }
  function z() {
    m.role = Gt(this), t(3, m), t(2, p), t(9, h);
  }
  function F() {
    m.rarity = Gt(this), t(3, m), t(2, p), t(9, h);
  }
  function W() {
    m.personality = Gt(this), t(3, m), t(2, p), t(9, h);
  }
  function H() {
    m.img = this.value, t(3, m), t(2, p), t(9, h);
  }
  function V() {
    m.description = this.value, t(3, m), t(2, p), t(9, h);
  }
  function J($, se) {
    $[se].name = this.value, t(8, i), t(0, o);
  }
  const j = ($) => C($), X = ($) => t(5, d = $.id), K = ($) => O($.id);
  function Z($, se) {
    $[se].img = this.value, t(8, i), t(0, o);
  }
  function le($, se) {
    $[se].description = this.value, t(8, i), t(0, o);
  }
  return l.$$set = ($) => {
    "group" in $ && t(0, o = $.group), "isLeader" in $ && t(23, c = $.isLeader), "isGM" in $ && t(1, f = $.isGM);
  }, l.$$.update = () => {
    var $;
    if (l.$$.dirty[0] & /*group*/
    1 && t(8, i = o && o.npcs ? o.npcs : []), l.$$.dirty[0] & /*group, userUpdateTrigger*/
    16777217 && t(7, n = o && o.members && b >= 0 ? o.members.map((se) => game.users.get(se)).filter((se) => se) : []), l.$$.dirty[0] & /*isCreating, draftNPC*/
    12 && p && m) {
      const se = zl.RARITY_SCALE[m.rarity], Y = Va[m.personality];
      t(3, m.stats.production_bonus = (se == null ? void 0 : se.production_val) || 2, m), t(3, m.stats.combat_dice = (se == null ? void 0 : se.combat_dice) || 1, m), t(3, m.stats.personality_effect = (($ = Y == null ? void 0 : Y.effect) == null ? void 0 : $.label) || "Nenhum", m), t(6, k = M(m.personality));
    }
  }, [
    o,
    f,
    p,
    m,
    u,
    d,
    k,
    n,
    i,
    h,
    _,
    w,
    A,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    c,
    b,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le
  ];
}
class Y1 extends mt {
  constructor(e) {
    super(), pt(this, e, J1, X1, dt, { group: 0, isLeader: 23, isGM: 1 }, null, [-1, -1]);
  }
}
function no(l, e, t) {
  var f, u, d, p, m;
  const i = l.slice();
  i[25] = e[t];
  const n = (
    /*group*/
    ((u = (f = i[0].inventory) == null ? void 0 : f[
      /*activeType*/
      i[2]
    ]) == null ? void 0 : u[
      /*tier*/
      i[25]
    ]) || 0
  );
  i[26] = n;
  const o = (
    /*actor*/
    ((m = (p = (d = i[1]) == null ? void 0 : d.system.pockets) == null ? void 0 : p[
      /*activeType*/
      i[2]
    ]) == null ? void 0 : m[
      /*tier*/
      i[25]
    ]) || 0
  );
  i[27] = o;
  const c = (
    /*baseQty*/
    i[26] > 0 || /*charQty*/
    i[27] > 0
  );
  return i[28] = c, i;
}
function oo(l, e, t) {
  const i = l.slice();
  return i[31] = e[t], i;
}
function Q1(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Carregando Cofre...", ae(e, "padding", "20px"), ae(e, "color", "#ccc"), ae(e, "text-align", "center");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function K1(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I = ce(
    /*matTypes*/
    l[7]
  ), D = [];
  for (let U = 0; U < I.length; U += 1)
    D[U] = ro(oo(l, I, U));
  let M = ce(
    /*tiers*/
    l[8]
  ), G = [];
  for (let U = 0; U < M.length; U += 1)
    G[U] = co(no(l, M, U));
  let L = (
    /*isSavingNotes*/
    l[6] && fo()
  );
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), n = r("button"), n.innerHTML = '<i class="fas fa-upload"></i> DEPOSITAR', o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-download"></i> SACAR', f = g(), u = r("div"), d = r("small"), d.textContent = "QTD:", p = g(), m = r("input"), b = g(), v = r("nav");
      for (let U = 0; U < D.length; U += 1)
        D[U].c();
      h = g(), _ = r("div");
      for (let U = 0; U < G.length; U += 1)
        G[U].c();
      w = g(), k = r("div"), A = r("div"), y = r("i"), E = B(` NOTAS DA FAC√á√ÉO
                `), L && L.c(), S = g(), O = r("textarea"), s(n, "class", "svelte-17tlvv9"), he(
        n,
        "active",
        /*transferMode*/
        l[3] === "DEPOSIT"
      ), s(c, "class", "svelte-17tlvv9"), he(
        c,
        "active",
        /*transferMode*/
        l[3] === "WITHDRAW"
      ), s(i, "class", "mode-switch svelte-17tlvv9"), s(m, "type", "number"), s(m, "min", "1"), s(m, "class", "qty-input svelte-17tlvv9"), s(u, "class", "amount-ctrl svelte-17tlvv9"), s(t, "class", "inv-header svelte-17tlvv9"), s(v, "class", "type-nav svelte-17tlvv9"), s(_, "class", "items-grid custom-scroll svelte-17tlvv9"), s(y, "class", "fas fa-sticky-note"), s(A, "class", "notes-header svelte-17tlvv9"), s(O, "placeholder", "Registro log√≠stico..."), s(O, "class", "svelte-17tlvv9"), s(k, "class", "notes-section svelte-17tlvv9"), s(e, "class", "inventory-layout svelte-17tlvv9");
    },
    m(U, z) {
      q(U, e, z), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(u, p), a(u, m), x(
        m,
        /*transferAmount*/
        l[4]
      ), a(e, b), a(e, v);
      for (let F = 0; F < D.length; F += 1)
        D[F] && D[F].m(v, null);
      a(e, h), a(e, _);
      for (let F = 0; F < G.length; F += 1)
        G[F] && G[F].m(_, null);
      a(e, w), a(e, k), a(k, A), a(A, y), a(A, E), L && L.m(A, null), a(k, S), a(k, O), x(
        O,
        /*groupNotes*/
        l[5]
      ), T || (N = [
        R(
          n,
          "click",
          /*click_handler*/
          l[15]
        ),
        R(
          c,
          "click",
          /*click_handler_1*/
          l[16]
        ),
        R(
          m,
          "input",
          /*input_input_handler*/
          l[17]
        ),
        R(
          O,
          "input",
          /*textarea_input_handler*/
          l[23]
        ),
        R(
          O,
          "input",
          /*handleNotesInput*/
          l[13]
        )
      ], T = !0);
    },
    p(U, z) {
      if (z[0] & /*transferMode*/
      8 && he(
        n,
        "active",
        /*transferMode*/
        U[3] === "DEPOSIT"
      ), z[0] & /*transferMode*/
      8 && he(
        c,
        "active",
        /*transferMode*/
        U[3] === "WITHDRAW"
      ), z[0] & /*transferAmount*/
      16 && Je(m.value) !== /*transferAmount*/
      U[4] && x(
        m,
        /*transferAmount*/
        U[4]
      ), z[0] & /*matTypes, activeType*/
      132) {
        I = ce(
          /*matTypes*/
          U[7]
        );
        let F;
        for (F = 0; F < I.length; F += 1) {
          const W = oo(U, I, F);
          D[F] ? D[F].p(W, z) : (D[F] = ro(W), D[F].c(), D[F].m(v, null));
        }
        for (; F < D.length; F += 1)
          D[F].d(1);
        D.length = I.length;
      }
      if (z[0] & /*group, activeType, tiers, actor, executeTransfer, transferMode, modifyStock, isGM, RARITY_COLORS*/
      7951) {
        M = ce(
          /*tiers*/
          U[8]
        );
        let F;
        for (F = 0; F < M.length; F += 1) {
          const W = no(U, M, F);
          G[F] ? G[F].p(W, z) : (G[F] = co(W), G[F].c(), G[F].m(_, null));
        }
        for (; F < G.length; F += 1)
          G[F].d(1);
        G.length = M.length;
      }
      /*isSavingNotes*/
      U[6] ? L || (L = fo(), L.c(), L.m(A, null)) : L && (L.d(1), L = null), z[0] & /*groupNotes*/
      32 && x(
        O,
        /*groupNotes*/
        U[5]
      );
    },
    i(U) {
      U && (C || Ne(() => {
        C = st(e, Qe, {}), C.start();
      }));
    },
    o: ge,
    d(U) {
      U && P(e), Fe(D, U), Fe(G, U), L && L.d(), T = !1, Te(N);
    }
  };
}
function ro(l) {
  let e, t, i, n = ol[
    /*type*/
    l[31]
  ].label + "", o, c, f, u;
  function d() {
    return (
      /*click_handler_2*/
      l[18](
        /*type*/
        l[31]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("i"), i = g(), o = B(n), c = g(), s(t, "class", Ul(ol[
        /*type*/
        l[31]
      ].icon) + " svelte-17tlvv9"), ae(e, "--type-color", ol[
        /*type*/
        l[31]
      ].color), s(e, "class", "svelte-17tlvv9"), he(
        e,
        "active",
        /*activeType*/
        l[2] === /*type*/
        l[31]
      );
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, o), a(e, c), f || (u = R(e, "click", d), f = !0);
    },
    p(p, m) {
      l = p, m[0] & /*activeType, matTypes*/
      132 && he(
        e,
        "active",
        /*activeType*/
        l[2] === /*type*/
        l[31]
      );
    },
    d(p) {
      p && P(e), f = !1, u();
    }
  };
}
function Z1(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_3*/
      l[19](
        /*tier*/
        l[25]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "-", s(t, "class", "svelte-17tlvv9"), s(e, "class", "gm-controls svelte-17tlvv9");
    },
    m(c, f) {
      q(c, e, f), a(e, t), i || (n = R(t, "click", o), i = !0);
    },
    p(c, f) {
      l = c;
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function x1(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_4*/
      l[20](
        /*tier*/
        l[25]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "+", s(t, "class", "svelte-17tlvv9"), s(e, "class", "gm-controls svelte-17tlvv9");
    },
    m(c, f) {
      q(c, e, f), a(e, t), i || (n = R(t, "click", o), i = !0);
    },
    p(c, f) {
      l = c;
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function co(l) {
  let e, t, i, n, o = (
    /*tier*/
    l[25] + ""
  ), c, f, u, d = ol[
    /*activeType*/
    l[2]
  ].tiers[
    /*tier*/
    l[25]
  ].label + "", p, m, b, v, h, _, w, k = (
    /*baseQty*/
    l[26] + ""
  ), A, y, E, S, O, C, T, N, I, D, M = (
    /*charQty*/
    l[27] + ""
  ), G, L, U, z, F = (
    /*transferMode*/
    l[3] === "DEPOSIT" ? "GUARDAR" : "PEGAR"
  ), W, H, V, J, j, X, K = (
    /*isGM*/
    l[9] && Z1(l)
  ), Z = (
    /*isGM*/
    l[9] && x1(l)
  );
  function le() {
    return (
      /*click_handler_5*/
      l[21](
        /*tier*/
        l[25]
      )
    );
  }
  function $() {
    return (
      /*click_handler_6*/
      l[22](
        /*tier*/
        l[25]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), n = B("T"), c = B(o), f = g(), u = r("span"), p = B(d), m = g(), b = r("div"), K && K.c(), v = g(), h = r("div"), _ = r("i"), w = g(), A = B(k), y = g(), Z && Z.c(), E = g(), S = r("div"), O = r("i"), T = g(), N = r("div"), I = r("i"), D = g(), G = B(M), L = g(), U = r("div"), z = r("button"), W = B(F), H = g(), V = r("button"), V.textContent = "ALL", J = g(), s(i, "class", "tier-badge svelte-17tlvv9"), ae(
        i,
        "background",
        /*RARITY_COLORS*/
        l[10][
          /*tier*/
          l[25]
        ]
      ), s(u, "class", "rarity-name svelte-17tlvv9"), s(t, "class", "item-identity svelte-17tlvv9"), s(_, "class", "fas fa-archive"), s(h, "class", "stock-box base svelte-17tlvv9"), s(h, "title", "No Cofre da Base"), s(O, "class", C = "fas " + /*transferMode*/
      (l[3] === "DEPOSIT" ? "fa-arrow-right" : "fa-arrow-left")), s(S, "class", "arrow-indicator svelte-17tlvv9"), s(I, "class", "fas fa-user"), s(N, "class", "stock-box actor svelte-17tlvv9"), s(N, "title", "No seu Invent√°rio"), s(b, "class", "stocks svelte-17tlvv9"), s(z, "class", "btn-action svelte-17tlvv9"), s(V, "class", "btn-all svelte-17tlvv9"), s(U, "class", "actions svelte-17tlvv9"), s(e, "class", "item-row svelte-17tlvv9"), he(e, "dimmed", !/*hasItem*/
      l[28]);
    },
    m(se, Y) {
      q(se, e, Y), a(e, t), a(t, i), a(i, n), a(i, c), a(t, f), a(t, u), a(u, p), a(e, m), a(e, b), K && K.m(b, null), a(b, v), a(b, h), a(h, _), a(h, w), a(h, A), a(b, y), Z && Z.m(b, null), a(b, E), a(b, S), a(S, O), a(b, T), a(b, N), a(N, I), a(N, D), a(N, G), a(e, L), a(e, U), a(U, z), a(z, W), a(U, H), a(U, V), a(e, J), j || (X = [
        R(z, "click", le),
        R(V, "click", $)
      ], j = !0);
    },
    p(se, Y) {
      l = se, Y[0] & /*activeType*/
      4 && d !== (d = ol[
        /*activeType*/
        l[2]
      ].tiers[
        /*tier*/
        l[25]
      ].label + "") && te(p, d), /*isGM*/
      l[9] && K.p(l, Y), Y[0] & /*group, activeType*/
      5 && k !== (k = /*baseQty*/
      l[26] + "") && te(A, k), /*isGM*/
      l[9] && Z.p(l, Y), Y[0] & /*transferMode*/
      8 && C !== (C = "fas " + /*transferMode*/
      (l[3] === "DEPOSIT" ? "fa-arrow-right" : "fa-arrow-left")) && s(O, "class", C), Y[0] & /*actor, activeType*/
      6 && M !== (M = /*charQty*/
      l[27] + "") && te(G, M), Y[0] & /*transferMode*/
      8 && F !== (F = /*transferMode*/
      l[3] === "DEPOSIT" ? "GUARDAR" : "PEGAR") && te(W, F), Y[0] & /*group, activeType, tiers, actor*/
      263 && he(e, "dimmed", !/*hasItem*/
      l[28]);
    },
    d(se) {
      se && P(e), K && K.d(), Z && Z.d(), j = !1, Te(X);
    }
  };
}
function fo(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "Salvando...", s(e, "class", "saving svelte-17tlvv9");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function $1(l) {
  let e;
  function t(o, c) {
    return (
      /*group*/
      o[0] && /*group*/
      o[0].id ? K1 : Q1
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      n.c(), e = Pt();
    },
    m(o, c) {
      n.m(o, c), q(o, e, c);
    },
    p(o, c) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), ne(n, 1), n.m(e.parentNode, e)));
    },
    i(o) {
      ne(n);
    },
    o: ge,
    d(o) {
      o && P(e), n.d(o);
    }
  };
}
function eb(l, e, t) {
  let { group: i = null } = e, { actor: n } = e, { isLeader: o } = e;
  const c = Object.keys(ol), f = [1, 2, 3, 4, 5, 6, 7], u = game.user.isGM, d = {
    1: "#9ca3af",
    2: "#3b82f6",
    3: "#f59e0b",
    4: "#ef4444",
    5: "#10b981",
    6: "#7c3aed",
    7: "#000000"
  };
  let p = "MATERIA", m = "DEPOSIT", b = 1, v = (i == null ? void 0 : i.notes) || "", h = !1;
  async function _(M, G, L) {
    if (!i || !i.id) return;
    if (!u) return ui.notifications.warn("Apenas o GM pode alterar a realidade.");
    i.inventory[M] || t(0, i.inventory[M] = {}, i);
    let U = i.inventory[M][G] || 0, z = Math.max(0, U + L);
    t(0, i.inventory[M][G] = z, i), t(0, i), await Ut.updateGroupData(i.id, { inventory: i.inventory });
  }
  async function w(M, G, L = null) {
    var W, H, V;
    if (!i || !i.id) return;
    if (!n) return ui.notifications.warn("Vincule um personagem para interagir com o cofre.");
    const U = i.inventory, z = n.system.pockets || {};
    let F = L === "ALL" ? 999999 : L || b;
    if (m === "DEPOSIT") {
      const J = ((W = z[M]) == null ? void 0 : W[G]) || 0;
      if (J <= 0) return ui.notifications.warn("Voc√™ n√£o possui este item.");
      F = Math.min(F, J), U[M] || (U[M] = {}), U[M][G] = (U[M][G] || 0) + F, await n.update({
        [`system.pockets.${M}.${G}`]: J - F
      });
    } else {
      const J = ((H = U[M]) == null ? void 0 : H[G]) || 0;
      if (J <= 0) return ui.notifications.warn("Cofre vazio.");
      F = Math.min(F, J), U[M][G] = J - F;
      const j = ((V = z[M]) == null ? void 0 : V[G]) || 0;
      await n.update({
        [`system.pockets.${M}.${G}`]: j + F
      });
    }
    t(0, i.inventory = U, i), t(0, i), await Ut.updateGroupData(i.id, { inventory: U }), ui.notifications.info(`${m === "DEPOSIT" ? "Depositado" : "Sacado"}: ${F}x ${M} T${G}`);
  }
  let k;
  function A() {
    !i || !i.id || (t(6, h = !0), clearTimeout(k), k = setTimeout(
      async () => {
        await Ut.updateGroupData(i.id, { notes: v }), t(6, h = !1);
      },
      1500
    ));
  }
  const y = () => t(3, m = "DEPOSIT"), E = () => t(3, m = "WITHDRAW");
  function S() {
    b = Je(this.value), t(4, b);
  }
  const O = (M) => t(2, p = M), C = (M) => _(p, M, -1), T = (M) => _(p, M, 1), N = (M) => w(p, M), I = (M) => w(p, M, "ALL");
  function D() {
    v = this.value, t(5, v);
  }
  return l.$$set = (M) => {
    "group" in M && t(0, i = M.group), "actor" in M && t(1, n = M.actor), "isLeader" in M && t(14, o = M.isLeader);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*group*/
    1 && i && !i.inventory && t(
      0,
      i.inventory = {
        MATERIA: {},
        ORGANISMO: {},
        ENERGIA: {},
        NUCLEO: {}
      },
      i
    );
  }, [
    i,
    n,
    p,
    m,
    b,
    v,
    h,
    c,
    f,
    u,
    d,
    _,
    w,
    A,
    o,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D
  ];
}
class tb extends mt {
  constructor(e) {
    super(), pt(this, e, eb, $1, dt, { group: 0, actor: 1, isLeader: 14 }, null, [-1, -1]);
  }
}
function uo(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function po(l, e, t) {
  const i = l.slice();
  return i[20] = e[t], i[22] = t, i;
}
function mo(l, e, t) {
  const i = l.slice();
  return i[20] = e[t], i[23] = e, i[22] = t, i;
}
function lb(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Carregando Miss√µes...", ae(e, "padding", "20px"), ae(e, "color", "#ccc"), ae(e, "text-align", "center");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function ab(l) {
  let e, t, i, n, o = (
    /*isGM*/
    l[1] && bo(l)
  ), c = ce(
    /*missions*/
    l[3]
  ), f = [];
  for (let p = 0; p < c.length; p += 1)
    f[p] = yo(uo(l, c, p));
  const u = (p) => Ae(f[p], 1, 1, () => {
    f[p] = null;
  });
  let d = null;
  return c.length || (d = ho()), {
    c() {
      e = r("div"), o && o.c(), t = g(), i = r("div");
      for (let p = 0; p < f.length; p += 1)
        f[p].c();
      d && d.c(), s(i, "class", "missions-list"), s(e, "class", "missions-container custom-scroll svelte-vbarqm");
    },
    m(p, m) {
      q(p, e, m), o && o.m(e, null), a(e, t), a(e, i);
      for (let b = 0; b < f.length; b += 1)
        f[b] && f[b].m(i, null);
      d && d.m(i, null), n = !0;
    },
    p(p, m) {
      if (/*isGM*/
      p[1] ? o ? o.p(p, m) : (o = bo(p), o.c(), o.m(e, t)) : o && (o.d(1), o = null), m & /*missions, toggleObj, isGM, deleteMission*/
      202) {
        c = ce(
          /*missions*/
          p[3]
        );
        let b;
        for (b = 0; b < c.length; b += 1) {
          const v = uo(p, c, b);
          f[b] ? (f[b].p(v, m), ne(f[b], 1)) : (f[b] = yo(v), f[b].c(), ne(f[b], 1), f[b].m(i, null));
        }
        for ($e(), b = c.length; b < f.length; b += 1)
          u(b);
        et(), !c.length && d ? d.p(p, m) : c.length ? d && (d.d(1), d = null) : (d = ho(), d.c(), d.m(i, null));
      }
    },
    i(p) {
      if (!n) {
        for (let m = 0; m < c.length; m += 1)
          ne(f[m]);
        n = !0;
      }
    },
    o(p) {
      f = f.filter(Boolean);
      for (let m = 0; m < f.length; m += 1)
        Ae(f[m]);
      n = !1;
    },
    d(p) {
      p && P(e), o && o.d(), Fe(f, p), d && d.d();
    }
  };
}
function bo(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I = ce(
    /*newMission*/
    l[2].objectives
  ), D = [];
  for (let M = 0; M < I.length; M += 1)
    D[M] = vo(mo(l, I, M));
  return {
    c() {
      e = r("div"), t = r("h4"), t.textContent = "NOVA MISS√ÉO (GM)", i = g(), n = r("div"), o = r("input"), c = g(), f = r("select"), u = r("option"), u.textContent = "F√ÅCIL", d = r("option"), d.textContent = "NORMAL", p = r("option"), p.textContent = "DIF√çCIL", m = r("option"), m.textContent = "SUICIDA", b = g(), v = r("textarea"), h = g(), _ = r("div"), w = r("small"), w.textContent = "OBJETIVOS:", k = g();
      for (let M = 0; M < D.length; M += 1)
        D[M].c();
      A = g(), y = r("button"), y.textContent = "+ Add Objetivo", E = g(), S = r("input"), O = g(), C = r("button"), C.textContent = "PUBLICAR MISS√ÉO", s(t, "class", "svelte-vbarqm"), s(o, "type", "text"), s(o, "placeholder", "T√≠tulo da Miss√£o"), s(o, "class", "svelte-vbarqm"), u.__value = "F√ÅCIL", x(u, u.__value), d.__value = "NORMAL", x(d, d.__value), p.__value = "DIF√çCIL", x(p, p.__value), m.__value = "SUICIDA", x(m, m.__value), s(f, "class", "svelte-vbarqm"), /*newMission*/
      l[2].difficulty === void 0 && Ne(() => (
        /*select_change_handler*/
        l[9].call(f)
      )), s(n, "class", "form-row svelte-vbarqm"), s(v, "placeholder", "Descri√ß√£o breve..."), s(v, "rows", "2"), s(v, "class", "svelte-vbarqm"), s(y, "class", "small-btn svelte-vbarqm"), s(_, "class", "objs-list"), s(S, "type", "text"), s(S, "placeholder", "Recompensas (Texto)..."), s(S, "class", "svelte-vbarqm"), s(C, "class", "create-btn svelte-vbarqm"), s(e, "class", "gm-creator svelte-vbarqm");
    },
    m(M, G) {
      q(M, e, G), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*newMission*/
        l[2].title
      ), a(n, c), a(n, f), a(f, u), a(f, d), a(f, p), a(f, m), ot(
        f,
        /*newMission*/
        l[2].difficulty,
        !0
      ), a(e, b), a(e, v), x(
        v,
        /*newMission*/
        l[2].desc
      ), a(e, h), a(e, _), a(_, w), a(_, k);
      for (let L = 0; L < D.length; L += 1)
        D[L] && D[L].m(_, null);
      a(_, A), a(_, y), a(e, E), a(e, S), x(
        S,
        /*newMission*/
        l[2].rewards
      ), a(e, O), a(e, C), T || (N = [
        R(
          o,
          "input",
          /*input0_input_handler*/
          l[8]
        ),
        R(
          f,
          "change",
          /*select_change_handler*/
          l[9]
        ),
        R(
          v,
          "input",
          /*textarea_input_handler*/
          l[10]
        ),
        R(
          y,
          "click",
          /*addObjectiveRow*/
          l[4]
        ),
        R(
          S,
          "input",
          /*input1_input_handler*/
          l[13]
        ),
        R(
          C,
          "click",
          /*createMission*/
          l[5]
        )
      ], T = !0);
    },
    p(M, G) {
      if (G & /*newMission*/
      4 && o.value !== /*newMission*/
      M[2].title && x(
        o,
        /*newMission*/
        M[2].title
      ), G & /*newMission*/
      4 && ot(
        f,
        /*newMission*/
        M[2].difficulty
      ), G & /*newMission*/
      4 && x(
        v,
        /*newMission*/
        M[2].desc
      ), G & /*newMission*/
      4) {
        I = ce(
          /*newMission*/
          M[2].objectives
        );
        let L;
        for (L = 0; L < I.length; L += 1) {
          const U = mo(M, I, L);
          D[L] ? D[L].p(U, G) : (D[L] = vo(U), D[L].c(), D[L].m(_, A));
        }
        for (; L < D.length; L += 1)
          D[L].d(1);
        D.length = I.length;
      }
      G & /*newMission*/
      4 && S.value !== /*newMission*/
      M[2].rewards && x(
        S,
        /*newMission*/
        M[2].rewards
      );
    },
    d(M) {
      M && P(e), Fe(D, M), T = !1, Te(N);
    }
  };
}
function vo(l) {
  let e, t, i, n, o, c, f, u;
  function d() {
    l[11].call(
      t,
      /*each_value_2*/
      l[23],
      /*i*/
      l[22]
    );
  }
  function p() {
    l[12].call(
      o,
      /*each_value_2*/
      l[23],
      /*i*/
      l[22]
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("label"), o = r("input"), c = B(" Secreto?"), s(t, "type", "text"), s(t, "placeholder", "Objetivo " + /*i*/
      (l[22] + 1) + "..."), s(t, "class", "svelte-vbarqm"), s(o, "type", "checkbox"), s(o, "class", "svelte-vbarqm"), s(e, "class", "obj-input svelte-vbarqm");
    },
    m(m, b) {
      q(m, e, b), a(e, t), x(
        t,
        /*obj*/
        l[20].text
      ), a(e, i), a(e, n), a(n, o), o.checked = /*obj*/
      l[20].hidden, a(n, c), f || (u = [
        R(t, "input", d),
        R(o, "change", p)
      ], f = !0);
    },
    p(m, b) {
      l = m, b & /*newMission*/
      4 && t.value !== /*obj*/
      l[20].text && x(
        t,
        /*obj*/
        l[20].text
      ), b & /*newMission*/
      4 && (o.checked = /*obj*/
      l[20].hidden);
    },
    d(m) {
      m && P(e), f = !1, Te(u);
    }
  };
}
function ho(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nenhuma miss√£o ativa no momento.", s(e, "class", "empty svelte-vbarqm");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function go(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler*/
      l[14](
        /*m*/
        l[17]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "X", s(e, "class", "del-btn svelte-vbarqm");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function ib(l) {
  let e = (
    /*obj*/
    l[20].text + ""
  ), t, i, n, o = (
    /*obj*/
    l[20].hidden && _o()
  );
  return {
    c() {
      t = B(e), i = g(), o && o.c(), n = Pt();
    },
    m(c, f) {
      q(c, t, f), q(c, i, f), o && o.m(c, f), q(c, n, f);
    },
    p(c, f) {
      f & /*missions*/
      8 && e !== (e = /*obj*/
      c[20].text + "") && te(t, e), /*obj*/
      c[20].hidden ? o || (o = _o(), o.c(), o.m(n.parentNode, n)) : o && (o.d(1), o = null);
    },
    d(c) {
      c && (P(t), P(i), P(n)), o && o.d(c);
    }
  };
}
function sb(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà (SECRETO)", s(e, "class", "redacted svelte-vbarqm");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function _o(l) {
  let e;
  return {
    c() {
      e = B("(üëÅÔ∏è GM: Oculto)");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ko(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_2*/
      l[16](
        /*m*/
        l[17],
        /*i*/
        l[22]
      )
    );
  }
  return {
    c() {
      e = r("i"), s(e, "class", t = "fas " + /*obj*/
      (l[20].hidden ? "fa-eye-slash" : "fa-eye") + " gm-eye svelte-vbarqm"), s(e, "title", "Revelar/Ocultar");
    },
    m(c, f) {
      q(c, e, f), i || (n = R(e, "click", o), i = !0);
    },
    p(c, f) {
      l = c, f & /*missions*/
      8 && t !== (t = "fas " + /*obj*/
      (l[20].hidden ? "fa-eye-slash" : "fa-eye") + " gm-eye svelte-vbarqm") && s(e, "class", t);
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function wo(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  function b() {
    return (
      /*click_handler_1*/
      l[15](
        /*m*/
        l[17],
        /*i*/
        l[22]
      )
    );
  }
  function v(k, A) {
    return (
      /*obj*/
      k[20].hidden && !/*isGM*/
      k[1] ? sb : ib
    );
  }
  let h = v(l), _ = h(l), w = (
    /*isGM*/
    l[1] && ko(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), c = r("span"), _.c(), f = g(), w && w.c(), u = g(), s(i, "class", n = "fas " + /*obj*/
      (l[20].completed ? "fa-check-square" : "fa-square")), s(t, "class", "check-area svelte-vbarqm"), s(c, "class", "obj-text"), s(e, "class", d = "obj-row " + /*obj*/
      (l[20].completed ? "done" : "") + " svelte-vbarqm");
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, i), a(e, o), a(e, c), _.m(c, null), a(e, f), w && w.m(e, null), a(e, u), p || (m = R(t, "click", b), p = !0);
    },
    p(k, A) {
      l = k, A & /*missions*/
      8 && n !== (n = "fas " + /*obj*/
      (l[20].completed ? "fa-check-square" : "fa-square")) && s(i, "class", n), h === (h = v(l)) && _ ? _.p(l, A) : (_.d(1), _ = h(l), _ && (_.c(), _.m(c, null))), /*isGM*/
      l[1] ? w ? w.p(l, A) : (w = ko(l), w.c(), w.m(e, u)) : w && (w.d(1), w = null), A & /*missions*/
      8 && d !== (d = "obj-row " + /*obj*/
      (l[20].completed ? "done" : "") + " svelte-vbarqm") && s(e, "class", d);
    },
    d(k) {
      k && P(e), _.d(), w && w.d(), p = !1, m();
    }
  };
}
function yo(l) {
  let e, t, i, n = (
    /*m*/
    l[17].difficulty + ""
  ), o, c, f, u, d = (
    /*m*/
    l[17].title + ""
  ), p, m, b, v, h = (
    /*m*/
    l[17].desc + ""
  ), _, w, k, A, y, E, S, O = (
    /*m*/
    l[17].rewards + ""
  ), C, T, N, I, D = (
    /*isGM*/
    l[1] && go(l)
  ), M = ce(
    /*m*/
    l[17].objectives
  ), G = [];
  for (let L = 0; L < M.length; L += 1)
    G[L] = wo(po(l, M, L));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), f = g(), u = r("h3"), p = B(d), m = g(), D && D.c(), b = g(), v = r("p"), _ = B(h), w = g(), k = r("div");
      for (let L = 0; L < G.length; L += 1)
        G[L].c();
      A = g(), y = r("div"), E = r("strong"), E.textContent = "RECOMPENSA:", S = g(), C = B(O), T = g(), s(i, "class", c = "diff-tag " + /*m*/
      l[17].difficulty + " svelte-vbarqm"), s(u, "class", "svelte-vbarqm"), s(t, "class", "m-header svelte-vbarqm"), s(v, "class", "desc svelte-vbarqm"), s(k, "class", "objectives-box svelte-vbarqm"), s(y, "class", "rewards svelte-vbarqm"), s(e, "class", "mission-card svelte-vbarqm");
    },
    m(L, U) {
      q(L, e, U), a(e, t), a(t, i), a(i, o), a(t, f), a(t, u), a(u, p), a(t, m), D && D.m(t, null), a(e, b), a(e, v), a(v, _), a(e, w), a(e, k);
      for (let z = 0; z < G.length; z += 1)
        G[z] && G[z].m(k, null);
      a(e, A), a(e, y), a(y, E), a(y, S), a(y, C), a(e, T), I = !0;
    },
    p(L, U) {
      if ((!I || U & /*missions*/
      8) && n !== (n = /*m*/
      L[17].difficulty + "") && te(o, n), (!I || U & /*missions*/
      8 && c !== (c = "diff-tag " + /*m*/
      L[17].difficulty + " svelte-vbarqm")) && s(i, "class", c), (!I || U & /*missions*/
      8) && d !== (d = /*m*/
      L[17].title + "") && te(p, d), /*isGM*/
      L[1] ? D ? D.p(L, U) : (D = go(L), D.c(), D.m(t, null)) : D && (D.d(1), D = null), (!I || U & /*missions*/
      8) && h !== (h = /*m*/
      L[17].desc + "") && te(_, h), U & /*missions, toggleObj, isGM*/
      74) {
        M = ce(
          /*m*/
          L[17].objectives
        );
        let z;
        for (z = 0; z < M.length; z += 1) {
          const F = po(L, M, z);
          G[z] ? G[z].p(F, U) : (G[z] = wo(F), G[z].c(), G[z].m(k, null));
        }
        for (; z < G.length; z += 1)
          G[z].d(1);
        G.length = M.length;
      }
      (!I || U & /*missions*/
      8) && O !== (O = /*m*/
      L[17].rewards + "") && te(C, O);
    },
    i(L) {
      I || (L && Ne(() => {
        I && (N || (N = We(e, yt, {}, !0)), N.run(1));
      }), I = !0);
    },
    o(L) {
      L && (N || (N = We(e, yt, {}, !1)), N.run(0)), I = !1;
    },
    d(L) {
      L && P(e), D && D.d(), Fe(G, L), L && N && N.end();
    }
  };
}
function nb(l) {
  let e, t, i, n;
  const o = [ab, lb], c = [];
  function f(u, d) {
    return (
      /*group*/
      u[0] && /*group*/
      u[0].id ? 0 : 1
    );
  }
  return e = f(l), t = c[e] = o[e](l), {
    c() {
      t.c(), i = Pt();
    },
    m(u, d) {
      c[e].m(u, d), q(u, i, d), n = !0;
    },
    p(u, [d]) {
      let p = e;
      e = f(u), e === p ? c[e].p(u, d) : ($e(), Ae(c[p], 1, 1, () => {
        c[p] = null;
      }), et(), t = c[e], t ? t.p(u, d) : (t = c[e] = o[e](u), t.c()), ne(t, 1), t.m(i.parentNode, i));
    },
    i(u) {
      n || (ne(t), n = !0);
    },
    o(u) {
      Ae(t), n = !1;
    },
    d(u) {
      u && P(i), c[e].d(u);
    }
  };
}
function ob(l, e, t) {
  let i, { group: n = null } = e, { isGM: o } = e, c = {
    title: "",
    difficulty: "NORMAL",
    desc: "",
    rewards: "",
    objectives: [{ text: "", hidden: !1 }]
  };
  function f() {
    t(2, c.objectives = [...c.objectives, { text: "", hidden: !0 }], c);
  }
  async function u() {
    n && c.title && (await Ut.addMission(n.id, c), t(2, c = {
      title: "",
      difficulty: "NORMAL",
      desc: "",
      rewards: "",
      objectives: [{ text: "", hidden: !1 }]
    }));
  }
  async function d(E, S, O) {
    n && o && await Ut.toggleObjective(n.id, E, S, O);
  }
  async function p(E) {
    n && await Ut.deleteMission(n.id, E);
  }
  function m() {
    c.title = this.value, t(2, c);
  }
  function b() {
    c.difficulty = Gt(this), t(2, c);
  }
  function v() {
    c.desc = this.value, t(2, c);
  }
  function h(E, S) {
    E[S].text = this.value, t(2, c);
  }
  function _(E, S) {
    E[S].hidden = this.checked, t(2, c);
  }
  function w() {
    c.rewards = this.value, t(2, c);
  }
  const k = (E) => p(E.id), A = (E, S) => o && d(E.id, S, "completed"), y = (E, S) => d(E.id, S, "hidden");
  return l.$$set = (E) => {
    "group" in E && t(0, n = E.group), "isGM" in E && t(1, o = E.isGM);
  }, l.$$.update = () => {
    l.$$.dirty & /*group*/
    1 && t(3, i = n && n.missions ? n.missions : []);
  }, [
    n,
    o,
    c,
    i,
    f,
    u,
    d,
    p,
    m,
    b,
    v,
    h,
    _,
    w,
    k,
    A,
    y
  ];
}
class rb extends mt {
  constructor(e) {
    super(), pt(this, e, ob, nb, dt, { group: 0, isGM: 1 });
  }
}
function Ao(l, e, t) {
  const i = l.slice();
  return i[42] = e[t], i;
}
function cb(l) {
  let e, t, i, n, o, c, f, u = (
    /*targetGroup*/
    l[9] && Eo(l)
  ), d = (
    /*showRename*/
    l[11] && Oo(l)
  );
  const p = [ub, db], m = [];
  function b(h, _) {
    return (
      /*myGroup*/
      h[1] ? 1 : 0
    );
  }
  i = b(l), n = m[i] = p[i](l);
  let v = (
    /*showLeaveConfirm*/
    l[8] && To(l)
  );
  return {
    c() {
      u && u.c(), e = g(), d && d.c(), t = g(), n.c(), o = g(), v && v.c(), c = Pt();
    },
    m(h, _) {
      u && u.m(h, _), q(h, e, _), d && d.m(h, _), q(h, t, _), m[i].m(h, _), q(h, o, _), v && v.m(h, _), q(h, c, _), f = !0;
    },
    p(h, _) {
      /*targetGroup*/
      h[9] ? u ? u.p(h, _) : (u = Eo(h), u.c(), u.m(e.parentNode, e)) : u && (u.d(1), u = null), /*showRename*/
      h[11] ? d ? d.p(h, _) : (d = Oo(h), d.c(), d.m(t.parentNode, t)) : d && (d.d(1), d = null);
      let w = i;
      i = b(h), i === w ? m[i].p(h, _) : ($e(), Ae(m[w], 1, 1, () => {
        m[w] = null;
      }), et(), n = m[i], n ? n.p(h, _) : (n = m[i] = p[i](h), n.c()), ne(n, 1), n.m(o.parentNode, o)), /*showLeaveConfirm*/
      h[8] ? v ? v.p(h, _) : (v = To(h), v.c(), v.m(c.parentNode, c)) : v && (v.d(1), v = null);
    },
    i(h) {
      f || (ne(n), f = !0);
    },
    o(h) {
      Ae(n), f = !1;
    },
    d(h) {
      h && (P(e), P(t), P(o), P(c)), u && u.d(h), d && d.d(h), m[i].d(h), v && v.d(h);
    }
  };
}
function fb(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-satellite-dish pulse-icon svelte-1qn9dco"></i> <span>SINCRONIZANDO UPLINK...</span>', s(e, "class", "loading-screen svelte-1qn9dco");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Eo(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), i.textContent = "SENHA REQUERIDA", n = g(), o = r("div"), c = r("input"), f = g(), u = r("div"), d = r("button"), d.textContent = "X", p = g(), m = r("button"), m.textContent = "ENTRAR", s(i, "class", "svelte-1qn9dco"), s(c, "type", "password"), s(c, "class", "svelte-1qn9dco"), s(o, "class", "modal-body svelte-1qn9dco"), s(d, "class", "btn-cancel svelte-1qn9dco"), s(m, "class", "btn-confirm svelte-1qn9dco"), s(u, "class", "modal-footer svelte-1qn9dco"), s(t, "class", "modal-box svelte-1qn9dco"), s(e, "class", "modal-backdrop svelte-1qn9dco");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), x(
        c,
        /*joinPasswordInput*/
        l[10]
      ), a(t, f), a(t, u), a(u, d), a(u, p), a(u, m), b || (v = [
        R(
          c,
          "input",
          /*input_input_handler*/
          l[23]
        ),
        R(
          c,
          "keydown",
          /*keydown_handler*/
          l[24]
        ),
        R(
          d,
          "click",
          /*click_handler*/
          l[25]
        ),
        R(
          m,
          "click",
          /*click_handler_1*/
          l[26]
        )
      ], b = !0);
    },
    p(h, _) {
      _[0] & /*joinPasswordInput*/
      1024 && c.value !== /*joinPasswordInput*/
      h[10] && x(
        c,
        /*joinPasswordInput*/
        h[10]
      );
    },
    d(h) {
      h && P(e), b = !1, Te(v);
    }
  };
}
function Oo(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), i.textContent = "RENOMEAR", n = g(), o = r("div"), c = r("input"), f = g(), u = r("div"), d = r("button"), d.textContent = "X", p = g(), m = r("button"), m.textContent = "SALVAR", s(i, "class", "svelte-1qn9dco"), s(c, "type", "text"), s(c, "class", "svelte-1qn9dco"), s(o, "class", "modal-body svelte-1qn9dco"), s(d, "class", "btn-cancel svelte-1qn9dco"), s(m, "class", "btn-confirm svelte-1qn9dco"), s(u, "class", "modal-footer svelte-1qn9dco"), s(t, "class", "modal-box svelte-1qn9dco"), s(e, "class", "modal-backdrop svelte-1qn9dco");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), x(
        c,
        /*renameInput*/
        l[12]
      ), a(t, f), a(t, u), a(u, d), a(u, p), a(u, m), b || (v = [
        R(
          c,
          "input",
          /*input_input_handler_1*/
          l[27]
        ),
        R(
          d,
          "click",
          /*click_handler_2*/
          l[28]
        ),
        R(
          m,
          "click",
          /*confirmRename*/
          l[19]
        )
      ], b = !0);
    },
    p(h, _) {
      _[0] & /*renameInput*/
      4096 && c.value !== /*renameInput*/
      h[12] && x(
        c,
        /*renameInput*/
        h[12]
      );
    },
    d(h) {
      h && P(e), b = !1, Te(v);
    }
  };
}
function db(l) {
  let e, t, i, n, o = (
    /*myGroup*/
    l[1].name + ""
  ), c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F = (
    /*isLeader*/
    (l[14] || /*isGM*/
    l[13]) && So(l)
  );
  const W = [
    hb,
    vb,
    bb,
    mb,
    pb
  ], H = [];
  function V(J, j) {
    return (
      /*activeSubApp*/
      J[3] === "dashboard" ? 0 : (
        /*activeSubApp*/
        J[3] === "structures" ? 1 : (
          /*activeSubApp*/
          J[3] === "inventory" ? 2 : (
            /*activeSubApp*/
            J[3] === "members" ? 3 : (
              /*activeSubApp*/
              J[3] === "missions" ? 4 : -1
            )
          )
        )
      )
    );
  }
  return ~(D = V(l)) && (M = H[D] = W[D](l)), {
    c() {
      e = r("div"), t = r("header"), i = r("div"), n = r("h1"), c = B(o), f = g(), F && F.c(), u = g(), d = r("div"), p = r("span"), p.textContent = `${game.user.name}`, m = g(), b = r("button"), b.innerHTML = '<i class="fas fa-power-off"></i>', v = g(), h = r("div"), _ = r("nav"), w = r("button"), w.innerHTML = '<i class="fas fa-tachometer-alt"></i> GERAL', k = g(), A = r("button"), A.innerHTML = '<i class="fas fa-industry"></i> ESTRUTURAS', y = g(), E = r("button"), E.innerHTML = '<i class="fas fa-boxes"></i> COFRE', S = g(), O = r("button"), O.innerHTML = '<i class="fas fa-users"></i> PESSOAL', C = g(), T = r("button"), T.innerHTML = '<i class="fas fa-crosshairs"></i> MISS√ïES', N = g(), I = r("main"), M && M.c(), s(n, "class", "svelte-1qn9dco"), s(i, "class", "titles svelte-1qn9dco"), s(b, "class", "btn-leave svelte-1qn9dco"), s(d, "class", "user-controls svelte-1qn9dco"), s(t, "class", "hub-header svelte-1qn9dco"), s(w, "class", "svelte-1qn9dco"), he(
        w,
        "active",
        /*activeSubApp*/
        l[3] === "dashboard"
      ), s(A, "class", "svelte-1qn9dco"), he(
        A,
        "active",
        /*activeSubApp*/
        l[3] === "structures"
      ), s(E, "class", "svelte-1qn9dco"), he(
        E,
        "active",
        /*activeSubApp*/
        l[3] === "inventory"
      ), s(O, "class", "svelte-1qn9dco"), he(
        O,
        "active",
        /*activeSubApp*/
        l[3] === "members"
      ), s(T, "class", "svelte-1qn9dco"), he(
        T,
        "active",
        /*activeSubApp*/
        l[3] === "missions"
      ), s(_, "class", "hub-nav svelte-1qn9dco"), s(I, "class", "hub-content custom-scroll svelte-1qn9dco"), s(h, "class", "hub-body svelte-1qn9dco"), s(e, "class", "main-interface svelte-1qn9dco");
    },
    m(J, j) {
      q(J, e, j), a(e, t), a(t, i), a(i, n), a(n, c), a(i, f), F && F.m(i, null), a(t, u), a(t, d), a(d, p), a(d, m), a(d, b), a(e, v), a(e, h), a(h, _), a(_, w), a(_, k), a(_, A), a(_, y), a(_, E), a(_, S), a(_, O), a(_, C), a(_, T), a(h, N), a(h, I), ~D && H[D].m(I, null), L = !0, U || (z = [
        R(
          b,
          "click",
          /*click_handler_5*/
          l[33]
        ),
        R(
          w,
          "click",
          /*click_handler_6*/
          l[34]
        ),
        R(
          A,
          "click",
          /*click_handler_7*/
          l[35]
        ),
        R(
          E,
          "click",
          /*click_handler_8*/
          l[36]
        ),
        R(
          O,
          "click",
          /*click_handler_9*/
          l[37]
        ),
        R(
          T,
          "click",
          /*click_handler_10*/
          l[38]
        )
      ], U = !0);
    },
    p(J, j) {
      (!L || j[0] & /*myGroup*/
      2) && o !== (o = /*myGroup*/
      J[1].name + "") && te(c, o), /*isLeader*/
      J[14] || /*isGM*/
      J[13] ? F ? F.p(J, j) : (F = So(J), F.c(), F.m(i, null)) : F && (F.d(1), F = null), (!L || j[0] & /*activeSubApp*/
      8) && he(
        w,
        "active",
        /*activeSubApp*/
        J[3] === "dashboard"
      ), (!L || j[0] & /*activeSubApp*/
      8) && he(
        A,
        "active",
        /*activeSubApp*/
        J[3] === "structures"
      ), (!L || j[0] & /*activeSubApp*/
      8) && he(
        E,
        "active",
        /*activeSubApp*/
        J[3] === "inventory"
      ), (!L || j[0] & /*activeSubApp*/
      8) && he(
        O,
        "active",
        /*activeSubApp*/
        J[3] === "members"
      ), (!L || j[0] & /*activeSubApp*/
      8) && he(
        T,
        "active",
        /*activeSubApp*/
        J[3] === "missions"
      );
      let X = D;
      D = V(J), D === X ? ~D && H[D].p(J, j) : (M && ($e(), Ae(H[X], 1, 1, () => {
        H[X] = null;
      }), et()), ~D ? (M = H[D], M ? M.p(J, j) : (M = H[D] = W[D](J), M.c()), ne(M, 1), M.m(I, null)) : M = null);
    },
    i(J) {
      L || (ne(M), J && (G || Ne(() => {
        G = st(e, Qe, {}), G.start();
      })), L = !0);
    },
    o(J) {
      Ae(M), L = !1;
    },
    d(J) {
      J && P(e), F && F.d(), ~D && H[D].d(), U = !1, Te(z);
    }
  };
}
function ub(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N = (
    /*allGroups*/
    l[2].length + ""
  ), I, D, M, G, L, U, z, F = ce(
    /*allGroups*/
    l[2]
  ), W = [];
  for (let H = 0; H < F.length; H += 1)
    W[H] = Io(Ao(l, F, H));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), i.innerHTML = '<i class="fas fa-network-wired pulse-icon svelte-1qn9dco"></i> <h2>NEXUS UPLINK</h2>', n = g(), o = r("div"), c = r("div"), f = r("h3"), f.textContent = "CRIAR", u = g(), d = r("div"), p = r("input"), m = g(), b = r("input"), v = g(), h = r("button"), _ = B("FUNDAR BASE"), w = g(), k = r("div"), A = g(), y = r("button"), E = B("MODO N√îMADE"), S = g(), O = r("div"), C = r("h3"), T = B("SINAIS ("), I = B(N), D = B(")"), M = g(), G = r("div");
      for (let H = 0; H < W.length; H += 1)
        W[H].c();
      s(i, "class", "svelte-1qn9dco"), s(p, "type", "text"), s(p, "placeholder", "NOME DA UNIDADE"), s(p, "class", "big-input svelte-1qn9dco"), s(b, "type", "password"), s(b, "placeholder", "SENHA"), s(b, "class", "pass-input svelte-1qn9dco"), s(h, "class", "btn-create svelte-1qn9dco"), h.disabled = /*isProcessing*/
      l[7], s(d, "class", "create-form svelte-1qn9dco"), s(k, "class", "divider svelte-1qn9dco"), s(y, "class", "btn-nomad svelte-1qn9dco"), y.disabled = /*isProcessing*/
      l[7], s(c, "class", "action-column svelte-1qn9dco"), s(G, "class", "group-list custom-scroll svelte-1qn9dco"), s(O, "class", "list-column svelte-1qn9dco"), s(o, "class", "login-body svelte-1qn9dco"), s(t, "class", "login-panel svelte-1qn9dco"), s(e, "class", "login-screen svelte-1qn9dco");
    },
    m(H, V) {
      q(H, e, V), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(c, f), a(c, u), a(c, d), a(d, p), x(
        p,
        /*newGroupName*/
        l[5]
      ), a(d, m), a(d, b), x(
        b,
        /*newGroupPass*/
        l[6]
      ), a(d, v), a(d, h), a(h, _), a(c, w), a(c, k), a(c, A), a(c, y), a(y, E), a(o, S), a(o, O), a(O, C), a(C, T), a(C, I), a(C, D), a(O, M), a(O, G);
      for (let J = 0; J < W.length; J += 1)
        W[J] && W[J].m(G, null);
      U || (z = [
        R(
          p,
          "input",
          /*input0_input_handler*/
          l[29]
        ),
        R(
          b,
          "input",
          /*input1_input_handler*/
          l[30]
        ),
        R(
          h,
          "click",
          /*createGroup*/
          l[15]
        ),
        R(
          y,
          "click",
          /*createNomad*/
          l[16]
        )
      ], U = !0);
    },
    p(H, V) {
      if (V[0] & /*newGroupName*/
      32 && p.value !== /*newGroupName*/
      H[5] && x(
        p,
        /*newGroupName*/
        H[5]
      ), V[0] & /*newGroupPass*/
      64 && b.value !== /*newGroupPass*/
      H[6] && x(
        b,
        /*newGroupPass*/
        H[6]
      ), V[0] & /*isProcessing*/
      128 && (h.disabled = /*isProcessing*/
      H[7]), V[0] & /*isProcessing*/
      128 && (y.disabled = /*isProcessing*/
      H[7]), V[0] & /*allGroups*/
      4 && N !== (N = /*allGroups*/
      H[2].length + "") && te(I, N), V[0] & /*deleteGroup, allGroups, isGM, initiateJoin*/
      1187844) {
        F = ce(
          /*allGroups*/
          H[2]
        );
        let J;
        for (J = 0; J < F.length; J += 1) {
          const j = Ao(H, F, J);
          W[J] ? W[J].p(j, V) : (W[J] = Io(j), W[J].c(), W[J].m(G, null));
        }
        for (; J < W.length; J += 1)
          W[J].d(1);
        W.length = F.length;
      }
    },
    i(H) {
      H && (L || Ne(() => {
        L = st(e, Qe, {}), L.start();
      }));
    },
    o: ge,
    d(H) {
      H && P(e), Fe(W, H), U = !1, Te(z);
    }
  };
}
function So(l) {
  let e, t, i;
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-pen btn-edit-name svelte-1qn9dco");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*openRename*/
        l[18]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function pb(l) {
  let e, t;
  return e = new rb({
    props: {
      group: (
        /*myGroup*/
        l[1]
      ),
      isLeader: (
        /*isLeader*/
        l[14]
      ),
      isGM: (
        /*isGM*/
        l[13]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*myGroup*/
      2 && (o.group = /*myGroup*/
      i[1]), n[0] & /*isLeader*/
      16384 && (o.isLeader = /*isLeader*/
      i[14]), n[0] & /*isGM*/
      8192 && (o.isGM = /*isGM*/
      i[13]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function mb(l) {
  let e, t;
  return e = new Y1({
    props: {
      group: (
        /*myGroup*/
        l[1]
      ),
      isLeader: (
        /*isLeader*/
        l[14]
      ),
      isGM: (
        /*isGM*/
        l[13]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*myGroup*/
      2 && (o.group = /*myGroup*/
      i[1]), n[0] & /*isLeader*/
      16384 && (o.isLeader = /*isLeader*/
      i[14]), n[0] & /*isGM*/
      8192 && (o.isGM = /*isGM*/
      i[13]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function bb(l) {
  let e, t;
  return e = new tb({
    props: {
      group: (
        /*myGroup*/
        l[1]
      ),
      actor: (
        /*actor*/
        l[0]
      ),
      isLeader: (
        /*isLeader*/
        l[14] || /*isGM*/
        l[13]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*myGroup*/
      2 && (o.group = /*myGroup*/
      i[1]), n[0] & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n[0] & /*isLeader, isGM*/
      24576 && (o.isLeader = /*isLeader*/
      i[14] || /*isGM*/
      i[13]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function vb(l) {
  let e, t;
  return e = new U1({
    props: {
      group: (
        /*myGroup*/
        l[1]
      ),
      isLeader: (
        /*isLeader*/
        l[14]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*myGroup*/
      2 && (o.group = /*myGroup*/
      i[1]), n[0] & /*isLeader*/
      16384 && (o.isLeader = /*isLeader*/
      i[14]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function hb(l) {
  let e, t;
  return e = new k1({
    props: {
      group: (
        /*myGroup*/
        l[1]
      ),
      isLeader: (
        /*isLeader*/
        l[14]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*myGroup*/
      2 && (o.group = /*myGroup*/
      i[1]), n[0] & /*isLeader*/
      16384 && (o.isLeader = /*isLeader*/
      i[14]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Co(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_4*/
      l[32](
        /*g*/
        l[42]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "X", s(e, "class", "btn-del svelte-1qn9dco");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function Io(l) {
  let e, t, i, n = (
    /*g*/
    l[42].name + ""
  ), o, c, f, u = (
    /*g*/
    l[42].isNomad ? "N√¥made" : "Base"
  ), d, p, m = (
    /*g*/
    l[42].password ? "üîí" : ""
  ), b, v, h, _, w, k, A, y;
  function E() {
    return (
      /*click_handler_3*/
      l[31](
        /*g*/
        l[42]
      )
    );
  }
  let S = (
    /*isGM*/
    l[13] && Co(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("strong"), o = B(n), c = g(), f = r("small"), d = B(u), p = g(), b = B(m), v = g(), h = r("div"), _ = r("button"), _.textContent = "ENTRAR", w = g(), S && S.c(), k = g(), s(t, "class", "g-info svelte-1qn9dco"), s(_, "class", "btn-join svelte-1qn9dco"), s(h, "class", "g-actions svelte-1qn9dco"), s(e, "class", "group-item svelte-1qn9dco");
    },
    m(O, C) {
      q(O, e, C), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, d), a(f, p), a(f, b), a(e, v), a(e, h), a(h, _), a(h, w), S && S.m(h, null), a(e, k), A || (y = R(_, "click", E), A = !0);
    },
    p(O, C) {
      l = O, C[0] & /*allGroups*/
      4 && n !== (n = /*g*/
      l[42].name + "") && te(o, n), C[0] & /*allGroups*/
      4 && u !== (u = /*g*/
      l[42].isNomad ? "N√¥made" : "Base") && te(d, u), C[0] & /*allGroups*/
      4 && m !== (m = /*g*/
      l[42].password ? "üîí" : "") && te(b, m), /*isGM*/
      l[13] ? S ? S.p(l, C) : (S = Co(l), S.c(), S.m(h, null)) : S && (S.d(1), S = null);
    },
    d(O) {
      O && P(e), S && S.d(), A = !1, y();
    }
  };
}
function To(l) {
  let e, t, i, n, o, c, f, u, d, p;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "SAIR DO GRUPO?", n = g(), o = r("div"), c = r("button"), c.textContent = "N√ÉO", f = g(), u = r("button"), u.textContent = "SIM", s(u, "class", "btn-confirm svelte-1qn9dco"), s(o, "class", "modal-footer svelte-1qn9dco"), s(t, "class", "modal-box alert svelte-1qn9dco"), s(e, "class", "modal-backdrop svelte-1qn9dco");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), d || (p = [
        R(
          c,
          "click",
          /*click_handler_11*/
          l[39]
        ),
        R(
          u,
          "click",
          /*leave*/
          l[22]
        )
      ], d = !0);
    },
    p: ge,
    d(m) {
      m && P(e), d = !1, Te(p);
    }
  };
}
function gb(l) {
  let e, t, i, n;
  const o = [fb, cb], c = [];
  function f(u, d) {
    return (
      /*isSystemReady*/
      u[4] ? 1 : 0
    );
  }
  return t = f(l), i = c[t] = o[t](l), {
    c() {
      e = r("div"), i.c(), s(e, "class", "faction-hub svelte-1qn9dco");
    },
    m(u, d) {
      q(u, e, d), c[t].m(e, null), n = !0;
    },
    p(u, d) {
      let p = t;
      t = f(u), t === p ? c[t].p(u, d) : ($e(), Ae(c[p], 1, 1, () => {
        c[p] = null;
      }), et(), i = c[t], i ? i.p(u, d) : (i = c[t] = o[t](u), i.c()), ne(i, 1), i.m(e, null));
    },
    i(u) {
      n || (ne(i), n = !0);
    },
    o(u) {
      Ae(i), n = !1;
    },
    d(u) {
      u && P(e), c[t].d();
    }
  };
}
function _b(l, e, t) {
  let i, n, { actor: o } = e, c = null, f = [], u = "dashboard", d = !1, p = "", m = "", b = !1, v = !1, h = null, _ = "", w = !1, k = "";
  async function A() {
    t(2, f = await Ut.getGroups() || []);
    const Y = await Ut.getUserGroup(game.user.id);
    t(1, c = Y || null), t(4, d = !0);
  }
  qt(async () => {
    await A(), Hooks.on("nexusGroupUpdate", A), Hooks.on("updateSetting", (Y) => {
      Y.key.includes("factions_data") && A();
    });
  }), ra(() => {
    Hooks.off("nexusGroupUpdate", A);
  });
  function y() {
    Hooks.callAll("nexusGroupUpdate"), A();
  }
  async function E() {
    if (!p.trim()) return ui.notifications.warn("Defina um nome.");
    t(7, b = !0);
    try {
      await Ut.createGroup(p.trim(), game.user.id, m, !1), t(5, p = ""), t(6, m = ""), t(3, u = "dashboard"), ui.notifications.info("Base criada!"), y();
    } catch (Y) {
      ui.notifications.error(Y.message);
    }
    t(7, b = !1);
  }
  async function S() {
    t(7, b = !0);
    try {
      const Y = `N√¥made: ${game.user.name}`;
      await Ut.createGroup(Y, game.user.id, "", !0), t(3, u = "dashboard"), ui.notifications.info("Modo N√¥made ativado."), y();
    } catch (Y) {
      ui.notifications.error(Y.message);
    }
    t(7, b = !1);
  }
  async function O(Y) {
    n && new Dialog({
      title: "Confirmar",
      content: "<p>Apagar este grupo?</p>",
      buttons: {
        yes: {
          icon: '<i class="fas fa-trash"></i>',
          label: "Sim",
          callback: async () => {
            await Ut.deleteGroup(Y), y();
          }
        },
        no: {
          icon: '<i class="fas fa-times"></i>',
          label: "N√£o"
        }
      }
    }).render(!0);
  }
  function C() {
    c && (t(12, k = c.name), t(11, w = !0));
  }
  async function T() {
    k.trim() && (await Ut.renameGroup(c.id, k.trim()), t(11, w = !1), y());
  }
  function N(Y) {
    Y.password && !n ? (t(9, h = Y), t(10, _ = "")) : I(Y.id, "");
  }
  async function I(Y = null, Q = null) {
    const ie = Y || (h == null ? void 0 : h.id), ee = Q !== null ? Q : _;
    t(7, b = !0);
    try {
      await Ut.joinGroup(ie, game.user.id, ee), t(9, h = null), t(3, u = "dashboard"), ui.notifications.info("Conectado."), y();
    } catch (pe) {
      ui.notifications.error(pe.message);
    }
    t(7, b = !1);
  }
  async function D() {
    await Ut.leaveGroup(game.user.id), t(8, v = !1), t(3, u = "dashboard"), y();
  }
  function M() {
    _ = this.value, t(10, _);
  }
  const G = (Y) => Y.key === "Enter" && I(), L = () => t(9, h = null), U = () => I();
  function z() {
    k = this.value, t(12, k);
  }
  const F = () => t(11, w = !1);
  function W() {
    p = this.value, t(5, p);
  }
  function H() {
    m = this.value, t(6, m);
  }
  const V = (Y) => N(Y), J = (Y) => O(Y.id), j = () => t(8, v = !0), X = () => t(3, u = "dashboard"), K = () => t(3, u = "structures"), Z = () => t(3, u = "inventory"), le = () => t(3, u = "members"), $ = () => t(3, u = "missions"), se = () => t(8, v = !1);
  return l.$$set = (Y) => {
    "actor" in Y && t(0, o = Y.actor);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*myGroup*/
    2 && t(14, i = (c == null ? void 0 : c.leader) === game.user.id);
  }, t(13, n = game.user.isGM), [
    o,
    c,
    f,
    u,
    d,
    p,
    m,
    b,
    v,
    h,
    _,
    w,
    k,
    n,
    i,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se
  ];
}
class kb extends mt {
  constructor(e) {
    super(), pt(this, e, _b, gb, dt, { actor: 0 }, null, [-1, -1]);
  }
}
const Ja = {
  // ... (Mantenha o 'default' e 'flame_inferno' que j√° funcionam) ...
  default: {
    label: "MATRIX TERMINAL",
    icon: "fa-terminal",
    color: "#00ff41",
    desc: "Interface de linha de comando cl√°ssica.",
    css: `
      & {
        background-color: #000000 !important;
        border: 1px solid #00ff41 !important;
        border-radius: 0px !important;
        font-family: 'Courier New', monospace !important;
      }
      &::after {
        content: " "; display: block; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        background: repeating-linear-gradient(to bottom, transparent 0px, transparent 2px, rgba(0, 255, 65, 0.05) 3px);
        pointer-events: none; z-index: 5;
      }
      & .xp-badge { background: #00ff41 !important; color: #000 !important; border-radius: 0 !important; }
      & .btn-buy:hover:not(:disabled) { background: #00ff41 !important; color: #000 !important; box-shadow: 0 0 15px #00ff41; }
      & .die-icon i { color: #00ff41 !important; }
    `
  },
  flame_inferno: {
    label: "CHAMA ETERNA",
    icon: "fa-fire-alt",
    color: "#ff4500",
    desc: "O calor da batalha incendeia este poder.",
    css: `
      & {
        background: linear-gradient(to top, #220500, #100000);
        border: 1px solid #ff4500 !important;
        border-bottom: 4px solid #ffaa00 !important;
        box-shadow: 0 -10px 20px rgba(255, 69, 0, 0.2);
        animation: fire-flicker 3s infinite alternate;
      }
      @keyframes fire-flicker {
        0% { border-color: #ff4500; } 100% { border-color: #ffaa00; }
      }
      & .icon-box { border-radius: 10px 10px 50% 50% !important; border: 2px solid #ffaa00 !important; background: radial-gradient(circle, #ffaa00, #550000); }
      & .die-card { background: #1a0500 !important; border: 1px solid #551100 !important; }
      & .die-icon i { filter: drop-shadow(0 0 5px #ff4500); animation: ember-glow 2s infinite; }
      & .die-icon.normal i { color: #aa5500; }
      & .die-icon.hard i { color: #ff4500; }
      & .die-icon.wiggle i { color: #ffcc00; }
      @keyframes ember-glow { 50% { filter: brightness(1.5) drop-shadow(0 0 10px #ffaa00); transform: scale(1.05); } }
      & .btn-buy { background: linear-gradient(to bottom, #500, #200) !important; border: 1px solid #f50 !important; color: #fb0 !important; }
      & .btn-buy:hover:not(:disabled) { background: linear-gradient(to top, #ff4500, #ffaa00) !important; color: #000 !important; }
    `
  },
  // ==========================================================================================
  // TEMA: HACKER (CORRIGIDO - SEM QUEBRAR √çCONES)
  // Agora usa os dados originais, mas com visual "Matrix Glitch"
  // ==========================================================================================
  hacker_term: {
    label: "ROOT ACCESS",
    icon: "fa-user-secret",
    color: "#00ff00",
    desc: "Invas√£o de sistema.",
    css: `
      & { 
        background-color: #050505 !important; 
        border: 2px solid #00ff00 !important; 
        border-radius: 0 !important; 
        font-family: monospace !important; 
        color: #00ff00 !important; 
        text-shadow: 0 0 4px #00ff00; 
      }
      
      /* Cursor piscando no nome */
      & .power-name::after { content: "_"; animation: blink 1s step-end infinite; }
      @keyframes blink { 50% { opacity: 0; } }

      /* DADOS ESTILO DIGITAL */
      & .die-card {
        border: 1px dashed #00ff00 !important;
        background: rgba(0, 255, 0, 0.05) !important;
      }

      /* √çcones dos dados originais pintados de verde matrix */
      & .die-icon i { 
        color: #00ff00 !important; 
        text-shadow: 2px 0px 0px rgba(255,0,0,0.5), -2px 0px 0px rgba(0,0,255,0.5); /* Efeito Glitch RGB */
      }
      
      & .btn-buy { 
        border: 1px solid #00ff00 !important; 
        background: #000 !important; 
        color: #00ff00 !important; 
        border-radius: 0 !important; 
      }
      & .btn-buy:hover:not(:disabled) { 
        background: #00ff00 !important; 
        color: #000 !important; 
      }
    `
  },
  // ==========================================================================================
  // TEMA: RYUJIN (GEMA/DRAG√ÉO)
  // ==========================================================================================
  ryujin_gem: {
    label: "DRAG√ÉO CELESTIAL",
    icon: "fa-dragon",
    color: "#0055ff",
    desc: "O poder selado em uma joia ancestral.",
    css: `
      & { background: #050510 !important; border: 1px solid #cca300 !important; border-left: 4px solid #ffd700 !important; border-radius: 4px !important; }
      &::after { content: ""; position: absolute; top: 0; left: -100%; width: 50%; height: 100%; background: linear-gradient(to right, transparent, rgba(255, 255, 255, 0.1), transparent); transform: skewX(-25deg); animation: holo-shine 6s infinite; pointer-events: none; }
      @keyframes holo-shine { 0%, 80% { left: -100%; } 100% { left: 200%; } }
      & .icon-box { border: 2px solid #ffd700 !important; transform: rotate(45deg); width: 36px !important; height: 36px !important; margin: 10px 18px 10px 10px !important; }
      & .power-img { transform: rotate(-45deg) scale(1.4); }
      & .die-card { background: linear-gradient(to bottom, #0a0a20, #000) !important; border-bottom: 2px solid #cca300 !important; }

      & .die-icon.normal i { color: #ffd700; animation: spin-slow 10s linear infinite; }
      & .die-icon.hard i { color: #00aaff; text-shadow: 0 0 5px #0055ff; }
      & .die-icon.wiggle i { color: #ff3333; text-shadow: 0 0 5px #aa0000; }

      @keyframes spin-slow { 100% { transform: rotate(360deg); } }
      & .btn-buy { background: #111 !important; border: 1px solid #555 !important; color: #cca300 !important; }
      & .btn-buy:hover:not(:disabled) { background: #cca300 !important; color: #000 !important; border-color: #ffd700 !important; }
    `
  },
  // ==========================================================================================
  // TEMA: GODZILLA (CORRIGIDO - D20 VOLTOU)
  // Mant√©m os dados originais. O D20 (Wiggle) brilha intensamente como um reator.
  // ==========================================================================================
  godzilla_atomic: {
    label: "AMEA√áA TIT√É",
    icon: "fa-radiation-alt",
    color: "#00e1ff",
    desc: "Carregando energia nuclear.",
    css: `
      & { background-color: #0a0a10 !important; border: 3px solid #003344 !important; border-radius: 8px !important; box-shadow: 0 0 10px #000; }
      & .icon-box { background: #001122 !important; border: 2px solid #00e1ff !important; box-shadow: 0 0 15px #00e1ff; }
      & .die-card { background: rgba(0, 20, 30, 0.8) !important; border: 1px solid #005566 !important; }
      
      /* DADOS NORMAIS (Tit√£) */
      & .die-icon.normal i { color: #446677; }
      & .die-icon.hard i { color: #00aaff; text-shadow: 0 0 5px #00e1ff; }

      /* DADO WIGGLE (O Reator Nuclear) */
      /* N√£o substitui mais o √≠cone, apenas faz ele brilhar absurdamente */
      & .die-icon.wiggle i { 
        color: #ffffff !important; /* N√∫cleo Branco */
        text-shadow: 0 0 5px #00e1ff, 0 0 15px #00e1ff, 0 0 30px #00e1ff; /* Brilho Neon */
        animation: reactor-pulse 0.5s infinite alternate; 
      }
      
      @keyframes reactor-pulse { 
        from { transform: scale(1); filter: brightness(1); } 
        to { transform: scale(1.1); filter: brightness(1.3); } 
      }

      & .btn-buy { background: #002233 !important; color: #00e1ff !important; border: 1px solid #00e1ff !important; font-family: monospace; }
      & .btn-buy:hover:not(:disabled) { background: #00e1ff !important; color: #000 !important; box-shadow: 0 0 25px #00e1ff; }
    `
  },
  // ==========================================================================================
  // TEMA: VAMPIRE (CASTLEVANIA STYLE)
  // Estilo: G√≥tico, Elegante, Sangue e Ouro. Fonte Serifada.
  // ==========================================================================================
  vampire_lord: {
    label: "LINHAGEM DR√ÅCULA",
    icon: "fa-wine-glass-alt",
    // Ta√ßa de Sangue
    color: "#8a0303",
    // Vermelho Sangue Escuro
    desc: "O que √© um homem? Uma pequena pilha de segredos.",
    css: `
      /* --- ARQUITETURA G√ìTICA --- */
      & {
        background: linear-gradient(180deg, #000000 0%, #2a0000 100%) !important;
        border: 4px double #d4af37 !important; /* Borda dupla Dourada */
        border-radius: 2px !important;
        box-shadow: 0 5px 15px rgba(0,0,0,0.9);
        font-family: "Georgia", "Times New Roman", serif !important; /* Fonte Cl√°ssica */
      }

      /* T√≠tulo Elegante */
      & .power-name {
        color: #d4af37; /* Ouro */
        text-shadow: 0 0 5px #000;
        letter-spacing: 1px;
        font-style: italic;
      }

      /* --- √çCONE: SANGUE SAGRADO --- */
      & .icon-box {
        border-radius: 50% !important;
        border: 2px solid #8a0303 !important;
        background: #000 !important;
        box-shadow: 0 0 15px #8a0303;
      }
      & .power-img { filter: sepia(0.5) contrast(1.2) saturate(1.5); }

      /* --- DADOS: RUBIS DE SANGUE --- */
      & .die-card {
        background: rgba(20, 0, 0, 0.9) !important;
        border: 1px solid #550000 !important;
        border-top: 2px solid #d4af37 !important; /* Detalhe ouro no topo */
      }

      /* Estiliza√ß√£o dos √çcones (Mantendo os originais) */
      & .die-icon i { 
        filter: drop-shadow(0 2px 2px rgba(0,0,0,0.8));
      }

      /* Normal (D10): Sangue */
      & .die-icon.normal i { color: #ff0000; text-shadow: 0 0 5px #550000; }
      
      /* Hard (D6): N√©voa/Morcego (Cinza/Ouro) */
      & .die-icon.hard i { color: #d4af37; text-shadow: 0 0 5px #8a6c00; }
      
      /* Wiggle (D20): O Cora√ß√£o das Trevas */
      & .die-icon.wiggle i { 
        color: #8a0303; 
        text-shadow: 0 0 10px #ff0000; 
        animation: heartbeat 1.5s infinite; 
      }
      @keyframes heartbeat {
        0% { transform: scale(1); }
        15% { transform: scale(1.15); }
        30% { transform: scale(1); }
        45% { transform: scale(1.15); }
        60% { transform: scale(1); }
      }

      /* Bot√£o Aristocr√°tico */
      & .btn-buy {
        background: #1a0000 !important;
        color: #d4af37 !important;
        border: 1px solid #8a0303 !important;
        font-family: serif !important;
        font-style: italic;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #550000 !important;
        color: #fff !important;
        box-shadow: 0 0 15px #8a0303;
      }
    `
  },
  // ==========================================================================================
  // TEMA: GHOUL (TOKYO GHOUL STYLE)
  // Estilo: Preto e Vermelho Neon, Textura de M√∫sculo/Kagune, Distor√ß√£o, Olho Kakugan.
  // ==========================================================================================
  ghoul_kagune: {
    label: "PREDADOR GHOUL",
    icon: "fa-mask",
    // M√°scara Kaneki
    color: "#ff0000",
    // Vermelho Neon
    desc: "O gosto da carne humana... e caf√©.",
    css: `
      /* --- PELE DE KAGUNE --- */
      & {
        background-color: #000 !important;
        /* Textura de fibras musculares preta e cinza escuro */
        background: repeating-linear-gradient(
          45deg,
          #000,
          #000 10px,
          #111 10px,
          #111 20px
        ) !important;
        
        border: 2px solid #ff0000 !important;
        border-radius: 0 15px 0 15px !important; /* Bordas cortadas agressivas */
        box-shadow: 5px 5px 0 #330000;
        overflow: hidden !important;
      }

      /* Efeito de glitch no t√≠tulo */
      & .power-name {
        color: #fff;
        text-shadow: 2px 0 #ff0000, -2px 0 #000;
        font-family: sans-serif;
        text-transform: uppercase;
        letter-spacing: 2px;
      }

      /* --- √çCONE: KAKUGAN (O Olho Ghoul) --- */
      & .icon-box {
        background: #000 !important; /* Esclera Preta */
        border: 2px solid #ff0000 !important;
        border-radius: 50% !important;
        box-shadow: inset 0 0 15px #ff0000; /* √çris Vermelha Brilhante */
      }
      & .power-img { 
        filter: grayscale(1) contrast(2); 
        opacity: 0.7; 
      }
      /* Veias saindo do olho */
      & .icon-box::after {
        content: ""; position: absolute; inset: -5px;
        border-radius: 50%;
        border: 1px dashed #550000;
        animation: spin-pulse 10s linear infinite;
      }

      /* --- DADOS: CARNE E FOME --- */
      & .die-card {
        background: #050505 !important;
        border: 1px solid #330000 !important;
        border-left: 3px solid #ff0000 !important; /* Kagune saindo */
      }

      /* Estiliza√ß√£o dos √çcones */
      /* Normal: Escuro */
      & .die-icon.normal i { color: #555; }
      
      /* Hard: Olho Vermelho */
      & .die-icon.hard i { 
        color: #ff0000; 
        text-shadow: 0 0 5px #ff0000; 
      }
      
      /* Wiggle: Modo Centopeia (Inst√°vel) */
      & .die-icon.wiggle i { 
        color: #fff; 
        text-shadow: 0 0 5px #ff0000, 0 0 15px #ff0000;
        animation: glitch-shake 0.3s infinite;
      }
      @keyframes glitch-shake {
        0% { transform: translate(0,0); }
        25% { transform: translate(1px, -1px); }
        50% { transform: translate(-1px, 1px); }
        75% { transform: translate(1px, 1px); }
        100% { transform: translate(0,0); }
      }

      /* Bot√£o Predador */
      & .btn-buy {
        background: #220000 !important;
        color: #ff0000 !important;
        border: 1px solid #550000 !important;
        text-transform: uppercase;
        font-weight: 900;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #ff0000 !important;
        color: #000 !important;
        box-shadow: 0 0 20px #ff0000;
      }
    `
  },
  // ==========================================================================================
  // TEMA: KURAMA (MODO BIJUU)
  // Estilo: Chakra Laranja borbulhante, Grades da Cela, Selo.
  // ==========================================================================================
  kurama_mode: {
    label: "MANTO DA RAPOSA",
    icon: "fa-paw",
    // Pata/Besta
    color: "#ff6600",
    // Laranja Naruto
    desc: "O selo se rompe. O chakra vaza.",
    css: `
      /* --- O SELO (CAGE) --- */
      & {
        background-color: #2a0a00 !important;
        /* Grades verticais da cela */
        background-image: repeating-linear-gradient(
          90deg,
          rgba(0,0,0,0.5) 0px,
          rgba(0,0,0,0.5) 35px,
          #000 35px,
          #000 45px, /* Barra da grade */
          rgba(255, 100, 0, 0.1) 46px, /* Brilho na barra */
          rgba(0,0,0,0.5) 47px
        ) !important;
        
        border: 3px solid #ff4500 !important;
        border-radius: 4px !important;
        /* Aura de Chakra Laranja */
        box-shadow: 0 0 20px rgba(255, 69, 0, 0.6), inset 0 0 50px rgba(255, 69, 0, 0.2);
        animation: chakra-pulse 3s infinite alternate;
      }

      @keyframes chakra-pulse {
        0% { box-shadow: 0 0 15px rgba(255, 69, 0, 0.5); border-color: #ff4500; }
        100% { box-shadow: 0 0 30px rgba(255, 140, 0, 0.8); border-color: #ffaa00; }
      }

      /* Nome com estilo de Pergaminho/Selo */
      & .power-name {
        color: #ffcc00; /* Dourado */
        font-weight: 900;
        text-shadow: 2px 2px 0 #8b0000;
        letter-spacing: 1px;
      }

      /* --- √çCONE: OLHO DA BESTA --- */
      & .icon-box {
        background: #000 !important;
        border: 2px solid #ff0000 !important;
        border-radius: 50% 0 50% 0 !important; /* Formato de olho de raposa */
        box-shadow: inset 0 0 10px #ff0000;
        overflow: hidden !important;
      }
      & .power-img { filter: sepia(1) saturate(5) hue-rotate(-50deg); opacity: 0.8; }

      /* --- DADOS DE CHAKRA --- */
      & .die-card {
        background: rgba(50, 10, 0, 0.9) !important;
        border: 1px solid #ff4500 !important;
      }

      /* Normal: Bolha de Chakra */
      & .die-icon.normal i { 
        color: #ffaa00; 
        filter: drop-shadow(0 0 5px #ff4500);
        animation: bubble-float 2s infinite ease-in-out;
      }
      @keyframes bubble-float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

      /* Hard: Fogo/Garra */
      & .die-icon.hard i { 
        color: #ff0000; 
        text-shadow: 0 0 5px #8b0000; 
      }

      /* Wiggle: BIJUU DAMA (Esfera Negra) */
      & .die-icon.wiggle i { 
        color: #2a0a3b; /* Roxo escuro quase preto */
        background: #000;
        border-radius: 50%;
        padding: 2px;
        text-shadow: 0 0 5px #800080; /* Brilho Roxo */
        box-shadow: 0 0 10px #000;
      }

      /* Bot√£o Selo */
      & .btn-buy {
        background: #440000 !important;
        border: 1px solid #ffaa00 !important;
        color: #ffaa00 !important;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #ff4500 !important;
        color: #000 !important;
        box-shadow: 0 0 20px #ff4500;
      }
    `
  },
  // ==========================================================================================
  // TEMA: UCHIHA (LEGADO VISUAL)
  // Estilo: Sharingan, Preto e Vermelho, Amaterasu e Susanoo.
  // ==========================================================================================
  uchiha_eyes: {
    label: "CL√É UCHIHA",
    icon: "fa-eye",
    // Olho
    color: "#ff0000",
    // Vermelho Sharingan
    desc: "Esses olhos enxergam a escurid√£o.",
    css: `
      /* --- ATMOSFERA UCHIHA --- */
      & {
        background: radial-gradient(circle at center, #2a0000 0%, #000000 100%) !important;
        border: 2px solid #8b0000 !important;
        border-radius: 50px 4px 50px 4px !important; /* Formato leque Uchiha estilizado */
        box-shadow: 0 0 15px rgba(255, 0, 0, 0.4);
      }

      /* T√≠tulo Sangrento */
      & .power-name {
        color: #ff0000;
        text-shadow: 0 0 2px #000;
        font-family: serif; /* Eleg√¢ncia Uchiha */
      }

      /* --- √çCONE: SHARINGAN GIRAT√ìRIO --- */
      & .icon-box {
        background: #000 !important;
        border: 2px solid #ff0000 !important;
        border-radius: 50% !important;
        box-shadow: inset 0 0 10px #ff0000;
      }
      /* Anima√ß√£o lenta de rota√ß√£o no √≠cone inteiro para simular o olho */
      & .icon-box:hover .power-img {
        animation: sharingan-spin 2s linear infinite;
      }
      @keyframes sharingan-spin { 100% { transform: rotate(360deg); } }
      
      & .power-img { 
        border-radius: 50%; 
        filter: grayscale(100%) brightness(0.8) sepia(1) hue-rotate(-50deg) saturate(5); /* For√ßa a imagem a ficar vermelha */
      }

      /* --- DADOS: AS FASES DO OLHO --- */
      & .die-card {
        background: #050505 !important;
        border: 1px solid #330000 !important;
      }

      /* Normal: Tomoe (Sharingan Base) */
      & .die-icon.normal i { 
        color: #ff0000; 
        text-shadow: 0 0 5px #000;
      }

      /* Hard: Mangekyou (Tsukuyomi - Vermelho e Preto) */
      & .die-icon.hard i { 
        color: #000; 
        text-shadow: 0 0 2px #ff0000, 0 0 5px #ff0000; /* Preto com borda vermelha */
      }

      /* Wiggle: Susanoo / Amaterasu (Roxo e Preto) */
      & .die-icon.wiggle i { 
        color: #000; /* Chama Negra */
        text-shadow: 0 0 5px #800080, 0 0 10px #4b0082; /* Aura Roxa Susanoo */
        animation: flame-burn 0.5s infinite alternate;
      }
      @keyframes flame-burn { 0% { opacity: 0.8; transform: scale(1); } 100% { opacity: 1; transform: scale(1.1); } }

      /* Bot√£o Leque */
      & .btn-buy {
        background: linear-gradient(to bottom, #cc0000 50%, #fff 50%) !important; /* Leque Uchiha: Topo vermelho, baixo branco */
        border: 1px solid #999 !important;
        color: #000 !important;
        font-weight: bold;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #ff0000 !important;
        color: #000 !important;
        box-shadow: 0 0 15px #ff0000;
      }
    `
  },
  // ==========================================================================================
  // TEMA: BLUE (SLIME ARCANO)
  // Estilo: Mago + Slime. Bordas arredondadas, mana fluindo, brilho m√°gico azul/ciano.
  // ==========================================================================================
  blue_mage: {
    label: "GRANDE S√ÅBIO (BLUE)",
    icon: "fa-hat-wizard",
    // Chap√©u de Mago
    color: "#00ccff",
    // Azul Mana
    desc: "An√°lise m√°gica completa. Viscosidade e Poder.",
    css: `
      /* --- CORPO DE SLIME M√ÅGICO --- */
      & {
        /* Fundo de Mana L√≠quida */
        background: linear-gradient(180deg, rgba(0, 20, 60, 0.9) 0%, rgba(0, 100, 200, 0.8) 100%) !important;
        border: 3px solid #00ccff !important;
        /* Formato levemente "mole" */
        border-radius: 20px 20px 40px 40px !important; 
        box-shadow: 0 5px 15px rgba(0, 204, 255, 0.3), inset 0 0 20px rgba(0, 204, 255, 0.2);
        overflow: hidden !important;
        position: relative;
      }

      /* Part√≠culas de Magia (Runas subindo) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(rgba(255,255,255,0.2) 1px, transparent 1px);
        background-size: 20px 20px;
        animation: mana-flow 4s linear infinite;
        opacity: 0.5; pointer-events: none;
      }
      @keyframes mana-flow { 0% { background-position: 0 0; } 100% { background-position: 10px -40px; } }

      /* --- √çCONE: N√öCLEO M√ÅGICO --- */
      & .icon-box {
        background: #003366 !important;
        border: 2px solid #fff !important;
        border-radius: 50% !important;
        box-shadow: 0 0 15px #00ccff, inset 0 0 10px #00ccff;
      }
      & .power-img { opacity: 0.9; }

      /* --- DADOS: CRISTAIS DE MANA --- */
      & .die-card {
        background: rgba(0, 50, 100, 0.6) !important;
        border: 1px solid #00aaff !important;
        border-radius: 10px !important;
        backdrop-filter: blur(4px);
      }

      /* Pintando os dados com cores m√°gicas */
      & .die-icon i { 
        filter: drop-shadow(0 0 5px currentColor);
        transition: 0.3s;
      }
      
      /* Normal: Mana Pura (Azul) */
      & .die-icon.normal i { color: #00ccff; animation: float-icon 2s infinite ease-in-out; }
      
      /* Hard: Magia de Ataque (Roxo/Rosa) */
      & .die-icon.hard i { color: #ff00ff; text-shadow: 0 0 5px #aa00aa; }
      
      /* Wiggle: O Lorde Dem√¥nio (Dourado/Preto) */
      & .die-icon.wiggle i { color: #ffd700; text-shadow: 0 0 5px #000; }

      @keyframes float-icon { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-3px); } }

      /* Bot√£o Gelatinoso */
      & .btn-buy {
        background: rgba(0, 204, 255, 0.2) !important;
        border: 1px solid #00ccff !important;
        color: #fff !important;
        border-radius: 15px !important;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #00ccff !important;
        color: #002244 !important;
        box-shadow: 0 0 15px #00ccff;
      }
    `
  },
  // ==========================================================================================
  // TEMA: BAD (HEAVY METAL HERO)
  // Estilo: Industrial, Metal Escuro, Textura de Amplificador, Vermelho Agressivo.
  // ==========================================================================================
  bad_metal: {
    label: "BADASS METAL",
    icon: "fa-hand-rock",
    // M√£o Cornuta ü§ò
    color: "#b0c4de",
    // Prata Met√°lico
    desc: "Som alto, metal pesado e impacto bruto.",
    css: `
      /* --- CAIXA DE AMPLIFICADOR --- */
      & {
        background-color: #111 !important;
        /* Textura de grade de caixa de som */
        background-image: radial-gradient(#222 15%, transparent 16%), radial-gradient(#222 15%, transparent 16%) !important;
        background-size: 10px 10px !important;
        background-position: 0 0, 5px 5px !important;
        
        border: 4px solid #444 !important; /* Moldura de A√ßo */
        border-bottom: 4px solid #222 !important;
        border-radius: 4px !important;
        /* Cantoneiras Met√°licas (via box-shadow hack) */
        box-shadow: 
          inset 2px 2px 0 #888, inset -2px -2px 0 #000,
          0 5px 10px #000;
      }

      /* T√≠tulo Cromado */
      & .power-name {
        background: linear-gradient(to bottom, #fff 0%, #888 50%, #000 51%, #444 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 900;
        font-family: sans-serif;
        letter-spacing: 1px;
        filter: drop-shadow(0 2px 0 #000);
      }

      /* --- √çCONE: O FALANTE (SPEAKER) --- */
      & .icon-box {
        background: #000 !important;
        border: 3px solid #888 !important;
        border-radius: 50% !important;
        box-shadow: 0 0 0 2px #000, 0 0 10px #000;
        /* Vibra√ß√£o do Bass */
        animation: speaker-beat 0.5s infinite;
      }
      @keyframes speaker-beat {
        0% { transform: scale(1); }
        10% { transform: scale(1.05); border-color: #fff; }
        20% { transform: scale(1); border-color: #888; }
      }
      
      & .power-img { filter: grayscale(1) contrast(1.5); }

      /* --- DADOS DE A√áO --- */
      & .die-card {
        background: linear-gradient(to bottom, #333, #111) !important;
        border: 1px solid #666 !important;
        box-shadow: inset 0 1px 0 rgba(255,255,255,0.2);
      }

      /* Dados Cromados */
      & .die-icon i { 
        background: linear-gradient(to bottom, #eee 0%, #999 50%, #333 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 2px 0 #000);
        font-size: 2em; /* Maiores */
      }
      
      /* Wiggle: Explos√£o Vermelha (Solo de Guitarra) */
      & .die-icon.wiggle i {
        background: linear-gradient(to bottom, #ff9900 0%, #ff0000 100%);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        animation: shake 0.2s infinite;
      }
      @keyframes shake { 0% { transform: rotate(0deg); } 25% { transform: rotate(5deg); } 75% { transform: rotate(-5deg); } }

      /* Bot√£o Pedal de Guitarra */
      & .btn-buy {
        background: #333 !important;
        border: 2px solid #000 !important;
        border-top: 2px solid #555 !important;
        color: #ccc !important;
        font-weight: bold;
        text-transform: uppercase;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #800 !important; /* Led Vermelho Ligado */
        color: #fff !important;
        box-shadow: 0 0 10px #f00;
        border-color: #f00 !important;
      }
    `
  },
  // ==========================================================================================
  // TEMA: O OUTRO LADO (YIN YANG / DUALIDADE)
  // Estilo: Branco puro por fora. No upgrade, divide-se: Esquerda Luz, Direita Trevas.
  // ==========================================================================================
  yin_yang: {
    label: "EQUIL√çBRIO (YIN YANG)",
    icon: "fa-adjust",
    // √çcone meio a meio
    color: "#000000",
    desc: "A luz projeta sombra. A sombra define a luz.",
    css: `
      /* --- VISUAL EXTERNO (BRANCO PURO) --- */
      & {
        background: #ffffff !important;
        border: 2px solid #000 !important;
        border-radius: 8px !important;
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        color: #000 !important;
      }

      /* Textos escuros para fundo branco */
      & .power-name { color: #000; text-transform: uppercase; letter-spacing: 2px; }
      & .xp-badge { background: #000 !important; color: #fff !important; }
      & .dice-count strong { color: #000; }
      & .meta-tag { background: #eee !important; color: #000 !important; border: 1px solid #ccc !important; }

      /* √çcone Girat√≥rio P&B */
      & .icon-box {
        background: #fff !important;
        border: 2px solid #000 !important;
        border-radius: 50% !important;
      }
      & .power-img { filter: grayscale(1) contrast(1.5); }

      /* --- O GRADIENTE (DIVIS√ÉO MEIO A MEIO) --- */
      & .upgrade-panel {
        /* Gradiente Duro: Branco at√© 50%, Preto de 50% em diante */
        background: linear-gradient(90deg, #f0f0f0 50%, #0a0a0a 50%) !important;
        border-top: 2px solid #000 !important;
      }

      /* Ajuste do HUD de XP (Centralizado na divis√£o) */
      & .xp-hud {
        background: #333 !important;
        border: 2px solid #fff !important;
        box-shadow: 0 0 10px rgba(0,0,0,0.5);
      }
      & .xp-label { color: #ccc !important; }

      /* --- DADOS: LADO DA LUZ vs LADO DA SOMBRA --- */
      
      /* NORMAL (Lado Esquerdo - Luz) */
      & .die-card.normal {
        background: #fff !important;
        border: 1px solid #ddd !important;
        color: #000 !important;
      }
      & .die-card.normal .die-screen { color: #000 !important; text-shadow: none; }
      & .die-card.normal .die-icon i { color: #000 !important; }
      & .die-card.normal .btn-buy { background: #eee !important; color: #000 !important; border: 1px solid #ccc !important; }

      /* HARD (O Centro - Equil√≠brio/Cinza) */
      & .die-card.hard {
        background: #444 !important;
        border: 1px solid #000 !important;
      }
      & .die-card.hard .die-icon i { color: #fff !important; }

      /* WIGGLE (Lado Direito - Trevas) */
      & .die-card.wiggle {
        background: #000 !important;
        border: 1px solid #333 !important;
      }
      & .die-card.wiggle .die-screen { color: #fff !important; }
      & .die-card.wiggle .die-icon i { color: #fff !important; text-shadow: 0 0 5px #fff; }
      & .die-card.wiggle .btn-buy { background: #222 !important; color: #fff !important; border: 1px solid #555 !important; }
    `
  },
  // ==========================================================================================
  // TEMA: GRIM√ìRIO (YUNO - VENTO & ESTRELAS)
  // Estilo: Verde Esmeralda (Vento) misturado com Azul Noturno e Estrelas.
  // ==========================================================================================
  grimoire_star: {
    label: "GRIM√ìRIO CELESTIAL",
    icon: "fa-book-open",
    // Livro/Grim√≥rio
    color: "#00ff88",
    // Verde Vento Neon
    desc: "A fus√£o da magia dos ventos com o brilho das estrelas.",
    css: `
      /* --- ATMOSFERA M√ÅGICA --- */
      & {
        /* Gradiente Diagonal: Vento (Verde) -> Espa√ßo (Azul Escuro) */
        background: linear-gradient(135deg, #002b11 0%, #001a33 100%) !important;
        border: 2px solid #00ff88 !important; /* Borda Verde Neon */
        border-radius: 4px 15px 4px 15px !important; /* Formato de p√°gina dobrada */
        box-shadow: 0 0 15px rgba(0, 255, 136, 0.2);
        position: relative;
        overflow: hidden !important;
      }

      /* Fundo Estrelado (Pattern) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(white 1px, transparent 1px);
        background-size: 30px 30px;
        opacity: 0.3;
        animation: twinkle 3s infinite alternate;
      }
      @keyframes twinkle { 0% { opacity: 0.2; } 100% { opacity: 0.5; } }

      /* T√≠tulo Brilhante */
      & .power-name {
        background: linear-gradient(to right, #00ff88, #00ccff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 800;
        text-shadow: 0 0 10px rgba(0,255,136,0.5);
      }

      /* --- √çCONE: TREVO DE 4 FOLHAS (Estilizado) --- */
      & .icon-box {
        background: #001a00 !important;
        border: 1px solid #ffd700 !important; /* Ouro */
        box-shadow: 0 0 10px #00ff88;
        border-radius: 8px !important;
      }
      & .power-img { opacity: 0.9; }

      /* --- DADOS: ELEMENTOS --- */
      & .die-card {
        background: rgba(0, 20, 10, 0.6) !important;
        border: 1px solid #005522 !important;
        backdrop-filter: blur(2px);
      }

      /* Normal: Vento (Verde) */
      & .die-icon.normal i { 
        color: #00ff88; 
        animation: wind-float 2s ease-in-out infinite; 
        filter: drop-shadow(0 0 5px #00ff88);
      }
      @keyframes wind-float { 0%, 100% { transform: translateX(0); } 50% { transform: translateX(3px) rotate(5deg); } }

      /* Hard: Magia Espiritual (Azul/Ciano) */
      & .die-icon.hard i { 
        color: #00ccff; 
        text-shadow: 0 0 5px #00ccff;
      }

      /* Wiggle: Estrela (Quarteto - Dourado) */
      & .die-icon.wiggle i { 
        color: #ffd700; 
        text-shadow: 0 0 5px #ffd700, 0 0 15px #fff;
        animation: star-pulse 1s infinite alternate;
      }
      @keyframes star-pulse { from { transform: scale(1); } to { transform: scale(1.15); filter: brightness(1.3); } }

      /* Bot√£o Grim√≥rio */
      & .btn-buy {
        background: #003311 !important;
        border: 1px solid #00ff88 !important;
        color: #ccffdd !important;
      }
      & .btn-buy:hover:not(:disabled) {
        background: linear-gradient(90deg, #00ff88, #00ccff) !important;
        color: #000 !important;
        box-shadow: 0 0 20px #00ff88;
      }
    `
  },
  // ==========================================================================================
  // TEMA: HOLLOW (A MALDI√á√ÉO - DARK SOULS)
  // Design: O √≠cone √© um Eclipse (Darksign), chuva de cinzas, cores de brasa e escurid√£o.
  // ==========================================================================================
  hollow_curse: {
    label: "ECLIPSE ETERNO",
    icon: "fa-skull",
    color: "#ff5500",
    // Laranja Brasa
    desc: "A marca da maldi√ß√£o pulsa como um eclipse de fogo.",
    css: `
      /* --- AMBIENTE DE CINZAS --- */
      & {
        background-color: #050505 !important;
        /* Gradiente escuro */
        background: linear-gradient(180deg, #1a0a00 0%, #000 100%) !important;
        border: 1px solid #333 !important;
        border-top: 2px solid #ff5500 !important;
        box-shadow: 0 5px 20px #000;
        position: relative;
        overflow: hidden !important;
      }

      /* Chuva de Cinzas (Part√≠culas caindo) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(rgba(255,255,255,0.2) 1px, transparent 1px);
        background-size: 10px 10px;
        opacity: 0.5;
        animation: ash-fall 10s linear infinite;
        pointer-events: none;
      }
      @keyframes ash-fall { 
        from { background-position: 0 0; } 
        to { background-position: 20px 100px; } 
      }

      /* T√≠tulo estilo Dark Fantasy */
      & .power-name {
        font-family: serif !important;
        letter-spacing: 2px;
        color: #ccc;
        text-shadow: 0 0 5px #ff5500;
      }

      /* --- O ECLIPSE (DARKSIGN) --- */
      /* Transformamos o quadrado do √≠cone em um c√≠rculo perfeito com anel de fogo */
      & .icon-box {
        background: #000 !important; /* O centro escuro do eclipse */
        border-radius: 50% !important;
        border: none !important;
        /* O truque do anel de fogo: Box Shadow */
        box-shadow: 
          inset 0 0 0 2px #000, /* Separa√ß√£o interna */
          0 0 0 2px #ff4500, /* O Anel de fogo */
          0 0 15px #ff4500; /* O Brilho */
        animation: eclipse-pulse 3s infinite ease-in-out alternate;
        overflow: visible !important;
      }
      @keyframes eclipse-pulse {
        0% { box-shadow: inset 0 0 0 2px #000, 0 0 0 1px #803300, 0 0 5px #ff4500; }
        100% { box-shadow: inset 0 0 0 3px #000, 0 0 0 3px #ffaa00, 0 0 25px #ff4500; }
      }
      
      /* A imagem dentro fica escura (silhueta) */
      & .power-img { opacity: 0.5; filter: grayscale(1) contrast(5) brightness(0.5); }

      /* --- DADOS: BRASAS APAGADAS --- */
      & .die-card {
        background: #0a0a0a !important;
        border: 1px solid #441100 !important;
      }

      /* √çcones */
      & .die-icon i { filter: drop-shadow(0 0 2px #000); }
      & .die-icon.normal i { color: #888; } /* Cinzas */
      & .die-icon.hard i { color: #ff5500; text-shadow: 0 0 5px #ff2200; } /* Brasa */
      & .die-icon.wiggle i { color: #fff; text-shadow: 0 0 10px #ffaa00; animation: ember-spark 0.2s infinite alternate; } /* Fogo vivo */
      
      @keyframes ember-spark { from { opacity: 0.8; } to { opacity: 1; } }

      /* Bot√£o "You Died" */
      & .btn-buy {
        background: transparent !important;
        border: 1px solid #552200 !important;
        color: #884400 !important;
        font-family: serif !important; text-transform: uppercase; letter-spacing: 1px;
      }
      & .btn-buy:hover:not(:disabled) {
        border-color: #ff5500 !important;
        color: #ffaa00 !important;
        background: linear-gradient(90deg, transparent, #331100, transparent) !important;
        text-shadow: 0 0 10px #ff5500;
      }
    `
  },
  // ==========================================================================================
  // TEMA: GODZILLA (RADIA√á√ÉO TOTAL)
  // Design: Escamas escuras de Kaiju, brilho azul neon intenso, anima√ß√£o de carga at√¥mica.
  // ==========================================================================================
  godzilla_radioactive: {
    label: "REI DOS MONSTROS",
    icon: "fa-radiation",
    color: "#00ffff",
    // Azul At√¥mico
    desc: "N√≠veis cr√≠ticos de radia√ß√£o detectados. Carga m√°xima.",
    css: `
      /* --- PELE DE KAIJU + CARGA AT√îMICA --- */
      & {
        background-color: #00111a !important;
        /* Textura de escamas */
        background-image: 
          radial-gradient(circle at 0% 50%, rgba(0,0,0,0.5) 9px, transparent 10px),
          radial-gradient(circle at 100% 50%, rgba(0,0,0,0.5) 9px, transparent 10px) !important;
        background-size: 20px 20px !important;
        
        border: 2px solid #005577 !important;
        border-radius: 6px !important;
        /* Brilho pulsante externo */
        box-shadow: 0 0 15px rgba(0, 255, 255, 0.2);
        position: relative;
        overflow: hidden !important;
      }

      /* EFEITO: O Bafo At√¥mico carregando nas costas (De baixo pra cima) */
      &::after {
        content: ""; position: absolute;
        bottom: -100%; left: 0; right: 0; height: 100%;
        background: linear-gradient(to top, rgba(0,255,255,0) 0%, rgba(0,255,255,0.3) 50%, rgba(0,255,255,0) 100%);
        animation: spine-charge 4s infinite ease-in-out;
        pointer-events: none;
        z-index: 0;
      }
      @keyframes spine-charge {
        0% { bottom: -100%; opacity: 0; }
        50% { opacity: 1; }
        100% { bottom: 200%; opacity: 0; }
      }

      /* T√≠tulo Neon */
      & .power-name {
        color: #fff;
        text-shadow: 0 0 5px #00ffff, 0 0 10px #00aaaa;
        font-weight: 900; z-index: 1; position: relative;
      }

      /* --- √çCONE: N√öCLEO INST√ÅVEL --- */
      & .icon-box {
        background: #002233 !important;
        border: 2px solid #00ffff !important;
        box-shadow: 0 0 20px #00ffff;
        z-index: 1;
      }
      & .power-img { filter: hue-rotate(180deg) brightness(1.5) contrast(1.2); }

      /* --- DADOS: REATORES NUCLEARES --- */
      & .die-card {
        background: rgba(0, 30, 40, 0.8) !important;
        border: 1px solid #0088aa !important;
        backdrop-filter: blur(2px);
        z-index: 1;
      }

      /* Estiliza√ß√£o dos √çcones */
      & .die-icon i { transition: 0.3s; }
      
      /* Normal: Azul Escuro */
      & .die-icon.normal i { color: #007799; text-shadow: 0 0 2px #00ffff; }
      
      /* Hard: Azul Neon */
      & .die-icon.hard i { color: #00ffff; text-shadow: 0 0 8px #00ffff; }
      
      /* Wiggle: Meltdown (Branco/Azul Estourado) */
      & .die-icon.wiggle i { 
        color: #ffffff; 
        text-shadow: 0 0 10px #00ffff, 0 0 20px #00ffff;
        animation: atomic-pulse 0.2s infinite alternate;
      }
      @keyframes atomic-pulse { 
        from { transform: scale(1); filter: blur(0px); } 
        to { transform: scale(1.1); filter: blur(1px); } 
      }

      /* Bot√£o de Disparo */
      & .btn-buy {
        background: #003344 !important;
        color: #00ffff !important;
        border: 1px solid #00ffff !important;
        font-family: monospace; font-weight: bold;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #00ffff !important;
        color: #000 !important;
        box-shadow: 0 0 20px #00ffff;
      }
    `
  },
  // ==========================================================================================
  // TEMA: O FUNDADOR (SHINGEKI / A COORDENADA)
  // Estilo: Linhas de luz conectadas (Paths), c√©u estrelado, gradiente branco/verde espectral.
  // ==========================================================================================
  founder_coordinate: {
    label: "A COORDENADA",
    icon: "fa-project-diagram",
    // Conex√µes/Caminhos
    color: "#00ffaa",
    // Verde Espectral
    desc: "O ponto onde todos os caminhos se cruzam.",
    css: `
      /* --- O C√âU DOS CAMINHOS --- */
      & {
        background-color: #000 !important;
        /* Fundo: Um c√©u noturno profundo com um brilho na base */
        background: radial-gradient(circle at 50% 100%, #003322 0%, #000000 80%) !important;
        border: 2px solid #fff !important;
        border-radius: 4px !important;
        box-shadow: 0 0 20px rgba(0, 255, 170, 0.3);
        position: relative;
        overflow: hidden !important;
      }

      /* --- A √ÅRVORE DE LUZ (EFEITO COORDENADA) --- */
      /* Cria raios de luz saindo do centro inferior */
      &::before {
        content: ""; position: absolute; inset: -50%;
        background: repeating-conic-gradient(
          from 0deg at 50% 100%,
          transparent 0deg,
          transparent 10deg,
          rgba(255, 255, 255, 0.1) 10.5deg, /* Linha fina branca */
          rgba(0, 255, 170, 0.2) 11deg,    /* Brilho verde */
          transparent 12deg
        );
        animation: paths-rotate 60s linear infinite; /* Gira muito lentamente */
        z-index: 0;
        pointer-events: none;
      }
      @keyframes paths-rotate { from { transform: rotate(-10deg); } to { transform: rotate(10deg); } }

      /* T√≠tulo Transcendente */
      & .power-name {
        background: linear-gradient(to right, #ffffff, #00ffaa, #ffffff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 300;
        letter-spacing: 3px;
        text-transform: uppercase;
        filter: drop-shadow(0 0 5px rgba(0,255,170,0.8));
      }

      /* --- √çCONE: O PONTO ZERO --- */
      & .icon-box {
        background: #fff !important;
        border: 1px solid #00ffaa !important;
        border-radius: 50% !important;
        box-shadow: 0 0 30px #fff, 0 0 60px #00ffaa; /* Brilho intenso */
        z-index: 1;
      }
      /* Efeito prisma/mescla de cores no √≠cone */
      & .power-img { 
        filter: brightness(1.2) contrast(0.8);
        mix-blend-mode: hard-light;
      }

      /* --- DADOS: OS NOVE TIT√ÉS --- */
      & .die-card {
        background: rgba(255, 255, 255, 0.1) !important;
        border: 1px solid rgba(255, 255, 255, 0.3) !important;
        backdrop-filter: blur(2px);
        z-index: 1;
      }

      /* Normal: Rel√¢mpago de Transforma√ß√£o (Amarelo/Verde) */
      & .die-icon.normal i { 
        color: #ffffaa; 
        text-shadow: 0 0 10px #ffcc00;
      }

      /* Hard: Endurecimento (Cristal Azulado/Branco) */
      & .die-icon.hard i { 
        color: #fff; 
        text-shadow: 0 0 5px #00ffff;
        opacity: 0.8;
      }

      /* Wiggle: O Fundador (Espectral) */
      & .die-icon.wiggle i { 
        background: linear-gradient(to bottom, #ff00ff, #00ffff, #00ff00); /* Cores mescladas */
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 5px #fff);
        animation: founder-pulse 3s infinite ease-in-out;
      }
      @keyframes founder-pulse { 0% { opacity: 0.6; transform: scale(1); } 50% { opacity: 1; transform: scale(1.1); } 100% { opacity: 0.6; transform: scale(1); } }

      /* Bot√£o Caminhos */
      & .btn-buy {
        background: rgba(0,0,0,0.5) !important;
        border: 1px solid #fff !important;
        color: #fff !important;
        font-weight: 300;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #fff !important;
        color: #000 !important;
        box-shadow: 0 0 20px #fff;
      }
    `
  },
  // ==========================================================================================
  // TEMA: CAVALEIRO (REI ARTHUR / FATE)
  // Estilo: Azul Real, Ouro, Armadura Prateada e N√∫cleo de Drag√£o.
  // ==========================================================================================
  knight_king: {
    label: "REI DOS CAVALEIROS",
    icon: "fa-crown",
    color: "#ffd700",
    // Ouro
    desc: "A espada prometida da vit√≥ria.",
    css: `
      /* --- ARMADURA REAL --- */
      & {
        background-color: #002266 !important; /* Azul Real (Roupa da Saber) */
        border: 2px solid #c0c0c0 !important; /* Prata */
        border-bottom: 4px solid #ffd700 !important; /* Base Dourada */
        border-radius: 4px 4px 15px 15px !important;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        /* Textura sutil de tecido real */
        background-image: linear-gradient(45deg, rgba(255,255,255,0.05) 25%, transparent 25%, transparent 50%, rgba(255,255,255,0.05) 50%, rgba(255,255,255,0.05) 75%, transparent 75%, transparent) !important;
        background-size: 20px 20px !important;
      }

      /* Part√≠culas de Mana Dourada (Excalibur) */
      &::after {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(#ffd700 1px, transparent 1px);
        background-size: 15px 15px;
        opacity: 0.0;
        animation: mana-sparkles 2s infinite;
        pointer-events: none;
      }
      @keyframes mana-sparkles { 
        0% { opacity: 0; transform: translateY(0); } 
        50% { opacity: 0.4; } 
        100% { opacity: 0; transform: translateY(-20px); } 
      }

      /* T√≠tulo Majestoso */
      & .power-name {
        font-family: serif;
        font-weight: bold;
        color: #fff;
        text-shadow: 0 2px 0 #000, 0 0 10px #ffd700;
        letter-spacing: 1px;
      }

      /* --- √çCONE: COROA / ESPADA --- */
      & .icon-box {
        background: linear-gradient(135deg, #c0c0c0, #fff) !important; /* Prata polida */
        border: 2px solid #ffd700 !important;
        border-radius: 4px !important;
        box-shadow: 0 0 10px #ffd700;
        transform: rotate(45deg); /* Losango Nobre */
        width: 40px !important; height: 40px !important;
        margin: 5px 15px 5px 5px !important;
        overflow: hidden !important;
      }
      & .power-img { transform: rotate(-45deg) scale(1.3); }

      /* --- DADOS: LINHAGEM DO DRAG√ÉO --- */
      & .die-card {
        background: linear-gradient(to bottom, #eee, #ccc) !important; /* A√ßo */
        border: 1px solid #fff !important;
        color: #000 !important;
        box-shadow: inset 0 0 5px rgba(0,0,0,0.5);
      }
      
      /* Ajuste de cor do texto dos dados para fundo claro */
      & .die-screen { color: #333 !important; text-shadow: 0 1px 0 #fff !important; }

      /* Normal: A√ßo (Espada) */
      & .die-icon.normal i { color: #444; filter: drop-shadow(0 1px 0 #fff); }

      /* Hard: Ouro (Coroa/Avalon) */
      & .die-icon.hard i { color: #d4af37; filter: drop-shadow(0 0 2px #ffaa00); }

      /* Wiggle: N√öCLEO DO DRAG√ÉO (O Poder Oculto) */
      /* O dado Wiggle quebra a armadura e mostra o cora√ß√£o vermelho */
      & .die-card.wiggle {
        background: #330000 !important;
        border: 1px solid #ff0000 !important;
      }
      & .die-card.wiggle .die-screen { color: #ffcccc !important; text-shadow: 0 0 5px #f00 !important; }
      & .die-icon.wiggle i { 
        color: #ff0000; 
        text-shadow: 0 0 10px #ff0000;
        animation: dragon-heartbeat 1s infinite;
      }
      @keyframes dragon-heartbeat { 0% { transform: scale(1); } 15% { transform: scale(1.2); } 30% { transform: scale(1); } }

      /* Bot√£o Nobre */
      & .btn-buy {
        background: #003388 !important;
        border: 1px solid #ffd700 !important;
        color: #ffd700 !important;
        text-transform: uppercase;
        font-family: serif;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #ffd700 !important;
        color: #002266 !important;
        box-shadow: 0 0 15px #ffd700;
      }
    `
  },
  // ==========================================================================================
  // TEMA: CAVALEIRO ARCANO (SIEGHART - IMMORTAL)
  // Estilo: Roxo Profundo, Energia Escura, L√¢minas, Aura de "Rage".
  // ==========================================================================================
  arcane_knight: {
    label: "O IMORTAL",
    icon: "fa-khanda",
    // Espada Ancestral
    color: "#9400d3",
    // Roxo Escuro
    desc: "A f√∫ria de um guerreiro que enganou a morte.",
    css: `
      /* --- ARMADURA ESCURA --- */
      & {
        background: linear-gradient(180deg, #1a001a 0%, #000 100%) !important;
        border: 2px solid #550055 !important;
        border-bottom: 4px solid #9400d3 !important; /* Base Roxa */
        border-radius: 4px !important;
        /* Aura de Energia Escura (Rage Mode) */
        box-shadow: 0 0 15px rgba(148, 0, 211, 0.4), inset 0 0 30px rgba(0,0,0,0.8);
        position: relative;
        overflow: hidden !important;
      }

      /* N√©voa de Energia (Fundo) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(circle, rgba(148,0,211,0.2) 10%, transparent 10%);
        background-size: 20px 20px;
        filter: blur(2px);
        animation: dark-mist 10s linear infinite;
        opacity: 0.5; pointer-events: none;
      }
      @keyframes dark-mist { 0% { transform: translateY(0) scale(1); } 50% { transform: translateY(-20px) scale(1.1); } 100% { transform: translateY(0) scale(1); } }

      /* T√≠tulo Lend√°rio */
      & .power-name {
        color: #e0b0ff; /* Lil√°s Claro */
        font-family: serif;
        font-weight: bold;
        text-shadow: 0 0 5px #9400d3;
        letter-spacing: 1px;
      }

      /* --- √çCONE: L√ÇMINA ETERNA --- */
      & .icon-box {
        background: #2a002a !important;
        border: 2px solid #9400d3 !important;
        border-radius: 4px !important;
        box-shadow: 0 0 15px #9400d3;
        transform: skewX(-10deg); /* Inclina√ß√£o agressiva */
      }
      & .power-img { filter: contrast(1.2) sepia(1) hue-rotate(240deg) saturate(2); }

      /* --- DADOS: ARSENAL DO GLADIADOR --- */
      & .die-card {
        background: rgba(30, 0, 30, 0.9) !important;
        border: 1px solid #550055 !important;
      }

      /* Normal: Corte de Espada */
      & .die-icon.normal i { 
        color: #ccc; 
        filter: drop-shadow(2px 2px 0 #000);
        transform: rotate(-45deg);
      }

      /* Hard: Energia Arcana (Roxo) */
      & .die-icon.hard i { 
        color: #9400d3; 
        text-shadow: 0 0 8px #9400d3;
      }

      /* Wiggle: O Avatar (Poder Total) */
      & .die-icon.wiggle i { 
        color: #fff; 
        text-shadow: 0 0 5px #9400d3, 0 0 15px #ff00ff;
        animation: rage-pulse 0.2s infinite alternate;
      }
      @keyframes rage-pulse { from { opacity: 0.8; transform: scale(1); } to { opacity: 1; transform: scale(1.1); } }

      /* Bot√£o Soluna */
      & .btn-buy {
        background: #2a002a !important;
        border: 1px solid #9400d3 !important;
        color: #e0b0ff !important;
        font-weight: bold;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #9400d3 !important;
        color: #fff !important;
        box-shadow: 0 0 20px #9400d3;
      }
    `
  },
  // ==========================================================================================
  // TEMA: IRM√ÉOS DE PUNHO (RED VS PURPLE CLASH)
  // Estilo: Lado esquerdo Vermelho, Direito Roxo. No centro, um flash de impacto.
  // ==========================================================================================
  fist_clash: {
    label: "IRM√ÉOS DE PUNHO",
    icon: "fa-handshake",
    // Aperto de m√£o / Choque
    color: "#ff0055",
    // Cor H√≠brida
    desc: "O impacto de duas for√ßas inpar√°veis.",
    css: `
      /* --- O CAMPO DE BATALHA DIVIDIDO --- */
      & {
        /* Gradiente Vermelho -> Roxo */
        background: linear-gradient(90deg, #330000 0%, #220000 45%, #220022 55%, #1a0033 100%) !important;
        border: 2px solid #fff !important;
        border-left: 4px solid #ff0000 !important;
        border-right: 4px solid #aa00ff !important;
        border-radius: 8px !important;
        box-shadow: 0 5px 15px rgba(0,0,0,0.5);
        position: relative;
        overflow: hidden !important;
      }

      /* --- O CHOQUE (FLASH CENTRAL) --- */
      /* Uma linha de luz pulsante bem no meio do card */
      &::after {
        content: ""; position: absolute;
        top: 0; bottom: 0; left: 50%; width: 4px;
        background: #fff;
        box-shadow: 0 0 10px #fff, 0 0 20px #ff0000, 0 0 20px #aa00ff;
        transform: translateX(-50%);
        animation: clash-flash 0.1s infinite alternate;
        opacity: 0.8;
        z-index: 0;
        pointer-events: none;
      }
      @keyframes clash-flash { from { opacity: 0.5; height: 90%; top: 5%; } to { opacity: 1; height: 100%; top: 0; width: 6px; } }

      /* T√≠tulo dividido (Visualmente) */
      & .power-name {
        background: linear-gradient(to right, #ff4444, #fff, #dd88ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-weight: 900;
        font-style: italic;
        z-index: 1;
      }

      /* --- √çCONE: O IMPACTO --- */
      & .icon-box {
        background: linear-gradient(135deg, #550000, #330055) !important;
        border: 2px solid #fff !important;
        box-shadow: 0 0 15px rgba(255, 255, 255, 0.5);
        z-index: 1;
      }
      & .power-img { mix-blend-mode: overlay; opacity: 1; }

      /* --- DADOS: LADOS OPOSTOS --- */
      & .dice-matrix { gap: 15px; position: relative; z-index: 1; }

      /* NORMAL (Lado Vermelho - Punho 1) */
      & .die-card.normal {
        background: linear-gradient(to right, #330000, #111) !important;
        border: 1px solid #ff0000 !important;
      }
      & .die-icon.normal i { color: #ff0000; filter: drop-shadow(0 0 5px #ff0000); }

      /* HARD (O Centro - A Explos√£o) */
      /* O dado do meio sofre com o choque das cores */
      & .die-card.hard {
        background: #000 !important;
        border: 2px solid #fff !important;
        box-shadow: 0 0 10px #fff;
      }
      & .die-icon.hard i { 
        color: #fff; 
        animation: shake-impact 0.1s infinite;
      }
      @keyframes shake-impact { 0% { transform: translate(0,0); } 100% { transform: translate(1px, -1px); } }

      /* WIGGLE (Lado Roxo - Punho 2) */
      & .die-card.wiggle {
        background: linear-gradient(to left, #1a0033, #111) !important;
        border: 1px solid #aa00ff !important;
      }
      & .die-icon.wiggle i { color: #aa00ff; filter: drop-shadow(0 0 5px #aa00ff); }

      /* Bot√£o H√≠brido */
      & .btn-buy {
        background: rgba(0,0,0,0.8) !important;
        border: 1px solid #fff !important;
        color: #fff !important;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #fff !important;
        color: #000 !important;
        box-shadow: 0 0 15px #fff;
      }
    `
  },
  // ==========================================================================================
  // TEMA: FOR√áA BRUTA (PRIMITIVO / CAVERNA)
  // Estilo: Pedra lascada, formato irregular (sem linhas retas), tons de terra e pele.
  // ==========================================================================================
  brute_force: {
    label: "ERA DAS PEDRAS",
    icon: "fa-fist-raised",
    // Punho
    color: "#8b4513",
    // Marrom Terra
    desc: "Sem t√©cnica. Apenas for√ßa esmagadora.",
    css: `
      /* --- ESTILO PEDRA LASCADA --- */
      & {
        background: #3e3e3e !important;
        /* Textura de Pedra */
        background-image: radial-gradient(circle at 50% 50%, #4a4a4a 10%, transparent 10%), radial-gradient(circle at 20% 80%, #2a2a2a 5%, transparent 5%) !important;
        background-size: 30px 30px !important;
        
        border: 4px solid #5a5a5a !important;
        /* Formato Irregular (Org√¢nico) */
        border-radius: 255px 15px 225px 15px / 15px 225px 15px 255px !important;
        box-shadow: 5px 5px 0 #1a1a1a;
        font-family: "Impact", "Arial Black", sans-serif !important;
      }

      /* T√≠tulo Pesado */
      & .power-name {
        color: #d2b48c; /* Tan/Couro */
        text-transform: uppercase;
        text-shadow: 2px 2px 0 #000;
        letter-spacing: 1px;
        transform: rotate(-1deg);
      }

      /* --- √çCONE: PINTURA RUPESTRE --- */
      & .icon-box {
        background: #8b4513 !important; /* Cor de barro */
        border: 3px solid #000 !important;
        border-radius: 30% 70% 70% 30% / 30% 30% 70% 70% !important; /* Forma de batata/pedra */
        box-shadow: inset 0 0 10px #000;
      }
      & .power-img { filter: sepia(1) contrast(1.5) brightness(0.8); }

      /* --- DADOS: PEDREGULHOS --- */
      & .die-card {
        background: #555 !important;
        border: none !important;
        border-radius: 5px 20px 10px 25px !important; /* Pedras tortas */
        box-shadow: inset -2px -2px 5px rgba(0,0,0,0.5);
      }

      /* Anima√ß√£o de Impacto (Treme Treme) */
      & .die-icon i { 
        color: #d2b48c; 
        text-shadow: 1px 1px 0 #000;
        animation: rumble 0.2s infinite alternate;
      }
      /* O D20 (Wiggle) treme mais forte */
      & .die-icon.wiggle i { animation: rumble-hard 0.1s infinite; color: #ff4500; }

      @keyframes rumble { 0% { transform: rotate(0deg); } 100% { transform: rotate(2deg); } }
      @keyframes rumble-hard { 0% { transform: translate(0,0); } 25% { transform: translate(1px,1px); } 50% { transform: translate(-1px, -1px); } 75% { transform: translate(-1px, 1px); } }

      /* Bot√£o Tacape */
      & .btn-buy {
        background: #8b0000 !important; /* Sangue seco */
        color: #fff !important;
        border: 2px solid #000 !important;
        border-radius: 10px !important;
        font-family: "Impact", sans-serif;
      }
      & .btn-buy:hover:not(:disabled) {
        transform: scale(1.05);
        background: #ff4500 !important;
      }
    `
  },
  // ==========================================================================================
  // TEMA: IMPERATRIZ (TECH ARMOR / HUD)
  // Estilo: Vermelho Neon, Grid Tecnol√≥gico, Mira (Crosshair), Scanlines.
  // ==========================================================================================
  empress_tech: {
    label: "PROTOCOLO IMPERATRIZ",
    icon: "fa-crosshairs",
    // Mira
    color: "#ff003c",
    // Vermelho Cyber
    desc: "Sistemas de mira online. Armadura ativada.",
    css: `
      /* --- ARMADURA HIGH-TECH --- */
      & {
        background-color: #050505 !important;
        /* Grid Vermelho Fino no fundo */
        background-image: 
          linear-gradient(rgba(255, 0, 60, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(255, 0, 60, 0.1) 1px, transparent 1px) !important;
        background-size: 20px 20px !important;

        border: 1px solid #ff003c !important;
        border-left: 5px solid #ff003c !important;
        /* CORTAR CANTOS (Clip-path) - Estilo Sci-Fi */
        clip-path: polygon(
          10px 0, 100% 0, 
          100% calc(100% - 10px), calc(100% - 10px) 100%, 
          0 100%, 0 10px
        );
        box-shadow: 0 0 10px rgba(255, 0, 60, 0.2);
        position: relative;
      }

      /* LINHA DE SCANNER (Passando pelo card) */
      &::after {
        content: ""; position: absolute; top: 0; left: 0; width: 100%; height: 2px;
        background: #ff003c;
        box-shadow: 0 0 10px #ff003c;
        animation: hud-scan 4s linear infinite;
        opacity: 0.5; pointer-events: none;
      }
      @keyframes hud-scan { 0% { top: 0; opacity: 0; } 10% { opacity: 1; } 90% { opacity: 1; } 100% { top: 100%; opacity: 0; } }

      /* T√≠tulo Digital */
      & .power-name {
        font-family: monospace;
        color: #ff003c;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 0 0 5px rgba(255, 0, 60, 0.8);
      }

      /* --- √çCONE: MIRA DE PRECIS√ÉO --- */
      & .icon-box {
        background: rgba(255, 0, 60, 0.1) !important;
        border: 1px solid #ff003c !important;
        position: relative;
      }
      /* Desenha uma mira (+) sobre a imagem */
      & .icon-box::before {
        content: "+"; 
        position: absolute; inset: 0; 
        display: flex; align-items: center; justify-content: center;
        color: rgba(255, 0, 60, 0.8); font-size: 2em; font-weight: 100;
        z-index: 2; pointer-events: none;
      }
      /* Anima√ß√£o de "Lock On" (Mira girando) */
      & .icon-box::after {
        content: ""; position: absolute; inset: -5px;
        border: 1px dashed #ff003c; border-radius: 50%;
        animation: lock-on 4s linear infinite;
      }
      @keyframes lock-on { 100% { transform: rotate(360deg); } }
      
      & .power-img { filter: grayscale(1) sepia(1) hue-rotate(-50deg) saturate(3); opacity: 0.6; }

      /* --- DADOS: M√ìDULOS DE SISTEMA --- */
      & .die-card {
        background: rgba(0, 0, 0, 0.8) !important;
        border: 1px solid #550011 !important;
        border-radius: 0 !important; /* Quadrado tecnol√≥gico */
      }

      /* √çcones Digitais */
      & .die-icon i { transition: 0.2s; }

      /* Normal: Standby */
      & .die-icon.normal i { color: #550011; }
      
      /* Hard: Active */
      & .die-icon.hard i { color: #ff003c; text-shadow: 0 0 5px #ff003c; }

      /* Wiggle: TERMINATOR MODE (Pisca Alerta Vermelho/Branco) */
      & .die-icon.wiggle i { 
        color: #fff; 
        animation: terminator-flash 0.5s infinite steps(2);
      }
      @keyframes terminator-flash { 
        0% { color: #fff; text-shadow: 0 0 10px #fff; transform: scale(1); } 
        50% { color: #ff0000; text-shadow: 0 0 10px #ff0000; transform: scale(1.1); } 
      }

      /* Bot√£o HUD */
      & .btn-buy {
        background: transparent !important;
        border: 1px solid #ff003c !important;
        color: #ff003c !important;
        font-family: monospace; letter-spacing: 1px;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #ff003c !important;
        color: #000 !important;
        box-shadow: 0 0 15px #ff003c;
      }
    `
  },
  // ==========================================================================================
  // TEMA: DEVORADOR DE MENTES (ILLITHID / PSIONIC)
  // Estilo: Roxo Profundo, Pulsos Ps√≠quicos, Textura Org√¢nica/Alien, Distor√ß√£o Mental.
  // ==========================================================================================
  mind_flayer: {
    label: "MENTE DA COLMEIA",
    icon: "fa-brain",
    // C√©rebro
    color: "#9b30ff",
    // Roxo Ps√≠quico Neon
    desc: "Sua vontade n√£o √© sua. Obede√ßa.",
    css: `
      /* --- ONDA PS√çQUICA --- */
      & {
        background-color: #1a0033 !important;
        /* Textura org√¢nica/cerebral */
        background-image: radial-gradient(circle at 50% 50%, #2a0044 20%, transparent 40%), radial-gradient(circle at 0% 0%, #2a0044 10%, transparent 30%) !important;
        background-size: 40px 40px !important;
        
        border: 2px solid #9b30ff !important;
        border-radius: 8px !important;
        box-shadow: 0 0 15px rgba(155, 48, 255, 0.3);
        /* Distor√ß√£o leve no card inteiro (Efeito Mental) */
        animation: mind-warp 6s infinite ease-in-out;
      }
      @keyframes mind-warp {
        0% { transform: scale(1); filter: hue-rotate(0deg); }
        50% { transform: scale(1.01); filter: hue-rotate(10deg); }
        100% { transform: scale(1); filter: hue-rotate(0deg); }
      }

      /* T√≠tulo Alien√≠gena */
      & .power-name {
        color: #d896ff;
        text-shadow: 0 0 5px #9b30ff;
        font-family: sans-serif;
        letter-spacing: 2px;
      }

      /* --- √çCONE: O C√âREBRO PULSANTE --- */
      & .icon-box {
        background: #110022 !important;
        border: 1px solid #9b30ff !important;
        border-radius: 50% !important;
        box-shadow: inset 0 0 20px #9b30ff;
        animation: brain-pulse 2s infinite;
      }
      @keyframes brain-pulse {
        0% { box-shadow: 0 0 5px #9b30ff; }
        50% { box-shadow: 0 0 25px #9b30ff, 0 0 50px #9b30ff; }
        100% { box-shadow: 0 0 5px #9b30ff; }
      }
      & .power-img { opacity: 0.8; mix-blend-mode: lighten; filter: hue-rotate(260deg) contrast(1.5); }

      /* --- DADOS: ESFERAS PSI√îNICAS --- */
      & .die-card {
        background: rgba(40, 0, 60, 0.8) !important;
        border: 1px solid #5500aa !important;
        border-radius: 50% 50% 10px 10px !important; /* Formato alien */
      }

      /* √çcones Vibrantes */
      & .die-icon i { 
        color: #d896ff;
        text-shadow: 0 0 5px #9b30ff;
        animation: telepathy-shake 0.1s infinite paused; /* S√≥ ativa no hover/intera√ß√£o se quiser */
      }
      
      /* Wiggle: O Controle Mental (Vibrando constante) */
      & .die-icon.wiggle i { 
        color: #fff;
        text-shadow: 0 0 10px #ff00ff;
        animation: telepathy-shake 0.2s infinite;
      }
      @keyframes telepathy-shake {
        0% { transform: translate(1px, 1px); }
        25% { transform: translate(-1px, -2px); }
        50% { transform: translate(-3px, 0px); }
        75% { transform: translate(3px, 2px); }
        100% { transform: translate(1px, -1px); }
      }

      /* Bot√£o Domina√ß√£o */
      & .btn-buy {
        background: #2a0044 !important;
        border: 1px solid #9b30ff !important;
        color: #d896ff !important;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #9b30ff !important;
        color: #fff !important;
        box-shadow: 0 0 20px #9b30ff;
      }
    `
  },
  // ==========================================================================================
  // TEMA: REINO ESPIRITUAL (SAKURA GHOST)
  // Estilo: Rosa P√°lido, Transpar√™ncia, P√©talas Caindo, Fantasmag√≥rico.
  // ==========================================================================================
  spirit_sakura: {
    label: "CEREJEIRA ESPIRITUAL",
    icon: "fa-ghost",
    color: "#ffb7c5",
    // Rosa Sakura
    desc: "Esp√≠ritos dan√ßam entre as p√©talas caindo.",
    css: `
      /* --- O MUNDO ET√âREO --- */
      & {
        /* Fundo semi-transparente rosado */
        background: linear-gradient(180deg, rgba(50, 0, 20, 0.9) 0%, rgba(20, 0, 10, 0.95) 100%) !important;
        border: 1px solid #ffb7c5 !important;
        border-top: 4px solid #ff88aa !important;
        border-radius: 12px !important;
        box-shadow: 0 0 15px rgba(255, 183, 197, 0.3);
        position: relative;
        overflow: hidden !important;
        backdrop-filter: blur(5px); /* Efeito fantasma */
      }

      /* CHUVA DE P√âTALAS (SAKURA) */
      &::before {
        content: ""; position: absolute; top: -100%; left: 0; right: 0; bottom: -100%;
        /* Simula p√©talas com gradientes radiais pequenos */
        background-image: 
          radial-gradient(#ffb7c5 2px, transparent 3px),
          radial-gradient(#ff88aa 2px, transparent 3px),
          radial-gradient(#fff 1px, transparent 2px);
        background-size: 50px 50px, 80px 80px, 30px 30px;
        background-position: 0 0, 20px 40px, 10px 10px;
        animation: sakura-fall 10s linear infinite;
        opacity: 0.6; pointer-events: none;
      }
      @keyframes sakura-fall { 
        0% { transform: translateY(0) rotate(0deg); } 
        100% { transform: translateY(50%) rotate(20deg); } 
      }

      /* T√≠tulo Suave */
      & .power-name {
        color: #ffdae0;
        text-shadow: 0 0 5px #ff88aa;
        font-family: serif; font-style: italic;
      }

      /* --- √çCONE: FANTASMA FLUTUANTE --- */
      & .icon-box {
        background: rgba(255, 183, 197, 0.1) !important;
        border: 1px solid #ffb7c5 !important;
        border-radius: 50% !important;
        box-shadow: 0 0 10px rgba(255, 183, 197, 0.5);
        animation: ghost-float 3s ease-in-out infinite;
      }
      @keyframes ghost-float {
        0%, 100% { transform: translateY(0); opacity: 1; }
        50% { transform: translateY(-5px); opacity: 0.7; }
      }
      & .power-img { opacity: 0.7; filter: sepia(1) hue-rotate(300deg) saturate(0.5); }

      /* --- DADOS: ALMAS PERDIDAS --- */
      & .die-card {
        background: rgba(255, 255, 255, 0.05) !important;
        border: 1px solid rgba(255, 183, 197, 0.3) !important;
        border-radius: 8px !important;
      }

      /* √çcones Et√©reos */
      & .die-icon i { color: #ffb7c5; filter: blur(0.5px); transition: 0.5s; }
      & .die-card:hover .die-icon i { filter: blur(0px); text-shadow: 0 0 8px #ffb7c5; }

      /* Wiggle: A Flor (Destaque) */
      & .die-icon.wiggle i { 
        color: #fff; 
        text-shadow: 0 0 5px #ff88aa;
        animation: pulse-soul 2s infinite;
      }
      @keyframes pulse-soul { 0% { opacity: 0.5; } 50% { opacity: 1; } 100% { opacity: 0.5; } }

      /* Bot√£o Espiritual */
      & .btn-buy {
        background: transparent !important;
        border: 1px solid #ffb7c5 !important;
        color: #ffb7c5 !important;
        font-family: serif;
      }
      & .btn-buy:hover:not(:disabled) {
        background: rgba(255, 183, 197, 0.2) !important;
        color: #fff !important;
        box-shadow: 0 0 15px #ffb7c5;
      }
    `
  },
  princess_elemental: {
    label: "PRINCESA ELEMENTAL",
    icon: "fa-crown",
    color: "#00bfff",
    // Azul Real
    desc: "√Ågua, Fogo e Trov√£o curvam-se perante a coroa.",
    css: `
      /* --- O PAL√ÅCIO DE CRISTAL --- */
      & {
        /* Fundo Azul Real Profundo com gradiente elegante */
        background: linear-gradient(135deg, #0f2027 0%, #203a43 50%, #2c5364 100%) !important;
        border: 2px solid #ffd700 !important; /* Borda Dourada (Coroa) */
        border-radius: 15px !important;
        box-shadow: 0 0 20px rgba(0, 191, 255, 0.4), inset 0 0 20px rgba(0,0,0,0.5);
        position: relative;
        overflow: hidden !important;
      }

      /* BRILHO M√ÅGICO DE FUNDO */
      &::before {
        content: ""; position: absolute; inset: 0;
        background: radial-gradient(circle at 50% 0%, rgba(255, 215, 0, 0.15), transparent 70%);
        pointer-events: none;
        animation: royal-glow 5s ease-in-out infinite alternate;
      }
      @keyframes royal-glow { 0% { opacity: 0.5; } 100% { opacity: 1; } }

      /* T√çTULO REAL */
      & .power-name {
        color: #e0f7fa;
        text-shadow: 0 0 10px #00bfff;
        font-family: 'Cinzel', serif; /* Fonte elegante se dispon√≠vel */
        letter-spacing: 1px;
      }

      /* --- √çCONE DA COROA (PRINCIPAL) --- */
      & .icon-box {
        background: linear-gradient(45deg, #1a2a6c, #b21f1f, #fdbb2d) !important; /* Um toque sutil multicolorido escuro */
        background-size: 200% 200%;
        animation: gradient-spin 5s ease infinite !important;
        border: 2px solid #ffd700 !important;
        border-radius: 50% 50% 0 50% !important; /* Formato de gota estilizada */
        box-shadow: 0 0 15px #ffd700;
      }
      & .icon-box i { color: #fff !important; filter: drop-shadow(0 0 5px #ffd700); }
      
      @keyframes gradient-spin { 
        0% { background-position: 0% 50%; } 
        50% { background-position: 100% 50%; } 
        100% { background-position: 0% 50%; } 
      }

      /* =========================================
         ELEMENTOS DOS DADOS (A M√ÅGICA ACONTECE AQUI)
         ========================================= */

      /* 1. DADO NORMAL -> √ÅGUA (Fluido e Calmo) */
      & .die-card.normal {
        border: 1px solid #00ffff !important;
        background: rgba(0, 255, 255, 0.05) !important;
        box-shadow: 0 0 10px rgba(0, 255, 255, 0.2) inset;
        animation: water-float 3s ease-in-out infinite;
      }
      & .die-card.normal .die-icon i { color: #00ffff; text-shadow: 0 0 8px #00ffff; }
      
      @keyframes water-float {
        0%, 100% { transform: translateY(0); border-radius: 6px; }
        50% { transform: translateY(-2px); border-radius: 12px 4px 12px 4px; }
      }

      /* 2. DADO HARD -> FOGO (Intenso e Pulsante) */
      & .die-card.hard {
        border: 1px solid #ff4500 !important;
        background: rgba(255, 69, 0, 0.1) !important;
        box-shadow: 0 0 15px rgba(255, 69, 0, 0.3);
        animation: fire-pulse 0.1s infinite alternate; /* Tremula√ß√£o r√°pida */
      }
      & .die-card.hard .die-icon i { color: #ffae42; text-shadow: 0 0 10px #ff0000; }
      
      @keyframes fire-pulse {
        from { box-shadow: 0 0 10px rgba(255, 69, 0, 0.3); opacity: 0.9; }
        to { box-shadow: 0 0 20px rgba(255, 69, 0, 0.6); opacity: 1; }
      }

      /* 3. DADO WIGGLE -> RAIO (El√©trico e Ca√≥tico) */
      & .die-card.wiggle {
        border: 1px solid #ffff00 !important;
        background: rgba(255, 255, 0, 0.05) !important;
        border-style: double !important;
      }
      & .die-card.wiggle .die-icon i { 
        color: #fff; 
        text-shadow: 0 0 5px #ffff00, 0 0 10px #ffff00;
        animation: thunder-strike 2s infinite;
      }

      @keyframes thunder-strike {
        0%, 90%, 100% { opacity: 1; transform: scale(1); filter: brightness(1); }
        92% { opacity: 0.5; transform: scale(1.1) rotate(5deg); filter: brightness(2); }
        94% { opacity: 1; transform: scale(1.1) rotate(-5deg); filter: brightness(2); }
        96% { opacity: 0.5; transform: scale(1) rotate(5deg); }
      }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: linear-gradient(90deg, transparent, rgba(0, 191, 255, 0.2), transparent) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        color: #00bfff !important;
        font-family: serif;
        font-weight: bold;
        transition: 0.3s;
      }
      & .btn-buy:hover:not(:disabled) {
        border-color: #ffd700 !important;
        color: #ffd700 !important;
        background: rgba(255, 215, 0, 0.1) !important;
        letter-spacing: 2px; /* Expande ao passar o mouse */
      }

      /* Barrinhas e Inputs */
      & .input-group .bar { background: #ffd700 !important; }
      & input:focus ~ .bar { box-shadow: 0 0 15px #ffd700; }
    `
  },
  melodia_acustica: {
    label: "MELODIA AC√öSTICA",
    icon: "fa-music",
    color: "#ff8c00",
    // Laranja Vibrante
    desc: "Acordes laranjas e amarelos dan√ßam em linhas animadas.",
    css: `
      /* --- O PALCO DO SOM --- */
      & {
        /* Fundo Gradiente Quente e Acolhedor */
        background: linear-gradient(135deg, #2b1b0a 0%, #4a2c0f 50%, #7c4a1e 100%) !important;
        border: 2px solid #ff8c00 !important; /* Borda Laranja (Viol√£o) */
        border-radius: 15px !important;
        box-shadow: 0 0 20px rgba(255, 140, 0, 0.4), inset 0 0 20px rgba(0,0,0,0.5);
        position: relative;
        overflow: hidden !important;
      }

      /* CORDAS VIBRANTES DE FUNDO (Linhas Animadas) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: 
          repeating-linear-gradient(0deg, transparent 0px, transparent 19px, rgba(255, 255, 255, 0.05) 20px),
          repeating-linear-gradient(90deg, transparent 0px, transparent 19px, rgba(255, 255, 255, 0.05) 20px);
        background-size: 100% 20px, 20px 100%; /* Tamanho das c√©lulas da "pauta" */
        pointer-events: none;
        animation: strings-vibrate 10s linear infinite;
      }
      /* Notas Musicais flutuando suavemente sobre as linhas */
      &::after {
        content: "‚ô™ ‚ô´ ‚ô© ‚ô¨"; /* S√≠mbolos de M√∫sica */
        position: absolute; top: 0; left: 0; right: 0; bottom: 0;
        color: rgba(255, 215, 0, 0.2); /* Dourado Transl√∫cido */
        font-size: 24px;
        text-align: center;
        white-space: pre; /* Mant√©m os espa√ßos */
        pointer-events: none;
        animation: floating-notes 15s linear infinite;
        text-shadow: 0 0 5px rgba(255, 140, 0, 0.5);
      }

      @keyframes strings-vibrate { 
        0% { background-position: 0 0, 0 0; }
        100% { background-position: 0 100px, 100px 0; } /* Move as linhas */
      }
      @keyframes floating-notes {
        0% { transform: translateY(100%) rotate(0deg); opacity: 0; }
        20% { opacity: 1; }
        80% { opacity: 1; }
        100% { transform: translateY(-100%) rotate(360deg); opacity: 0; }
      }

      /* T√çTULO DA M√öSICA */
      & .power-name {
        color: #ffd700; /* Dourado */
        text-shadow: 0 0 10px #ff8c00;
        font-family: 'Cinzel', serif;
        letter-spacing: 1px;
      }

      /* --- √çCONE DAN√áANTE (NOTA MUSICAL) --- */
      & .icon-box {
        background: linear-gradient(45deg, #ff8c00, #ffd700, #ffa500) !important; /* Gradiente Laranja/Amarelo */
        background-size: 200% 200%;
        animation: icon-dance 3s ease-in-out infinite alternate, gradient-spin 5s ease infinite !important;
        border: 2px solid #fff !important; /* Borda Branca para destaque */
        border-radius: 50% !important;
        box-shadow: 0 0 15px #ff8c00;
      }
      & .icon-box i { color: #fff !important; filter: drop-shadow(0 0 5px #ff8c00); }
      
      /* Anima√ß√£o de Dan√ßa do √çcone */
      @keyframes icon-dance {
        0% { transform: translateY(0) rotate(0deg) scale(1); }
        33% { transform: translateY(-3px) rotate(10deg) scale(1.05); }
        66% { transform: translateY(0) rotate(-5deg) scale(1); }
        100% { transform: translateY(-3px) rotate(5deg) scale(1.05); }
      }
      @keyframes gradient-spin { 
        0% { background-position: 0% 50%; } 
        50% { background-position: 100% 50%; } 
        100% { background-position: 0% 50%; } 
      }

      /* =========================================
         ELEMENTOS DOS DADOS (A ORQUESTRA)
         ========================================= */

      /* 1. DADO NORMAL -> O RITMO (Pulsa√ß√£o Constante) */
      & .die-card.normal {
        border: 1px solid #ffa500 !important; /* Laranja Claro */
        background: rgba(255, 165, 0, 0.05) !important;
        box-shadow: 0 0 10px rgba(255, 165, 0, 0.2) inset;
        animation: rhythm-pulse 2s ease-in-out infinite;
      }
      & .die-card.normal .die-icon i { color: #ffa500; text-shadow: 0 0 8px #ffa500; }
      
      @keyframes rhythm-pulse {
        0%, 100% { transform: scale(1); box-shadow: 0 0 10px rgba(255, 165, 0, 0.2) inset; }
        50% { transform: scale(1.02); box-shadow: 0 0 15px rgba(255, 165, 0, 0.4) inset; }
      }

      /* 2. DADO HARD -> O SOLO (Destaque Brilhante) */
      & .die-card.hard {
        border: 2px solid #ffd700 !important; /* Dourado Forte */
        background: rgba(255, 215, 0, 0.1) !important;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        animation: solo-shine 3s ease-in-out infinite;
      }
      & .die-card.hard .die-icon i { color: #fff; text-shadow: 0 0 10px #ffd700, 0 0 20px #ff8c00; }
      
      @keyframes solo-shine {
        0%, 100% { filter: brightness(1); border-color: #ffd700; }
        50% { filter: brightness(1.2); border-color: #fff; box-shadow: 0 0 25px rgba(255, 215, 0, 0.5); }
      }

      /* 3. DADO WIGGLE -> O ACORDE FINAL (Vibra√ß√£o Intensa) */
      & .die-card.wiggle {
        border: 1px solid #ff4500 !important; /* Vermelho Alaranjado */
        background: rgba(255, 69, 0, 0.05) !important;
        border-style: dashed !important; /* Borda tracejada como ondas sonoras */
      }
      & .die-card.wiggle .die-icon i { 
        color: #ff4500; 
        text-shadow: 0 0 5px #ff4500;
        animation: chord-vibrate 0.2s infinite; /* Vibra√ß√£o muito r√°pida */
      }

      @keyframes chord-vibrate {
        0% { transform: translateX(0); }
        25% { transform: translateX(-1px); }
        50% { transform: translateX(0); }
        75% { transform: translateX(1px); }
        100% { transform: translateX(0); }
      }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: linear-gradient(90deg, transparent, rgba(255, 140, 0, 0.2), transparent) !important;
        border: 1px solid rgba(255, 255, 255, 0.2) !important;
        color: #ff8c00 !important;
        font-family: serif;
        font-weight: bold;
        transition: 0.3s;
      }
      & .btn-buy:hover:not(:disabled) {
        border-color: #ffd700 !important;
        color: #ffd700 !important;
        background: rgba(255, 140, 0, 0.2) !important;
        letter-spacing: 2px; /* Expande ao passar o mouse */
        box-shadow: 0 0 10px #ff8c00;
      }

      /* Barrinhas e Inputs */
      & .input-group .bar { background: #ff8c00 !important; }
      & input:focus ~ .bar { box-shadow: 0 0 15px #ff8c00; }
    `
  },
  hakaishin_energy: {
    label: "DESTRUI√á√ÉO ABSOLUTA",
    icon: "fa-skull",
    color: "#8a2be2",
    // Roxo Violeta Intenso
    desc: "O poder da destrui√ß√£o. Aura roxa e raios devastadores.",
    css: `
      /* --- O VAZIO DA DESTRUI√á√ÉO --- */
      & {
        /* Fundo Roxo Escuro Profundo */
        background: linear-gradient(135deg, #1a0b2e 0%, #2e003e 50%, #4b0082 100%) !important;
        border: 2px solid #8a2be2 !important; /* Borda Roxa Brilhante */
        border-radius: 15px !important;
        box-shadow: 0 0 25px rgba(138, 43, 226, 0.6), inset 0 0 30px rgba(0,0,0,0.8);
        position: relative;
        overflow: hidden !important;
      }

      /* AURA DE HAKAI (Part√≠culas de Destrui√ß√£o) */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: 
          radial-gradient(circle, #d8bfd8 1px, transparent 1px),
          radial-gradient(circle, #8a2be2 1px, transparent 1px);
        background-size: 20px 20px;
        background-position: 0 0, 10px 10px;
        pointer-events: none;
        opacity: 0.3;
        animation: hakai-particles 2s linear infinite;
      }
      /* Raios Roxos Aleat√≥rios */
      &::after {
        content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
        background: repeating-linear-gradient(
          45deg,
          transparent 0%,
          transparent 48%,
          rgba(138, 43, 226, 0.1) 50%,
          transparent 52%,
          transparent 100%
        );
        animation: electricity 3s infinite linear;
        pointer-events: none;
        opacity: 0.5;
        mix-blend-mode: screen;
      }

      @keyframes hakai-particles { 
        0% { transform: translateY(0) scale(1); opacity: 0.3; }
        100% { transform: translateY(-20px) scale(0); opacity: 0; }
      }
      @keyframes electricity {
        0% { transform: rotate(0deg); }
        100% { transform: rotate(360deg); }
      }

      /* T√çTULO AMEA√áADOR */
      & .power-name {
        color: #e6e6fa; /* Lavanda */
        text-shadow: 0 0 10px #8a2be2, 0 0 20px #4b0082;
        font-family: 'Rajdhani', sans-serif;
        font-weight: 700;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      /* --- √çCONE DA DESTRUI√á√ÉO (ESFERA DE HAKAI) --- */
      & .icon-box {
        background: radial-gradient(circle at 30% 30%, #d8bfd8, #8a2be2, #000) !important;
        border: 2px solid #fff !important;
        border-radius: 50% !important;
        box-shadow: 0 0 20px #8a2be2, 0 0 40px #4b0082;
        animation: sphere-pulse 2s infinite alternate;
      }
      & .icon-box i { 
        color: #fff !important; 
        filter: drop-shadow(0 0 5px #000); 
        animation: icon-shake 0.1s infinite; /* Vibra√ß√£o de instabilidade */
      }
      
      @keyframes sphere-pulse {
        0% { box-shadow: 0 0 20px #8a2be2; transform: scale(1); }
        100% { box-shadow: 0 0 40px #8a2be2, 0 0 60px #4b0082; transform: scale(1.05); }
      }
      @keyframes icon-shake {
        0% { transform: translate(0, 0); }
        25% { transform: translate(1px, 1px); }
        50% { transform: translate(-1px, -1px); }
        75% { transform: translate(-1px, 1px); }
        100% { transform: translate(1px, -1px); }
      }

      /* =========================================
         ELEMENTOS DOS DADOS (ENERGIA DESTRUTIVA)
         ========================================= */

      /* 1. DADO NORMAL -> PRESS√ÉO (Gravidade Roxa) */
      & .die-card.normal {
        border: 1px solid #9370db !important;
        background: rgba(75, 0, 130, 0.3) !important;
        box-shadow: inset 0 0 15px rgba(0,0,0,0.8);
        animation: pressure-crush 3s infinite ease-in-out;
      }
      & .die-card.normal .die-icon i { color: #9370db; text-shadow: 0 0 5px #9370db; }
      
      @keyframes pressure-crush {
        0%, 100% { border-color: #9370db; }
        50% { border-color: #4b0082; box-shadow: inset 0 0 25px rgba(0,0,0,1); }
      }

      /* 2. DADO HARD -> DESINTEGRA√á√ÉO (Part√≠culas) */
      & .die-card.hard {
        border: 1px solid #da70d6 !important; /* Orqu√≠dea */
        background: rgba(138, 43, 226, 0.1) !important;
        box-shadow: 0 0 10px #da70d6;
        animation: disintegration 0.2s infinite; /* Piscar r√°pido */
      }
      & .die-card.hard .die-icon i { 
        color: #fff; 
        text-shadow: 0 0 10px #da70d6; 
        opacity: 0.8;
      }
      
      @keyframes disintegration {
        0% { opacity: 1; border-style: solid; }
        50% { opacity: 0.8; border-style: dashed; }
        100% { opacity: 1; border-style: solid; }
      }

      /* 3. DADO WIGGLE -> APAGAR DA EXIST√äNCIA (Flash Devastador) */
      & .die-card.wiggle {
        border: 2px solid #fff !important;
        background: #000 !important; /* Vazio absoluto */
        overflow: hidden;
      }
      & .die-card.wiggle::before {
        content: ""; position: absolute; top: 0; left: -100%; width: 50%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.8), transparent);
        transform: skewX(-20deg);
        animation: hakai-flash 2s infinite;
      }
      & .die-card.wiggle .die-icon i { 
        color: #8a2be2; 
        text-shadow: 0 0 5px #fff, 0 0 15px #8a2be2;
        animation: final-erasure 1s infinite alternate;
      }

      @keyframes hakai-flash {
        0% { left: -100%; }
        20% { left: 200%; }
        100% { left: 200%; }
      }
      @keyframes final-erasure {
        from { filter: blur(0px); transform: scale(1); }
        to { filter: blur(2px); transform: scale(1.1); color: #fff; }
      }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: rgba(0, 0, 0, 0.6) !important;
        border: 1px solid #8a2be2 !important;
        color: #da70d6 !important;
        font-family: 'Rajdhani', sans-serif;
        font-weight: 800;
        text-transform: uppercase;
        transition: 0.2s;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #8a2be2 !important;
        color: #fff !important;
        border-color: #fff !important;
        box-shadow: 0 0 20px #8a2be2;
        letter-spacing: 2px;
      }

      /* Barrinhas e Inputs */
      & .input-group .bar { background: #8a2be2 !important; }
      & input:focus ~ .bar { box-shadow: 0 0 15px #8a2be2, 0 0 30px #4b0082; }
    `
  },
  monkey_king: {
    label: "O GRANDE S√ÅBIO",
    icon: "fa-crown",
    // Representando a realeza do Rei Macaco
    color: "#FFD700",
    // Dourado Divino
    desc: "Nuvens, bast√µes e a f√∫ria do Rei dos Macacos.",
    css: `
      /* --- A MONTANHA DAS FLORES E FRUTOS --- */
      & {
        /* Fundo Vermelho e Dourado (Cores cl√°ssicas do Wukong) */
        background: linear-gradient(135deg, #4a0000 0%, #8b0000 50%, #b22222 100%) !important;
        border: 3px solid #FFD700 !important; /* Ouro */
        border-top: 5px solid #FFD700 !important;
        border-radius: 12px !important;
        box-shadow: 0 0 20px rgba(255, 215, 0, 0.4), inset 0 0 30px rgba(0,0,0,0.6);
        position: relative;
        overflow: hidden !important;
      }

      /* NUVEM VOADORA (KINTO-UN) NO FUNDO */
      &::before {
        content: ""; position: absolute; inset: 0;
        background-image: 
          radial-gradient(circle, rgba(255,255,255,0.1) 20%, transparent 20%),
          radial-gradient(circle, rgba(255,255,255,0.1) 20%, transparent 20%);
        background-position: 0 0, 50px 50px;
        background-size: 100px 100px;
        opacity: 0.4;
        animation: kinto-un-fly 20s linear infinite;
        pointer-events: none;
      }
      /* P√™los Dourados Flutuando (Part√≠culas) */
      &::after {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(#ffd700 1px, transparent 1px);
        background-size: 30px 30px;
        opacity: 0.3;
        animation: golden-fur 5s linear infinite;
        pointer-events: none;
      }

      @keyframes kinto-un-fly { 
        0% { background-position: 0 0, 50px 50px; } 
        100% { background-position: 100px 0, 150px 50px; } 
      }
      @keyframes golden-fur {
        0% { transform: translateY(0); opacity: 0; }
        50% { opacity: 0.5; }
        100% { transform: translateY(-50px); opacity: 0; }
      }

      /* T√çTULO LEND√ÅRIO */
      & .power-name {
        color: #FFD700;
        text-shadow: 2px 2px 0px #8b0000;
        font-family: 'Cinzel', serif; /* Fonte √©pica */
        font-weight: 800;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      /* --- √çCONE: A TIARA DA MENTE (GOLDEN FILLET) --- */
      & .icon-box {
        /* O fundo √© neutro, o destaque √© a borda que simula a tiara */
        background: radial-gradient(circle, #333, #000) !important;
        border: 4px solid #FFD700 !important; /* A TIARA DOURADA */
        border-radius: 50% !important;
        box-shadow: 0 0 15px #FFD700, inset 0 0 10px #FFD700;
        animation: headache-spell 3s infinite ease-in-out; /* Pulsa como se estivesse apertando */
      }
      & .icon-box i { 
        color: #FFD700 !important; 
        text-shadow: 0 0 5px #ff0000;
      }
      
      @keyframes headache-spell {
        0%, 100% { transform: scale(1); border-color: #FFD700; box-shadow: 0 0 15px #FFD700; }
        50% { transform: scale(0.95); border-color: #fff; box-shadow: 0 0 25px #ff4500; } /* Aperta e brilha vermelho */
      }

      /* =========================================
         ELEMENTOS DOS DADOS (ARMAS E PODERES)
         ========================================= */

      /* 1. DADO NORMAL -> NUVEM VOADORA (Kinto-un) */
      & .die-card.normal {
        border: none !important;
        background: rgba(255, 255, 255, 0.8) !important; /* Branca como a nuvem */
        box-shadow: 0 5px 15px rgba(255, 255, 255, 0.4);
        border-radius: 20px !important; /* Arredondado */
        animation: nimbus-float 2s ease-in-out infinite alternate;
      }
      & .die-card.normal .die-header { border-bottom: 1px dashed #ccc; }
      & .die-card.normal .die-icon i { color: #87ceeb; text-shadow: none; } /* Azul c√©u */
      & .die-card.normal .die-screen { color: #333; text-shadow: none; }
      
      @keyframes nimbus-float {
        from { transform: translateY(2px); }
        to { transform: translateY(-2px); }
      }

      /* 2. DADO HARD -> OLHOS DE FOGO (Huo Yan Jin Jing) */
      & .die-card.hard {
        border: 2px solid #ff4500 !important;
        background: rgba(50, 0, 0, 0.6) !important;
        box-shadow: 0 0 10px #ff4500;
        animation: fiery-gaze 0.2s infinite alternate;
      }
      & .die-card.hard .die-icon i { 
        color: #ffd700; 
        text-shadow: 0 0 10px #ff0000;
        filter: brightness(1.5);
      }
      
      @keyframes fiery-gaze {
        from { box-shadow: 0 0 5px #ff4500; }
        to { box-shadow: 0 0 15px #ff0000; }
      }

      /* 3. DADO WIGGLE -> BAST√ÉO M√ÅGICO (Ruyi Jingu Bang) */
      & .die-card.wiggle {
        /* Visual do Bast√£o: Ouro nas pontas, Vermelho no meio */
        background: linear-gradient(180deg, 
          #FFD700 0%, #FFD700 10%, 
          #8b0000 10%, #8b0000 90%, 
          #FFD700 90%, #FFD700 100%) !important;
        border: 2px solid #FFD700 !important;
        border-radius: 4px !important; /* Reto como um bast√£o */
        box-shadow: 0 0 15px #FFD700;
      }
      
      & .die-card.wiggle .die-icon i { 
        color: #fff; 
        animation: staff-spin 1.5s infinite linear; /* O √≠cone gira como o bast√£o */
        text-shadow: 0 0 5px #000;
      }
      & .die-card.wiggle .die-text { color: #FFD700; text-shadow: 1px 1px 0 #000; }

      @keyframes staff-spin {
        0% { transform: rotate(0deg) scale(1); }
        50% { transform: rotate(180deg) scale(1.2); }
        100% { transform: rotate(360deg) scale(1); }
      }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: linear-gradient(to bottom, #FFD700, #daa520) !important;
        border: 1px solid #8b4513 !important;
        color: #4a0000 !important;
        font-weight: 900;
        text-shadow: 0 1px 0 rgba(255,255,255,0.4);
        box-shadow: 0 2px 5px rgba(0,0,0,0.5);
        transition: 0.2s;
      }
      & .btn-buy:hover:not(:disabled) {
        transform: scale(1.05);
        box-shadow: 0 0 15px #FFD700;
        filter: brightness(1.2);
      }
      & .btn-buy:disabled {
        background: #555 !important;
        color: #888 !important;
        border-color: #333 !important;
      }

      /* Inputs */
      & .input-group input { color: #FFD700; }
      & .input-group .bar { background: #FFD700 !important; height: 3px; }
      & input:focus ~ .bar { box-shadow: 0 0 20px #FFD700; }
    `
  },
  hellheim_gate: {
    label: "PORTAS DE HELLHEIM",
    icon: "fa-dungeon",
    color: "#8b0000",
    // Vermelho Sangue
    desc: "Um portal aberto para a dimens√£o dos mortos.",
    css: `
      /* --- O PORTAL ABERTO --- */
      & {
        /* Fundo que simula o portal e o fogo do inferno */
        background: 
          radial-gradient(ellipse at center, rgba(255, 69, 0, 0.3) 0%, rgba(0, 0, 0, 0.8) 70%),
          linear-gradient(to bottom, #2a0a0a, #000) !important;
        border: 4px solid #4a0a0a !important; /* Borda de ferro forjado */
        border-top: none !important; /* O topo √© aberto */
        border-radius: 20px 20px 0 0 !important; /* Arco do portal */
        box-shadow: 
          0 0 30px rgba(255, 0, 0, 0.4), 
          inset 0 0 50px rgba(0,0,0,1),
          inset 0 -10px 20px rgba(255, 69, 0, 0.3);
        position: relative;
        overflow: hidden !important;
      }

      /* ALMAS SAINDO DO PORTAL (Anima√ß√£o de fundo) */
      &::before {
        content: "üëª"; /* Usando emoji como placeholder de alma */
        position: absolute; top: 100%; left: 50%;
        font-size: 30px; color: rgba(255, 255, 255, 0.2);
        text-shadow: 0 0 10px #ff0000;
        animation: souls-rise 4s linear infinite;
        pointer-events: none;
      }
      &::after {
        content: "üëª";
        position: absolute; top: 100%; left: 30%;
        font-size: 25px; color: rgba(255, 255, 255, 0.15);
        text-shadow: 0 0 10px #ff0000;
        animation: souls-rise 5s linear infinite 1s; /* Atraso */
        pointer-events: none;
      }

      @keyframes souls-rise {
        0% { transform: translate(-50%, 0) scale(0.5); opacity: 0; }
        20% { opacity: 0.6; }
        80% { opacity: 0.6; }
        100% { transform: translate(-50%, -200px) scale(1.5); opacity: 0; }
      }

      /* T√çTULO G√ìTICO */
      & .power-name {
        color: #ff4500; /* Laranja Fogo */
        text-shadow: 0 0 10px #8b0000;
        font-family: 'Cinzel', serif;
        font-weight: 900;
        letter-spacing: 2px;
        text-transform: uppercase;
      }

      /* --- √çCONE: O SELO DO PORTAL --- */
      & .icon-box {
        background: radial-gradient(circle, #4a0a0a, #000) !important;
        border: 3px solid #ff4500 !important;
        box-shadow: 0 0 20px #ff0000, inset 0 0 15px #000;
        animation: gate-pulse 3s infinite alternate;
      }
      & .icon-box i { 
        color: #ff4500 !important; 
        text-shadow: 0 0 10px #ff0000;
        animation: icon-burn 0.5s infinite alternate;
      }
      
      @keyframes gate-pulse {
        from { box-shadow: 0 0 20px #ff0000; }
        to { box-shadow: 0 0 40px #ff4500; }
      }
      @keyframes icon-burn {
        from { filter: brightness(1); }
        to { filter: brightness(1.5) blur(1px); }
      }

      /* =========================================
         ELEMENTOS DOS DADOS (OS CONDENADOS)
         ========================================= */

      /* 1. DADO NORMAL -> FOGO DO INFERNO (Brasas) */
      & .die-card.normal {
        border: 1px solid #ff4500 !important;
        background: rgba(50, 10, 10, 0.6) !important;
        box-shadow: inset 0 0 20px rgba(255, 69, 0, 0.3);
        animation: ember-glow 2s ease-in-out infinite alternate;
      }
      & .die-card.normal .die-icon i { color: #ff4500; text-shadow: 0 0 10px #ff4500; }
      
      @keyframes ember-glow {
        from { background-color: rgba(50, 10, 10, 0.6); }
        to { background-color: rgba(100, 20, 20, 0.8); }
      }

      /* 2. DADO HARD -> ALMAS APRISIONADAS (Frio e Fantasmag√≥rico) */
      & .die-card.hard {
        border: 1px solid #87ceeb !important; /* Azul Gelo */
        background: rgba(0, 0, 50, 0.5) !important;
        box-shadow: 0 0 15px rgba(135, 206, 235, 0.3);
      }
      & .die-card.hard .die-icon i { 
        color: #e0ffff; 
        text-shadow: 0 0 10px #87ceeb;
        animation: soul-shiver 0.1s infinite; /* Tremedeira */
      }
      
      @keyframes soul-shiver {
        0% { transform: translate(0, 0); }
        25% { transform: translate(1px, 0); }
        50% { transform: translate(0, 1px); }
        75% { transform: translate(-1px, 0); }
        100% { transform: translate(0, -1px); }
      }

      /* 3. DADO WIGGLE -> O GUARDI√ÉO (Correntes e Sangue) */
      & .die-card.wiggle {
        border: 3px solid #8b0000 !important;
        background: rgba(30, 0, 0, 0.9) !important;
        /* Simula correntes nas bordas */
        background-image: repeating-linear-gradient(45deg, transparent 0, transparent 10px, #333 10px, #333 12px) !important;
      }
      & .die-card.wiggle .die-icon i { 
        color: #ff0000; 
        text-shadow: 0 0 10px #ff0000;
        animation: chain-rattle 1s infinite; /* Sacudir */
      }

      @keyframes chain-rattle {
        0%, 100% { transform: rotate(0deg); }
        25% { transform: rotate(5deg); }
        75% { transform: rotate(-5deg); }
      }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: rgba(139, 0, 0, 0.5) !important;
        border: 1px solid #ff4500 !important;
        color: #ff4500 !important;
        font-family: 'Cinzel', serif;
        font-weight: 900;
        text-transform: uppercase;
        transition: 0.2s;
      }
      & .btn-buy:hover:not(:disabled) {
        background: #8b0000 !important;
        color: #fff !important;
        box-shadow: 0 0 20px #ff0000;
      }

      /* Barrinhas e Inputs */
      & .input-group .bar { background: #ff4500 !important; }
      & input:focus ~ .bar { box-shadow: 0 0 15px #ff0000; }
    `
  },
  divine_prism: {
    label: "PRISMA DIVINO",
    icon: "fa-sun",
    color: "#FFD700",
    // Dourado
    desc: "Um espet√°culo de luzes refratadas e divindade.",
    css: `
      /* --- O SAL√ÉO DOS ESPELHOS --- */
      & {
        /* Fundo Branco Perolado com leve toque dourado */
        background: linear-gradient(135deg, #ffffff 0%, #fffce6 50%, #fff5cc 100%) !important;
        border: 2px solid #fff !important;
        /* Borda animada RGB (Arco-√≠ris) */
        box-shadow: 
          0 0 0 2px #fff, /* Borda branca interna */
          0 0 20px rgba(255, 215, 0, 0.5), /* Brilho dourado */
          inset 0 0 50px rgba(255, 255, 255, 0.8);
        border-radius: 12px !important;
        position: relative;
        overflow: hidden !important;
        animation: border-rainbow 5s linear infinite; /* A borda muda de cor */
      }

      @keyframes border-rainbow {
        0% { border-color: #ff0000; box-shadow: 0 0 15px #ff0000, inset 0 0 20px #fff; }
        20% { border-color: #ffff00; box-shadow: 0 0 15px #ffff00, inset 0 0 20px #fff; }
        40% { border-color: #00ff00; box-shadow: 0 0 15px #00ff00, inset 0 0 20px #fff; }
        60% { border-color: #00ffff; box-shadow: 0 0 15px #00ffff, inset 0 0 20px #fff; }
        80% { border-color: #0000ff; box-shadow: 0 0 15px #0000ff, inset 0 0 20px #fff; }
        100% { border-color: #ff00ff; box-shadow: 0 0 15px #ff00ff, inset 0 0 20px #fff; }
      }

      /* RAIOS DE LUZ (GOD RAYS) */
      &::before {
        content: ""; position: absolute; top: -50%; left: -50%; width: 200%; height: 200%;
        background: conic-gradient(
          from 0deg,
          transparent 0deg,
          rgba(255, 215, 0, 0.1) 20deg,
          transparent 40deg,
          rgba(0, 255, 255, 0.1) 60deg,
          transparent 80deg,
          rgba(255, 0, 255, 0.1) 100deg,
          transparent 120deg
        );
        animation: god-rays-spin 10s linear infinite;
        pointer-events: none;
      }
      
      /* BRILHOS (SPARKLES) */
      &::after {
        content: ""; position: absolute; inset: 0;
        background-image: radial-gradient(white 1px, transparent 1px);
        background-size: 40px 40px;
        opacity: 0.5;
        animation: sparkle-twinkle 2s infinite alternate;
        pointer-events: none;
      }

      @keyframes god-rays-spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
      @keyframes sparkle-twinkle { 0% { opacity: 0.3; transform: scale(0.8); } 100% { opacity: 0.8; transform: scale(1.1); } }

      /* T√çTULO LUMINOSO */
      & .power-name {
        background: linear-gradient(90deg, #daa520, #ff4500, #daa520);
        background-size: 200% auto;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        font-family: 'Cinzel', serif;
        font-weight: 800;
        animation: shimmer-text 3s linear infinite;
        text-shadow: 0 0 5px rgba(255,215,0,0.3);
      }
      
      @keyframes shimmer-text { to { background-position: 200% center; } }

      /* --- √çCONE: O SOL PRISM√ÅTICO --- */
      & .icon-box {
        background: #fff !important;
        border: 2px solid #fff !important;
        border-radius: 50% !important;
        /* Sombra RGB pulsante */
        animation: prism-pulse 2s infinite linear;
      }
      & .icon-box i { 
        background: linear-gradient(45deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 2px rgba(0,0,0,0.2));
        animation: icon-rotate-hue 5s infinite linear;
      }
      
      @keyframes prism-pulse {
        0% { box-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000; }
        33% { box-shadow: 0 0 10px #00ff00, 0 0 20px #00ff00; }
        66% { box-shadow: 0 0 10px #0000ff, 0 0 20px #0000ff; }
        100% { box-shadow: 0 0 10px #ff0000, 0 0 20px #ff0000; }
      }

      /* =========================================
         ELEMENTOS DOS DADOS (FORMAS DE LUZ)
         ========================================= */

      /* 1. DADO NORMAL -> LUZ DOURADA (Constante) */
      & .die-card.normal {
        border: 1px solid #ffd700 !important;
        background: linear-gradient(135deg, #fff, #fffacd) !important;
        box-shadow: 0 0 15px rgba(255, 215, 0, 0.3);
        animation: gold-breath 3s infinite ease-in-out;
      }
      & .die-card.normal .die-icon i { color: #ffd700; text-shadow: 0 0 5px #ffd700; }
      & .die-card.normal .die-screen { color: #b8860b; }
      
      @keyframes gold-breath {
        0%, 100% { box-shadow: 0 0 10px rgba(255, 215, 0, 0.3); }
        50% { box-shadow: 0 0 20px rgba(255, 215, 0, 0.8); border-color: #ffa500; }
      }

      /* 2. DADO HARD -> REFRA√á√ÉO (Mudan√ßa de Cor) */
      & .die-card.hard {
        border: 2px solid transparent !important;
        background: #fff !important;
        background-clip: padding-box !important;
        position: relative;
        /* Borda RGB */
        animation: border-rotate 2s linear infinite;
        box-shadow: 0 5px 15px rgba(0,0,0,0.1);
      }
      /* Truque para borda gradiente animada */
      & .die-card.hard::after {
        content: ""; position: absolute; inset: -2px; z-index: -1;
        background: linear-gradient(45deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff);
        border-radius: 8px;
        animation: hue-spin 2s linear infinite;
      }
      & .die-card.hard .die-icon i { 
        color: #333; 
        animation: text-hue 2s linear infinite; /* √çcone muda de cor */
      }
      
      @keyframes hue-spin { 100% { filter: hue-rotate(360deg); } }
      @keyframes text-hue { 
        0% { color: #ff0000; text-shadow: 0 0 5px #ff0000; }
        50% { color: #00ffff; text-shadow: 0 0 5px #00ffff; }
        100% { color: #ff0000; text-shadow: 0 0 5px #ff0000; }
      }

      /* 3. DADO WIGGLE -> EXPLOS√ÉO DE LUZ (Flash) */
      & .die-card.wiggle {
        border: 2px solid #fff !important;
        background: radial-gradient(circle, #fff, #e0e0e0) !important;
        box-shadow: 0 0 20px #fff;
        animation: blinding-flash 1s infinite;
      }
      & .die-card.wiggle .die-icon i { 
        color: #ffd700; 
        font-size: 1.2em; /* Maior */
        animation: sun-spin 4s infinite linear;
      }

      @keyframes blinding-flash {
        0%, 100% { box-shadow: 0 0 10px #fff; filter: brightness(1); }
        50% { box-shadow: 0 0 30px #fff, 0 0 50px #ffff00; filter: brightness(1.2); }
      }
      @keyframes sun-spin { 100% { transform: rotate(360deg); } }

      /* BOT√ïES E CONTROLES */
      & .btn-buy {
        background: white !important;
        border: 2px solid #ffd700 !important;
        color: #daa520 !important;
        font-family: 'Cinzel', serif;
        font-weight: bold;
        transition: 0.3s;
      }
      & .btn-buy:hover:not(:disabled) {
        background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff) !important;
        color: #fff !important;
        border-color: #fff !important;
        animation: bg-pan 2s linear infinite;
        text-shadow: 0 1px 2px rgba(0,0,0,0.5);
      }
      @keyframes bg-pan { 0% { background-position: 0% 50%; } 100% { background-position: 100% 50%; } }

      /* Barrinhas e Inputs */
      & .input-group input { color: #d4af37; text-shadow: 0 0 1px rgba(0,0,0,0.1); }
      & .input-group .bar { background: linear-gradient(90deg, #ff0000, #ffff00, #00ff00, #00ffff, #0000ff, #ff00ff) !important; height: 3px; }
      & input:focus ~ .bar { box-shadow: 0 0 15px #ffd700; }
    `
  },
  raphael_deal: {
    label: "O CONTRATO INFERNAL",
    icon: "fa-file-signature",
    color: "#b8860b",
    // Ouro Escuro (Brass)
    desc: "Tudo o que voc√™ deseja... por um pre√ßo m√≥dico.",
    css: `
      /* --- A CASA DA ESPERAN√áA --- */
      & {
        /* Fundo de Veludo Carmesim e Escurid√£o */
        background: linear-gradient(135deg, #1a0505 0%, #2e0b0b 40%, #000000 100%) !important;
        border: 2px solid #b8860b !important; /* Moldura de Ouro */
        border-top: 4px double #b8860b !important;
        border-radius: 8px !important; /* Cantos mais rectos, como um contrato */
        box-shadow: 
          0 0 25px rgba(184, 134, 11, 0.2), 
          inset 0 0 40px rgba(0,0,0,0.9);
        position: relative;
        overflow: hidden !important;
        font-family: 'Cinzel', serif !important; /* Fonte elegante obrigat√≥ria */
      }

      /* BRASAS SUBINDO (HELLFIRE) */
      &::before {
        content: ""; position: absolute; bottom: -50px; left: 0; right: 0; height: 100%;
        background-image: 
          radial-gradient(#ff4500 1px, transparent 1px),
          radial-gradient(#b8860b 1px, transparent 1px);
        background-size: 15px 15px, 30px 30px;
        background-position: 0 0, 15px 15px;
        opacity: 0.4;
        animation: embers-rise 8s linear infinite;
        pointer-events: none;
      }
      
      /* O TEXTO DO CONTRATO (Fundo Sutil) */
      &::after {
        content: "¬ß1. The undersigned... ¬ß2. Soul transfer...";
        position: absolute; top: 10%; left: 5%; right: 5%;
        font-family: 'Times New Roman', serif;
        font-size: 40px;
        color: rgba(255, 255, 255, 0.03);
        transform: rotate(-5deg);
        pointer-events: none;
        white-space: nowrap;
        overflow: hidden;
      }

      @keyframes embers-rise {
        0% { transform: translateY(0); opacity: 0; }
        50% { opacity: 0.6; }
        100% { transform: translateY(-200px); opacity: 0; }
      }

      /* T√çTULO TEATRAL */
      & .power-name {
        color: #b8860b;
        text-shadow: 0 2px 0 #000;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
        border-bottom: 1px solid rgba(184, 134, 11, 0.3);
        padding-bottom: 2px;
      }

      /* --- √çCONE: O SELO DO DIABO --- */
      & .icon-box {
        background: #2b0a0a !important;
        border: 2px solid #b8860b !important;
        border-radius: 50% !important; /* Selo de cera */
        box-shadow: 0 0 15px #8b0000;
        animation: seal-pulse 4s infinite ease-in-out;
      }
      & .icon-box i { 
        color: #b8860b !important; 
        filter: drop-shadow(0 0 2px #000);
        transform: rotate(-15deg); /* Leve inclina√ß√£o elegante */
      }
      
      @keyframes seal-pulse {
        0%, 100% { box-shadow: 0 0 10px #8b0000; border-color: #b8860b; }
        50% { box-shadow: 0 0 25px #ff4500; border-color: #ff4500; } /* Brilha como fogo */
      }

      /* =========================================
         ELEMENTOS DOS DADOS (OS TERMOS DO ACORDO)
         ========================================= */

      /* 1. DADO NORMAL -> O CHARME (Veludo e Ouro) */
      & .die-card.normal {
        border: 1px solid #b8860b !important;
        background: linear-gradient(to bottom, #3d0c0c, #1a0505) !important;
        box-shadow: inset 0 0 10px #000;
        transition: 0.3s;
      }
      & .die-card.normal:hover { box-shadow: 0 0 15px #b8860b; transform: translateY(-2px); }
      & .die-card.normal .die-icon i { color: #b8860b; text-shadow: 0 1px 2px #000; }
      & .die-card.normal .die-screen { color: #e6c288; font-family: serif; }

      /* 2. DADO HARD -> A AMEA√áA (Fogo Infernal) */
      & .die-card.hard {
        border: 1px solid #ff4500 !important;
        background: rgba(50, 10, 10, 0.8) !important;
        box-shadow: 0 0 10px rgba(255, 69, 0, 0.2);
        animation: hellfire-flicker 0.1s infinite alternate;
      }
      & .die-card.hard .die-icon i { 
        color: #ff4500; 
        text-shadow: 0 0 10px #ff0000;
        transform: scale(1.1);
      }
      
      @keyframes hellfire-flicker {
        from { background-color: rgba(60, 10, 10, 0.8); opacity: 0.9; }
        to { background-color: rgba(80, 20, 20, 0.9); opacity: 1; }
      }

      /* 3. DADO WIGGLE -> A ALMA (Soul Coin) */
      & .die-card.wiggle {
        border: 2px solid #4a4a4a !important; /* Ferro Frio */
        background: radial-gradient(circle, #2f4f4f, #000) !important; /* Verde Espectral Escuro */
        border-radius: 50% !important; /* Moeda */
        width: 60px; height: 80px; /* For√ßar formato levemente arredondado no card */
        margin: 0 auto;
        box-shadow: 0 0 15px #00ff7f; /* Brilho Verde Alma */
        animation: soul-coin-spin 3s infinite ease-in-out;
      }
      & .die-card.wiggle .die-icon i { 
        color: #00ff7f; 
        text-shadow: 0 0 5px #fff;
        animation: scream-pulse 1s infinite;
      }
      & .die-card.wiggle .die-text { display: none; } /* Esconde texto para focar na moeda */

      @keyframes soul-coin-spin {
        0% { border-color: #4a4a4a; box-shadow: 0 0 10px #00ff7f; }
        50% { border-color: #fff; box-shadow: 0 0 25px #00ff7f, inset 0 0 20px #00ff7f; }
        100% { border-color: #4a4a4a; box-shadow: 0 0 10px #00ff7f; }
      }
      @keyframes scream-pulse {
        0%, 100% { opacity: 0.7; transform: scale(1); }
        50% { opacity: 1; transform: scale(1.2); }
      }

      /* BOT√ïES E CONTROLES (ASSINAR) */
      & .btn-buy {
        background: transparent !important;
        border: 1px solid #b8860b !important;
        color: #b8860b !important;
        font-family: 'Cinzel', serif;
        font-weight: 900;
        letter-spacing: 1px;
        transition: 0.3s;
        position: relative;
        overflow: hidden;
      }
      /* Efeito de "Queimar Papel" ao passar o mouse */
      & .btn-buy::before {
        content: ""; position: absolute; left: -100%; top: 0; width: 100%; height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255, 69, 0, 0.4), transparent);
        transition: 0.5s;
      }
      & .btn-buy:hover:not(:disabled) {
        color: #fff !important;
        border-color: #ff4500 !important;
        text-shadow: 0 0 5px #ff4500;
        box-shadow: 0 0 15px #b8860b;
      }
      & .btn-buy:hover::before { left: 100%; }

      /* Inputs elegantes */
      & .input-group input { 
        color: #b8860b; 
        font-family: serif; 
        font-style: italic;
      }
      & .input-group .bar { background: #b8860b !important; }
      & input:focus ~ .bar { box-shadow: 0 0 20px #b8860b; }
    `
  },
  techno_guide: {
    label: "PROTOCOLO: O GUIA",
    icon: "fa-microchip",
    color: "#00f3ff",
    // Azul Neon Cyberpunk
    desc: "Interface divina. O Deus da Tecnologia v√™ tudo.",
    css: `
      /* --- INTERFACE HOLOGR√ÅFICA (HUD) --- */
      & {
        /* Fundo Tech Escuro */
        background: linear-gradient(135deg, #050a10 0%, #001525 90%) !important;
        border: 1px solid rgba(0, 243, 255, 0.3) !important;
        /* Cantos cortados tecnologicamente */
        clip-path: polygon(
          15px 0, 100% 0, 
          100% calc(100% - 15px), calc(100% - 15px) 100%, 
          0 100%, 0 15px
        );
        box-shadow: 0 0 15px rgba(0, 243, 255, 0.1), inset 0 0 30px rgba(0, 243, 255, 0.05);
        position: relative;
        overflow: hidden !important;
        font-family: 'Share Tech Mono', monospace !important; /* Fonte Tech */
        cursor: crosshair !important; /* Cursor de Mira */
        transition: 0.3s;
      }

      /* EFEITO DE HOVER NO CARD (Target Locked) */
      &:hover {
        border-color: #00f3ff !important;
        box-shadow: 0 0 25px rgba(0, 243, 255, 0.3), inset 0 0 20px rgba(0, 243, 255, 0.1);
      }

      /* GRID DE FUNDO + SCANLINE */
      &::before {
        content: ""; position: absolute; inset: 0;
        /* Grid Hexagonal sutil */
        background-image: 
          linear-gradient(rgba(0, 243, 255, 0.1) 1px, transparent 1px),
          linear-gradient(90deg, rgba(0, 243, 255, 0.1) 1px, transparent 1px);
        background-size: 20px 20px;
        pointer-events: none;
        z-index: 0;
      }
      &::after {
        content: ""; position: absolute; top: -50%; left: 0; width: 100%; height: 50%;
        background: linear-gradient(to bottom, transparent, rgba(0, 243, 255, 0.3), transparent);
        animation: hud-scan 3s linear infinite;
        pointer-events: none;
      }

      @keyframes hud-scan {
        0% { top: -50%; opacity: 0; }
        10% { opacity: 1; }
        90% { opacity: 1; }
        100% { top: 150%; opacity: 0; }
      }

      /* T√çTULO DIGITAL */
      & .power-name {
        color: #fff;
        text-shadow: 0 0 5px #00f3ff, 0 0 10px #00f3ff;
        font-weight: 400;
        letter-spacing: 2px;
        text-transform: uppercase;
        position: relative;
        padding-left: 10px;
        border-left: 3px solid #00f3ff;
      }

      /* --- √çCONE: O N√öCLEO (ARC REACTOR) --- */
      & .icon-box {
        background: radial-gradient(circle, #001525, #000) !important;
        border: 2px solid #00f3ff !important;
        border-radius: 50% !important;
        box-shadow: 0 0 15px #00f3ff, inset 0 0 10px #00f3ff;
        position: relative;
      }
      /* Anel Girat√≥rio em volta do √≠cone */
      & .icon-box::before {
        content: ""; position: absolute; inset: -4px;
        border: 1px dashed #fff;
        border-radius: 50%;
        animation: reactor-spin 10s linear infinite;
      }
      & .icon-box i { 
        color: #fff !important; 
        text-shadow: 0 0 5px #00f3ff;
        animation: core-pulse 2s infinite;
      }
      
      @keyframes reactor-spin { 100% { transform: rotate(360deg); } }
      @keyframes core-pulse { 0%, 100% { opacity: 1; text-shadow: 0 0 10px #00f3ff; } 50% { opacity: 0.7; text-shadow: 0 0 2px #00f3ff; } }

      /* =========================================
         ELEMENTOS DOS DADOS (MODULOS DE SISTEMA)
         ========================================= */

      /* 1. DADO NORMAL -> DADOS EST√ÅVEIS (Azul) */
      & .die-card.normal {
        border: 1px solid rgba(0, 243, 255, 0.3) !important;
        background: rgba(0, 243, 255, 0.05) !important;
        box-shadow: inset 0 0 10px rgba(0, 243, 255, 0.1);
        position: relative;
      }
      /* Cantos de Mira no Card */
      & .die-card.normal::after {
        content: ""; position: absolute; inset: 2px;
        border: 1px solid transparent;
        border-top: 1px solid #00f3ff;
        border-bottom: 1px solid #00f3ff;
        opacity: 0.5;
        transform: scaleX(0);
        transition: 0.3s;
      }
      & .die-card.normal:hover::after { transform: scaleX(1); }
      & .die-card.normal .die-icon i { color: #00f3ff; text-shadow: 0 0 5px #00f3ff; }

      /* 2. DADO HARD -> OVERCLOCK (Branco/Ciano Intenso) */
      & .die-card.hard {
        border: 1px solid #fff !important;
        background: rgba(255, 255, 255, 0.1) !important;
        box-shadow: 0 0 10px rgba(255, 255, 255, 0.2);
        animation: data-flicker 0.1s infinite; /* Leve glitch */
      }
      & .die-card.hard .die-icon i { 
        color: #fff; 
        text-shadow: 0 0 10px #fff, 0 0 20px #00f3ff;
      }
      
      @keyframes data-flicker {
        0% { opacity: 1; }
        95% { opacity: 1; }
        96% { opacity: 0.8; }
        100% { opacity: 1; }
      }

      /* 3. DADO WIGGLE -> ERRO DE SISTEMA / PODER MAXIMO (Glitch) */
      & .die-card.wiggle {
        border: 1px solid #00f3ff !important;
        background: repeating-linear-gradient(
          45deg,
          rgba(0, 243, 255, 0.1),
          rgba(0, 243, 255, 0.1) 10px,
          rgba(0, 0, 0, 0.2) 10px,
          rgba(0, 0, 0, 0.2) 20px
        ) !important;
      }
      & .die-card.wiggle .die-icon i { 
        color: #fff; 
        text-shadow: 2px 0 #ff0000, -2px 0 #0000ff; /* Efeito 3D Anaglifo */
        animation: glitch-skew 0.3s infinite;
      }

      @keyframes glitch-skew {
        0% { transform: skew(0deg); }
        20% { transform: skew(-10deg); }
        40% { transform: skew(10deg); }
        60% { transform: skew(-5deg); }
        80% { transform: skew(5deg); }
        100% { transform: skew(0deg); }
      }

      /* BOT√ïES E CONTROLES (HOLOGRAFIA) */
      & .btn-buy {
        background: rgba(0, 243, 255, 0.05) !important;
        border: 1px solid #00f3ff !important;
        color: #00f3ff !important;
        font-family: 'Share Tech Mono', monospace;
        letter-spacing: 1px;
        text-transform: uppercase;
        position: relative;
        overflow: hidden;
        transition: 0.2s;
        cursor: crosshair !important;
      }
      /* Efeito de preenchimento ao passar o mouse */
      & .btn-buy:hover:not(:disabled) {
        background: #00f3ff !important;
        color: #000 !important;
        box-shadow: 0 0 20px #00f3ff;
      }
      
      /* Inputs Tecnol√≥gicos */
      & .input-group input { 
        color: #00f3ff; 
        font-family: 'Share Tech Mono', monospace;
      }
      & .input-group .bar { background: #fff !important; }
      & input:focus ~ .bar { background: #00f3ff !important; box-shadow: 0 0 10px #00f3ff; }
    `
  }
};
function wb() {
  const l = "multiversus-power-themes-style";
  if (document.getElementById(l)) return;
  let e = "";
  for (const [i, n] of Object.entries(Ja)) {
    const o = n.css.replace(/&/g, `.power-card.theme-${i}`);
    e += `
/* TEMA: ${n.label} */
${o}
`;
  }
  const t = document.createElement("style");
  t.id = l, t.innerHTML = e, document.head.appendChild(t), console.log("Multiversus RPG | Database de Temas Carregada.");
}
function Do(l, e, t) {
  const i = l.slice();
  return i[49] = e[t][0], i[50] = e[t][1], i;
}
function Ro(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = (
    /*category*/
    l[11].toUpperCase() + ""
  ), S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X = (
    /*isConfiguring*/
    l[4] && Mo(l)
  ), K = (
    /*isExpanded*/
    l[13] && Lo(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("img"), c = g(), f = r("div"), u = g(), d = r("div"), p = r("div"), m = r("span"), b = B(
        /*displayName*/
        l[14]
      ), v = g(), h = r("span"), _ = B(
        /*currentCost*/
        l[17]
      ), w = B(" XP"), k = g(), A = r("div"), y = r("span"), S = B(E), O = g(), C = r("span"), T = B("TOTAL: "), N = r("strong"), I = B(
        /*totalDice*/
        l[18]
      ), D = g(), M = r("div"), G = r("button"), G.innerHTML = '<i class="fas fa-cog svelte-zqcpy9"></i>', L = g(), U = r("button"), z = r("i"), W = g(), X && X.c(), H = g(), K && K.c(), at(n.src, o = /*img*/
      l[19]) || s(n, "src", o), s(
        n,
        "alt",
        /*realName*/
        l[9]
      ), s(n, "class", "power-img svelte-zqcpy9"), s(f, "class", "fx-overlay"), s(i, "class", "icon-box svelte-zqcpy9"), s(i, "title", "Abrir Ficha T√©cnica"), s(m, "class", "power-name svelte-zqcpy9"), s(h, "class", "xp-badge svelte-zqcpy9"), s(p, "class", "header-row svelte-zqcpy9"), s(y, "class", "meta-tag svelte-zqcpy9"), s(N, "class", "svelte-zqcpy9"), s(C, "class", "dice-count svelte-zqcpy9"), s(A, "class", "meta-row svelte-zqcpy9"), s(d, "class", "info-box svelte-zqcpy9"), s(G, "class", "btn-icon gear svelte-zqcpy9"), he(
        G,
        "active",
        /*isConfiguring*/
        l[4]
      ), s(z, "class", F = "fas fa-chevron-" + /*isExpanded*/
      (l[13] ? "up" : "down") + " svelte-zqcpy9"), s(U, "class", "btn-icon arrow svelte-zqcpy9"), s(M, "class", "action-box svelte-zqcpy9"), s(t, "class", "card-front svelte-zqcpy9"), s(e, "class", V = "power-card theme-" + /*activeDisplayTheme*/
      l[10] + " svelte-zqcpy9"), ae(
        e,
        "--glow",
        /*glowColor*/
        l[16]
      ), he(
        e,
        "expanded",
        /*isExpanded*/
        l[13] || /*isConfiguring*/
        l[4]
      );
    },
    m(Z, le) {
      q(Z, e, le), a(e, t), a(t, i), a(i, n), a(i, c), a(i, f), a(t, u), a(t, d), a(d, p), a(p, m), a(m, b), a(p, v), a(p, h), a(h, _), a(h, w), a(d, k), a(d, A), a(A, y), a(y, S), a(A, O), a(A, C), a(C, T), a(C, N), a(N, I), a(t, D), a(t, M), a(M, G), a(M, L), a(M, U), a(U, z), a(e, W), X && X.m(e, null), a(e, H), K && K.m(e, null), J || (j = [
        R(
          i,
          "click",
          /*openSheet*/
          l[24]
        ),
        R(
          d,
          "click",
          /*click_handler_1*/
          l[38]
        ),
        R(G, "click", Lt(
          /*toggleConfig*/
          l[23]
        )),
        R(
          U,
          "click",
          /*click_handler_2*/
          l[39]
        )
      ], J = !0);
    },
    p(Z, le) {
      le[0] & /*img*/
      524288 && !at(n.src, o = /*img*/
      Z[19]) && s(n, "src", o), le[0] & /*realName*/
      512 && s(
        n,
        "alt",
        /*realName*/
        Z[9]
      ), le[0] & /*displayName*/
      16384 && te(
        b,
        /*displayName*/
        Z[14]
      ), le[0] & /*currentCost*/
      131072 && te(
        _,
        /*currentCost*/
        Z[17]
      ), le[0] & /*category*/
      2048 && E !== (E = /*category*/
      Z[11].toUpperCase() + "") && te(S, E), le[0] & /*totalDice*/
      262144 && te(
        I,
        /*totalDice*/
        Z[18]
      ), le[0] & /*isConfiguring*/
      16 && he(
        G,
        "active",
        /*isConfiguring*/
        Z[4]
      ), le[0] & /*isExpanded*/
      8192 && F !== (F = "fas fa-chevron-" + /*isExpanded*/
      (Z[13] ? "up" : "down") + " svelte-zqcpy9") && s(z, "class", F), /*isConfiguring*/
      Z[4] ? X ? (X.p(Z, le), le[0] & /*isConfiguring*/
      16 && ne(X, 1)) : (X = Mo(Z), X.c(), ne(X, 1), X.m(e, H)) : X && ($e(), Ae(X, 1, 1, () => {
        X = null;
      }), et()), /*isExpanded*/
      Z[13] ? K ? (K.p(Z, le), le[0] & /*isExpanded*/
      8192 && ne(K, 1)) : (K = Lo(Z), K.c(), ne(K, 1), K.m(e, null)) : K && ($e(), Ae(K, 1, 1, () => {
        K = null;
      }), et()), le[0] & /*activeDisplayTheme*/
      1024 && V !== (V = "power-card theme-" + /*activeDisplayTheme*/
      Z[10] + " svelte-zqcpy9") && s(e, "class", V), le[0] & /*glowColor*/
      65536 && ae(
        e,
        "--glow",
        /*glowColor*/
        Z[16]
      ), le[0] & /*activeDisplayTheme, isExpanded, isConfiguring*/
      9232 && he(
        e,
        "expanded",
        /*isExpanded*/
        Z[13] || /*isConfiguring*/
        Z[4]
      );
    },
    d(Z) {
      Z && P(e), X && X.d(), K && K.d(), J = !1, Te(j);
    }
  };
}
function Mo(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M = ce(Object.entries(Ja)), G = [];
  for (let L = 0; L < M.length; L += 1)
    G[L] = No(Do(l, M, L));
  return {
    c() {
      e = r("div"), t = r("div"), t.textContent = ">>> PERSONALIZA√á√ÉO", i = g(), n = r("div"), o = r("div"), c = r("label"), c.textContent = "APELIDO", f = g(), u = r("input"), d = g(), p = r("div"), m = r("label"), m.textContent = "ESCOLHER TEMA", b = g(), v = r("div");
      for (let L = 0; L < G.length; L += 1)
        G[L].c();
      h = g(), _ = r("div"), w = r("label"), w.textContent = "COR DO LED", k = g(), A = r("div"), y = r("input"), E = g(), S = r("button"), S.textContent = "RESET", O = g(), C = r("button"), C.innerHTML = '<i class="fas fa-save svelte-zqcpy9"></i> OFICIALIZAR', s(t, "class", "drawer-header svelte-zqcpy9"), s(c, "class", "svelte-zqcpy9"), s(u, "type", "text"), s(
        u,
        "placeholder",
        /*realName*/
        l[9]
      ), s(u, "class", "interactive-input svelte-zqcpy9"), s(o, "class", "field-group svelte-zqcpy9"), s(m, "class", "svelte-zqcpy9"), s(v, "class", "theme-selector-grid svelte-zqcpy9"), s(p, "class", "field-group highlight-group svelte-zqcpy9"), s(w, "class", "svelte-zqcpy9"), s(y, "type", "color"), s(y, "class", "interactive-input color-picker svelte-zqcpy9"), s(S, "class", "btn-reset svelte-zqcpy9"), s(A, "class", "color-row svelte-zqcpy9"), s(_, "class", "field-group svelte-zqcpy9"), s(n, "class", "config-grid svelte-zqcpy9"), s(C, "class", "btn-save-cfg svelte-zqcpy9"), s(e, "class", "panel-drawer config-panel svelte-zqcpy9");
    },
    m(L, U) {
      q(L, e, U), a(e, t), a(e, i), a(e, n), a(n, o), a(o, c), a(o, f), a(o, u), x(
        u,
        /*editAlias*/
        l[12]
      ), a(n, d), a(n, p), a(p, m), a(p, b), a(p, v);
      for (let z = 0; z < G.length; z += 1)
        G[z] && G[z].m(v, null);
      a(n, h), a(n, _), a(_, w), a(_, k), a(_, A), a(A, y), x(
        y,
        /*editColor*/
        l[3]
      ), a(A, E), a(A, S), a(e, O), a(e, C), N = !0, I || (D = [
        R(
          u,
          "input",
          /*input0_input_handler*/
          l[40]
        ),
        R(
          y,
          "input",
          /*input1_input_handler*/
          l[42]
        ),
        R(
          S,
          "click",
          /*resetColor*/
          l[22]
        ),
        R(
          C,
          "click",
          /*saveSettings*/
          l[20]
        ),
        R(e, "click", Lt(
          /*click_handler*/
          l[37]
        ))
      ], I = !0);
    },
    p(L, U) {
      if ((!N || U[0] & /*realName*/
      512) && s(
        u,
        "placeholder",
        /*realName*/
        L[9]
      ), U[0] & /*editAlias*/
      4096 && u.value !== /*editAlias*/
      L[12] && x(
        u,
        /*editAlias*/
        L[12]
      ), U[0] & /*editTheme*/
      4) {
        M = ce(Object.entries(Ja));
        let z;
        for (z = 0; z < M.length; z += 1) {
          const F = Do(L, M, z);
          G[z] ? G[z].p(F, U) : (G[z] = No(F), G[z].c(), G[z].m(v, null));
        }
        for (; z < G.length; z += 1)
          G[z].d(1);
        G.length = M.length;
      }
      U[0] & /*editColor*/
      8 && x(
        y,
        /*editColor*/
        L[3]
      );
    },
    i(L) {
      N || (L && Ne(() => {
        N && (T || (T = We(e, yt, {}, !0)), T.run(1));
      }), N = !0);
    },
    o(L) {
      L && (T || (T = We(e, yt, {}, !1)), T.run(0)), N = !1;
    },
    d(L) {
      L && P(e), Fe(G, L), L && T && T.end(), I = !1, Te(D);
    }
  };
}
function No(l) {
  let e, t, i, n, o, c, f;
  function u() {
    return (
      /*click_handler_3*/
      l[41](
        /*key*/
        l[49]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("i"), i = g(), n = r("span"), n.textContent = `${/*data*/
      l[50].label}`, o = g(), s(t, "class", "fas " + /*data*/
      l[50].icon + " theme-icon svelte-zqcpy9"), s(n, "class", "theme-label svelte-zqcpy9"), s(e, "class", "theme-option svelte-zqcpy9"), ae(
        e,
        "--theme-preview-color",
        /*data*/
        l[50].color
      ), s(
        e,
        "title",
        /*data*/
        l[50].desc
      ), he(
        e,
        "selected",
        /*editTheme*/
        l[2] === /*key*/
        l[49]
      );
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), a(e, o), c || (f = R(e, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*editTheme*/
      4 && he(
        e,
        "selected",
        /*editTheme*/
        l[2] === /*key*/
        l[49]
      );
    },
    d(d) {
      d && P(e), c = !1, f();
    }
  };
}
function Lo(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F = (
    /*baseCost*/
    l[8] * 2 + ""
  ), W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee = (
    /*baseCost*/
    l[8] * 4 + ""
  ), pe, Ee, De, we, ke, me, re, ye, oe = (
    /*isGM*/
    l[1] && Po(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.textContent = "XP DISPON√çVEL", n = g(), o = r("div"), c = B(
        /*availableXP*/
        l[15]
      ), f = g(), u = r("div"), d = r("div"), p = r("div"), p.innerHTML = '<div class="die-icon normal svelte-zqcpy9"><i class="fas fa-dice-d10 svelte-zqcpy9"></i></div> <span class="die-text svelte-zqcpy9">NORMAL</span>', m = g(), b = r("div"), v = B(
        /*dNormal*/
        l[7]
      ), h = g(), _ = r("button"), w = r("span"), w.textContent = "UPGRADE", k = g(), A = r("span"), y = B(
        /*baseCost*/
        l[8]
      ), E = B(" XP"), O = g(), C = r("div"), T = r("div"), T.innerHTML = '<div class="die-icon hard svelte-zqcpy9"><i class="fas fa-dice-d6 svelte-zqcpy9"></i></div> <span class="die-text svelte-zqcpy9">HARD</span>', N = g(), I = r("div"), D = B(
        /*dHard*/
        l[6]
      ), M = g(), G = r("button"), L = r("span"), L.textContent = "UPGRADE", U = g(), z = r("span"), W = B(F), H = B(" XP"), J = g(), j = r("div"), X = r("div"), X.innerHTML = '<div class="die-icon wiggle svelte-zqcpy9"><i class="fas fa-dice-d20 svelte-zqcpy9"></i></div> <span class="die-text svelte-zqcpy9">WIGGLE</span>', K = g(), Z = r("div"), le = B(
        /*dWiggle*/
        l[5]
      ), $ = g(), se = r("button"), Y = r("span"), Y.textContent = "UPGRADE", Q = g(), ie = r("span"), pe = B(ee), Ee = B(" XP"), we = g(), oe && oe.c(), s(i, "class", "xp-label svelte-zqcpy9"), s(o, "class", "xp-value svelte-zqcpy9"), s(t, "class", "xp-hud svelte-zqcpy9"), he(
        t,
        "broke",
        /*availableXP*/
        l[15] <= 0
      ), s(p, "class", "die-header svelte-zqcpy9"), s(b, "class", "die-screen svelte-zqcpy9"), s(w, "class", "lbl svelte-zqcpy9"), s(A, "class", "cost svelte-zqcpy9"), s(_, "class", "btn-buy svelte-zqcpy9"), _.disabled = S = !/*isGM*/
      l[1] && /*availableXP*/
      l[15] < /*baseCost*/
      l[8], s(d, "class", "die-card normal svelte-zqcpy9"), he(
        d,
        "affordable",
        /*availableXP*/
        l[15] >= /*baseCost*/
        l[8]
      ), s(T, "class", "die-header svelte-zqcpy9"), s(I, "class", "die-screen svelte-zqcpy9"), s(L, "class", "lbl svelte-zqcpy9"), s(z, "class", "cost svelte-zqcpy9"), s(G, "class", "btn-buy svelte-zqcpy9"), G.disabled = V = !/*isGM*/
      l[1] && /*availableXP*/
      l[15] < /*baseCost*/
      l[8] * 2, s(C, "class", "die-card hard svelte-zqcpy9"), he(
        C,
        "affordable",
        /*availableXP*/
        l[15] >= /*baseCost*/
        l[8] * 2
      ), s(X, "class", "die-header svelte-zqcpy9"), s(Z, "class", "die-screen svelte-zqcpy9"), s(Y, "class", "lbl svelte-zqcpy9"), s(ie, "class", "cost svelte-zqcpy9"), s(se, "class", "btn-buy svelte-zqcpy9"), se.disabled = De = !/*isGM*/
      l[1] && /*availableXP*/
      l[15] < /*baseCost*/
      l[8] * 4, s(j, "class", "die-card wiggle svelte-zqcpy9"), he(
        j,
        "affordable",
        /*availableXP*/
        l[15] >= /*baseCost*/
        l[8] * 4
      ), s(u, "class", "dice-matrix svelte-zqcpy9"), s(e, "class", "panel-drawer upgrade-panel svelte-zqcpy9");
    },
    m(be, de) {
      q(be, e, de), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(e, f), a(e, u), a(u, d), a(d, p), a(d, m), a(d, b), a(b, v), a(d, h), a(d, _), a(_, w), a(_, k), a(_, A), a(A, y), a(A, E), a(u, O), a(u, C), a(C, T), a(C, N), a(C, I), a(I, D), a(C, M), a(C, G), a(G, L), a(G, U), a(G, z), a(z, W), a(z, H), a(u, J), a(u, j), a(j, X), a(j, K), a(j, Z), a(Z, le), a(j, $), a(j, se), a(se, Y), a(se, Q), a(se, ie), a(ie, pe), a(ie, Ee), a(e, we), oe && oe.m(e, null), me = !0, re || (ye = [
        R(
          _,
          "click",
          /*click_handler_4*/
          l[43]
        ),
        R(
          G,
          "click",
          /*click_handler_5*/
          l[44]
        ),
        R(
          se,
          "click",
          /*click_handler_6*/
          l[45]
        )
      ], re = !0);
    },
    p(be, de) {
      (!me || de[0] & /*availableXP*/
      32768) && te(
        c,
        /*availableXP*/
        be[15]
      ), (!me || de[0] & /*availableXP*/
      32768) && he(
        t,
        "broke",
        /*availableXP*/
        be[15] <= 0
      ), (!me || de[0] & /*dNormal*/
      128) && te(
        v,
        /*dNormal*/
        be[7]
      ), (!me || de[0] & /*baseCost*/
      256) && te(
        y,
        /*baseCost*/
        be[8]
      ), (!me || de[0] & /*isGM, availableXP, baseCost*/
      33026 && S !== (S = !/*isGM*/
      be[1] && /*availableXP*/
      be[15] < /*baseCost*/
      be[8])) && (_.disabled = S), (!me || de[0] & /*availableXP, baseCost*/
      33024) && he(
        d,
        "affordable",
        /*availableXP*/
        be[15] >= /*baseCost*/
        be[8]
      ), (!me || de[0] & /*dHard*/
      64) && te(
        D,
        /*dHard*/
        be[6]
      ), (!me || de[0] & /*baseCost*/
      256) && F !== (F = /*baseCost*/
      be[8] * 2 + "") && te(W, F), (!me || de[0] & /*isGM, availableXP, baseCost*/
      33026 && V !== (V = !/*isGM*/
      be[1] && /*availableXP*/
      be[15] < /*baseCost*/
      be[8] * 2)) && (G.disabled = V), (!me || de[0] & /*availableXP, baseCost*/
      33024) && he(
        C,
        "affordable",
        /*availableXP*/
        be[15] >= /*baseCost*/
        be[8] * 2
      ), (!me || de[0] & /*dWiggle*/
      32) && te(
        le,
        /*dWiggle*/
        be[5]
      ), (!me || de[0] & /*baseCost*/
      256) && ee !== (ee = /*baseCost*/
      be[8] * 4 + "") && te(pe, ee), (!me || de[0] & /*isGM, availableXP, baseCost*/
      33026 && De !== (De = !/*isGM*/
      be[1] && /*availableXP*/
      be[15] < /*baseCost*/
      be[8] * 4)) && (se.disabled = De), (!me || de[0] & /*availableXP, baseCost*/
      33024) && he(
        j,
        "affordable",
        /*availableXP*/
        be[15] >= /*baseCost*/
        be[8] * 4
      ), /*isGM*/
      be[1] ? oe ? oe.p(be, de) : (oe = Po(be), oe.c(), oe.m(e, null)) : oe && (oe.d(1), oe = null);
    },
    i(be) {
      me || (be && Ne(() => {
        me && (ke || (ke = We(e, yt, {}, !0)), ke.run(1));
      }), me = !0);
    },
    o(be) {
      be && (ke || (ke = We(e, yt, {}, !1)), ke.run(0)), me = !1;
    },
    d(be) {
      be && P(e), oe && oe.d(), be && ke && ke.end(), re = !1, Te(ye);
    }
  };
}
function Po(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-trash svelte-zqcpy9"></i> DELETAR PODER (GM)', s(e, "class", "gm-delete svelte-zqcpy9");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*deletePower*/
        l[25]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function yb(l) {
  let e, t = (
    /*item*/
    l[0] && Ro(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*item*/
      i[0] ? t ? t.p(i, n) : (t = Ro(i), t.c(), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    i: ge,
    o: ge,
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
const ba = "multiversus-rpg";
function Ab(l, e, t) {
  let i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, { item: I } = e, { actor: D } = e, { isGM: M = !1 } = e;
  qt(() => {
    wb(), H();
  });
  const G = {
    principal: 8,
    secundario: 4,
    habilidade: 2
  };
  let L = "", U = "default", z = "#ffffff", F = !1, W = !1;
  function H() {
    t(12, L = i.customAlias || ""), t(2, U = i.animationTheme && Ja[i.animationTheme] ? i.animationTheme : "default"), t(3, z = i.customColor || "#ffffff");
  }
  const V = {
    Comum: "#a0a0a0",
    Raro: "#00bfff",
    Lend√°rio: "#ffa500",
    M√≠tico: "#ff4500",
    Universal: "#ffffff",
    Multiversal: "#d000ff"
  };
  async function J() {
    await I.update({
      [`flags.${ba}.customAlias`]: L,
      [`flags.${ba}.customColor`]: z,
      [`flags.${ba}.animationTheme`]: U
    }), t(4, W = !1), ui.notifications.info("Visual salvo!");
  }
  async function j(we) {
    if (!I) return;
    let ke = we === "wiggle" ? h * 4 : we === "hard" ? h * 2 : h;
    if (!M && S < ke) {
      ui.notifications.warn(`XP Insuficiente! Precisa de ${ke}, tem ${S}.`);
      return;
    }
    const me = c[we] || 0, re = me + 1, ye = S - ke;
    Hooks.call("nexusPointSpent", D.name, "Poder", `${T} (${we}): ${me} ‚ûî ${re}`, ke, ye);
    let oe = {
      normal: f,
      hard: u,
      wiggle: d,
      ...c
    };
    oe[we] = re, await I.update({ [`flags.${ba}.dice`]: oe });
  }
  function X() {
    t(3, z = "");
  }
  function K() {
    t(4, W = !W), W && (t(13, F = !1), H());
  }
  function Z() {
    var we;
    (we = I == null ? void 0 : I.sheet) == null || we.render(!0);
  }
  async function le() {
    await I.delete();
  }
  function $(we) {
    Ol.call(this, l, we);
  }
  const se = () => {
    t(13, F = !F), t(4, W = !1);
  }, Y = () => {
    t(13, F = !F), t(4, W = !1);
  };
  function Q() {
    L = this.value, t(12, L);
  }
  const ie = (we) => t(2, U = we);
  function ee() {
    z = this.value, t(3, z);
  }
  const pe = () => j("normal"), Ee = () => j("hard"), De = () => j("wiggle");
  return l.$$set = (we) => {
    "item" in we && t(0, I = we.item), "actor" in we && t(26, D = we.actor), "isGM" in we && t(1, M = we.isGM);
  }, l.$$.update = () => {
    var we, ke, me, re, ye, oe;
    l.$$.dirty[0] & /*item*/
    1 && t(30, i = ((we = I == null ? void 0 : I.flags) == null ? void 0 : we[ba]) || {}), l.$$.dirty[0] & /*item*/
    1 && t(19, n = (I == null ? void 0 : I.img) || "icons/svg/item-bag.svg"), l.$$.dirty[0] & /*item*/
    1 && t(9, o = (I == null ? void 0 : I.name) || "Desconhecido"), l.$$.dirty[0] & /*flags*/
    1073741824 && t(27, c = i.dice || {}), l.$$.dirty[0] & /*diceData*/
    134217728 && t(7, f = c.normal || 0), l.$$.dirty[0] & /*diceData*/
    134217728 && t(6, u = c.hard || 0), l.$$.dirty[0] & /*diceData*/
    134217728 && t(5, d = c.wiggle || 0), l.$$.dirty[0] & /*dNormal, dHard, dWiggle*/
    224 && t(18, p = f + u + d), l.$$.dirty[0] & /*flags*/
    1073741824 && t(11, m = i.category || "principal"), l.$$.dirty[0] & /*flags*/
    1073741824 && t(28, b = i.rarity || "Comum"), l.$$.dirty[0] & /*flags*/
    1073741824 && t(36, v = i.isInitial || !1), l.$$.dirty[0] & /*category*/
    2048 && t(8, h = G[m] || 8), l.$$.dirty[0] & /*dNormal, baseCost, dHard, dWiggle*/
    480 && t(35, _ = f * h + u * h * 2 + d * h * 4), l.$$.dirty[0] & /*baseCost*/
    256 | l.$$.dirty[1] & /*isInitial*/
    32 && t(34, w = v ? 4 * h : 0), l.$$.dirty[1] & /*rawCost, discount*/
    24 && t(17, k = Math.max(0, _ - w)), l.$$.dirty[0] & /*actor*/
    67108864 && t(33, A = ((ke = D.system) == null ? void 0 : ke.xp) || ((re = (me = D.flags) == null ? void 0 : me[ba]) == null ? void 0 : re.xp) || 0), l.$$.dirty[1] & /*xpEarned*/
    4 && t(32, y = 150 + A), l.$$.dirty[0] & /*actor*/
    67108864 && t(31, E = ((oe = (ye = D.flags) == null ? void 0 : ye[ba]) == null ? void 0 : oe.totalSpent) || 0), l.$$.dirty[1] & /*totalCap, totalSpent*/
    3 && t(15, S = y - E), l.$$.dirty[0] & /*flags, isConfiguring*/
    1073741840 && i && !W && H(), l.$$.dirty[0] & /*isConfiguring, editTheme, flags*/
    1073741844 && t(10, O = W ? U : i.animationTheme || "default"), l.$$.dirty[0] & /*activeDisplayTheme*/
    1024 && t(29, C = Ja[O] || Ja.default), l.$$.dirty[0] & /*flags, realName*/
    1073742336 && t(14, T = i.customAlias || o), l.$$.dirty[0] & /*isConfiguring, editColor, flags, currentThemeData, rarity*/
    1879048216 && t(16, N = (W ? z : i.customColor) || C.color || V[b] || "#00ff41");
  }, [
    I,
    M,
    U,
    z,
    W,
    d,
    u,
    f,
    h,
    o,
    O,
    m,
    L,
    F,
    T,
    S,
    N,
    k,
    p,
    n,
    J,
    j,
    X,
    K,
    Z,
    le,
    D,
    c,
    b,
    C,
    i,
    E,
    y,
    A,
    w,
    _,
    v,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De
  ];
}
class Eb extends mt {
  constructor(e) {
    super(), pt(this, e, Ab, yb, dt, { item: 0, actor: 26, isGM: 1 }, null, [-1, -1]);
  }
}
const { ApplicationV2: Ob } = foundry.applications.api;
class T0 extends Ob {
  constructor(e) {
    const t = e ? `Nexus Database: ${e.name}` : "Nexus Database";
    super({ window: { title: t } }), this.actor = e, this.component = null;
  }
  // --- TRAVA DE SEGURAN√áA 1: BLOQUEIO DE RE-RENDER ---
  /**
   * O Foundry tenta chamar isso toda vez que o ator muda.
   * N√≥s interceptamos. Se o componente Svelte j√° est√° vivo,
   * retornamos imediatamente, impedindo que a janela feche ou pisque.
   */
  render(e = {}, t = {}) {
    return !e.force && this.component ? this : super.render(e, t);
  }
  async _renderHTML(e, t) {
    var n, o;
    const i = document.createElement("div");
    return i.style.height = "100%", i.style.overflow = "hidden", i.style.display = "flex", i.style.flexDirection = "column", this.component && (this.component.$destroy(), this.component = null), this.component = new D0({
      target: i,
      props: {
        application: this,
        actor: this.actor,
        themeColor: "#00ff41",
        flags: ((o = (n = this.actor) == null ? void 0 : n.flags) == null ? void 0 : o["multiversus-rpg"]) || {}
      }
    }), i;
  }
  _replaceHTML(e, t, i) {
    t.replaceWith(e);
  }
  _onClose(e) {
    this.component && (this.component.$destroy(), this.component = null);
  }
}
yl(T0, "DEFAULT_OPTIONS", {
  tag: "div",
  window: {
    icon: "fas fa-bolt",
    resizable: !0,
    width: 500,
    height: 700,
    contentClasses: ["multiversus-app"]
  },
  position: { width: 500, height: 700 }
});
function qo(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function Sb(l) {
  let e, t, i, n;
  const o = [Tb, Ib], c = [];
  function f(u, d) {
    return (
      /*filteredPowers*/
      u[5].length > 0 ? 0 : 1
    );
  }
  return t = f(l), i = c[t] = o[t](l), {
    c() {
      e = r("div"), i.c(), s(e, "class", "powers-grid svelte-1ojvwm3");
    },
    m(u, d) {
      q(u, e, d), c[t].m(e, null), n = !0;
    },
    p(u, d) {
      let p = t;
      t = f(u), t === p ? c[t].p(u, d) : ($e(), Ae(c[p], 1, 1, () => {
        c[p] = null;
      }), et(), i = c[t], i ? i.p(u, d) : (i = c[t] = o[t](u), i.c()), ne(i, 1), i.m(e, null));
    },
    i(u) {
      n || (ne(i), n = !0);
    },
    o(u) {
      Ae(i), n = !1;
    },
    d(u) {
      u && P(e), c[t].d();
    }
  };
}
function Cb(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-satellite-dish fa-spin"></i> Inicializando Protocolos...', s(e, "class", "loading-state svelte-1ojvwm3");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Ib(l) {
  let e, t;
  return {
    c() {
      e = r("div"), e.innerHTML = '<div class="glitch-wrapper svelte-1ojvwm3"><i class="fas fa-wifi"></i></div> <span class="empty-title svelte-1ojvwm3">NENHUM PODER Alocado</span> <span class="empty-sub svelte-1ojvwm3">Pe√ßa a um Auxiliar ou Mestre seu Poder Inicial no canal do Discord Avalia√ß√£o de Ficha.</span>', s(e, "class", "empty-state svelte-1ojvwm3");
    },
    m(i, n) {
      q(i, e, n);
    },
    p: ge,
    i(i) {
      i && (t || Ne(() => {
        t = st(e, Qe, {}), t.start();
      }));
    },
    o: ge,
    d(i) {
      i && P(e);
    }
  };
}
function Tb(l) {
  let e = [], t = /* @__PURE__ */ new Map(), i, n, o = ce(
    /*filteredPowers*/
    l[5]
  );
  const c = (f) => (
    /*power*/
    f[17].id
  );
  for (let f = 0; f < o.length; f += 1) {
    let u = qo(l, o, f), d = c(u);
    t.set(d, e[f] = Uo(d, u));
  }
  return {
    c() {
      for (let f = 0; f < e.length; f += 1)
        e[f].c();
      i = Pt();
    },
    m(f, u) {
      for (let d = 0; d < e.length; d += 1)
        e[d] && e[d].m(f, u);
      q(f, i, u), n = !0;
    },
    p(f, u) {
      u & /*filteredPowers, actor, isGM*/
      97 && (o = ce(
        /*filteredPowers*/
        f[5]
      ), $e(), e = Tl(e, u, c, 1, f, o, t, i.parentNode, Ya, Uo, i, qo), et());
    },
    i(f) {
      if (!n) {
        for (let u = 0; u < o.length; u += 1)
          ne(e[u]);
        n = !0;
      }
    },
    o(f) {
      for (let u = 0; u < e.length; u += 1)
        Ae(e[u]);
      n = !1;
    },
    d(f) {
      f && P(i);
      for (let u = 0; u < e.length; u += 1)
        e[u].d(f);
    }
  };
}
function Uo(l, e) {
  let t, i, n, o, c;
  return i = new Eb({
    props: {
      item: (
        /*power*/
        e[17]
      ),
      actor: (
        /*actor*/
        e[0]
      ),
      isGM: (
        /*isGM*/
        e[6]
      )
    }
  }), {
    key: l,
    first: null,
    c() {
      t = r("div"), kt(i.$$.fragment), n = g(), this.first = t;
    },
    m(f, u) {
      q(f, t, u), ht(i, t, null), a(t, n), c = !0;
    },
    p(f, u) {
      e = f;
      const d = {};
      u & /*filteredPowers*/
      32 && (d.item = /*power*/
      e[17]), u & /*actor*/
      1 && (d.actor = /*actor*/
      e[0]), i.$set(d);
    },
    i(f) {
      c || (ne(i.$$.fragment, f), f && Ne(() => {
        c && (o || (o = We(t, yt, { duration: 200 }, !0)), o.run(1));
      }), c = !0);
    },
    o(f) {
      Ae(i.$$.fragment, f), f && (o || (o = We(t, yt, { duration: 200 }, !1)), o.run(0)), c = !1;
    },
    d(f) {
      f && P(t), gt(i), f && o && o.end();
    }
  };
}
function Db(l) {
  let e, t, i, n, o, c, f, u = (
    /*isReady*/
    (l[4] ? (
      /*calculatedTotalCost*/
      l[2]
    ) : "...") + ""
  ), d, p, m, b, v, h, _, w, k = (
    /*isReady*/
    (l[4] ? (
      /*activePowerCount*/
      l[3]
    ) : "...") + ""
  ), A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J;
  const j = [Cb, Sb], X = [];
  function K(Z, le) {
    return (
      /*isReady*/
      Z[4] ? 1 : 0
    );
  }
  return U = K(l), z = X[U] = j[U](l), {
    c() {
      e = r("div"), t = r("header"), i = r("div"), n = r("div"), o = r("span"), o.innerHTML = '<i class="fas fa-bolt"></i> Pontos Investidos (XP)', c = g(), f = r("span"), d = B(u), p = g(), m = r("div"), m.innerHTML = '<div class="hud-bar-fill scanning-anim svelte-1ojvwm3"></div>', b = g(), v = r("div"), h = r("div"), h.textContent = "Poderes", _ = g(), w = r("div"), A = B(k), y = g(), E = r("div"), S = r("div"), O = r("span"), O.textContent = "Pesquisa:", C = g(), T = r("input"), N = g(), I = r("div"), I.innerHTML = '<i class="fas fa-search"></i>', D = g(), M = r("button"), M.innerHTML = '<i class="fas fa-database"></i> <span class="btn-text svelte-1ojvwm3">MODIFICAR PODER</span>', G = g(), L = r("div"), z.c(), F = g(), W = r("footer"), W.innerHTML = '<div class="footer-left">SYS_STATUS: <span style="color:var(--c-primary)">ONLINE</span></div> <div class="footer-right">SYNC_MODE: <span style="color:var(--c-primary)">AUTO</span></div>', s(o, "class", "hud-label svelte-1ojvwm3"), s(f, "class", "hud-value xp svelte-1ojvwm3"), s(n, "class", "hud-top svelte-1ojvwm3"), s(m, "class", "hud-bar-bg svelte-1ojvwm3"), s(i, "class", "hud-module main svelte-1ojvwm3"), s(h, "class", "hud-label svelte-1ojvwm3"), s(w, "class", "hud-value svelte-1ojvwm3"), s(v, "class", "hud-module side svelte-1ojvwm3"), s(t, "class", "term-header svelte-1ojvwm3"), s(O, "class", "prompt svelte-1ojvwm3"), s(T, "type", "text"), s(T, "placeholder", "LOCALIZAR ARQUIVO..."), s(T, "class", "svelte-1ojvwm3"), s(I, "class", "search-icon svelte-1ojvwm3"), s(S, "class", "search-box svelte-1ojvwm3"), s(M, "class", "btn-db svelte-1ojvwm3"), s(M, "title", "Upe ou Modifique os Poderes por Aqui"), s(E, "class", "toolbar svelte-1ojvwm3"), s(L, "class", "list-container svelte-1ojvwm3"), s(W, "class", "term-footer svelte-1ojvwm3"), s(e, "class", "powers-terminal svelte-1ojvwm3");
    },
    m(Z, le) {
      q(Z, e, le), a(e, t), a(t, i), a(i, n), a(n, o), a(n, c), a(n, f), a(f, d), a(i, p), a(i, m), a(t, b), a(t, v), a(v, h), a(v, _), a(v, w), a(w, A), a(e, y), a(e, E), a(E, S), a(S, O), a(S, C), a(S, T), x(
        T,
        /*searchTerm*/
        l[1]
      ), a(S, N), a(S, I), a(E, D), a(E, M), a(e, G), a(e, L), X[U].m(L, null), a(e, F), a(e, W), H = !0, V || (J = [
        R(
          T,
          "input",
          /*input_input_handler*/
          l[11]
        ),
        R(
          M,
          "click",
          /*openLibrary*/
          l[7]
        )
      ], V = !0);
    },
    p(Z, [le]) {
      (!H || le & /*isReady, calculatedTotalCost*/
      20) && u !== (u = /*isReady*/
      (Z[4] ? (
        /*calculatedTotalCost*/
        Z[2]
      ) : "...") + "") && te(d, u), (!H || le & /*isReady, activePowerCount*/
      24) && k !== (k = /*isReady*/
      (Z[4] ? (
        /*activePowerCount*/
        Z[3]
      ) : "...") + "") && te(A, k), le & /*searchTerm*/
      2 && T.value !== /*searchTerm*/
      Z[1] && x(
        T,
        /*searchTerm*/
        Z[1]
      );
      let $ = U;
      U = K(Z), U === $ ? X[U].p(Z, le) : ($e(), Ae(X[$], 1, 1, () => {
        X[$] = null;
      }), et(), z = X[U], z ? z.p(Z, le) : (z = X[U] = j[U](Z), z.c()), ne(z, 1), z.m(L, null));
    },
    i(Z) {
      H || (ne(z), H = !0);
    },
    o(Z) {
      Ae(z), H = !1;
    },
    d(Z) {
      Z && P(e), X[U].d(), V = !1, Te(J);
    }
  };
}
const Yi = "multiversus-rpg";
function Rb(l, e, t) {
  let i, { actor: n } = e, { themeColor: o } = e, { flags: c = {} } = e;
  const f = game.user.isGM, u = n.uuid, d = n.id;
  let p = "", m = [], b = 0, v = 0, h = !1, _ = null;
  function w() {
    _ && clearTimeout(_), _ = setTimeout(
      () => {
        k();
      },
      100
    );
  }
  async function k() {
    var T, N, I;
    let E = null;
    try {
      E = await fromUuid(u), E || (console.warn("[Nexus] UUID falhou, tentando ID direto..."), E = game.actors.get(d)), !E && canvas.tokens && (E = (T = canvas.tokens.placeables.find((D) => {
        var M;
        return ((M = D.actor) == null ? void 0 : M.id) === d;
      })) == null ? void 0 : T.actor);
    } catch (D) {
      console.error("Erro cr√≠tico buscando ator:", D);
    }
    if (!E) return;
    const S = E.items.filter((D) => D && D.type === "power");
    t(10, m = [...S].sort((D, M) => D.name.localeCompare(M.name))), t(3, v = m.length);
    const O = {
      principal: 8,
      secundario: 4,
      habilidade: 2
    };
    t(2, b = m.reduce(
      (D, M) => {
        var j, X, K, Z, le, $, se;
        const G = ((j = M.flags) == null ? void 0 : j[Yi]) || {}, L = M.system || {}, U = G.category || "principal", z = O[U] || 8, F = G.isInitial ? 4 * z : 0, W = Number(((X = G.dice) == null ? void 0 : X.normal) || ((K = L.dice) == null ? void 0 : K.normal) || 0), H = Number(((Z = G.dice) == null ? void 0 : Z.hard) || ((le = L.dice) == null ? void 0 : le.hard) || 0), V = Number((($ = G.dice) == null ? void 0 : $.wiggle) || ((se = L.dice) == null ? void 0 : se.wiggle) || 0), J = W * z + H * z * 2 + V * z * 4;
        return D + Math.max(0, J - F);
      },
      0
    ));
    const C = Number((I = (N = E.flags) == null ? void 0 : N[Yi]) == null ? void 0 : I.powersSpent) || 0;
    b !== C && await E.update(
      {
        [`flags.${Yi}.powersSpent`]: b
      },
      { render: !1 }
    ), t(4, h = !0), await pi();
  }
  qt(() => {
    k();
    const E = Hooks.on("updateItem", (T) => {
      var N, I;
      (((N = T.parent) == null ? void 0 : N.uuid) === u || ((I = T.parent) == null ? void 0 : I.id) === d) && w();
    }), S = Hooks.on("createItem", (T) => {
      var N, I;
      (((N = T.parent) == null ? void 0 : N.uuid) === u || ((I = T.parent) == null ? void 0 : I.id) === d) && w();
    }), O = Hooks.on("deleteItem", (T) => {
      var N, I;
      (((N = T.parent) == null ? void 0 : N.uuid) === u || ((I = T.parent) == null ? void 0 : I.id) === d) && w();
    }), C = Hooks.on("updateActor", (T) => {
      (T.uuid === u || T.id === d) && w();
    });
    return () => {
      Hooks.off("updateItem", E), Hooks.off("createItem", S), Hooks.off("deleteItem", O), Hooks.off("updateActor", C);
    };
  });
  function A() {
    try {
      new T0(n).render(!0);
    } catch (E) {
      console.error(E);
    }
  }
  function y() {
    p = this.value, t(1, p);
  }
  return l.$$set = (E) => {
    "actor" in E && t(0, n = E.actor), "themeColor" in E && t(8, o = E.themeColor), "flags" in E && t(9, c = E.flags);
  }, l.$$.update = () => {
    l.$$.dirty & /*powers, searchTerm*/
    1026 && t(5, i = m.filter((E) => E.name.toLowerCase().includes(p.toLowerCase())));
  }, [
    n,
    p,
    b,
    v,
    h,
    i,
    f,
    A,
    o,
    c,
    m,
    y
  ];
}
class D0 extends mt {
  constructor(e) {
    super(), pt(this, e, Rb, Db, dt, { actor: 0, themeColor: 8, flags: 9 });
  }
}
function Go(l) {
  var f;
  let e, t = (
    /*config*/
    l[10].label + ""
  ), i, n, o = (
    /*item*/
    (((f = l[0].id) == null ? void 0 : f.substring(0, 4).toUpperCase()) || "NULL") + ""
  ), c;
  return {
    c() {
      e = r("div"), i = B(t), n = B("-"), c = B(o), s(e, "class", "edge-code svelte-1l0clqa");
    },
    m(u, d) {
      q(u, e, d), a(e, i), a(e, n), a(e, c);
    },
    p(u, d) {
      var p;
      d & /*config*/
      1024 && t !== (t = /*config*/
      u[10].label + "") && te(i, t), d & /*item*/
      1 && o !== (o = /*item*/
      (((p = u[0].id) == null ? void 0 : p.substring(0, 4).toUpperCase()) || "NULL") + "") && te(c, o);
    },
    d(u) {
      u && P(e);
    }
  };
}
function Ho(l) {
  let e, t, i, n, o = (
    /*item*/
    l[0].name + ""
  ), c;
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("span"), c = B(o), s(t, "class", "rarity-bar svelte-1l0clqa"), s(n, "class", "item-name svelte-1l0clqa"), s(e, "class", "card-header svelte-1l0clqa");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), a(n, c);
    },
    p(f, u) {
      u & /*item*/
      1 && o !== (o = /*item*/
      f[0].name + "") && te(c, o);
    },
    d(f) {
      f && P(e);
    }
  };
}
function zo(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "scan-beam svelte-1l0clqa");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Bo(l) {
  let e, t, i = (
    /*item*/
    l[0].name + ""
  ), n;
  return {
    c() {
      e = r("div"), t = r("span"), n = B(i), s(e, "class", "mini-overlay svelte-1l0clqa");
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(t, n);
    },
    p(o, c) {
      c & /*item*/
      1 && i !== (i = /*item*/
      o[0].name + "") && te(n, i);
    },
    d(o) {
      o && P(e);
    }
  };
}
function Fo(l) {
  let e, t, i, n = (
    /*item*/
    (l[0].type ? (
      /*item*/
      l[0].type.substring(0, 10)
    ) : "OBJ") + ""
  ), o, c, f, u, d, p;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), c = g(), f = r("div"), u = B(
        /*width*/
        l[9]
      ), d = B("x"), p = B(
        /*height*/
        l[8]
      ), s(i, "class", "tag-type svelte-1l0clqa"), s(f, "class", "dimension-box svelte-1l0clqa"), s(t, "class", "footer-grid svelte-1l0clqa"), s(e, "class", "card-footer svelte-1l0clqa");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, u), a(f, d), a(f, p);
    },
    p(m, b) {
      b & /*item*/
      1 && n !== (n = /*item*/
      (m[0].type ? (
        /*item*/
        m[0].type.substring(0, 10)
      ) : "OBJ") + "") && te(o, n), b & /*width*/
      512 && te(
        u,
        /*width*/
        m[9]
      ), b & /*height*/
      256 && te(
        p,
        /*height*/
        m[8]
      );
    },
    d(m) {
      m && P(e);
    }
  };
}
function jo(l) {
  let e, t, i, n = (
    /*item*/
    l[0].qty + ""
  ), o, c = !/*isCompact*/
  l[7] && Vo();
  return {
    c() {
      e = r("div"), c && c.c(), t = g(), i = r("span"), o = B(n), s(i, "class", "q-val svelte-1l0clqa"), s(e, "class", "qty-badge svelte-1l0clqa"), he(
        e,
        "compact",
        /*isCompact*/
        l[7]
      );
    },
    m(f, u) {
      q(f, e, u), c && c.m(e, null), a(e, t), a(e, i), a(i, o);
    },
    p(f, u) {
      /*isCompact*/
      f[7] ? c && (c.d(1), c = null) : c || (c = Vo(), c.c(), c.m(e, t)), u & /*item*/
      1 && n !== (n = /*item*/
      f[0].qty + "") && te(o, n), u & /*isCompact*/
      128 && he(
        e,
        "compact",
        /*isCompact*/
        f[7]
      );
    },
    d(f) {
      f && P(e), c && c.d();
    }
  };
}
function Vo(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "x", s(e, "class", "q-label svelte-1l0clqa");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Wo(l) {
  let e, t, i, n, o, c, f, u, d = (
    /*item*/
    l[0].qty + ""
  ), p, m, b, v, h, _, w, k, A, y, E = !/*isCompact*/
  l[7] && Xo();
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), E && E.c(), n = g(), o = r("div"), c = r("button"), c.textContent = "-", f = g(), u = r("span"), p = B(d), m = g(), b = r("button"), b.textContent = "+", v = g(), h = r("div"), _ = r("button"), _.innerHTML = '<i class="fas fa-edit"></i>', w = g(), k = r("button"), k.innerHTML = '<i class="fas fa-trash"></i>', s(t, "class", "terminal-bg"), s(c, "class", "cmd-btn svelte-1l0clqa"), s(u, "class", "qty-display svelte-1l0clqa"), s(b, "class", "cmd-btn svelte-1l0clqa"), s(o, "class", "cmd-group svelte-1l0clqa"), s(_, "title", "Editar"), s(_, "class", "svelte-1l0clqa"), s(k, "title", "Remover"), s(k, "class", "del svelte-1l0clqa"), s(h, "class", "cmd-footer svelte-1l0clqa"), s(e, "class", "gm-terminal svelte-1l0clqa");
    },
    m(S, O) {
      q(S, e, O), a(e, t), a(e, i), E && E.m(e, null), a(e, n), a(e, o), a(o, c), a(o, f), a(o, u), a(u, p), a(o, m), a(o, b), a(e, v), a(e, h), a(h, _), a(h, w), a(h, k), A || (y = [
        R(
          c,
          "click",
          /*click_handler_1*/
          l[15]
        ),
        R(
          b,
          "click",
          /*click_handler_2*/
          l[16]
        ),
        R(
          _,
          "click",
          /*click_handler_3*/
          l[17]
        ),
        R(
          k,
          "click",
          /*click_handler_4*/
          l[18]
        ),
        R(e, "click", Lt(
          /*click_handler*/
          l[14]
        ))
      ], A = !0);
    },
    p(S, O) {
      /*isCompact*/
      S[7] ? E && (E.d(1), E = null) : E || (E = Xo(), E.c(), E.m(e, n)), O & /*item*/
      1 && d !== (d = /*item*/
      S[0].qty + "") && te(p, d);
    },
    d(S) {
      S && P(e), E && E.d(), A = !1, Te(y);
    }
  };
}
function Xo(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "ACESSO GM", s(e, "class", "terminal-header svelte-1l0clqa");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Mb(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W = !/*isCompact*/
  l[7] && Go(l), H = (
    /*showHeader*/
    l[11] && Ho(l)
  ), V = (
    /*inGrid*/
    l[6] && zo()
  ), J = (
    /*isCompact*/
    l[7] && Bo(l)
  ), j = (
    /*showFooter*/
    l[12] && Fo(l)
  ), X = (
    /*item*/
    l[0].qty > 1 && jo(l)
  ), K = (
    /*isGM*/
    l[2] && Wo(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = g(), c = r("div"), f = g(), u = r("div"), d = g(), p = r("div"), m = r("div"), b = r("div"), v = g(), h = r("div"), _ = r("div"), w = g(), W && W.c(), k = g(), H && H.c(), A = g(), y = r("div"), E = r("div"), S = g(), O = r("img"), N = g(), V && V.c(), I = g(), J && J.c(), D = g(), j && j.c(), M = g(), X && X.c(), G = g(), K && K.c(), s(t, "class", "card-base svelte-1l0clqa"), s(n, "class", "rarity-texture svelte-1l0clqa"), s(c, "class", "glass-overlay svelte-1l0clqa"), s(u, "class", "bg-grid"), s(m, "class", "corner tl svelte-1l0clqa"), s(b, "class", "corner tr svelte-1l0clqa"), s(h, "class", "corner bl svelte-1l0clqa"), s(_, "class", "corner br svelte-1l0clqa"), s(p, "class", "hud-frame svelte-1l0clqa"), s(E, "class", "img-depth svelte-1l0clqa"), at(O.src, C = /*item*/
      l[0].img || "icons/svg/item-bag.svg") || s(O, "src", C), s(O, "alt", T = /*item*/
      l[0].name), s(O, "loading", "lazy"), s(O, "draggable", "false"), s(O, "class", "svelte-1l0clqa"), s(y, "class", "image-port svelte-1l0clqa"), s(e, "class", L = "matrix-card " + /*inGrid*/
      (l[6] ? "mode-grid" : "mode-stash") + " " + /*isCompact*/
      (l[7] ? "compact" : "") + " rar-" + /*config*/
      l[10].fx + " svelte-1l0clqa"), ae(
        e,
        "--neon",
        /*neon*/
        l[13]
      ), ae(
        e,
        "--w",
        /*width*/
        l[9]
      ), ae(
        e,
        "--h",
        /*height*/
        l[8]
      ), s(e, "title", U = /*item*/
      l[0].name + " | " + /*item*/
      l[0].rarity);
    },
    m(Z, le) {
      q(Z, e, le), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(p, m), a(p, b), a(p, v), a(p, h), a(p, _), a(p, w), W && W.m(p, null), a(e, k), H && H.m(e, null), a(e, A), a(e, y), a(y, E), a(y, S), a(y, O), a(y, N), V && V.m(y, null), a(y, I), J && J.m(y, null), a(e, D), j && j.m(e, null), a(e, M), X && X.m(e, null), a(e, G), K && K.m(e, null), z || (F = R(
        e,
        "click",
        /*click_handler_5*/
        l[19]
      ), z = !0);
    },
    p(Z, [le]) {
      /*isCompact*/
      Z[7] ? W && (W.d(1), W = null) : W ? W.p(Z, le) : (W = Go(Z), W.c(), W.m(p, null)), /*showHeader*/
      Z[11] ? H ? H.p(Z, le) : (H = Ho(Z), H.c(), H.m(e, A)) : H && (H.d(1), H = null), le & /*item*/
      1 && !at(O.src, C = /*item*/
      Z[0].img || "icons/svg/item-bag.svg") && s(O, "src", C), le & /*item*/
      1 && T !== (T = /*item*/
      Z[0].name) && s(O, "alt", T), /*inGrid*/
      Z[6] ? V || (V = zo(), V.c(), V.m(y, I)) : V && (V.d(1), V = null), /*isCompact*/
      Z[7] ? J ? J.p(Z, le) : (J = Bo(Z), J.c(), J.m(y, null)) : J && (J.d(1), J = null), /*showFooter*/
      Z[12] ? j ? j.p(Z, le) : (j = Fo(Z), j.c(), j.m(e, M)) : j && (j.d(1), j = null), /*item*/
      Z[0].qty > 1 ? X ? X.p(Z, le) : (X = jo(Z), X.c(), X.m(e, G)) : X && (X.d(1), X = null), /*isGM*/
      Z[2] ? K ? K.p(Z, le) : (K = Wo(Z), K.c(), K.m(e, null)) : K && (K.d(1), K = null), le & /*inGrid, isCompact, config*/
      1216 && L !== (L = "matrix-card " + /*inGrid*/
      (Z[6] ? "mode-grid" : "mode-stash") + " " + /*isCompact*/
      (Z[7] ? "compact" : "") + " rar-" + /*config*/
      Z[10].fx + " svelte-1l0clqa") && s(e, "class", L), le & /*neon*/
      8192 && ae(
        e,
        "--neon",
        /*neon*/
        Z[13]
      ), le & /*width*/
      512 && ae(
        e,
        "--w",
        /*width*/
        Z[9]
      ), le & /*height*/
      256 && ae(
        e,
        "--h",
        /*height*/
        Z[8]
      ), le & /*item*/
      1 && U !== (U = /*item*/
      Z[0].name + " | " + /*item*/
      Z[0].rarity) && s(e, "title", U);
    },
    i: ge,
    o: ge,
    d(Z) {
      Z && P(e), W && W.d(), H && H.d(), V && V.d(), J && J.d(), j && j.d(), X && X.d(), K && K.d(), z = !1, F();
    }
  };
}
function Nb(l, e, t) {
  let i, n, o, c, f, u, d, { item: p } = e, { index: m } = e, { isGM: b } = e, { onSelect: v } = e, { onUpdateQty: h } = e, { onDelete: _ } = e, { inGrid: w = !1 } = e;
  const k = {
    Comum: {
      color: "#a0a0a0",
      label: "STD",
      fx: "grain"
    },
    Incomum: {
      color: "#10b981",
      label: "ADV",
      fx: "circuit"
    },
    Raro: {
      color: "#00bfff",
      label: "SPC",
      fx: "energy"
    },
    √âpico: {
      color: "#8b5cf6",
      label: "PRO",
      fx: "glitch"
    },
    Lend√°rio: {
      color: "#ffa500",
      label: "MST",
      fx: "gold"
    },
    M√≠tico: {
      color: "#ff4500",
      label: "ULT",
      fx: "fire"
    },
    Universal: {
      color: "#ffffff",
      label: "UNI",
      fx: "void"
    },
    Multiversal: {
      color: "#d000ff",
      label: "MLT",
      fx: "nebula"
    }
  };
  function A(T) {
    Ol.call(this, l, T);
  }
  const y = () => h(m, -1), E = () => h(m, 1), S = () => v(p), O = () => _(p.id || m), C = () => v(p);
  return l.$$set = (T) => {
    "item" in T && t(0, p = T.item), "index" in T && t(1, m = T.index), "isGM" in T && t(2, b = T.isGM), "onSelect" in T && t(3, v = T.onSelect), "onUpdateQty" in T && t(4, h = T.onUpdateQty), "onDelete" in T && t(5, _ = T.onDelete), "inGrid" in T && t(6, w = T.inGrid);
  }, l.$$.update = () => {
    l.$$.dirty & /*item*/
    1 && t(10, i = k[p.rarity] || k.Comum), l.$$.dirty & /*config*/
    1024 && t(13, n = i.color), l.$$.dirty & /*item*/
    1 && t(9, o = p.w || 1), l.$$.dirty & /*item*/
    1 && t(8, c = p.h || 1), l.$$.dirty & /*inGrid, width, height*/
    832 && t(7, f = w && o === 1 && c === 1), l.$$.dirty & /*inGrid, height*/
    320 && t(12, u = !w || c > 1), l.$$.dirty & /*inGrid, isCompact*/
    192 && t(11, d = !w || !f);
  }, [
    p,
    m,
    b,
    v,
    h,
    _,
    w,
    f,
    c,
    o,
    i,
    d,
    u,
    n,
    A,
    y,
    E,
    S,
    O,
    C
  ];
}
class R0 extends mt {
  constructor(e) {
    super(), pt(this, e, Nb, Mb, dt, {
      item: 0,
      index: 1,
      isGM: 2,
      onSelect: 3,
      onUpdateQty: 4,
      onDelete: 5,
      inGrid: 6
    });
  }
}
class xl {
  static async init() {
    if (!game.user.isGM) return;
    game.journal.getName(this.DB_NAME) || (await JournalEntry.create({
      name: this.DB_NAME,
      text: { content: "[]" },
      // Array vazio inicial
      ownership: { default: 3 }
      // Todos t√™m permiss√£o de observador/owner
    }), console.log("Multiversus RPG | Crafting DB Criada."));
  }
  static getBlueprints() {
    var t, i;
    const e = game.journal.getName(this.DB_NAME);
    if (!e) return [];
    try {
      const o = (((i = (t = e.pages.contents[0]) == null ? void 0 : t.text) == null ? void 0 : i.content) || "[]").replace(/<[^>]*>/g, "");
      return JSON.parse(o);
    } catch {
      return [];
    }
  }
  static async addBlueprint(e) {
    const t = this.getBlueprints();
    t.push(e), await this._save(t);
  }
  static async updateBlueprint(e) {
    let t = this.getBlueprints();
    const i = t.findIndex((n) => n.id === e.id);
    i !== -1 && (t[i] = e, await this._save(t));
  }
  static async deleteBlueprint(e) {
    let t = this.getBlueprints();
    t = t.filter((i) => i.id !== e), await this._save(t);
  }
  static async _save(e) {
    const t = game.journal.getName(this.DB_NAME);
    if (!t) return ui.notifications.warn("Banco de dados de Crafting n√£o encontrado.");
    const i = t.pages.contents[0], n = JSON.stringify(e);
    i ? await i.update({ text: { content: n } }) : await t.createEmbeddedDocuments("JournalEntryPage", [{
      name: "DB",
      text: { content: n }
    }]);
  }
}
yl(xl, "DB_NAME", "CRAFTING_BLUEPRINTS_DB");
function Jo(l, e, t) {
  const i = l.slice();
  return i[40] = e[t], i;
}
function Yo(l, e, t) {
  const i = l.slice();
  return i[43] = e[t], i;
}
function Qo(l, e, t) {
  const i = l.slice();
  return i[46] = e[t], i[47] = e, i[48] = t, i;
}
function Ko(l, e, t) {
  const i = l.slice();
  return i[49] = e[t], i[50] = e, i[51] = t, i;
}
function Zo(l, e, t) {
  const i = l.slice();
  return i[46] = e[t][0], i[52] = e[t][1], i;
}
function xo(l) {
  let e, t, i = ce(
    /*blueprints*/
    l[5]
  ), n = [];
  for (let c = 0; c < i.length; c += 1)
    n[c] = tr(Ko(l, i, c));
  let o = (
    /*blueprints*/
    l[5].length === 0 && lr()
  );
  return {
    c() {
      e = r("div");
      for (let c = 0; c < n.length; c += 1)
        n[c].c();
      t = g(), o && o.c(), s(e, "class", "bp-list custom-scroll svelte-1bz2b8r");
    },
    m(c, f) {
      q(c, e, f);
      for (let u = 0; u < n.length; u += 1)
        n[u] && n[u].m(e, null);
      a(e, t), o && o.m(e, null);
    },
    p(c, f) {
      if (f[0] & /*blueprints, saveGlobalBPEdit, editingBP, deleteGlobalBP, isGM, craftGlobal, pockets*/
      469040) {
        i = ce(
          /*blueprints*/
          c[5]
        );
        let u;
        for (u = 0; u < i.length; u += 1) {
          const d = Ko(c, i, u);
          n[u] ? n[u].p(d, f) : (n[u] = tr(d), n[u].c(), n[u].m(e, t));
        }
        for (; u < n.length; u += 1)
          n[u].d(1);
        n.length = i.length;
      }
      /*blueprints*/
      c[5].length === 0 ? o || (o = lr(), o.c(), o.m(e, null)) : o && (o.d(1), o = null);
    },
    d(c) {
      c && P(e), Fe(n, c), o && o.d();
    }
  };
}
function Lb(l) {
  let e, t, i, n = (
    /*bp*/
    l[49].name + ""
  ), o, c, f, u, d = (
    /*bp*/
    l[49].result.label + ""
  ), p, m, b = (
    /*bp*/
    l[49].type + ""
  ), v, h, _, w = (
    /*bp*/
    l[49].desc + ""
  ), k, A, y, E, S, O, C, T, N, I, D = ce(Object.entries(
    /*bp*/
    l[49].recipe
  )), M = [];
  for (let U = 0; U < D.length; U += 1)
    M[U] = er(Zo(l, D, U));
  function G() {
    return (
      /*click_handler_4*/
      l[28](
        /*bp*/
        l[49]
      )
    );
  }
  let L = (
    /*isGM*/
    l[13] && qb(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), c = g(), f = r("span"), u = B("["), p = B(d), m = B("] "), v = B(b), h = g(), _ = r("div"), k = g(), A = r("div"), y = r("span"), y.textContent = "Custo:", E = g();
      for (let U = 0; U < M.length; U += 1)
        M[U].c();
      S = g(), O = r("div"), C = r("button"), C.innerHTML = '<i class="fas fa-hammer"></i> FORJAR', T = g(), L && L.c(), s(i, "class", "bp-name svelte-1bz2b8r"), s(f, "class", "bp-meta"), ae(
        f,
        "color",
        /*bp*/
        l[49].result.color
      ), s(t, "class", "bp-header svelte-1bz2b8r"), s(_, "class", "bp-content svelte-1bz2b8r"), s(A, "class", "bp-reqs svelte-1bz2b8r"), s(e, "class", "bp-info svelte-1bz2b8r"), s(C, "class", "craft-btn svelte-1bz2b8r"), s(O, "class", "bp-actions svelte-1bz2b8r");
    },
    m(U, z) {
      q(U, e, z), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, u), a(f, p), a(f, m), a(f, v), a(e, h), a(e, _), _.innerHTML = w, a(e, k), a(e, A), a(A, y), a(A, E);
      for (let F = 0; F < M.length; F += 1)
        M[F] && M[F].m(A, null);
      q(U, S, z), q(U, O, z), a(O, C), a(O, T), L && L.m(O, null), N || (I = R(C, "click", G), N = !0);
    },
    p(U, z) {
      if (l = U, z[0] & /*blueprints*/
      32 && n !== (n = /*bp*/
      l[49].name + "") && te(o, n), z[0] & /*blueprints*/
      32 && d !== (d = /*bp*/
      l[49].result.label + "") && te(p, d), z[0] & /*blueprints*/
      32 && b !== (b = /*bp*/
      l[49].type + "") && te(v, b), z[0] & /*blueprints*/
      32 && ae(
        f,
        "color",
        /*bp*/
        l[49].result.color
      ), z[0] & /*blueprints*/
      32 && w !== (w = /*bp*/
      l[49].desc + "") && (_.innerHTML = w), z[0] & /*isGM, pockets, blueprints*/
      8240) {
        D = ce(Object.entries(
          /*bp*/
          l[49].recipe
        ));
        let F;
        for (F = 0; F < D.length; F += 1) {
          const W = Zo(l, D, F);
          M[F] ? M[F].p(W, z) : (M[F] = er(W), M[F].c(), M[F].m(A, null));
        }
        for (; F < M.length; F += 1)
          M[F].d(1);
        M.length = D.length;
      }
      /*isGM*/
      l[13] && L.p(l, z);
    },
    d(U) {
      U && (P(e), P(S), P(O)), Fe(M, U), L && L.d(), N = !1, I();
    }
  };
}
function Pb(l) {
  let e, t, i, n, o, c, f, u, d;
  function p() {
    l[25].call(
      t,
      /*each_value_3*/
      l[50],
      /*bp_index*/
      l[51]
    );
  }
  function m() {
    l[26].call(
      n,
      /*each_value_3*/
      l[50],
      /*bp_index*/
      l[51]
    );
  }
  function b() {
    return (
      /*click_handler_3*/
      l[27](
        /*bp*/
        l[49]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("input"), o = g(), c = r("div"), f = r("button"), f.innerHTML = '<i class="fas fa-save"></i> Salvar', s(t, "type", "text"), s(t, "placeholder", "Nome"), s(t, "class", "svelte-1bz2b8r"), s(n, "type", "text"), s(n, "placeholder", "Disciplina"), s(n, "class", "svelte-1bz2b8r"), s(c, "class", "edit-actions"), s(e, "class", "edit-mode svelte-1bz2b8r");
    },
    m(v, h) {
      q(v, e, h), a(e, t), x(
        t,
        /*bp*/
        l[49].name
      ), a(e, i), a(e, n), x(
        n,
        /*bp*/
        l[49].discipline
      ), a(e, o), a(e, c), a(c, f), u || (d = [
        R(t, "input", p),
        R(n, "input", m),
        R(f, "click", b)
      ], u = !0);
    },
    p(v, h) {
      l = v, h[0] & /*blueprints*/
      32 && t.value !== /*bp*/
      l[49].name && x(
        t,
        /*bp*/
        l[49].name
      ), h[0] & /*blueprints*/
      32 && n.value !== /*bp*/
      l[49].discipline && x(
        n,
        /*bp*/
        l[49].discipline
      );
    },
    d(v) {
      v && P(e), u = !1, Te(d);
    }
  };
}
function $o(l) {
  let e, t = (
    /*d*/
    l[52].qty + ""
  ), i, n, o = (
    /*type*/
    l[46] + ""
  ), c, f, u = (
    /*d*/
    l[52].tier + ""
  ), d, p;
  return {
    c() {
      var m;
      e = r("span"), i = B(t), n = B("x "), c = B(o), f = B(" T"), d = B(u), p = g(), s(e, "class", "req-item svelte-1bz2b8r"), he(e, "missing", !/*isGM*/
      l[13] && /*pockets*/
      (((m = l[4][
        /*type*/
        l[46]
      ]) == null ? void 0 : m[
        /*d*/
        l[52].tier
      ]) || 0) < /*d*/
      l[52].qty);
    },
    m(m, b) {
      q(m, e, b), a(e, i), a(e, n), a(e, c), a(e, f), a(e, d), a(e, p);
    },
    p(m, b) {
      var v;
      b[0] & /*blueprints*/
      32 && t !== (t = /*d*/
      m[52].qty + "") && te(i, t), b[0] & /*blueprints*/
      32 && o !== (o = /*type*/
      m[46] + "") && te(c, o), b[0] & /*blueprints*/
      32 && u !== (u = /*d*/
      m[52].tier + "") && te(d, u), b[0] & /*isGM, pockets, blueprints*/
      8240 && he(e, "missing", !/*isGM*/
      m[13] && /*pockets*/
      (((v = m[4][
        /*type*/
        m[46]
      ]) == null ? void 0 : v[
        /*d*/
        m[52].tier
      ]) || 0) < /*d*/
      m[52].qty);
    },
    d(m) {
      m && P(e);
    }
  };
}
function er(l) {
  let e, t = (
    /*d*/
    l[52].qty > 0 && $o(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*d*/
      i[52].qty > 0 ? t ? t.p(i, n) : (t = $o(i), t.c(), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function qb(l) {
  let e, t, i, n, o, c;
  function f() {
    return (
      /*click_handler_5*/
      l[29](
        /*bp*/
        l[49]
      )
    );
  }
  function u() {
    return (
      /*click_handler_6*/
      l[30](
        /*bp*/
        l[49]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-edit"></i>', i = g(), n = r("button"), n.innerHTML = '<i class="fas fa-trash"></i>', s(t, "title", "Editar"), s(n, "class", "del"), s(n, "title", "Excluir"), s(e, "class", "gm-btns svelte-1bz2b8r");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), o || (c = [
        R(t, "click", f),
        R(n, "click", u)
      ], o = !0);
    },
    p(d, p) {
      l = d;
    },
    d(d) {
      d && P(e), o = !1, Te(c);
    }
  };
}
function tr(l) {
  let e;
  function t(o, c) {
    return (
      /*editingBP*/
      o[11] === /*bp*/
      o[49].id ? Pb : Lb
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      e = r("div"), n.c(), s(e, "class", "bp-card svelte-1bz2b8r"), ae(
        e,
        "border-left-color",
        /*bp*/
        l[49].result.color
      );
    },
    m(o, c) {
      q(o, e, c), n.m(e, null);
    },
    p(o, c) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), n.m(e, null))), c[0] & /*blueprints*/
      32 && ae(
        e,
        "border-left-color",
        /*bp*/
        o[49].result.color
      );
    },
    d(o) {
      o && P(e), n.d();
    }
  };
}
function lr(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = 'Banco de dados vazio. Use a aba "Descoberta" para criar novos itens.', s(e, "class", "empty-state svelte-1bz2b8r");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ar(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D = (
    /*simResult*/
    l[10].label + ""
  ), M, G, L = (
    /*simResult*/
    l[10].rarityId + ""
  ), U, z, F, W, H, V, J, j, X, K, Z, le = ce(Object.keys(
    /*simSlots*/
    l[1]
  )), $ = [];
  for (let Q = 0; Q < le.length; Q += 1)
    $[Q] = ir(Qo(l, le, Q));
  let se = ce(
    /*simResult*/
    l[10].stats
  ), Y = [];
  for (let Q = 0; Q < se.length; Q += 1)
    Y[Q] = sr(Yo(l, se, Q));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "CONFIGURAR PROT√ìTIPO", n = g(), o = r("div"), c = r("input"), f = g(), u = r("div"), d = r("select"), p = r("option"), p.textContent = "Equipamento", m = r("option"), m.textContent = "Estrutura", b = r("option"), b.textContent = "Consum√≠vel", v = g(), h = r("select"), _ = r("option"), _.textContent = "Engenharia", w = r("option"), w.textContent = "Sint√©tica", k = r("option"), k.textContent = "Sobreviv√™ncia", A = g(), y = r("hr"), E = g();
      for (let Q = 0; Q < $.length; Q += 1)
        $[Q].c();
      S = g(), O = r("div"), C = r("h3"), C.textContent = "AN√ÅLISE TE√ìRICA", T = g(), N = r("div"), I = r("div"), M = B(D), G = B(" (Tier "), U = B(L), z = B(")"), F = g(), W = r("div");
      for (let Q = 0; Q < Y.length; Q += 1)
        Y[Q].c();
      H = g(), V = r("div"), J = r("button"), J.innerHTML = '<i class="fas fa-save"></i> REGISTRAR DESCOBERTA', j = g(), X = r("p"), X.textContent = "Consome materiais, cria item na mala e salva Blueprint Global.", s(c, "type", "text"), s(c, "placeholder", "Nome do Artefato"), s(c, "class", "svelte-1bz2b8r"), p.__value = "Equipamento", x(p, p.__value), m.__value = "Estrutura", x(m, m.__value), b.__value = "Consum√≠vel", x(b, b.__value), s(d, "class", "svelte-1bz2b8r"), /*simType*/
      l[9] === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[32].call(d)
      )), _.__value = "Engenharia", x(_, _.__value), w.__value = "Sint√©tica", x(w, w.__value), k.__value = "Sobreviv√™ncia", x(k, k.__value), s(h, "class", "svelte-1bz2b8r"), /*simDiscipline*/
      l[8] === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[33].call(h)
      )), s(u, "class", "row svelte-1bz2b8r"), s(o, "class", "meta-inputs svelte-1bz2b8r"), s(t, "class", "sim-config custom-scroll svelte-1bz2b8r"), s(I, "class", "res-rarity svelte-1bz2b8r"), ae(
        I,
        "color",
        /*simResult*/
        l[10].color
      ), s(W, "class", "res-details"), s(N, "class", "result-box svelte-1bz2b8r"), ae(
        N,
        "border-color",
        /*simResult*/
        l[10].color
      ), s(J, "class", "register-btn svelte-1bz2b8r"), s(X, "class", "help-text svelte-1bz2b8r"), s(V, "class", "action-area"), s(O, "class", "sim-preview svelte-1bz2b8r"), s(e, "class", "simulator-layout svelte-1bz2b8r");
    },
    m(Q, ie) {
      q(Q, e, ie), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), x(
        c,
        /*simName*/
        l[7]
      ), a(o, f), a(o, u), a(u, d), a(d, p), a(d, m), a(d, b), ot(
        d,
        /*simType*/
        l[9],
        !0
      ), a(u, v), a(u, h), a(h, _), a(h, w), a(h, k), ot(
        h,
        /*simDiscipline*/
        l[8],
        !0
      ), a(t, A), a(t, y), a(t, E);
      for (let ee = 0; ee < $.length; ee += 1)
        $[ee] && $[ee].m(t, null);
      a(e, S), a(e, O), a(O, C), a(O, T), a(O, N), a(N, I), a(I, M), a(I, G), a(I, U), a(I, z), a(N, F), a(N, W);
      for (let ee = 0; ee < Y.length; ee += 1)
        Y[ee] && Y[ee].m(W, null);
      a(O, H), a(O, V), a(V, J), a(V, j), a(V, X), K || (Z = [
        R(
          c,
          "input",
          /*input_input_handler*/
          l[31]
        ),
        R(
          d,
          "change",
          /*select0_change_handler*/
          l[32]
        ),
        R(
          h,
          "change",
          /*select1_change_handler*/
          l[33]
        ),
        R(
          J,
          "click",
          /*registerDiscovery*/
          l[15]
        )
      ], K = !0);
    },
    p(Q, ie) {
      if (ie[0] & /*simName*/
      128 && c.value !== /*simName*/
      Q[7] && x(
        c,
        /*simName*/
        Q[7]
      ), ie[0] & /*simType*/
      512 && ot(
        d,
        /*simType*/
        Q[9]
      ), ie[0] & /*simDiscipline*/
      256 && ot(
        h,
        /*simDiscipline*/
        Q[8]
      ), ie[0] & /*pockets, simSlots*/
      18) {
        le = ce(Object.keys(
          /*simSlots*/
          Q[1]
        ));
        let ee;
        for (ee = 0; ee < le.length; ee += 1) {
          const pe = Qo(Q, le, ee);
          $[ee] ? $[ee].p(pe, ie) : ($[ee] = ir(pe), $[ee].c(), $[ee].m(t, null));
        }
        for (; ee < $.length; ee += 1)
          $[ee].d(1);
        $.length = le.length;
      }
      if (ie[0] & /*simResult*/
      1024 && D !== (D = /*simResult*/
      Q[10].label + "") && te(M, D), ie[0] & /*simResult*/
      1024 && L !== (L = /*simResult*/
      Q[10].rarityId + "") && te(U, L), ie[0] & /*simResult*/
      1024 && ae(
        I,
        "color",
        /*simResult*/
        Q[10].color
      ), ie[0] & /*simResult*/
      1024) {
        se = ce(
          /*simResult*/
          Q[10].stats
        );
        let ee;
        for (ee = 0; ee < se.length; ee += 1) {
          const pe = Yo(Q, se, ee);
          Y[ee] ? Y[ee].p(pe, ie) : (Y[ee] = sr(pe), Y[ee].c(), Y[ee].m(W, null));
        }
        for (; ee < Y.length; ee += 1)
          Y[ee].d(1);
        Y.length = se.length;
      }
      ie[0] & /*simResult*/
      1024 && ae(
        N,
        "border-color",
        /*simResult*/
        Q[10].color
      );
    },
    d(Q) {
      Q && P(e), Fe($, Q), Fe(Y, Q), K = !1, Te(Z);
    }
  };
}
function ir(l) {
  var D;
  let e, t, i, n, o, c = ol[
    /*type*/
    l[46]
  ].label + "", f, u, d, p, m, b, v, h, _, w, k, A, y, E = (
    /*pockets*/
    (((D = l[4][
      /*type*/
      l[46]
    ]) == null ? void 0 : D[
      /*simSlots*/
      l[1][
        /*type*/
        l[46]
      ].tier
    ]) || 0) + ""
  ), S, O, C, T;
  function N() {
    l[34].call(
      b,
      /*type*/
      l[46]
    );
  }
  function I() {
    l[35].call(
      w,
      /*type*/
      l[46]
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), f = B(c), u = g(), d = r("div"), p = r("label"), p.textContent = "Tier", m = g(), b = r("input"), v = g(), h = r("label"), h.textContent = "Qtd", _ = g(), w = r("input"), k = g(), A = r("div"), y = B("Disp: "), S = B(E), O = g(), s(i, "class", n = Ul(ol[
        /*type*/
        l[46]
      ].icon) + " svelte-1bz2b8r"), s(t, "class", "slot-label svelte-1bz2b8r"), s(b, "type", "number"), s(b, "min", "1"), s(b, "max", "7"), s(b, "class", "svelte-1bz2b8r"), s(w, "type", "number"), s(w, "min", "0"), s(w, "class", "svelte-1bz2b8r"), s(d, "class", "slot-ctrls svelte-1bz2b8r"), s(A, "class", "stock-check svelte-1bz2b8r"), s(e, "class", "slot-row svelte-1bz2b8r");
    },
    m(M, G) {
      q(M, e, G), a(e, t), a(t, i), a(t, o), a(t, f), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), x(
        b,
        /*simSlots*/
        l[1][
          /*type*/
          l[46]
        ].tier
      ), a(d, v), a(d, h), a(d, _), a(d, w), x(
        w,
        /*simSlots*/
        l[1][
          /*type*/
          l[46]
        ].qty
      ), a(e, k), a(e, A), a(A, y), a(A, S), a(e, O), C || (T = [
        R(b, "input", N),
        R(w, "input", I)
      ], C = !0);
    },
    p(M, G) {
      var L;
      l = M, G[0] & /*simSlots*/
      2 && n !== (n = Ul(ol[
        /*type*/
        l[46]
      ].icon) + " svelte-1bz2b8r") && s(i, "class", n), G[0] & /*simSlots*/
      2 && c !== (c = ol[
        /*type*/
        l[46]
      ].label + "") && te(f, c), G[0] & /*simSlots*/
      2 && Je(b.value) !== /*simSlots*/
      l[1][
        /*type*/
        l[46]
      ].tier && x(
        b,
        /*simSlots*/
        l[1][
          /*type*/
          l[46]
        ].tier
      ), G[0] & /*simSlots*/
      2 && Je(w.value) !== /*simSlots*/
      l[1][
        /*type*/
        l[46]
      ].qty && x(
        w,
        /*simSlots*/
        l[1][
          /*type*/
          l[46]
        ].qty
      ), G[0] & /*pockets, simSlots*/
      18 && E !== (E = /*pockets*/
      (((L = l[4][
        /*type*/
        l[46]
      ]) == null ? void 0 : L[
        /*simSlots*/
        l[1][
          /*type*/
          l[46]
        ].tier
      ]) || 0) + "") && te(S, E);
    },
    d(M) {
      M && P(e), C = !1, Te(T);
    }
  };
}
function sr(l) {
  let e, t = (
    /*stat*/
    l[43] + ""
  );
  return {
    c() {
      e = r("div"), s(e, "class", "stat-line svelte-1bz2b8r");
    },
    m(i, n) {
      q(i, e, n), e.innerHTML = t;
    },
    p(i, n) {
      n[0] & /*simResult*/
      1024 && t !== (t = /*stat*/
      i[43] + "") && (e.innerHTML = t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function nr(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k = (
    /*RARITY_DATA*/
    l[14][
      /*refTier*/
      l[3]
    ].label + ""
  ), A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V = ce(Object.keys(
    /*simSlots*/
    l[1]
  )), J = [];
  for (let j = 0; j < V.length; j += 1)
    J[j] = or(Jo(l, V, j));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "CONVERSOR MOLECULAR", n = g(), o = r("div"), c = r("div"), f = r("label"), f.textContent = "TIPO", u = g(), d = r("select");
      for (let j = 0; j < J.length; j += 1)
        J[j].c();
      p = g(), m = r("div"), b = r("label"), b.textContent = "TIER BASE", v = g(), h = r("input"), _ = g(), w = r("span"), A = B(k), y = B(" (T"), E = B(
        /*refTier*/
        l[3]
      ), S = B(")"), O = g(), C = r("div"), T = r("span"), T.textContent = "Custo: 20 un.", N = g(), I = r("span"), D = B("Disp: "), M = B(
        /*refStock*/
        l[12]
      ), L = g(), U = r("button"), z = B("REFINAR"), s(d, "class", "svelte-1bz2b8r"), /*refType*/
      l[2] === void 0 && Ne(() => (
        /*select_change_handler*/
        l[36].call(d)
      )), s(c, "class", "col svelte-1bz2b8r"), s(h, "type", "range"), s(h, "min", "1"), s(h, "max", "6"), s(h, "class", "svelte-1bz2b8r"), s(w, "class", "tier-badge"), ae(
        w,
        "color",
        /*RARITY_DATA*/
        l[14][
          /*refTier*/
          l[3]
        ].color
      ), s(m, "class", "col svelte-1bz2b8r"), s(o, "class", "refine-grid svelte-1bz2b8r"), s(I, "class", G = Ul(
        /*refStock*/
        l[12] >= 20 ? "ok" : "no"
      ) + " svelte-1bz2b8r"), s(C, "class", "refine-status svelte-1bz2b8r"), s(U, "class", "action-btn svelte-1bz2b8r"), U.disabled = F = /*refStock*/
      l[12] < 20, s(t, "class", "refine-card svelte-1bz2b8r"), s(e, "class", "refinery-layout svelte-1bz2b8r");
    },
    m(j, X) {
      q(j, e, X), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(c, f), a(c, u), a(c, d);
      for (let K = 0; K < J.length; K += 1)
        J[K] && J[K].m(d, null);
      ot(
        d,
        /*refType*/
        l[2],
        !0
      ), a(o, p), a(o, m), a(m, b), a(m, v), a(m, h), x(
        h,
        /*refTier*/
        l[3]
      ), a(m, _), a(m, w), a(w, A), a(w, y), a(w, E), a(w, S), a(t, O), a(t, C), a(C, T), a(C, N), a(C, I), a(I, D), a(I, M), a(t, L), a(t, U), a(U, z), W || (H = [
        R(
          d,
          "change",
          /*select_change_handler*/
          l[36]
        ),
        R(
          h,
          "change",
          /*input_change_input_handler*/
          l[37]
        ),
        R(
          h,
          "input",
          /*input_change_input_handler*/
          l[37]
        ),
        R(
          U,
          "click",
          /*doRefine*/
          l[19]
        )
      ], W = !0);
    },
    p(j, X) {
      if (X[0] & /*simSlots*/
      2) {
        V = ce(Object.keys(
          /*simSlots*/
          j[1]
        ));
        let K;
        for (K = 0; K < V.length; K += 1) {
          const Z = Jo(j, V, K);
          J[K] ? J[K].p(Z, X) : (J[K] = or(Z), J[K].c(), J[K].m(d, null));
        }
        for (; K < J.length; K += 1)
          J[K].d(1);
        J.length = V.length;
      }
      X[0] & /*refType, simSlots*/
      6 && ot(
        d,
        /*refType*/
        j[2]
      ), X[0] & /*refTier*/
      8 && x(
        h,
        /*refTier*/
        j[3]
      ), X[0] & /*refTier*/
      8 && k !== (k = /*RARITY_DATA*/
      j[14][
        /*refTier*/
        j[3]
      ].label + "") && te(A, k), X[0] & /*refTier*/
      8 && te(
        E,
        /*refTier*/
        j[3]
      ), X[0] & /*refTier*/
      8 && ae(
        w,
        "color",
        /*RARITY_DATA*/
        j[14][
          /*refTier*/
          j[3]
        ].color
      ), X[0] & /*refStock*/
      4096 && te(
        M,
        /*refStock*/
        j[12]
      ), X[0] & /*refStock*/
      4096 && G !== (G = Ul(
        /*refStock*/
        j[12] >= 20 ? "ok" : "no"
      ) + " svelte-1bz2b8r") && s(I, "class", G), X[0] & /*refStock*/
      4096 && F !== (F = /*refStock*/
      j[12] < 20) && (U.disabled = F);
    },
    d(j) {
      j && P(e), Fe(J, j), W = !1, Te(H);
    }
  };
}
function or(l) {
  let e, t = (
    /*t*/
    l[40] + ""
  ), i, n;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = n = /*t*/
      l[40], x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, i);
    },
    p(o, c) {
      c[0] & /*simSlots*/
      2 && t !== (t = /*t*/
      o[40] + "") && te(i, t), c[0] & /*simSlots*/
      2 && n !== (n = /*t*/
      o[40]) && (e.__value = n, x(e, e.__value));
    },
    d(o) {
      o && P(e);
    }
  };
}
function Ub(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = (
    /*activeTab*/
    l[6] === "blueprints" && xo(l)
  ), S = (
    /*activeTab*/
    l[6] === "simulator" && ar(l)
  ), O = (
    /*activeTab*/
    l[6] === "refinery" && nr(l)
  );
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), i.innerHTML = '<i class="fas fa-microchip"></i> <span>SISTEMA DE MANUFATURA GLOBAL</span>', n = g(), o = r("button"), o.textContent = "‚úï", c = g(), f = r("nav"), u = r("button"), u.innerHTML = '<i class="fas fa-database"></i> BLUEPRINTS', d = g(), p = r("button"), p.innerHTML = '<i class="fas fa-flask"></i> DESCOBERTA', m = g(), b = r("button"), b.innerHTML = '<i class="fas fa-filter"></i> REFINARIA', v = g(), h = r("main"), E && E.c(), _ = g(), S && S.c(), w = g(), O && O.c(), s(i, "class", "title-block svelte-1bz2b8r"), s(o, "class", "close-btn svelte-1bz2b8r"), s(t, "class", "terminal-header svelte-1bz2b8r"), s(u, "class", "svelte-1bz2b8r"), he(
        u,
        "active",
        /*activeTab*/
        l[6] === "blueprints"
      ), s(p, "class", "svelte-1bz2b8r"), he(
        p,
        "active",
        /*activeTab*/
        l[6] === "simulator"
      ), s(b, "class", "svelte-1bz2b8r"), he(
        b,
        "active",
        /*activeTab*/
        l[6] === "refinery"
      ), s(f, "class", "terminal-tabs svelte-1bz2b8r"), s(h, "class", "terminal-body svelte-1bz2b8r"), s(e, "class", "crafting-terminal svelte-1bz2b8r");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(t, i), a(t, n), a(t, o), a(e, c), a(e, f), a(f, u), a(f, d), a(f, p), a(f, m), a(f, b), a(e, v), a(e, h), E && E.m(h, null), a(h, _), S && S.m(h, null), a(h, w), O && O.m(h, null), A || (y = [
        R(o, "click", function() {
          oa(
            /*onClose*/
            l[0]
          ) && l[0].apply(this, arguments);
        }),
        R(
          u,
          "click",
          /*click_handler*/
          l[22]
        ),
        R(
          p,
          "click",
          /*click_handler_1*/
          l[23]
        ),
        R(
          b,
          "click",
          /*click_handler_2*/
          l[24]
        )
      ], A = !0);
    },
    p(C, T) {
      l = C, T[0] & /*activeTab*/
      64 && he(
        u,
        "active",
        /*activeTab*/
        l[6] === "blueprints"
      ), T[0] & /*activeTab*/
      64 && he(
        p,
        "active",
        /*activeTab*/
        l[6] === "simulator"
      ), T[0] & /*activeTab*/
      64 && he(
        b,
        "active",
        /*activeTab*/
        l[6] === "refinery"
      ), /*activeTab*/
      l[6] === "blueprints" ? E ? E.p(l, T) : (E = xo(l), E.c(), E.m(h, _)) : E && (E.d(1), E = null), /*activeTab*/
      l[6] === "simulator" ? S ? S.p(l, T) : (S = ar(l), S.c(), S.m(h, w)) : S && (S.d(1), S = null), /*activeTab*/
      l[6] === "refinery" ? O ? O.p(l, T) : (O = nr(l), O.c(), O.m(h, null)) : O && (O.d(1), O = null);
    },
    i(C) {
      C && (k || Ne(() => {
        k = st(e, Qe, {}), k.start();
      }));
    },
    o: ge,
    d(C) {
      C && P(e), E && E.d(), S && S.d(), O && O.d(), A = !1, Te(y);
    }
  };
}
const va = "multiversus-rpg";
function Gb(l, e, t) {
  let i, n, o, c, { actor: f } = e, { onClose: u } = e;
  const d = game.user.isGM;
  let p = [];
  qt(async () => {
    d && await xl.init(), t(5, p = xl.getBlueprints());
    const $ = Hooks.on("updateJournalEntryPage", (se) => {
      var Y;
      ((Y = se.parent) == null ? void 0 : Y.name) === xl.DB_NAME && t(5, p = xl.getBlueprints());
    });
    return () => Hooks.off("updateJournalEntryPage", $);
  });
  let m = "blueprints";
  const b = {
    1: { label: "Comum", pb: 1, color: "#9ca3af" },
    2: { label: "Raro", pb: 2, color: "#3b82f6" },
    3: {
      label: "Lend√°rio",
      pb: 4,
      color: "#f59e0b"
    },
    4: { label: "M√≠tico", pb: 6, color: "#ef4444" },
    5: {
      label: "Universal",
      pb: 8,
      color: "#10b981"
    },
    6: {
      label: "Multiversal",
      pb: 16,
      color: "#7c3aed"
    },
    7: {
      label: "Onipotente",
      pb: 32,
      color: "#ffffff"
    }
  };
  let v = {
    MATERIA: { tier: 1, qty: 0 },
    ENERGIA: { tier: 1, qty: 0 },
    ORGANISMO: { tier: 1, qty: 0 },
    NUCLEO: { tier: 1, qty: 0 }
  }, h = "Novo Prot√≥tipo", _ = "Engenharia", w = "Equipamento", k = {
    pb: 0,
    extras: 0,
    flaws: 0,
    stats: [],
    rarityId: 1,
    label: "Comum",
    color: "#9ca3af"
  };
  function A($) {
    let se = 0, Y = 0;
    for (const [oe, be] of Object.entries($))
      be.qty > 0 && (se += be.tier, Y++);
    const Q = Y > 0 ? Math.floor(se / Y) : 1, ie = b[Q] || b[1];
    let ee = 0, pe = 0, Ee = 0, De = 0, we = 0, ke = 0;
    if ($.NUCLEO.qty > 0) {
      const oe = $.NUCLEO.tier;
      ee = ol.NUCLEO.tiers[oe].instability || oe;
    }
    if ($.ENERGIA.qty > 0) {
      const oe = $.ENERGIA.tier;
      pe = ol.ENERGIA.tiers[oe].power || oe, Ee = oe;
    }
    if ($.ORGANISMO.qty > 0) {
      const oe = $.ORGANISMO.tier;
      De = ol.ORGANISMO.tiers[oe].sustento || oe;
    }
    if ($.MATERIA.qty > 0) {
      const oe = $.MATERIA.tier, be = ol.MATERIA.tiers[oe];
      we = $.MATERIA.qty * (be.hp_mod || 1), ke = be.har || 0;
    }
    const me = ie.pb, re = me + ee;
    let ye = [];
    ye.push(`<b>Base (${ie.label}):</b> ${me} PB`), ee > 0 && ye.push(`<b>Instabilidade:</b> +${ee} PB (Total: ${re})`), pe > 0 && ye.push(`<b>Poder:</b> Permite at√© +${pe} em Extras.`), Ee > 0 && ye.push(`<b>Volatilidade:</b> Permite at√© -${Ee} em Flaws.`), we > 0 && ye.push(`<b>Estrutura:</b> ${we} HP | ${ke} HAR`), De > 0 && ye.push(`<b>Biol√≥gico:</b> Sustento ${De} | Sede ${De * 2}`), t(10, k = {
      rarityId: Q,
      label: ie.label,
      color: ie.color,
      pb: re,
      extras: pe,
      flaws: Ee,
      stats: ye
    });
  }
  async function y() {
    var Q;
    if (!d) {
      let ie = [];
      for (const [pe, Ee] of Object.entries(v))
        Ee.qty > 0 && (((Q = n[pe]) == null ? void 0 : Q[Ee.tier]) || 0) < Ee.qty && ie.push(`${pe} T${Ee.tier}`);
      if (ie.length > 0) return ui.notifications.warn(`Falta: ${ie.join(", ")}`);
      let ee = JSON.parse(JSON.stringify(n));
      for (const [pe, Ee] of Object.entries(v))
        Ee.qty > 0 && (ee[pe][Ee.tier] -= Ee.qty);
      await f.update({
        [`flags.${va}.survival_data.pockets`]: ee
      });
    }
    const $ = k.stats.map((ie) => `<p>${ie}</p>`).join(""), se = {
      id: foundry.utils.randomID(),
      name: h,
      type: w,
      rarity: k.label,
      img: "icons/svg/item-bag.svg",
      qty: 1,
      w: w === "Estrutura" ? 2 : 1,
      h: w === "Estrutura" ? 2 : 1,
      stored: !1,
      desc: `
              <div style="border-left: 4px solid ${k.color}; padding-left: 10px; margin-bottom: 10px;">
                  ${$}
              </div>
              <hr>
              <p><i>Disciplina: ${_}</i></p>
          `
    };
    await f.update({
      [`flags.${va}.inventory`]: [...o, se]
    });
    const Y = {
      id: foundry.utils.randomID(),
      name: h,
      discipline: _,
      type: w,
      recipe: JSON.parse(JSON.stringify(v)),
      // Salva a receita
      result: k,
      // Salva os stats calculados
      desc: $
    };
    await xl.addBlueprint(Y), ui.notifications.info("Descoberta Registrada! Blueprint salvo globalmente."), t(6, m = "blueprints");
  }
  let E = null;
  async function S($) {
    var Y;
    if (!d) {
      let Q = JSON.parse(JSON.stringify(n)), ie = [];
      for (const [ee, pe] of Object.entries($.recipe))
        pe.qty > 0 && ((((Y = Q[ee]) == null ? void 0 : Y[pe.tier]) || 0) < pe.qty ? ie.push(`${ee} T${pe.tier}`) : Q[ee][pe.tier] -= pe.qty);
      if (ie.length > 0) return ui.notifications.warn(`Faltam: ${ie.join(", ")}`);
      await f.update({
        [`flags.${va}.survival_data.pockets`]: Q
      });
    }
    const se = {
      id: foundry.utils.randomID(),
      name: $.name,
      type: $.type,
      rarity: $.result.label,
      img: "icons/svg/item-bag.svg",
      qty: 1,
      w: $.type === "Estrutura" ? 2 : 1,
      h: $.type === "Estrutura" ? 2 : 1,
      stored: !1,
      desc: `
              <div style="border-left: 4px solid ${$.result.color}; padding-left: 10px; margin-bottom: 10px;">
                  ${$.desc}
              </div>
              <p style="font-size:0.8em; color:#666;">Craftado via Blueprint.</p>
          `
    };
    await f.update({
      [`flags.${va}.inventory`]: [...o, se]
    }), ui.notifications.info(`${$.name} forjado com sucesso!`);
  }
  async function O($) {
    await xl.deleteBlueprint($);
  }
  async function C($) {
    await xl.updateBlueprint($), t(11, E = null);
  }
  let T = "MATERIA", N = 1;
  async function I() {
    if (c < 20) return ui.notifications.warn("M√≠nimo 20 unidades.");
    if (N >= 6) return ui.notifications.warn("Tier m√°ximo.");
    let $ = JSON.parse(JSON.stringify(n));
    $[T][N] -= 20, $[T][N + 1] = ($[T][N + 1] || 0) + 1, await f.update({
      [`flags.${va}.survival_data.pockets`]: $
    }), ui.notifications.info("Refino conclu√≠do!");
  }
  const D = () => t(6, m = "blueprints"), M = () => t(6, m = "simulator"), G = () => t(6, m = "refinery");
  function L($, se) {
    $[se].name = this.value, t(5, p);
  }
  function U($, se) {
    $[se].discipline = this.value, t(5, p);
  }
  const z = ($) => C($), F = ($) => S($), W = ($) => t(11, E = $.id), H = ($) => O($.id);
  function V() {
    h = this.value, t(7, h);
  }
  function J() {
    w = Gt(this), t(9, w);
  }
  function j() {
    _ = Gt(this), t(8, _);
  }
  function X($) {
    v[$].tier = Je(this.value), t(1, v);
  }
  function K($) {
    v[$].qty = Je(this.value), t(1, v);
  }
  function Z() {
    T = Gt(this), t(2, T), t(1, v);
  }
  function le() {
    N = Je(this.value), t(3, N);
  }
  return l.$$set = ($) => {
    "actor" in $ && t(20, f = $.actor), "onClose" in $ && t(0, u = $.onClose);
  }, l.$$.update = () => {
    var $, se, Y, Q, ie;
    l.$$.dirty[0] & /*actor*/
    1048576 && t(21, i = ((se = ($ = f.flags) == null ? void 0 : $[va]) == null ? void 0 : se.survival_data) || {}), l.$$.dirty[0] & /*survivalData*/
    2097152 && t(4, n = i.pockets || {
      MATERIA: {},
      ORGANISMO: {},
      ENERGIA: {},
      NUCLEO: {}
    }), l.$$.dirty[0] & /*actor*/
    1048576 && (o = ((Q = (Y = f.flags) == null ? void 0 : Y[va]) == null ? void 0 : Q.inventory) || []), l.$$.dirty[0] & /*simSlots*/
    2 && A(v), l.$$.dirty[0] & /*pockets, refType, refTier*/
    28 && t(12, c = ((ie = n[T]) == null ? void 0 : ie[N]) || 0);
  }, [
    u,
    v,
    T,
    N,
    n,
    p,
    m,
    h,
    _,
    w,
    k,
    E,
    c,
    d,
    b,
    y,
    S,
    O,
    C,
    I,
    f,
    i,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le
  ];
}
class Hb extends mt {
  constructor(e) {
    super(), pt(this, e, Gb, Ub, dt, { actor: 20, onClose: 0 }, null, [-1, -1]);
  }
}
function rr(l, e, t) {
  const i = l.slice();
  return i[61] = e[t], i;
}
function cr(l, e, t) {
  const i = l.slice();
  return i[64] = e[t], i;
}
function fr(l, e, t) {
  const i = l.slice();
  return i[64] = e[t], i;
}
function dr(l, e, t) {
  const i = l.slice();
  return i[69] = e[t], i[71] = t, i;
}
function zb(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-plus"></i>', s(e, "class", "action-btn svelte-1akbgio");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_3*/
        l[31]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function ur(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-sync"></i>', s(e, "class", "action-btn svelte-1akbgio"), s(e, "title", "Girar (R)");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*rotateSelectedItem*/
        l[17]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function pr(l) {
  let e;
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-lock");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function mr(l) {
  let e, t, i, n = (
    /*i*/
    l[71] >= /*unlockedSlots*/
    l[7] && pr()
  );
  return {
    c() {
      e = r("div"), n && n.c(), t = g(), s(e, "class", i = "grid-slot " + /*i*/
      (l[71] >= /*unlockedSlots*/
      l[7] ? "locked" : "") + " svelte-1akbgio");
    },
    m(o, c) {
      q(o, e, c), n && n.m(e, null), a(e, t);
    },
    p(o, c) {
      /*i*/
      o[71] >= /*unlockedSlots*/
      o[7] ? n || (n = pr(), n.c(), n.m(e, t)) : n && (n.d(1), n = null), c[0] & /*unlockedSlots*/
      128 && i !== (i = "grid-slot " + /*i*/
      (o[71] >= /*unlockedSlots*/
      o[7] ? "locked" : "") + " svelte-1akbgio") && s(e, "class", i);
    },
    d(o) {
      o && P(e), n && n.d();
    }
  };
}
function br(l, e) {
  let t, i, n, o, c, f;
  function u() {
    return (
      /*func*/
      e[32](
        /*item*/
        e[64]
      )
    );
  }
  function d() {
    return (
      /*func_1*/
      e[33](
        /*item*/
        e[64]
      )
    );
  }
  i = new R0({
    props: {
      item: (
        /*item*/
        e[64]
      ),
      index: (
        /*item*/
        e[64].id
      ),
      isGM: (
        /*isGM*/
        e[11]
      ),
      inGrid: !0,
      onSelect: u,
      onUpdateQty: (
        /*updateItemLocal*/
        e[16]
      ),
      onDelete: d
    }
  });
  function p(...b) {
    return (
      /*dragstart_handler*/
      e[34](
        /*item*/
        e[64],
        ...b
      )
    );
  }
  function m() {
    return (
      /*click_handler_4*/
      e[35](
        /*item*/
        e[64]
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      var b, v;
      t = r("div"), kt(i.$$.fragment), n = g(), s(t, "class", "item-container svelte-1akbgio"), ae(t, "position", "absolute"), ae(
        t,
        "left",
        /*item*/
        e[64].x * (kl + ll) + "px"
      ), ae(
        t,
        "top",
        /*item*/
        e[64].y * (kl + ll) + "px"
      ), ae(
        t,
        "width",
        /*item*/
        e[64].w * (kl + ll) - ll + "px"
      ), ae(
        t,
        "height",
        /*item*/
        e[64].h * (kl + ll) - ll + "px"
      ), ae(
        t,
        "z-index",
        /*selectedItem*/
        ((b = e[5]) == null ? void 0 : b.id) === /*item*/
        e[64].id ? 999 : 10
      ), s(t, "draggable", "true"), he(
        t,
        "selected",
        /*selectedItem*/
        ((v = e[5]) == null ? void 0 : v.id) === /*item*/
        e[64].id
      ), this.first = t;
    },
    m(b, v) {
      q(b, t, v), ht(i, t, null), a(t, n), o = !0, c || (f = [
        R(t, "dragstart", p),
        R(t, "click", Lt(m))
      ], c = !0);
    },
    p(b, v) {
      var _, w;
      e = b;
      const h = {};
      v[0] & /*gridItems*/
      512 && (h.item = /*item*/
      e[64]), v[0] & /*gridItems*/
      512 && (h.index = /*item*/
      e[64].id), v[0] & /*selectedItem, gridItems, isEditing*/
      608 && (h.onSelect = u), v[0] & /*gridItems*/
      512 && (h.onDelete = d), i.$set(h), (!o || v[0] & /*gridItems*/
      512) && ae(
        t,
        "left",
        /*item*/
        e[64].x * (kl + ll) + "px"
      ), (!o || v[0] & /*gridItems*/
      512) && ae(
        t,
        "top",
        /*item*/
        e[64].y * (kl + ll) + "px"
      ), (!o || v[0] & /*gridItems*/
      512) && ae(
        t,
        "width",
        /*item*/
        e[64].w * (kl + ll) - ll + "px"
      ), (!o || v[0] & /*gridItems*/
      512) && ae(
        t,
        "height",
        /*item*/
        e[64].h * (kl + ll) - ll + "px"
      ), (!o || v[0] & /*selectedItem, gridItems*/
      544) && ae(
        t,
        "z-index",
        /*selectedItem*/
        ((_ = e[5]) == null ? void 0 : _.id) === /*item*/
        e[64].id ? 999 : 10
      ), (!o || v[0] & /*selectedItem, gridItems*/
      544) && he(
        t,
        "selected",
        /*selectedItem*/
        ((w = e[5]) == null ? void 0 : w.id) === /*item*/
        e[64].id
      );
    },
    i(b) {
      o || (ne(i.$$.fragment, b), o = !0);
    },
    o(b) {
      Ae(i.$$.fragment, b), o = !1;
    },
    d(b) {
      b && P(t), gt(i), c = !1, Te(f);
    }
  };
}
function vr(l, e) {
  let t, i, n, o, c, f;
  function u() {
    return (
      /*func_2*/
      e[37](
        /*item*/
        e[64]
      )
    );
  }
  function d() {
    return (
      /*func_3*/
      e[38](
        /*item*/
        e[64]
      )
    );
  }
  i = new R0({
    props: {
      item: (
        /*item*/
        e[64]
      ),
      index: (
        /*item*/
        e[64].id
      ),
      isGM: (
        /*isGM*/
        e[11]
      ),
      inGrid: !1,
      onSelect: u,
      onUpdateQty: (
        /*updateItemLocal*/
        e[16]
      ),
      onDelete: d
    }
  });
  function p(...m) {
    return (
      /*dragstart_handler_1*/
      e[39](
        /*item*/
        e[64],
        ...m
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), kt(i.$$.fragment), n = g(), s(t, "class", "stash-slot svelte-1akbgio"), s(t, "draggable", "true"), this.first = t;
    },
    m(m, b) {
      q(m, t, b), ht(i, t, null), a(t, n), o = !0, c || (f = R(t, "dragstart", p), c = !0);
    },
    p(m, b) {
      e = m;
      const v = {};
      b[0] & /*stashItems*/
      1024 && (v.item = /*item*/
      e[64]), b[0] & /*stashItems*/
      1024 && (v.index = /*item*/
      e[64].id), b[0] & /*selectedItem, stashItems, isEditing*/
      1120 && (v.onSelect = u), b[0] & /*stashItems*/
      1024 && (v.onDelete = d), i.$set(v);
    },
    i(m) {
      o || (ne(i.$$.fragment, m), o = !0);
    },
    o(m) {
      Ae(i.$$.fragment, m), o = !1;
    },
    d(m) {
      m && P(t), gt(i), c = !1, f();
    }
  };
}
function hr(l) {
  let e, t, i, n, o, c, f = (
    /*selectedItem*/
    l[5].name.toUpperCase() + ""
  ), u, d, p, m, b, v, h, _, w, k, A, y, E, S, O = (
    /*selectedItem*/
    (l[5].type || "ITEM") + ""
  ), C, T, N, I = (
    /*selectedItem*/
    l[5].rarity + ""
  ), D, M, G, L, U, z, F, W, H, V, J;
  function j(se, Y) {
    return (
      /*isGM*/
      se[11] && /*isEditing*/
      se[6] ? Fb : Bb
    );
  }
  let X = j(l), K = X(l);
  function Z(se, Y) {
    return (
      /*isGM*/
      se[11] ? Vb : jb
    );
  }
  let $ = Z(l)(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("div"), o = r("i"), c = g(), u = B(f), d = g(), p = r("button"), p.textContent = "‚úï", m = g(), b = r("div"), v = r("div"), h = r("div"), _ = r("img"), k = g(), A = r("div"), y = g(), E = r("div"), S = r("span"), C = B(O), T = g(), N = r("span"), D = B(I), M = g(), G = r("div"), L = r("div"), K.c(), U = g(), z = r("div"), $.c(), s(o, "class", "fas fa-cube"), s(n, "class", "win-title svelte-1akbgio"), s(p, "class", "win-close svelte-1akbgio"), s(i, "class", "win-header svelte-1akbgio"), at(_.src, w = /*selectedItem*/
      l[5].img) || s(_, "src", w), s(_, "alt", "preview"), s(_, "class", "svelte-1akbgio"), s(A, "class", "scan-line svelte-1akbgio"), s(h, "class", "preview-box svelte-1akbgio"), s(S, "class", "tag type svelte-1akbgio"), s(N, "class", "tag rarity svelte-1akbgio"), ae(N, "color", "var(--theme)"), ae(N, "border-color", "var(--theme)"), s(E, "class", "meta-tags svelte-1akbgio"), s(v, "class", "win-preview svelte-1akbgio"), s(L, "class", "desc-box custom-scroll svelte-1akbgio"), s(z, "class", "ctrl-bar svelte-1akbgio"), s(G, "class", "win-info svelte-1akbgio"), s(b, "class", "win-content svelte-1akbgio"), s(t, "class", "data-window svelte-1akbgio"), ae(
        t,
        "--theme",
        /*RARITY_COLORS*/
        l[22][
          /*selectedItem*/
          l[5].rarity
        ] || "#fff"
      ), s(e, "class", "modal-backdrop svelte-1akbgio");
    },
    m(se, Y) {
      q(se, e, Y), a(e, t), a(t, i), a(i, n), a(n, o), a(n, c), a(n, u), a(i, d), a(i, p), a(t, m), a(t, b), a(b, v), a(v, h), a(h, _), a(h, k), a(h, A), a(v, y), a(v, E), a(E, S), a(S, C), a(E, T), a(E, N), a(N, D), a(b, M), a(b, G), a(G, L), K.m(L, null), a(G, U), a(G, z), $.m(z, null), H = !0, V || (J = [
        R(
          p,
          "click",
          /*click_handler_7*/
          l[41]
        ),
        R(t, "click", Lt(
          /*click_handler*/
          l[26]
        )),
        R(t, "mousedown", Lt(
          /*mousedown_handler*/
          l[27]
        )),
        R(e, "click", w0(
          /*click_handler_10*/
          l[46]
        ))
      ], V = !0);
    },
    p(se, Y) {
      (!H || Y[0] & /*selectedItem*/
      32) && f !== (f = /*selectedItem*/
      se[5].name.toUpperCase() + "") && te(u, f), (!H || Y[0] & /*selectedItem*/
      32 && !at(_.src, w = /*selectedItem*/
      se[5].img)) && s(_, "src", w), (!H || Y[0] & /*selectedItem*/
      32) && O !== (O = /*selectedItem*/
      (se[5].type || "ITEM") + "") && te(C, O), (!H || Y[0] & /*selectedItem*/
      32) && I !== (I = /*selectedItem*/
      se[5].rarity + "") && te(D, I), X === (X = j(se)) && K ? K.p(se, Y) : (K.d(1), K = X(se), K && (K.c(), K.m(L, null))), $.p(se, Y), (!H || Y[0] & /*selectedItem*/
      32) && ae(
        t,
        "--theme",
        /*RARITY_COLORS*/
        se[22][
          /*selectedItem*/
          se[5].rarity
        ] || "#fff"
      );
    },
    i(se) {
      H || (se && (F || Ne(() => {
        F = st(t, Mt, { start: 0.95, duration: 200 }), F.start();
      })), se && Ne(() => {
        H && (W || (W = We(e, Qe, { duration: 150 }, !0)), W.run(1));
      }), H = !0);
    },
    o(se) {
      se && (W || (W = We(e, Qe, { duration: 150 }, !1)), W.run(0)), H = !1;
    },
    d(se) {
      se && P(e), K.d(), $.d(), se && W && W.end(), V = !1, Te(J);
    }
  };
}
function Bb(l) {
  let e, t = (wr(
    /*selectedItem*/
    l[5].desc
  ) || "<span style='opacity:0.3'>Sem dados.</span>") + "";
  return {
    c() {
      e = r("div"), s(e, "class", "html-renderer");
    },
    m(i, n) {
      q(i, e, n), e.innerHTML = t;
    },
    p(i, n) {
      n[0] & /*selectedItem*/
      32 && t !== (t = (wr(
        /*selectedItem*/
        i[5].desc
      ) || "<span style='opacity:0.3'>Sem dados.</span>") + "") && (e.innerHTML = t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function Fb(l) {
  let e, t, i, n;
  return {
    c() {
      e = r("textarea"), s(e, "class", "code-editor svelte-1akbgio"), e.value = t = /*selectedItem*/
      l[5].desc, s(e, "placeholder", "HTML / Texto...");
    },
    m(o, c) {
      q(o, e, c), i || (n = R(
        e,
        "change",
        /*change_handler_2*/
        l[42]
      ), i = !0);
    },
    p(o, c) {
      c[0] & /*selectedItem*/
      32 && t !== (t = /*selectedItem*/
      o[5].desc) && (e.value = t);
    },
    d(o) {
      o && P(e), i = !1, n();
    }
  };
}
function jb(l) {
  let e, t, i, n = (
    /*selectedItem*/
    l[5].qty + ""
  ), o;
  return {
    c() {
      e = r("div"), t = B("QUANTIDADE: "), i = r("strong"), o = B(n), s(e, "class", "qty-show");
    },
    m(c, f) {
      q(c, e, f), a(e, t), a(e, i), a(i, o);
    },
    p(c, f) {
      f[0] & /*selectedItem*/
      32 && n !== (n = /*selectedItem*/
      c[5].qty + "") && te(o, n);
    },
    d(c) {
      c && P(e);
    }
  };
}
function Vb(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h;
  return {
    c() {
      e = r("div"), t = r("label"), i = B("QTD "), n = r("input"), c = g(), f = r("button"), u = r("i"), m = g(), b = r("button"), b.innerHTML = '<i class="fas fa-trash"></i>', s(n, "type", "number"), n.value = o = /*selectedItem*/
      l[5].qty, s(n, "class", "svelte-1akbgio"), s(t, "class", "svelte-1akbgio"), s(u, "class", d = "fas " + /*isEditing*/
      (l[6] ? "fa-eye" : "fa-pencil-alt")), s(f, "class", "btn-toggle svelte-1akbgio"), s(f, "title", p = /*isEditing*/
      l[6] ? "Ver Visual" : "Editar C√≥digo"), s(b, "class", "btn-del svelte-1akbgio"), s(b, "title", "Deletar"), s(e, "class", "gm-tools svelte-1akbgio");
    },
    m(_, w) {
      q(_, e, w), a(e, t), a(t, i), a(t, n), a(e, c), a(e, f), a(f, u), a(e, m), a(e, b), v || (h = [
        R(
          n,
          "change",
          /*change_handler_3*/
          l[43]
        ),
        R(
          f,
          "click",
          /*click_handler_8*/
          l[44]
        ),
        R(
          b,
          "click",
          /*click_handler_9*/
          l[45]
        )
      ], v = !0);
    },
    p(_, w) {
      w[0] & /*selectedItem*/
      32 && o !== (o = /*selectedItem*/
      _[5].qty) && n.value !== o && (n.value = o), w[0] & /*isEditing*/
      64 && d !== (d = "fas " + /*isEditing*/
      (_[6] ? "fa-eye" : "fa-pencil-alt")) && s(u, "class", d), w[0] & /*isEditing*/
      64 && p !== (p = /*isEditing*/
      _[6] ? "Ver Visual" : "Editar C√≥digo") && s(f, "title", p);
    },
    d(_) {
      _ && P(e), v = !1, Te(h);
    }
  };
}
function gr(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y = ce(Object.keys(
    /*RARITY_COLORS*/
    l[22]
  )), Q = [];
  for (let ie = 0; ie < Y.length; ie += 1)
    Q[ie] = _r(rr(l, Y, ie));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("div"), n.textContent = "NOVO REGISTRO", o = g(), c = r("button"), c.textContent = "‚úï", f = g(), u = r("div"), d = r("div"), p = r("label"), m = B("NOME "), b = r("input"), v = g(), h = r("div"), _ = r("label"), w = B("W "), k = r("input"), A = g(), y = r("label"), E = B("H "), S = r("input"), O = g(), C = r("div"), T = r("label"), N = B("DESCRI√á√ÉO "), I = r("textarea"), D = g(), M = r("div"), G = r("label"), L = B("TIPO "), U = r("input"), z = g(), F = r("label"), W = B(`RARIDADE 
                        `), H = r("select");
      for (let ie = 0; ie < Q.length; ie += 1)
        Q[ie].c();
      V = g(), J = r("div"), j = r("label"), X = B("IMG URL "), K = r("input"), Z = g(), le = r("button"), le.textContent = "CRIAR", s(n, "class", "win-title svelte-1akbgio"), s(c, "class", "win-close svelte-1akbgio"), s(i, "class", "win-header svelte-1akbgio"), ae(i, "--theme", "#00ff41"), s(b, "type", "text"), s(b, "class", "svelte-1akbgio"), s(p, "class", "svelte-1akbgio"), s(d, "class", "form-row svelte-1akbgio"), s(k, "type", "number"), s(k, "min", "1"), s(k, "max", "4"), s(k, "class", "svelte-1akbgio"), s(_, "class", "svelte-1akbgio"), s(S, "type", "number"), s(S, "min", "1"), s(S, "max", "4"), s(S, "class", "svelte-1akbgio"), s(y, "class", "svelte-1akbgio"), s(h, "class", "form-row split svelte-1akbgio"), s(I, "class", "svelte-1akbgio"), s(T, "class", "svelte-1akbgio"), s(C, "class", "form-row svelte-1akbgio"), s(U, "type", "text"), s(U, "class", "svelte-1akbgio"), s(G, "class", "svelte-1akbgio"), s(H, "class", "svelte-1akbgio"), /*newItem*/
      l[8].rarity === void 0 && Ne(() => (
        /*select_change_handler*/
        l[53].call(H)
      )), s(F, "class", "svelte-1akbgio"), s(M, "class", "form-row split svelte-1akbgio"), s(K, "type", "text"), s(K, "class", "svelte-1akbgio"), s(j, "class", "svelte-1akbgio"), s(J, "class", "form-row svelte-1akbgio"), s(le, "class", "btn-confirm svelte-1akbgio"), s(u, "class", "form-body svelte-1akbgio"), s(t, "class", "data-window creator svelte-1akbgio"), s(e, "class", "modal-backdrop svelte-1akbgio");
    },
    m(ie, ee) {
      q(ie, e, ee), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(d, p), a(p, m), a(p, b), x(
        b,
        /*newItem*/
        l[8].name
      ), a(u, v), a(u, h), a(h, _), a(_, w), a(_, k), x(
        k,
        /*newItem*/
        l[8].w
      ), a(h, A), a(h, y), a(y, E), a(y, S), x(
        S,
        /*newItem*/
        l[8].h
      ), a(u, O), a(u, C), a(C, T), a(T, N), a(T, I), x(
        I,
        /*newItem*/
        l[8].desc
      ), a(u, D), a(u, M), a(M, G), a(G, L), a(G, U), x(
        U,
        /*newItem*/
        l[8].type
      ), a(M, z), a(M, F), a(F, W), a(F, H);
      for (let pe = 0; pe < Q.length; pe += 1)
        Q[pe] && Q[pe].m(H, null);
      ot(
        H,
        /*newItem*/
        l[8].rarity,
        !0
      ), a(u, V), a(u, J), a(J, j), a(j, X), a(j, K), x(
        K,
        /*newItem*/
        l[8].img
      ), a(u, Z), a(u, le), $ || (se = [
        R(
          c,
          "click",
          /*click_handler_11*/
          l[47]
        ),
        R(
          b,
          "input",
          /*input0_input_handler*/
          l[48]
        ),
        R(
          k,
          "input",
          /*input1_input_handler*/
          l[49]
        ),
        R(
          S,
          "input",
          /*input2_input_handler*/
          l[50]
        ),
        R(
          I,
          "input",
          /*textarea_input_handler*/
          l[51]
        ),
        R(
          U,
          "input",
          /*input3_input_handler*/
          l[52]
        ),
        R(
          H,
          "change",
          /*select_change_handler*/
          l[53]
        ),
        R(
          K,
          "input",
          /*input4_input_handler*/
          l[54]
        ),
        R(
          le,
          "click",
          /*createItem*/
          l[19]
        ),
        R(t, "click", Lt(
          /*click_handler_1*/
          l[25]
        )),
        R(
          e,
          "click",
          /*click_handler_12*/
          l[55]
        )
      ], $ = !0);
    },
    p(ie, ee) {
      if (ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && b.value !== /*newItem*/
      ie[8].name && x(
        b,
        /*newItem*/
        ie[8].name
      ), ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && Je(k.value) !== /*newItem*/
      ie[8].w && x(
        k,
        /*newItem*/
        ie[8].w
      ), ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && Je(S.value) !== /*newItem*/
      ie[8].h && x(
        S,
        /*newItem*/
        ie[8].h
      ), ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && x(
        I,
        /*newItem*/
        ie[8].desc
      ), ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && U.value !== /*newItem*/
      ie[8].type && x(
        U,
        /*newItem*/
        ie[8].type
      ), ee[0] & /*RARITY_COLORS*/
      4194304) {
        Y = ce(Object.keys(
          /*RARITY_COLORS*/
          ie[22]
        ));
        let pe;
        for (pe = 0; pe < Y.length; pe += 1) {
          const Ee = rr(ie, Y, pe);
          Q[pe] ? Q[pe].p(Ee, ee) : (Q[pe] = _r(Ee), Q[pe].c(), Q[pe].m(H, null));
        }
        for (; pe < Q.length; pe += 1)
          Q[pe].d(1);
        Q.length = Y.length;
      }
      ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && ot(
        H,
        /*newItem*/
        ie[8].rarity
      ), ee[0] & /*newItem, RARITY_COLORS*/
      4194560 && K.value !== /*newItem*/
      ie[8].img && x(
        K,
        /*newItem*/
        ie[8].img
      );
    },
    d(ie) {
      ie && P(e), Fe(Q, ie), $ = !1, Te(se);
    }
  };
}
function _r(l) {
  let e, t = (
    /*r*/
    l[61] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[61], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function kr(l) {
  let e, t;
  return e = new Hb({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      onClose: (
        /*func_4*/
        l[56]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n[0] & /*showCrafting*/
      8 && (o.onClose = /*func_4*/
      i[56]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Wb(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*actor*/
    l[0].name + ""
  ), h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De = [], we = /* @__PURE__ */ new Map(), ke, me, re, ye, oe, be, de = (
    /*stashItems*/
    l[10].length + ""
  ), Oe, _e, ue, Re = [], Ce = /* @__PURE__ */ new Map(), He, Ge, Xe, fe, Le, qe, Me, Se = (
    /*isGM*/
    l[11] && zb(l)
  ), ve = (
    /*selectedItem*/
    l[5] && /*selectedItem*/
    l[5].stored && ur(l)
  ), Ue = ce(Array(
    /*TOTAL_SLOTS*/
    l[12]
  )), Ve = [];
  for (let Pe = 0; Pe < Ue.length; Pe += 1)
    Ve[Pe] = mr(dr(l, Ue, Pe));
  let rt = ce(
    /*gridItems*/
    l[9]
  );
  const Tt = (Pe) => (
    /*item*/
    Pe[64].id
  );
  for (let Pe = 0; Pe < rt.length; Pe += 1) {
    let je = fr(l, rt, Pe), xe = Tt(je);
    we.set(xe, De[Pe] = br(xe, je));
  }
  let ze = ce(
    /*stashItems*/
    l[10]
  );
  const it = (Pe) => (
    /*item*/
    Pe[64].id
  );
  for (let Pe = 0; Pe < ze.length; Pe += 1) {
    let je = cr(l, ze, Pe), xe = it(je);
    Ce.set(xe, Re[Pe] = vr(xe, je));
  }
  let Ze = (
    /*selectedItem*/
    l[5] && hr(l)
  ), ut = (
    /*showCreator*/
    l[4] && gr(l)
  ), Be = (
    /*showCrafting*/
    l[3] && kr(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = g(), c = r("header"), f = r("div"), u = r("i"), d = g(), p = r("div"), m = r("h1"), m.textContent = "INVENT√ÅRIO", b = r("small"), h = B(v), _ = g(), w = r("div"), k = r("div"), A = r("label"), A.textContent = "SLOTS", y = g(), E = r("div"), S = r("div"), O = g(), C = r("span"), T = B(
        /*unlockedSlots*/
        l[7]
      ), N = B("/"), I = B(
        /*TOTAL_SLOTS*/
        l[12]
      ), D = g(), M = r("div"), G = r("div"), L = r("label"), L.textContent = "CORPO", U = g(), z = r("input"), F = g(), W = r("div"), H = r("label"), H.textContent = "MODS", V = g(), J = r("input"), j = g(), X = r("div"), K = r("button"), K.innerHTML = '<i class="fas fa-hammer"></i>', Z = g(), Se && Se.c(), le = g(), ve && ve.c(), $ = g(), se = r("div"), Y = r("div"), Q = r("div"), ie = r("div"), ee = r("div");
      for (let Pe = 0; Pe < Ve.length; Pe += 1)
        Ve[Pe].c();
      pe = g(), Ee = r("div");
      for (let Pe = 0; Pe < De.length; Pe += 1)
        De[Pe].c();
      ke = g(), me = r("div"), re = r("div"), ye = r("span"), ye.textContent = "ITENS FORA DO INVENT√ÅRIO", oe = g(), be = r("span"), Oe = B(de), _e = g(), ue = r("div");
      for (let Pe = 0; Pe < Re.length; Pe += 1)
        Re[Pe].c();
      He = g(), Ze && Ze.c(), Ge = g(), ut && ut.c(), Xe = g(), Be && Be.c(), s(t, "class", "scanlines svelte-1akbgio"), s(n, "class", "vignette svelte-1akbgio"), s(u, "class", "fas fa-box-open pulse svelte-1akbgio"), s(m, "class", "svelte-1akbgio"), s(b, "class", "svelte-1akbgio"), s(p, "class", "os-titles svelte-1akbgio"), s(f, "class", "os-brand svelte-1akbgio"), s(A, "class", "svelte-1akbgio"), s(S, "class", "bar-fill svelte-1akbgio"), ae(
        S,
        "width",
        /*unlockedSlots*/
        l[7] / /*TOTAL_SLOTS*/
        l[12] * 100 + "%"
      ), s(E, "class", "bar-track svelte-1akbgio"), s(C, "class", "stat-val svelte-1akbgio"), s(k, "class", "stat-module svelte-1akbgio"), s(L, "class", "svelte-1akbgio"), s(z, "type", "number"), z.value = /*localBody*/
      l[1], z.disabled = !/*isGM*/
      l[11], s(z, "class", "svelte-1akbgio"), s(G, "class", "input-grp svelte-1akbgio"), s(H, "class", "svelte-1akbgio"), s(J, "type", "number"), J.value = /*localBoosters*/
      l[2], J.disabled = !/*isGM*/
      l[11], s(J, "class", "svelte-1akbgio"), s(W, "class", "input-grp svelte-1akbgio"), s(M, "class", "stat-inputs svelte-1akbgio"), s(w, "class", "os-stats svelte-1akbgio"), s(K, "class", "action-btn svelte-1akbgio"), s(X, "class", "os-actions svelte-1akbgio"), s(c, "class", "os-header svelte-1akbgio"), s(ee, "class", "slots-layer svelte-1akbgio"), s(Ee, "class", "items-layer svelte-1akbgio"), s(ie, "class", "inventory-stage svelte-1akbgio"), ae(ie, "width", Pi * (kl + ll) + "px"), ae(ie, "height", cs * (kl + ll) + "px"), s(Q, "class", "grid-frame svelte-1akbgio"), s(Y, "class", "grid-panel svelte-1akbgio"), s(be, "class", "count-badge svelte-1akbgio"), s(re, "class", "stash-header svelte-1akbgio"), s(ue, "class", "stash-grid custom-scroll svelte-1akbgio"), s(me, "class", "stash-panel svelte-1akbgio"), s(se, "class", "main-stage svelte-1akbgio"), s(e, "class", "nexus-os svelte-1akbgio");
    },
    m(Pe, je) {
      q(Pe, e, je), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(c, f), a(f, u), a(f, d), a(f, p), a(p, m), a(p, b), a(b, h), a(c, _), a(c, w), a(w, k), a(k, A), a(k, y), a(k, E), a(E, S), a(k, O), a(k, C), a(C, T), a(C, N), a(C, I), a(w, D), a(w, M), a(M, G), a(G, L), a(G, U), a(G, z), a(M, F), a(M, W), a(W, H), a(W, V), a(W, J), a(c, j), a(c, X), a(X, K), a(X, Z), Se && Se.m(X, null), a(X, le), ve && ve.m(X, null), a(e, $), a(e, se), a(se, Y), a(Y, Q), a(Q, ie), a(ie, ee);
      for (let xe = 0; xe < Ve.length; xe += 1)
        Ve[xe] && Ve[xe].m(ee, null);
      a(ie, pe), a(ie, Ee);
      for (let xe = 0; xe < De.length; xe += 1)
        De[xe] && De[xe].m(Ee, null);
      a(se, ke), a(se, me), a(me, re), a(re, ye), a(re, oe), a(re, be), a(be, Oe), a(me, _e), a(me, ue);
      for (let xe = 0; xe < Re.length; xe += 1)
        Re[xe] && Re[xe].m(ue, null);
      a(e, He), Ze && Ze.m(e, null), a(e, Ge), ut && ut.m(e, null), a(e, Xe), Be && Be.m(e, null), Le = !0, qe || (Me = [
        R(
          window,
          "keydown",
          /*handleKeydown*/
          l[18]
        ),
        R(
          z,
          "change",
          /*change_handler*/
          l[28]
        ),
        R(
          J,
          "change",
          /*change_handler_1*/
          l[29]
        ),
        R(
          K,
          "click",
          /*click_handler_2*/
          l[30]
        ),
        R(ie, "dragover", yr),
        R(
          ie,
          "drop",
          /*handleDropOnGrid*/
          l[14]
        ),
        R(
          ie,
          "click",
          /*click_handler_5*/
          l[36]
        ),
        R(me, "dragover", yr),
        R(
          me,
          "drop",
          /*handleDropOnStash*/
          l[15]
        ),
        R(
          me,
          "click",
          /*click_handler_6*/
          l[40]
        )
      ], qe = !0);
    },
    p(Pe, je) {
      if ((!Le || je[0] & /*actor*/
      1) && v !== (v = /*actor*/
      Pe[0].name + "") && te(h, v), (!Le || je[0] & /*unlockedSlots*/
      128) && ae(
        S,
        "width",
        /*unlockedSlots*/
        Pe[7] / /*TOTAL_SLOTS*/
        Pe[12] * 100 + "%"
      ), (!Le || je[0] & /*unlockedSlots*/
      128) && te(
        T,
        /*unlockedSlots*/
        Pe[7]
      ), (!Le || je[0] & /*localBody*/
      2 && z.value !== /*localBody*/
      Pe[1]) && (z.value = /*localBody*/
      Pe[1]), (!Le || je[0] & /*localBoosters*/
      4 && J.value !== /*localBoosters*/
      Pe[2]) && (J.value = /*localBoosters*/
      Pe[2]), /*isGM*/
      Pe[11] && Se.p(Pe, je), /*selectedItem*/
      Pe[5] && /*selectedItem*/
      Pe[5].stored ? ve ? ve.p(Pe, je) : (ve = ur(Pe), ve.c(), ve.m(X, null)) : ve && (ve.d(1), ve = null), je[0] & /*unlockedSlots*/
      128) {
        Ue = ce(Array(
          /*TOTAL_SLOTS*/
          Pe[12]
        ));
        let xe;
        for (xe = 0; xe < Ue.length; xe += 1) {
          const St = dr(Pe, Ue, xe);
          Ve[xe] ? Ve[xe].p(St, je) : (Ve[xe] = mr(St), Ve[xe].c(), Ve[xe].m(ee, null));
        }
        for (; xe < Ve.length; xe += 1)
          Ve[xe].d(1);
        Ve.length = Ue.length;
      }
      je[0] & /*gridItems, selectedItem, handleDragStart, isEditing, isGM, updateItemLocal, deleteItem*/
      1124960 && (rt = ce(
        /*gridItems*/
        Pe[9]
      ), $e(), De = Tl(De, je, Tt, 1, Pe, rt, we, Ee, Ya, br, null, fr), et()), (!Le || je[0] & /*stashItems*/
      1024) && de !== (de = /*stashItems*/
      Pe[10].length + "") && te(Oe, de), je[0] & /*handleDragStart, stashItems, isGM, selectedItem, isEditing, updateItemLocal, deleteItem*/
      1125472 && (ze = ce(
        /*stashItems*/
        Pe[10]
      ), $e(), Re = Tl(Re, je, it, 1, Pe, ze, Ce, ue, Ya, vr, null, cr), et()), /*selectedItem*/
      Pe[5] ? Ze ? (Ze.p(Pe, je), je[0] & /*selectedItem*/
      32 && ne(Ze, 1)) : (Ze = hr(Pe), Ze.c(), ne(Ze, 1), Ze.m(e, Ge)) : Ze && ($e(), Ae(Ze, 1, 1, () => {
        Ze = null;
      }), et()), /*showCreator*/
      Pe[4] ? ut ? ut.p(Pe, je) : (ut = gr(Pe), ut.c(), ut.m(e, Xe)) : ut && (ut.d(1), ut = null), /*showCrafting*/
      Pe[3] ? Be ? (Be.p(Pe, je), je[0] & /*showCrafting*/
      8 && ne(Be, 1)) : (Be = kr(Pe), Be.c(), ne(Be, 1), Be.m(e, null)) : Be && ($e(), Ae(Be, 1, 1, () => {
        Be = null;
      }), et());
    },
    i(Pe) {
      if (!Le) {
        for (let je = 0; je < rt.length; je += 1)
          ne(De[je]);
        for (let je = 0; je < ze.length; je += 1)
          ne(Re[je]);
        ne(Ze), ne(Be), Pe && (fe || Ne(() => {
          fe = st(e, Qe, { duration: 300 }), fe.start();
        })), Le = !0;
      }
    },
    o(Pe) {
      for (let je = 0; je < De.length; je += 1)
        Ae(De[je]);
      for (let je = 0; je < Re.length; je += 1)
        Ae(Re[je]);
      Ae(Ze), Ae(Be), Le = !1;
    },
    d(Pe) {
      Pe && P(e), Se && Se.d(), ve && ve.d(), Fe(Ve, Pe);
      for (let je = 0; je < De.length; je += 1)
        De[je].d();
      for (let je = 0; je < Re.length; je += 1)
        Re[je].d();
      Ze && Ze.d(), ut && ut.d(), Be && Be.d(), qe = !1, Te(Me);
    }
  };
}
const Pi = 8, cs = 5, kl = 50, ll = 4;
function wr(l) {
  if (!l) return "";
  if (l.includes("&lt;")) {
    const e = document.createElement("textarea");
    return e.innerHTML = l, e.value;
  }
  return l;
}
function yr(l) {
  l.preventDefault(), l.dataTransfer.dropEffect = "move";
}
function Xb(l, e, t) {
  let i, n, { actor: o } = e, { isLeader: c } = e;
  const f = game.user.isGM, u = Pi * cs, d = (Ce, He, Ge = 0) => foundry.utils.getProperty(Ce, He) || Ge;
  let p = d(o, "flags.multiversus-rpg.inventory", []), m = d(o, "system.stats.body") || d(o, "flags.multiversus-rpg.tempBody", 0), b = d(o, "flags.multiversus-rpg.invBoosters", 0), v = !1, h = !1, _ = null, w = !1, k = 0;
  qt(async () => {
    f && await xl.init();
    const Ce = Hooks.on("updateActor", (He, Ge, Xe, fe) => {
      if (He.id !== o.id || fe === game.user.id) return;
      if (foundry.utils.hasProperty(Ge, "flags.multiversus-rpg.inventory") && (t(24, p = foundry.utils.getProperty(Ge, "flags.multiversus-rpg.inventory")), _)) {
        const Me = p.find((Se) => Se.id === _.id);
        Me && t(5, _ = Me);
      }
      const Le = foundry.utils.getProperty(Ge, "system.stats.body") ?? foundry.utils.getProperty(Ge, "flags.multiversus-rpg.tempBody");
      Le !== void 0 && t(1, m = Le);
      const qe = foundry.utils.getProperty(Ge, "flags.multiversus-rpg.invBoosters");
      qe !== void 0 && t(2, b = qe);
    });
    return () => Hooks.off("updateActor", Ce);
  });
  let A = null, y = { x: 0, y: 0 };
  function E(Ce, He, Ge) {
    if (A = { ...He }, Ge === "grid") {
      const fe = Ce.target.closest(".item-container");
      if (fe) {
        const Le = fe.getBoundingClientRect();
        y = {
          x: Math.floor((Ce.clientX - Le.left) / (kl + ll)),
          y: Math.floor((Ce.clientY - Le.top) / (kl + ll))
        };
      }
    } else
      y = { x: 0, y: 0 };
    const Xe = new Image();
    Xe.src = "", Ce.dataTransfer.setDragImage(Xe, 0, 0), Ce.dataTransfer.effectAllowed = "move";
  }
  async function S(Ce) {
    if (Ce.preventDefault(), !A) return;
    const He = Ce.currentTarget.getBoundingClientRect(), Ge = Math.max(0, Math.floor((Ce.clientX - He.left) / (kl + ll)) - y.x), Xe = Math.max(0, Math.floor((Ce.clientY - He.top) / (kl + ll)) - y.y);
    if (!T(Ge, Xe, A.w, A.h, A.id))
      return ui.notifications.warn("Bloqueado ou Sem Espa√ßo.");
    C(A.id, { x: Ge, y: Xe, stored: !0 }), A = null;
  }
  async function O(Ce) {
    Ce.preventDefault(), A && (A.stored && C(A.id, { stored: !1, x: 0, y: 0 }), A = null);
  }
  async function C(Ce, He) {
    const Ge = p.findIndex((fe) => fe.id === Ce);
    if (Ge === -1) return;
    const Xe = [...p];
    Xe[Ge] = { ...Xe[Ge], ...He }, t(24, p = Xe), _ && _.id === Ce && t(5, _ = Xe[Ge]), await o.update(
      {
        "flags.multiversus-rpg.inventory": Xe
      },
      { render: !1 }
    );
  }
  function T(Ce, He, Ge, Xe, fe = null) {
    if (Ce + Ge > Pi || He + Xe > cs) return !1;
    for (let Le = 0; Le < Xe; Le++)
      for (let qe = 0; qe < Ge; qe++)
        if ((He + Le) * Pi + (Ce + qe) >= k || i.some((ve) => ve.id !== fe && Ce + qe >= ve.x && Ce + qe < ve.x + ve.w && He + Le >= ve.y && He + Le < ve.y + ve.h)) return !1;
    return !0;
  }
  function N() {
    if (!_ || !_.stored) return;
    const Ce = _.h, He = _.w;
    T(_.x, _.y, Ce, He, _.id) ? C(_.id, { w: Ce, h: He }) : ui.notifications.warn(
      "Obstru√ß√£o detectada."
    );
  }
  function I(Ce) {
    (Ce.key === "r" || Ce.key === "R") && _ && N(), Ce.key === "Escape" && (t(5, _ = null), t(4, h = !1), t(3, v = !1), t(6, w = !1));
  }
  let D = {
    name: "",
    type: "Recurso",
    rarity: "Comum",
    img: "",
    desc: "",
    qty: 1,
    w: 1,
    h: 1
  };
  async function M() {
    if (!D.name) return;
    const Ce = {
      id: foundry.utils.randomID(),
      ...D,
      img: D.img || "icons/svg/item-bag.svg",
      stored: !1
    };
    t(24, p = [...p, Ce]), await o.update(
      {
        "flags.multiversus-rpg.inventory": p
      },
      { render: !1 }
    ), t(4, h = !1), t(8, D = {
      name: "",
      type: "Recurso",
      rarity: "Comum",
      img: "",
      desc: "",
      qty: 1,
      w: 1,
      h: 1
    });
  }
  async function G(Ce) {
    Ce && (t(5, _ = null), t(6, w = !1), t(24, p = p.filter((He) => He.id !== Ce)), await o.update(
      {
        "flags.multiversus-rpg.inventory": p
      },
      { render: !1 }
    ));
  }
  async function L(Ce, He) {
    const Ge = parseInt(He) || 0, Xe = {};
    Ce === "body" ? (t(1, m = Ge), o.system.stats ? Xe["system.stats.body"] = Ge : Xe["flags.multiversus-rpg.tempBody"] = Ge) : (t(2, b = Ge), Xe["flags.multiversus-rpg.invBoosters"] = Ge), await o.update(Xe, { render: !1 });
  }
  const U = {
    Comum: "#a0a0a0",
    Incomum: "#10b981",
    Raro: "#00bfff",
    √âpico: "#8b5cf6",
    Lend√°rio: "#ffa500",
    M√≠tico: "#ff4500",
    Universal: "#ffffff",
    Multiversal: "#d000ff"
  };
  function z(Ce) {
    Ol.call(this, l, Ce);
  }
  function F(Ce) {
    Ol.call(this, l, Ce);
  }
  function W(Ce) {
    Ol.call(this, l, Ce);
  }
  const H = (Ce) => L("body", Ce.target.value), V = (Ce) => L("booster", Ce.target.value), J = () => t(3, v = !0), j = () => t(4, h = !0), X = (Ce) => {
    t(5, _ = Ce), t(6, w = !1);
  }, K = (Ce) => G(Ce.id), Z = (Ce, He) => E(He, Ce, "grid"), le = (Ce) => {
    t(5, _ = Ce), t(6, w = !1);
  }, $ = () => {
    t(5, _ = null), t(6, w = !1);
  }, se = (Ce) => {
    t(5, _ = Ce), t(6, w = !1);
  }, Y = (Ce) => G(Ce.id), Q = (Ce, He) => E(He, Ce, "stash"), ie = () => {
    t(5, _ = null), t(6, w = !1);
  }, ee = () => {
    t(5, _ = null), t(6, w = !1);
  }, pe = (Ce) => C(_.id, { desc: Ce.target.value }), Ee = (Ce) => C(_.id, { qty: parseInt(Ce.target.value) }), De = () => t(6, w = !w), we = () => G(_.id), ke = () => {
    t(5, _ = null), t(6, w = !1);
  }, me = () => t(4, h = !1);
  function re() {
    D.name = this.value, t(8, D), t(22, U);
  }
  function ye() {
    D.w = Je(this.value), t(8, D), t(22, U);
  }
  function oe() {
    D.h = Je(this.value), t(8, D), t(22, U);
  }
  function be() {
    D.desc = this.value, t(8, D), t(22, U);
  }
  function de() {
    D.type = this.value, t(8, D), t(22, U);
  }
  function Oe() {
    D.rarity = Gt(this), t(8, D), t(22, U);
  }
  function _e() {
    D.img = this.value, t(8, D), t(22, U);
  }
  const ue = () => t(4, h = !1), Re = () => t(3, v = !1);
  return l.$$set = (Ce) => {
    "actor" in Ce && t(0, o = Ce.actor), "isLeader" in Ce && t(23, c = Ce.isLeader);
  }, l.$$.update = () => {
    if (l.$$.dirty[0] & /*localBody, localBoosters*/
    6) {
      const Ce = parseInt(m) || 0, He = parseInt(b) || 0;
      t(7, k = Math.min(u, 10 + Ce * 2 + He * 5));
    }
    l.$$.dirty[0] & /*localItems*/
    16777216 && t(9, i = p.filter((Ce) => Ce.stored === !0)), l.$$.dirty[0] & /*localItems*/
    16777216 && t(10, n = p.filter((Ce) => Ce.stored !== !0));
  }, [
    o,
    m,
    b,
    v,
    h,
    _,
    w,
    k,
    D,
    i,
    n,
    f,
    u,
    E,
    S,
    O,
    C,
    N,
    I,
    M,
    G,
    L,
    U,
    c,
    p,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re
  ];
}
class Jb extends mt {
  constructor(e) {
    super(), pt(this, e, Xb, Wb, dt, { actor: 0, isLeader: 23 }, null, [-1, -1, -1]);
  }
}
function Ar(l, e, t) {
  const i = l.slice();
  return i[51] = e[t], i[52] = e, i[53] = t, i;
}
function Er(l, e, t) {
  const i = l.slice();
  return i[54] = e[t], i[55] = e, i[56] = t, i;
}
function Or(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "ALTERAR √çCONE", n = g(), o = r("div"), c = r("input"), f = g(), u = r("button"), u.innerHTML = '<i class="fas fa-folder-open"></i>', d = g(), p = r("div"), m = r("button"), m.textContent = "CANCELAR", b = g(), v = r("button"), v.textContent = "SALVAR", s(i, "class", "svelte-v2hf49"), s(c, "type", "text"), s(c, "placeholder", "Cole a URL da imagem..."), s(c, "class", "svelte-v2hf49"), s(u, "class", "svelte-v2hf49"), s(o, "class", "input-row svelte-v2hf49"), s(m, "class", "cancel svelte-v2hf49"), s(v, "class", "save svelte-v2hf49"), s(p, "class", "modal-actions svelte-v2hf49"), s(t, "class", "modal-box svelte-v2hf49"), s(e, "class", "modal-overlay svelte-v2hf49");
    },
    m(A, y) {
      q(A, e, y), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), x(
        c,
        /*tempIconUrl*/
        l[8]
      ), a(o, f), a(o, u), a(t, d), a(t, p), a(p, m), a(p, b), a(p, v), _ = !0, w || (k = [
        R(
          c,
          "input",
          /*input_input_handler*/
          l[25]
        ),
        R(
          u,
          "click",
          /*openFilePicker*/
          l[18]
        ),
        R(
          m,
          "click",
          /*click_handler_1*/
          l[26]
        ),
        R(
          v,
          "click",
          /*saveIcon*/
          l[17]
        )
      ], w = !0);
    },
    p(A, y) {
      y[0] & /*tempIconUrl*/
      256 && c.value !== /*tempIconUrl*/
      A[8] && x(
        c,
        /*tempIconUrl*/
        A[8]
      );
    },
    i(A) {
      _ || (A && Ne(() => {
        _ && (h || (h = We(e, Qe, {}, !0)), h.run(1));
      }), _ = !0);
    },
    o(A) {
      A && (h || (h = We(e, Qe, {}, !1)), h.run(0)), _ = !1;
    },
    d(A) {
      A && P(e), A && h && h.end(), w = !1, Te(k);
    }
  };
}
function Sr(l) {
  let e, t, i, n, o, c, f, u, d = (
    /*ATTR_CONFIG*/
    l[11][
      /*key*/
      l[51]
    ].label + ""
  ), p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G;
  function L(Z, le) {
    return (
      /*isGM*/
      Z[10] ? Qb : Yb
    );
  }
  let z = L(l)(l);
  function F(Z, le) {
    return (
      /*isGM*/
      Z[10] ? Zb : Kb
    );
  }
  let H = F(l)(l);
  function V(Z, le) {
    return (
      /*isGM*/
      Z[10] ? $b : xb
    );
  }
  let j = V(l)(l);
  function X() {
    return (
      /*click_handler_5*/
      l[33](
        /*key*/
        l[51]
      )
    );
  }
  let K = (
    /*expandedStats*/
    l[6][
      /*key*/
      l[51]
    ] && Cr(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("div"), o = r("i"), f = g(), u = r("span"), p = B(d), m = g(), b = r("div"), v = r("div"), h = r("i"), _ = g(), z.c(), w = g(), k = r("div"), A = r("i"), y = g(), H.c(), E = g(), S = r("div"), O = r("i"), C = g(), j.c(), T = g(), N = r("i"), I = g(), K && K.c(), D = g(), s(o, "class", c = "fas " + /*ATTR_CONFIG*/
      l[11][
        /*key*/
        l[51]
      ].icon + " svelte-v2hf49"), s(n, "class", "icon-box svelte-v2hf49"), s(u, "class", "label svelte-v2hf49"), s(i, "class", "head-title svelte-v2hf49"), s(h, "class", "fas fa-cube svelte-v2hf49"), s(v, "class", "die-group normal svelte-v2hf49"), s(A, "class", "fas fa-square svelte-v2hf49"), s(k, "class", "die-group hard svelte-v2hf49"), he(
        k,
        "active",
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].hard > 0
      ), s(O, "class", "fas fa-star svelte-v2hf49"), s(S, "class", "die-group wiggle svelte-v2hf49"), he(
        S,
        "active",
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].wiggle > 0
      ), s(b, "class", "head-dice svelte-v2hf49"), s(N, "class", "fas fa-chevron-down arrow svelte-v2hf49"), he(
        N,
        "rot",
        /*expandedStats*/
        l[6][
          /*key*/
          l[51]
        ]
      ), s(t, "class", "stat-head svelte-v2hf49"), s(e, "class", "stat-block svelte-v2hf49"), he(
        e,
        "open",
        /*expandedStats*/
        l[6][
          /*key*/
          l[51]
        ]
      );
    },
    m(Z, le) {
      q(Z, e, le), a(e, t), a(t, i), a(i, n), a(n, o), a(i, f), a(i, u), a(u, p), a(t, m), a(t, b), a(b, v), a(v, h), a(v, _), z.m(v, null), a(b, w), a(b, k), a(k, A), a(k, y), H.m(k, null), a(b, E), a(b, S), a(S, O), a(S, C), j.m(S, null), a(t, T), a(t, N), a(e, I), K && K.m(e, null), a(e, D), M || (G = [
        R(b, "click", Lt(
          /*click_handler*/
          l[24]
        )),
        R(t, "click", X)
      ], M = !0);
    },
    p(Z, le) {
      l = Z, le[0] & /*statKeys*/
      8 && c !== (c = "fas " + /*ATTR_CONFIG*/
      l[11][
        /*key*/
        l[51]
      ].icon + " svelte-v2hf49") && s(o, "class", c), le[0] & /*statKeys*/
      8 && d !== (d = /*ATTR_CONFIG*/
      l[11][
        /*key*/
        l[51]
      ].label + "") && te(p, d), z.p(l, le), H.p(l, le), le[0] & /*stats, statKeys*/
      24 && he(
        k,
        "active",
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].hard > 0
      ), j.p(l, le), le[0] & /*stats, statKeys*/
      24 && he(
        S,
        "active",
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].wiggle > 0
      ), le[0] & /*expandedStats, statKeys*/
      72 && he(
        N,
        "rot",
        /*expandedStats*/
        l[6][
          /*key*/
          l[51]
        ]
      ), /*expandedStats*/
      l[6][
        /*key*/
        l[51]
      ] ? K ? (K.p(l, le), le[0] & /*expandedStats, statKeys*/
      72 && ne(K, 1)) : (K = Cr(l), K.c(), ne(K, 1), K.m(e, D)) : K && ($e(), Ae(K, 1, 1, () => {
        K = null;
      }), et()), le[0] & /*expandedStats, statKeys*/
      72 && he(
        e,
        "open",
        /*expandedStats*/
        l[6][
          /*key*/
          l[51]
        ]
      );
    },
    d(Z) {
      Z && P(e), z.d(), H.d(), j.d(), K && K.d(), M = !1, Te(G);
    }
  };
}
function Yb(l) {
  let e, t = (
    /*stats*/
    l[4][
      /*key*/
      l[51]
    ].normal + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_2*/
      l[28](
        /*key*/
        l[51]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), o.textContent = "+", s(e, "class", "die-val svelte-v2hf49"), s(o, "class", "btn-buy svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*stats, statKeys*/
      24 && t !== (t = /*stats*/
      l[4][
        /*key*/
        l[51]
      ].normal + "") && te(i, t);
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function Qb(l) {
  let e, t, i;
  function n() {
    l[27].call(
      e,
      /*key*/
      l[51]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].normal
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*stats, statKeys*/
      24 && Je(e.value) !== /*stats*/
      l[4][
        /*key*/
        l[51]
      ].normal && x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].normal
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function Kb(l) {
  let e, t = (
    /*stats*/
    l[4][
      /*key*/
      l[51]
    ].hard + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_3*/
      l[30](
        /*key*/
        l[51]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), o.textContent = "+", s(e, "class", "die-val svelte-v2hf49"), s(o, "class", "btn-buy svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*stats, statKeys*/
      24 && t !== (t = /*stats*/
      l[4][
        /*key*/
        l[51]
      ].hard + "") && te(i, t);
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function Zb(l) {
  let e, t, i;
  function n() {
    l[29].call(
      e,
      /*key*/
      l[51]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].hard
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*stats, statKeys*/
      24 && Je(e.value) !== /*stats*/
      l[4][
        /*key*/
        l[51]
      ].hard && x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].hard
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function xb(l) {
  let e, t = (
    /*stats*/
    l[4][
      /*key*/
      l[51]
    ].wiggle + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_4*/
      l[32](
        /*key*/
        l[51]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), o.textContent = "+", s(e, "class", "die-val svelte-v2hf49"), s(o, "class", "btn-buy svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*stats, statKeys*/
      24 && t !== (t = /*stats*/
      l[4][
        /*key*/
        l[51]
      ].wiggle + "") && te(i, t);
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function $b(l) {
  let e, t, i;
  function n() {
    l[31].call(
      e,
      /*key*/
      l[51]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].wiggle
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*stats, statKeys*/
      24 && Je(e.value) !== /*stats*/
      l[4][
        /*key*/
        l[51]
      ].wiggle && x(
        e,
        /*stats*/
        l[4][
          /*key*/
          l[51]
        ].wiggle
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function Cr(l) {
  let e, t, i, n, o, c, f, u, d = ce(
    /*skills*/
    l[5][
      /*key*/
      l[51]
    ]
  ), p = [];
  for (let b = 0; b < d.length; b += 1)
    p[b] = Ir(Er(l, d, b));
  function m() {
    return (
      /*click_handler_11*/
      l[43](
        /*key*/
        l[51]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div");
      for (let b = 0; b < p.length; b += 1)
        p[b].c();
      i = g(), n = r("button"), n.innerHTML = '<i class="fas fa-plus"></i> NOVA PER√çCIA', s(n, "class", "btn-add-skill svelte-v2hf49"), s(t, "class", "skills-grid svelte-v2hf49"), s(e, "class", "stat-body svelte-v2hf49");
    },
    m(b, v) {
      q(b, e, v), a(e, t);
      for (let h = 0; h < p.length; h += 1)
        p[h] && p[h].m(t, null);
      a(t, i), a(t, n), c = !0, f || (u = R(n, "click", m), f = !0);
    },
    p(b, v) {
      if (l = b, v[0] & /*removeSkill, statKeys, skills, gmUpdate, isGM, buyDie, openIconEditor*/
      111656) {
        d = ce(
          /*skills*/
          l[5][
            /*key*/
            l[51]
          ]
        );
        let h;
        for (h = 0; h < d.length; h += 1) {
          const _ = Er(l, d, h);
          p[h] ? (p[h].p(_, v), ne(p[h], 1)) : (p[h] = Ir(_), p[h].c(), ne(p[h], 1), p[h].m(t, i));
        }
        for (; h < p.length; h += 1)
          p[h].d(1);
        p.length = d.length;
      }
    },
    i(b) {
      if (!c) {
        for (let v = 0; v < d.length; v += 1)
          ne(p[v]);
        b && Ne(() => {
          c && (o || (o = We(e, yt, { duration: 200, easing: Dl }, !0)), o.run(1));
        }), c = !0;
      }
    },
    o(b) {
      b && (o || (o = We(e, yt, { duration: 200, easing: Dl }, !1)), o.run(0)), c = !1;
    },
    d(b) {
      b && P(e), Fe(p, b), b && o && o.end(), f = !1, u();
    }
  };
}
function ev(l) {
  let e, t;
  return {
    c() {
      e = r("i"), s(e, "class", t = "fas " + Dr(
        /*skill*/
        l[54].name
      ) + " skill-fa svelte-v2hf49");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n[0] & /*skills, statKeys*/
      40 && t !== (t = "fas " + Dr(
        /*skill*/
        i[54].name
      ) + " skill-fa svelte-v2hf49") && s(e, "class", t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function tv(l) {
  let e, t;
  return {
    c() {
      e = r("img"), at(e.src, t = /*skill*/
      l[54].img) || s(e, "src", t), s(e, "alt", "icon"), s(e, "class", "custom-icon svelte-v2hf49");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n[0] & /*skills, statKeys*/
      40 && !at(e.src, t = /*skill*/
      i[54].img) && s(e, "src", t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function lv(l) {
  let e, t = (
    /*skill*/
    l[54].name + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "skill-name svelte-v2hf49");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*skills, statKeys*/
      40 && t !== (t = /*skill*/
      n[54].name + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function av(l) {
  let e, t, i;
  function n() {
    l[35].call(
      e,
      /*each_value_1*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "skill-name-edit svelte-v2hf49"), s(e, "type", "text");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*skill*/
        l[54].name
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*skills, statKeys*/
      40 && e.value !== /*skill*/
      l[54].name && x(
        e,
        /*skill*/
        l[54].name
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function iv(l) {
  let e, t = (
    /*skill*/
    l[54].normal + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_7*/
      l[37](
        /*skill*/
        l[54]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), s(e, "class", "val-d svelte-v2hf49"), s(o, "class", "btn-up svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*skills, statKeys*/
      40 && t !== (t = /*skill*/
      l[54].normal + "") && te(i, t);
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function sv(l) {
  let e, t, i;
  function n() {
    l[36].call(
      e,
      /*each_value_1*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input mini svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*skill*/
        l[54].normal
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*skills, statKeys*/
      40 && Je(e.value) !== /*skill*/
      l[54].normal && x(
        e,
        /*skill*/
        l[54].normal
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function nv(l) {
  let e, t = (
    /*skill*/
    l[54].hard + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_8*/
      l[39](
        /*skill*/
        l[54]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), s(e, "class", "val-d svelte-v2hf49"), he(
        e,
        "on",
        /*skill*/
        l[54].hard > 0
      ), s(o, "class", "btn-up svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*skills, statKeys*/
      40 && t !== (t = /*skill*/
      l[54].hard + "") && te(i, t), p[0] & /*skills, statKeys*/
      40 && he(
        e,
        "on",
        /*skill*/
        l[54].hard > 0
      );
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function ov(l) {
  let e, t, i;
  function n() {
    l[38].call(
      e,
      /*each_value_1*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input mini svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*skill*/
        l[54].hard
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*skills, statKeys*/
      40 && Je(e.value) !== /*skill*/
      l[54].hard && x(
        e,
        /*skill*/
        l[54].hard
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function rv(l) {
  let e, t = (
    /*skill*/
    l[54].wiggle + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_9*/
      l[41](
        /*skill*/
        l[54]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), n = g(), o = r("button"), s(e, "class", "val-d svelte-v2hf49"), he(
        e,
        "on",
        /*skill*/
        l[54].wiggle > 0
      ), s(o, "class", "btn-up svelte-v2hf49");
    },
    m(d, p) {
      q(d, e, p), a(e, i), q(d, n, p), q(d, o, p), c || (f = R(o, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*skills, statKeys*/
      40 && t !== (t = /*skill*/
      l[54].wiggle + "") && te(i, t), p[0] & /*skills, statKeys*/
      40 && he(
        e,
        "on",
        /*skill*/
        l[54].wiggle > 0
      );
    },
    d(d) {
      d && (P(e), P(n), P(o)), c = !1, f();
    }
  };
}
function cv(l) {
  let e, t, i;
  function n() {
    l[40].call(
      e,
      /*each_value_1*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("input"), s(e, "class", "gm-input mini svelte-v2hf49"), s(e, "type", "number");
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*skill*/
        l[54].wiggle
      ), t || (i = [
        R(e, "input", n),
        R(
          e,
          "change",
          /*gmUpdate*/
          l[13]
        )
      ], t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*skills, statKeys*/
      40 && Je(e.value) !== /*skill*/
      l[54].wiggle && x(
        e,
        /*skill*/
        l[54].wiggle
      );
    },
    d(o) {
      o && P(e), t = !1, Te(i);
    }
  };
}
function Ir(l) {
  let e, t, i, n, o, c, f, u, d, p = (
    /*skill*/
    l[54].normal * 2 + /*skill*/
    l[54].hard * 4 + /*skill*/
    l[54].wiggle * 8 + ""
  ), m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G;
  function L(ie, ee) {
    return (
      /*skill*/
      ie[54].img ? tv : ev
    );
  }
  let U = L(l), z = U(l);
  function F() {
    return (
      /*click_handler_6*/
      l[34](
        /*key*/
        l[51],
        /*i*/
        l[56]
      )
    );
  }
  function W(ie, ee) {
    return (
      /*isGM*/
      ie[10] || /*skill*/
      ie[54].isCustom ? av : lv
    );
  }
  let H = W(l), V = H(l);
  function J(ie, ee) {
    return (
      /*isGM*/
      ie[10] ? sv : iv
    );
  }
  let X = J(l)(l);
  function K(ie, ee) {
    return (
      /*isGM*/
      ie[10] ? ov : nv
    );
  }
  let le = K(l)(l);
  function $(ie, ee) {
    return (
      /*isGM*/
      ie[10] ? cv : rv
    );
  }
  let Y = $(l)(l);
  function Q() {
    return (
      /*click_handler_10*/
      l[42](
        /*key*/
        l[51],
        /*i*/
        l[56]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), z.c(), i = g(), n = r("div"), n.innerHTML = '<i class="fas fa-pen"></i>', o = g(), c = r("div"), V.c(), f = g(), u = r("div"), d = B("XP: "), m = B(p), b = g(), v = r("div"), h = r("div"), _ = r("span"), _.textContent = "N", w = g(), X.c(), k = g(), A = r("div"), y = r("span"), y.textContent = "H", E = g(), le.c(), S = g(), O = r("div"), C = r("span"), C.textContent = "W", T = g(), Y.c(), N = g(), I = r("button"), I.innerHTML = '<i class="fas fa-trash"></i>', s(n, "class", "edit-overlay svelte-v2hf49"), s(t, "class", "skill-icon-area svelte-v2hf49"), s(u, "class", "skill-cost-badge svelte-v2hf49"), s(c, "class", "skill-main svelte-v2hf49"), s(_, "class", "lbl-d svelte-v2hf49"), s(h, "class", "ctrl-box svelte-v2hf49"), s(y, "class", "lbl-d svelte-v2hf49"), s(A, "class", "ctrl-box h svelte-v2hf49"), s(C, "class", "lbl-d svelte-v2hf49"), s(O, "class", "ctrl-box w svelte-v2hf49"), s(I, "class", "btn-trash svelte-v2hf49"), s(v, "class", "skill-controls svelte-v2hf49"), s(e, "class", "skill-card svelte-v2hf49");
    },
    m(ie, ee) {
      q(ie, e, ee), a(e, t), z.m(t, null), a(t, i), a(t, n), a(e, o), a(e, c), V.m(c, null), a(c, f), a(c, u), a(u, d), a(u, m), a(e, b), a(e, v), a(v, h), a(h, _), a(h, w), X.m(h, null), a(v, k), a(v, A), a(A, y), a(A, E), le.m(A, null), a(v, S), a(v, O), a(O, C), a(O, T), Y.m(O, null), a(v, N), a(v, I), M || (G = [
        R(t, "click", F),
        R(I, "click", Q)
      ], M = !0);
    },
    p(ie, ee) {
      l = ie, U === (U = L(l)) && z ? z.p(l, ee) : (z.d(1), z = U(l), z && (z.c(), z.m(t, i))), H === (H = W(l)) && V ? V.p(l, ee) : (V.d(1), V = H(l), V && (V.c(), V.m(c, f))), ee[0] & /*skills, statKeys*/
      40 && p !== (p = /*skill*/
      l[54].normal * 2 + /*skill*/
      l[54].hard * 4 + /*skill*/
      l[54].wiggle * 8 + "") && te(m, p), X.p(l, ee), le.p(l, ee), Y.p(l, ee);
    },
    i(ie) {
      ie && (D || Ne(() => {
        D = st(e, Qe, {}), D.start();
      }));
    },
    o: ge,
    d(ie) {
      ie && P(e), z.d(), V.d(), X.d(), le.d(), Y.d(), M = !1, Te(G);
    }
  };
}
function Tr(l) {
  let e, t = (
    /*stats*/
    l[4][
      /*key*/
      l[51]
    ] && Sr(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*stats*/
      i[4][
        /*key*/
        i[51]
      ] ? t ? t.p(i, n) : (t = Sr(i), t.c(), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function fv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C = (
    /*iconModalOpen*/
    l[7] && Or(l)
  ), T = ce(
    /*statKeys*/
    l[3]
  ), N = [];
  for (let I = 0; I < T.length; I += 1)
    N[I] = Tr(Ar(l, T, I));
  return {
    c() {
      e = r("div"), C && C.c(), t = g(), i = r("header"), n = r("div"), o = r("div"), c = r("span"), c.textContent = "PONTOS DE FICHA TOTAIS", f = g(), u = r("span"), d = B(
        /*pointsCap*/
        l[2]
      ), p = g(), m = r("div"), b = g(), v = r("div"), h = r("span"), h.textContent = "PONTOS DE FICHA DISPON√çVEL", _ = g(), w = r("span"), k = B(
        /*pointsAvailable*/
        l[9]
      ), A = g(), y = r("div"), E = r("div"), S = g(), O = r("div");
      for (let I = 0; I < N.length; I += 1)
        N[I].c();
      s(c, "class", "lbl svelte-v2hf49"), s(u, "class", "val svelte-v2hf49"), s(o, "class", "xp-col svelte-v2hf49"), s(m, "class", "xp-sep svelte-v2hf49"), s(h, "class", "lbl svelte-v2hf49"), s(w, "class", "val highlight svelte-v2hf49"), he(
        w,
        "debt",
        /*pointsAvailable*/
        l[9] < 0
      ), s(v, "class", "xp-col svelte-v2hf49"), s(n, "class", "xp-info svelte-v2hf49"), s(E, "class", "xp-fill svelte-v2hf49"), ae(E, "width", Math.min(
        100,
        /*totalSpent*/
        l[1] / /*pointsCap*/
        l[2] * 100
      ) + "%"), s(y, "class", "xp-bar-track svelte-v2hf49"), s(i, "class", "xp-header svelte-v2hf49"), s(O, "class", "scroll-area svelte-v2hf49"), s(e, "class", "app-container svelte-v2hf49"), ae(
        e,
        "--theme",
        /*themeColor*/
        l[0]
      );
    },
    m(I, D) {
      q(I, e, D), C && C.m(e, null), a(e, t), a(e, i), a(i, n), a(n, o), a(o, c), a(o, f), a(o, u), a(u, d), a(n, p), a(n, m), a(n, b), a(n, v), a(v, h), a(v, _), a(v, w), a(w, k), a(i, A), a(i, y), a(y, E), a(e, S), a(e, O);
      for (let M = 0; M < N.length; M += 1)
        N[M] && N[M].m(O, null);
    },
    p(I, D) {
      if (/*iconModalOpen*/
      I[7] ? C ? (C.p(I, D), D[0] & /*iconModalOpen*/
      128 && ne(C, 1)) : (C = Or(I), C.c(), ne(C, 1), C.m(e, t)) : C && ($e(), Ae(C, 1, 1, () => {
        C = null;
      }), et()), D[0] & /*pointsCap*/
      4 && te(
        d,
        /*pointsCap*/
        I[2]
      ), D[0] & /*pointsAvailable*/
      512 && te(
        k,
        /*pointsAvailable*/
        I[9]
      ), D[0] & /*pointsAvailable*/
      512 && he(
        w,
        "debt",
        /*pointsAvailable*/
        I[9] < 0
      ), D[0] & /*totalSpent, pointsCap*/
      6 && ae(E, "width", Math.min(
        100,
        /*totalSpent*/
        I[1] / /*pointsCap*/
        I[2] * 100
      ) + "%"), D[0] & /*expandedStats, statKeys, addSkill, skills, removeSkill, gmUpdate, isGM, buyDie, openIconEditor, stats, ATTR_CONFIG*/
      130168) {
        T = ce(
          /*statKeys*/
          I[3]
        );
        let M;
        for (M = 0; M < T.length; M += 1) {
          const G = Ar(I, T, M);
          N[M] ? N[M].p(G, D) : (N[M] = Tr(G), N[M].c(), N[M].m(O, null));
        }
        for (; M < N.length; M += 1)
          N[M].d(1);
        N.length = T.length;
      }
      D[0] & /*themeColor*/
      1 && ae(
        e,
        "--theme",
        /*themeColor*/
        I[0]
      );
    },
    i(I) {
      ne(C);
    },
    o(I) {
      Ae(C);
    },
    d(I) {
      I && P(e), C && C.d(), Fe(N, I);
    }
  };
}
const Qi = "multiversus-rpg", dv = 150;
function Dr(l) {
  const e = l.toLowerCase();
  return e.includes("arma") || e.includes("briga") ? "fa-gavel" : e.includes("esquiva") || e.includes("atletismo") ? "fa-wind" : e.includes("conhecimento") || e.includes("medicina") ? "fa-book-medical" : e.includes("percep√ß√£o") || e.includes("procura") ? "fa-search" : e.includes("mentir") || e.includes("persuas√£o") ? "fa-theater-masks" : "fa-dice-d20";
}
function uv(l, e, t) {
  let i, n, o, c, f, { actor: u } = e, { flags: d = {} } = e, { themeColor: p = "#00ff41" } = e;
  const m = game.user.isGM, b = { normal: 5, hard: 10, wiggle: 20 }, v = { normal: 2, hard: 4, wiggle: 8 }, h = {
    body: { label: "CORPO", icon: "fa-fist-raised" },
    coordination: { label: "COORDENA√á√ÉO", icon: "fa-running" },
    sense: { label: "SENTIDOS", icon: "fa-eye" },
    mind: { label: "MENTE", icon: "fa-brain" },
    charm: { label: "CHARME", icon: "fa-comments" },
    command: { label: "COMANDO", icon: "fa-crown" }
  }, _ = Object.keys(h), w = {
    body: [
      {
        name: "Atletismo",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Briga",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Resist√™ncia",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Bloqueio",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Arma Corpo a Corpo",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ],
    coordination: [
      {
        name: "Esquiva",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Furtividade",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Acrobacias",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Prestidigita√ß√£o",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Pilotagem",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Arma a Dist√¢ncia",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ],
    sense: [
      {
        name: "Empatia",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Percep√ß√£o",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Intui√ß√£o",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Procura",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ],
    mind: [
      {
        name: "Primeiros Socorros",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Conhecimento",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Cultura",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Linguagem",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Medicina",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Navega√ß√£o",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Investigar",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Sobreviv√™ncia",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "T√°tica",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ],
    charm: [
      {
        name: "Mentir",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Persuas√£o",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Performance",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ],
    command: [
      {
        name: "Interrogar",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Intimidar",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Liderar",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      },
      {
        name: "Estabilidade",
        normal: 0,
        hard: 0,
        wiggle: 0,
        img: ""
      }
    ]
  };
  let k = d.stats || {}, A = d.skills || {}, y = {}, E = d.statsCost || 0, S = !1, O = { key: null, index: null }, C = "";
  function T() {
    _.forEach((me) => {
      k[me] || t(4, k[me] = { normal: 1, hard: 0, wiggle: 0 }, k), A[me] || t(5, A[me] = JSON.parse(JSON.stringify(w[me] || [])), A), y[me] === void 0 && t(6, y[me] = !1, y);
    }), N();
  }
  function N() {
    let me = 0;
    _.forEach((re) => {
      if (!k[re]) return;
      const ye = k[re], oe = Math.max(0, ye.normal - 1) * b.normal, be = ye.hard * b.hard, de = ye.wiggle * b.wiggle;
      me += oe + be + de, A[re] && A[re].forEach((Oe) => {
        me += Oe.normal * v.normal + Oe.hard * v.hard + Oe.wiggle * v.wiggle;
      });
    }), t(21, E = me);
  }
  async function I() {
    await u.update(
      {
        [`flags.${Qi}.stats`]: k,
        [`flags.${Qi}.skills`]: A,
        [`flags.${Qi}.statsCost`]: E
      },
      { render: !1 }
    );
  }
  function D(me, re, ye) {
    if (!m && f < ye) {
      ui.notifications.warn(`XP Insuficiente (${ye} necess√°rio).`);
      return;
    }
    me[re]++, t(4, k), t(5, A), N(), I();
  }
  function M() {
    t(4, k), t(5, A), N(), I();
  }
  function G(me) {
    t(
      5,
      A[me] = [
        ...A[me],
        {
          name: "Nova Per√≠cia",
          normal: 0,
          hard: 0,
          wiggle: 0,
          isCustom: !0,
          img: ""
        }
      ],
      A
    ), t(6, y[me] = !0, y), N(), I();
  }
  function L(me, re) {
    A[me].splice(re, 1), t(5, A), N(), I();
  }
  function U(me, re) {
    O = { key: me, index: re }, t(8, C = A[me][re].img || ""), t(7, S = !0);
  }
  function z() {
    O.key && (t(5, A[O.key][O.index].img = C, A), t(5, A), I()), t(7, S = !1);
  }
  function F() {
    new FilePicker({
      type: "image",
      callback: (me) => {
        t(8, C = me);
      }
    }).render(!0);
  }
  qt(() => {
    T(), E > 0 && d.statsCost === void 0 && I();
  });
  function W(me) {
    Ol.call(this, l, me);
  }
  function H() {
    C = this.value, t(8, C);
  }
  const V = () => t(7, S = !1);
  function J(me) {
    k[me].normal = Je(this.value), t(4, k);
  }
  const j = (me) => D(k[me], "normal", 5);
  function X(me) {
    k[me].hard = Je(this.value), t(4, k);
  }
  const K = (me) => D(k[me], "hard", 10);
  function Z(me) {
    k[me].wiggle = Je(this.value), t(4, k);
  }
  const le = (me) => D(k[me], "wiggle", 20), $ = (me) => t(6, y[me] = !y[me], y), se = (me, re) => U(me, re);
  function Y(me, re) {
    me[re].name = this.value, t(5, A), t(3, _);
  }
  function Q(me, re) {
    me[re].normal = Je(this.value), t(5, A), t(3, _);
  }
  const ie = (me) => D(me, "normal", 2);
  function ee(me, re) {
    me[re].hard = Je(this.value), t(5, A), t(3, _);
  }
  const pe = (me) => D(me, "hard", 4);
  function Ee(me, re) {
    me[re].wiggle = Je(this.value), t(5, A), t(3, _);
  }
  const De = (me) => D(me, "wiggle", 8), we = (me, re) => L(me, re), ke = (me) => G(me);
  return l.$$set = (me) => {
    "actor" in me && t(19, u = me.actor), "flags" in me && t(20, d = me.flags), "themeColor" in me && t(0, p = me.themeColor);
  }, l.$$.update = () => {
    var me;
    l.$$.dirty[0] & /*actor, flags*/
    1572864 && t(23, i = ((me = u.system) == null ? void 0 : me.xp) || d.xp || 0), l.$$.dirty[0] & /*flags*/
    1048576 && t(22, n = d.powersSpent || 0), l.$$.dirty[0] & /*xpEarned*/
    8388608 && t(2, o = dv + i), l.$$.dirty[0] & /*localCost, powersCost, flags*/
    7340032 && t(1, c = E + n + (d.bioSpent || 0)), l.$$.dirty[0] & /*pointsCap, totalSpent*/
    6 && t(9, f = o - c);
  }, [
    p,
    c,
    o,
    _,
    k,
    A,
    y,
    S,
    C,
    f,
    m,
    h,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    u,
    d,
    E,
    n,
    i,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke
  ];
}
class pv extends mt {
  constructor(e) {
    super(), pt(this, e, uv, fv, dt, { actor: 19, flags: 20, themeColor: 0 }, null, [-1, -1]);
  }
}
const ha = "multiversus-rpg", li = "player_lore_data", El = {
  // --- PROTE√á√ÉO CONTRA ERRO DE REGISTRO ---
  ensureRegistered: () => {
    game.settings.settings.has(`${ha}.${li}`) || game.settings.register(ha, li, {
      name: "Player Lore Data",
      scope: "world",
      config: !1,
      type: Object,
      default: [],
      onChange: () => Hooks.callAll("nexusUpdate")
    });
  },
  getAll: () => (El.ensureRegistered(), game.settings.get(ha, li) || []),
  saveEntry: async (l) => {
    if (El.ensureRegistered(), game.user.isGM) {
      let e = El.getAll();
      const t = e.findIndex((i) => i.id === l.id);
      t >= 0 ? e[t] = l : e.push(l), await game.settings.set(ha, li, e);
    } else
      game.socket.emit(`module.${ha}`, {
        type: "PLAYER_DB_SAVE",
        entry: l
      }), ui.notifications.info("Salvando... Aguardando confirma√ß√£o do Mestre.");
  },
  deleteEntry: async (l) => {
    if (El.ensureRegistered(), game.user.isGM) {
      let e = El.getAll().filter((t) => t.id !== l);
      await game.settings.set(ha, li, e);
    } else
      game.socket.emit(`module.${ha}`, {
        type: "PLAYER_DB_DELETE",
        id: l
      }), ui.notifications.info("Exclus√£o solicitada ao Mestre...");
  }
}, fs = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  PlayerDatabase: El
}, Symbol.toStringTag, { value: "Module" })), Ha = "multiversus-rpg", za = "nexus_lore_data", al = {
  ensureRegistered: () => {
    game.settings.settings.has(`${Ha}.${za}`) || game.settings.register(Ha, za, {
      name: "Nexus Data",
      scope: "world",
      config: !1,
      type: Object,
      default: [],
      onChange: () => Hooks.callAll("nexusUpdate")
    });
  },
  getAll: () => (al.ensureRegistered(), game.settings.get(Ha, za) || []),
  saveEntry: async (l) => {
    al.ensureRegistered();
    let e = al.getAll();
    const t = e.findIndex((i) => i.id === l.id);
    t >= 0 ? e[t] = l : e.push(l), await game.settings.set(Ha, za, e);
  },
  deleteEntry: async (l) => {
    al.ensureRegistered();
    let e = al.getAll().filter((t) => t.id !== l);
    await game.settings.set(Ha, za, e);
  },
  // --- NOVO: SISTEMA DE BACKUP ---
  // 1. Exportar: Transforma tudo em texto JSON
  exportData: () => {
    const l = al.getAll();
    return JSON.stringify(l, null, 2);
  },
  // 2. Importar: Recebe texto, valida e salva
  importData: async (l) => {
    al.ensureRegistered();
    try {
      const e = JSON.parse(l);
      if (!Array.isArray(e)) throw new Error("Formato inv√°lido (deve ser uma lista).");
      return new Promise((t) => {
        new Dialog({
          title: "Importar Database?",
          content: "<p>Isso ir√° <b>SUBSTITUIR</b> todos os dados atuais do Nexus pelos dados do backup.<br>Tem certeza?</p>",
          buttons: {
            yes: {
              label: "Sim, Substituir",
              icon: "<i class='fas fa-file-import'></i>",
              callback: async () => {
                await game.settings.set(Ha, za, e), ui.notifications.info(`Sucesso! ${e.length} registros importados.`), t(!0);
              }
            },
            no: { label: "Cancelar", callback: () => t(!1) }
          },
          default: "no"
        }).render(!0);
      });
    } catch (e) {
      ui.notifications.error("Erro ao importar: " + e.message);
    }
  }
};
function Rr(l, e, t) {
  const i = l.slice();
  return i[16] = e[t], i;
}
function Mr(l) {
  let e, t, i = (
    /*msg*/
    l[16].text + ""
  ), n, o;
  return {
    c() {
      e = r("div"), t = r("div"), n = g(), s(t, "class", "bubble svelte-748mro"), s(e, "class", o = "msg-box " + /*msg*/
      l[16].role + " svelte-748mro");
    },
    m(c, f) {
      q(c, e, f), a(e, t), t.innerHTML = i, a(e, n);
    },
    p(c, f) {
      f & /*chatHistory*/
      2 && i !== (i = /*msg*/
      c[16].text + "") && (t.innerHTML = i), f & /*chatHistory*/
      2 && o !== (o = "msg-box " + /*msg*/
      c[16].role + " svelte-748mro") && s(e, "class", o);
    },
    d(c) {
      c && P(e);
    }
  };
}
function mv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A = ce(
    /*chatHistory*/
    l[1]
  ), y = [];
  for (let E = 0; E < A.length; E += 1)
    y[E] = Mr(Rr(l, A, E));
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), i.innerHTML = '<span class="dot svelte-748mro"></span> ORACLE_LINK', n = g(), o = r("div"), c = r("button"), c.innerHTML = '<i class="fas fa-question-circle"></i> AJUDA', f = g(), u = r("button"), u.innerHTML = '<i class="fas fa-trash-alt"></i>', d = g(), p = r("div");
      for (let E = 0; E < y.length; E += 1)
        y[E].c();
      m = g(), b = r("div"), v = r("span"), v.textContent = ">", h = g(), _ = r("input"), s(i, "class", "status svelte-748mro"), s(c, "class", "help-btn svelte-748mro"), s(c, "title", "Ver Lista de Comandos"), s(u, "class", "clear-btn svelte-748mro"), s(u, "title", "Limpar Terminal"), s(o, "class", "actions svelte-748mro"), s(t, "class", "terminal-header svelte-748mro"), s(p, "class", "chat-viewport svelte-748mro"), s(v, "class", "prompt svelte-748mro"), s(_, "type", "text"), s(_, "placeholder", "AGUARDANDO_COMANDO..."), s(_, "class", "svelte-748mro"), s(b, "class", "input-line svelte-748mro"), s(e, "class", "oracle-wrapper svelte-748mro"), s(
        e,
        "style",
        /*themeStyle*/
        l[0]
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), a(e, d), a(e, p);
      for (let O = 0; O < y.length; O += 1)
        y[O] && y[O].m(p, null);
      l[8](p), a(e, m), a(e, b), a(b, v), a(b, h), a(b, _), x(
        _,
        /*userInput*/
        l[2]
      ), w || (k = [
        R(
          c,
          "click",
          /*showDynamicHelp*/
          l[5]
        ),
        R(
          u,
          "click",
          /*clearMemory*/
          l[6]
        ),
        R(
          _,
          "input",
          /*input_input_handler*/
          l[9]
        ),
        R(
          _,
          "keydown",
          /*keydown_handler*/
          l[10]
        )
      ], w = !0);
    },
    p(E, [S]) {
      if (S & /*chatHistory*/
      2) {
        A = ce(
          /*chatHistory*/
          E[1]
        );
        let O;
        for (O = 0; O < A.length; O += 1) {
          const C = Rr(E, A, O);
          y[O] ? y[O].p(C, S) : (y[O] = Mr(C), y[O].c(), y[O].m(p, null));
        }
        for (; O < y.length; O += 1)
          y[O].d(1);
        y.length = A.length;
      }
      S & /*userInput*/
      4 && _.value !== /*userInput*/
      E[2] && x(
        _,
        /*userInput*/
        E[2]
      ), S & /*themeStyle*/
      1 && s(
        e,
        "style",
        /*themeStyle*/
        E[0]
      );
    },
    i: ge,
    o: ge,
    d(E) {
      E && P(e), Fe(y, E), l[8](null), w = !1, Te(k);
    }
  };
}
const Oi = "multiversus-rpg", Ki = "oracle_player_history";
function bv(l, e, t) {
  let { actor: i } = e, { themeStyle: n = "" } = e, o = [], c = "", f;
  async function u() {
    await pi(), f && t(3, f.scrollTop = f.scrollHeight, f);
  }
  qt(async () => {
    try {
      let y = game.user.getFlag(Oi, Ki);
      y && Array.isArray(y) ? t(1, o = y) : h("model", `<div class="sys-msg">TERMINAL_LINK: ESTABELECIDO<br>OPERADOR: ${game.user.name}</div>`), await u();
    } catch {
      console.log("Oracle: Erro no boot.");
    }
    game.socket.on(`module.${Oi}`, async (y) => {
      if (y.type === "EXECUTE_SCRIPT") {
        if (y.targets && !y.targets.includes(game.user.id)) return;
        ui.notifications.info("EXECUTANDO PROTOCOLO REMOTO..."), await v(y.code, y.args || "");
      }
    });
  });
  async function d() {
    if (!c.trim()) return;
    const y = c.trim();
    h("user", y), t(2, c = "");
    const E = y.split(" ")[0].toLowerCase();
    if (E === "limpar" || E === "cls") {
      _();
      return;
    }
    if (E === "ajuda") {
      await p();
      return;
    }
    await m(y) || b(y) || h("error", `PROTOCOLO [${E.toUpperCase()}] N√ÉO RECONHECIDO.`);
  }
  async function p() {
    const E = El.getAll().find((S) => S.name.toLowerCase() === "comandos");
    E ? h("model", `
                <div class="help-content">
                    <div class="help-header"><i class="fas fa-info-circle"></i> GUIA DE COMANDOS</div>
                    <div class="help-body">${E.description}</div>
                </div>
            `) : h("error", "ERRO: O arquivo 'Comandos' n√£o foi encontrado na Database dos Jogadores.");
  }
  async function m(y) {
    const E = al.getAll(), S = y.split(" "), O = S[0].toLowerCase(), C = S.slice(1).join(" "), T = E.find((N) => N.name.toLowerCase() === O && N.type === "Script");
    if (T) {
      const N = (T.tags || "").toLowerCase();
      return N.includes("public") || N.includes("player") ? (await v(T.description, C), !0) : (h("error", "ACESSO NEGADO: PROTOCOLO PRIVADO."), !0);
    }
    return !1;
  }
  function b(y) {
    const E = El.getAll(), S = y.toLowerCase(), O = E.filter((C) => C.name.toLowerCase().includes(S) || C.tags && C.tags.toLowerCase().includes(S));
    if (O.length > 0) {
      let C = '<div class="sys-msg">DADOS_ENCONTRADOS:</div>';
      return O.forEach((T) => {
        const N = T.description.replace(/<[^>]*>?/gm, "").slice(0, 80);
        C += `
                <div class="mini-entry">
                    <b>${T.name}</b> [${T.type}]<br>
                    <small>${N}...</small>
                </div>`;
      }), h("model", C), !0;
    }
    return !1;
  }
  async function v(y, E) {
    const S = y.replace(/&nbsp;/g, " ").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
    try {
      const O = Object.getPrototypeOf(async function() {
      }).constructor, C = new O("actor", "game", "ui", "NexusDatabase", "PlayerDatabase", "args", "render", "socket", S), T = (N) => h("model", N);
      await C(i, game, ui, al, El, E, T, game.socket);
    } catch (O) {
      h("error", `FALHA_SISTEMA: ${O.message}`);
    }
  }
  function h(y, E) {
    t(1, o = [...o, { role: y, text: E }]), game.user.setFlag(Oi, Ki, o.slice(-30)), u();
  }
  function _() {
    t(1, o = []), game.user.unsetFlag(Oi, Ki), h("model", "MEM√ìRIA VOL√ÅTIL LIMPA.");
  }
  function w(y) {
    wa[y ? "unshift" : "push"](() => {
      f = y, t(3, f);
    });
  }
  function k() {
    c = this.value, t(2, c);
  }
  const A = (y) => y.key === "Enter" && d();
  return l.$$set = (y) => {
    "actor" in y && t(7, i = y.actor), "themeStyle" in y && t(0, n = y.themeStyle);
  }, [
    n,
    o,
    c,
    f,
    d,
    p,
    _,
    i,
    w,
    k,
    A
  ];
}
class vv extends mt {
  constructor(e) {
    super(), pt(this, e, bv, mv, dt, { actor: 7, themeStyle: 0 });
  }
}
function Nr(l, e, t) {
  const i = l.slice();
  return i[29] = e[t], i;
}
function Lr(l, e, t) {
  const i = l.slice();
  return i[26] = e[t], i;
}
function Pr(l, e, t) {
  const i = l.slice();
  return i[32] = e[t], i;
}
function qr(l, e, t) {
  const i = l.slice();
  return i[26] = e[t], i;
}
function Ur(l, e, t) {
  const i = l.slice();
  return i[26] = e[t], i;
}
function Gr(l) {
  let e, t = (
    /*t*/
    l[26] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[26], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Hr(l) {
  let e, t = (
    /*t*/
    l[26] + ""
  ), i, n;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = n = /*t*/
      l[26], x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, i);
    },
    p(o, c) {
      c[0] & /*allTags*/
      128 && t !== (t = /*t*/
      o[26] + "") && te(i, t), c[0] & /*allTags*/
      128 && n !== (n = /*t*/
      o[26]) && (e.__value = n, x(e, e.__value));
    },
    d(o) {
      o && P(e);
    }
  };
}
function zr(l) {
  let e, t = (
    /*e*/
    l[32].tags.split(",")[0] + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "tag-pill svelte-1asc81e");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*filtered*/
      64 && t !== (t = /*e*/
      n[32].tags.split(",")[0] + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function Br(l) {
  let e, t, i, n, o, c, f = (
    /*e*/
    l[32].name + ""
  ), u, d, p, m, b = (
    /*e*/
    l[32].type + ""
  ), v, h, _, w, k = (
    /*e*/
    l[32].tags && zr(l)
  );
  function A() {
    return (
      /*click_handler*/
      l[18](
        /*e*/
        l[32]
      )
    );
  }
  return {
    c() {
      var y;
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("div"), u = B(f), d = g(), p = r("div"), m = r("span"), v = B(b), h = g(), k && k.c(), at(t.src, i = /*e*/
      l[32].img) || s(t, "src", i), s(t, "class", "thumb svelte-1asc81e"), s(c, "class", "name svelte-1asc81e"), s(m, "class", "type-pill svelte-1asc81e"), s(p, "class", "meta svelte-1asc81e"), s(o, "class", "info svelte-1asc81e"), s(e, "class", "item svelte-1asc81e"), he(
        e,
        "active",
        /*activeEntry*/
        ((y = l[4]) == null ? void 0 : y.id) === /*e*/
        l[32].id
      );
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(o, d), a(o, p), a(p, m), a(m, v), a(p, h), k && k.m(p, null), _ || (w = R(e, "click", A), _ = !0);
    },
    p(y, E) {
      var S;
      l = y, E[0] & /*filtered*/
      64 && !at(t.src, i = /*e*/
      l[32].img) && s(t, "src", i), E[0] & /*filtered*/
      64 && f !== (f = /*e*/
      l[32].name + "") && te(u, f), E[0] & /*filtered*/
      64 && b !== (b = /*e*/
      l[32].type + "") && te(v, b), /*e*/
      l[32].tags ? k ? k.p(l, E) : (k = zr(l), k.c(), k.m(p, null)) : k && (k.d(1), k = null), E[0] & /*activeEntry, filtered*/
      80 && he(
        e,
        "active",
        /*activeEntry*/
        ((S = l[4]) == null ? void 0 : S.id) === /*e*/
        l[32].id
      );
    },
    d(y) {
      y && P(e), k && k.d(), _ = !1, w();
    }
  };
}
function Fr(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nenhum registro encontrado.", s(e, "class", "no-data svelte-1asc81e");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function hv(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-archive big-icon svelte-1asc81e"></i> <h2>THE ARCHIVES</h2> <p>Selecione um arquivo ou crie uma nova entrada.</p> <small>Contribua para o conhecimento do grupo.</small>', s(e, "class", "empty-state svelte-1asc81e");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function gv(l) {
  let e, t, i, n, o, c, f, u;
  function d(A, y) {
    return (
      /*isEditing*/
      A[5] ? kv : _v
    );
  }
  let p = d(l), m = p(l);
  function b(A, y) {
    return (
      /*isEditing*/
      A[5] ? yv : wv
    );
  }
  let v = b(l), h = v(l);
  function _(A, y) {
    return (
      /*isEditing*/
      A[5] ? Ev : Av
    );
  }
  let w = _(l), k = w(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), m.c(), n = g(), o = r("div"), h.c(), c = g(), f = r("div"), k.c(), s(i, "class", "header-overlay svelte-1asc81e"), s(t, "class", "entry-header svelte-1asc81e"), ae(t, "background-image", "url('" + /*activeEntry*/
      l[4].img + "')"), s(o, "class", "entry-body svelte-1asc81e"), s(f, "class", "actions-bar svelte-1asc81e"), s(e, "class", "entry-card svelte-1asc81e");
    },
    m(A, y) {
      q(A, e, y), a(e, t), a(t, i), m.m(i, null), a(e, n), a(e, o), h.m(o, null), a(e, c), a(e, f), k.m(f, null);
    },
    p(A, y) {
      p === (p = d(A)) && m ? m.p(A, y) : (m.d(1), m = p(A), m && (m.c(), m.m(i, null))), y[0] & /*activeEntry*/
      16 && ae(t, "background-image", "url('" + /*activeEntry*/
      A[4].img + "')"), v === (v = b(A)) && h ? h.p(A, y) : (h.d(1), h = v(A), h && (h.c(), h.m(o, null))), w === (w = _(A)) && k ? k.p(A, y) : (k.d(1), k = w(A), k && (k.c(), k.m(f, null)));
    },
    i(A) {
      A && (u || Ne(() => {
        u = st(e, Qe, { duration: 200 }), u.start();
      }));
    },
    o: ge,
    d(A) {
      A && P(e), m.d(), h.d(), k.d();
    }
  };
}
function _v(l) {
  let e, t, i = (
    /*activeEntry*/
    l[4].name + ""
  ), n, o, c, f, u = (
    /*activeEntry*/
    l[4].type + ""
  ), d, p, m = ce(
    /*activeEntry*/
    (l[4].tags || "").split(",")
  ), b = [];
  for (let v = 0; v < m.length; v += 1)
    b[v] = Vr(Nr(l, m, v));
  return {
    c() {
      e = r("div"), t = r("h1"), n = B(i), o = g(), c = r("div"), f = r("span"), d = B(u), p = g();
      for (let v = 0; v < b.length; v += 1)
        b[v].c();
      s(t, "class", "svelte-1asc81e"), s(f, "class", "badge main svelte-1asc81e"), s(c, "class", "badges svelte-1asc81e"), s(e, "class", "view-header svelte-1asc81e");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, n), a(e, o), a(e, c), a(c, f), a(f, d), a(c, p);
      for (let _ = 0; _ < b.length; _ += 1)
        b[_] && b[_].m(c, null);
    },
    p(v, h) {
      if (h[0] & /*activeEntry*/
      16 && i !== (i = /*activeEntry*/
      v[4].name + "") && te(n, i), h[0] & /*activeEntry*/
      16 && u !== (u = /*activeEntry*/
      v[4].type + "") && te(d, u), h[0] & /*activeEntry*/
      16) {
        m = ce(
          /*activeEntry*/
          (v[4].tags || "").split(",")
        );
        let _;
        for (_ = 0; _ < m.length; _ += 1) {
          const w = Nr(v, m, _);
          b[_] ? b[_].p(w, h) : (b[_] = Vr(w), b[_].c(), b[_].m(c, null));
        }
        for (; _ < b.length; _ += 1)
          b[_].d(1);
        b.length = m.length;
      }
    },
    d(v) {
      v && P(e), Fe(b, v);
    }
  };
}
function kv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = ce(
    /*TYPES*/
    l[8]
  ), v = [];
  for (let h = 0; h < b.length; h += 1)
    v[h] = Wr(Lr(l, b, h));
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("div"), o = r("select");
      for (let h = 0; h < v.length; h += 1)
        v[h].c();
      c = g(), f = r("input"), u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-globe"></i> Imagem (Link/PC)', s(t, "class", "title-input svelte-1asc81e"), s(t, "placeholder", "T√≠tulo do Arquivo"), s(o, "class", "svelte-1asc81e"), /*activeEntry*/
      l[4].type === void 0 && Ne(() => (
        /*select_change_handler*/
        l[20].call(o)
      )), s(f, "placeholder", "Tags (sep. por v√≠rgula)"), s(f, "class", "svelte-1asc81e"), s(n, "class", "meta-inputs svelte-1asc81e"), s(d, "class", "img-btn svelte-1asc81e"), s(e, "class", "edit-header svelte-1asc81e");
    },
    m(h, _) {
      q(h, e, _), a(e, t), x(
        t,
        /*activeEntry*/
        l[4].name
      ), a(e, i), a(e, n), a(n, o);
      for (let w = 0; w < v.length; w += 1)
        v[w] && v[w].m(o, null);
      ot(
        o,
        /*activeEntry*/
        l[4].type,
        !0
      ), a(n, c), a(n, f), x(
        f,
        /*activeEntry*/
        l[4].tags
      ), a(e, u), a(e, d), p || (m = [
        R(
          t,
          "input",
          /*input0_input_handler*/
          l[19]
        ),
        R(
          o,
          "change",
          /*select_change_handler*/
          l[20]
        ),
        R(
          f,
          "input",
          /*input1_input_handler*/
          l[21]
        ),
        R(
          d,
          "click",
          /*changeImage*/
          l[13]
        )
      ], p = !0);
    },
    p(h, _) {
      if (_[0] & /*activeEntry, TYPES*/
      272 && t.value !== /*activeEntry*/
      h[4].name && x(
        t,
        /*activeEntry*/
        h[4].name
      ), _[0] & /*TYPES*/
      256) {
        b = ce(
          /*TYPES*/
          h[8]
        );
        let w;
        for (w = 0; w < b.length; w += 1) {
          const k = Lr(h, b, w);
          v[w] ? v[w].p(k, _) : (v[w] = Wr(k), v[w].c(), v[w].m(o, null));
        }
        for (; w < v.length; w += 1)
          v[w].d(1);
        v.length = b.length;
      }
      _[0] & /*activeEntry, TYPES*/
      272 && ot(
        o,
        /*activeEntry*/
        h[4].type
      ), _[0] & /*activeEntry, TYPES*/
      272 && f.value !== /*activeEntry*/
      h[4].tags && x(
        f,
        /*activeEntry*/
        h[4].tags
      );
    },
    d(h) {
      h && P(e), Fe(v, h), p = !1, Te(m);
    }
  };
}
function jr(l) {
  let e, t = (
    /*tag*/
    l[29].trim() + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "badge tag svelte-1asc81e");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*activeEntry*/
      16 && t !== (t = /*tag*/
      n[29].trim() + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function Vr(l) {
  let e = (
    /*tag*/
    l[29].trim()
  ), t, i = e && jr(l);
  return {
    c() {
      i && i.c(), t = Pt();
    },
    m(n, o) {
      i && i.m(n, o), q(n, t, o);
    },
    p(n, o) {
      o[0] & /*activeEntry*/
      16 && (e = /*tag*/
      n[29].trim()), e ? i ? i.p(n, o) : (i = jr(n), i.c(), i.m(t.parentNode, t)) : i && (i.d(1), i = null);
    },
    d(n) {
      n && P(t), i && i.d(n);
    }
  };
}
function Wr(l) {
  let e, t = (
    /*t*/
    l[26] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[26], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function wv(l) {
  let e, t = (
    /*activeEntry*/
    l[4].description.replace(/\n/g, "<br>") + ""
  ), i, n, o, c, f, u = (
    /*activeEntry*/
    l[4].author + ""
  ), d, p, m, b, v, h = (
    /*activeEntry*/
    (l[4].lastEditor || /*activeEntry*/
    l[4].author) + ""
  ), _;
  return {
    c() {
      e = r("div"), i = g(), n = r("div"), o = r("span"), c = r("i"), f = B(" Autor: "), d = B(u), p = g(), m = r("span"), b = r("i"), v = B(" √öltima edi√ß√£o: "), _ = B(h), s(e, "class", "content-reader svelte-1asc81e"), s(c, "class", "fas fa-user-edit"), s(b, "class", "fas fa-clock"), s(n, "class", "entry-footer svelte-1asc81e");
    },
    m(w, k) {
      q(w, e, k), e.innerHTML = t, q(w, i, k), q(w, n, k), a(n, o), a(o, c), a(o, f), a(o, d), a(n, p), a(n, m), a(m, b), a(m, v), a(m, _);
    },
    p(w, k) {
      k[0] & /*activeEntry*/
      16 && t !== (t = /*activeEntry*/
      w[4].description.replace(/\n/g, "<br>") + "") && (e.innerHTML = t), k[0] & /*activeEntry*/
      16 && u !== (u = /*activeEntry*/
      w[4].author + "") && te(d, u), k[0] & /*activeEntry*/
      16 && h !== (h = /*activeEntry*/
      (w[4].lastEditor || /*activeEntry*/
      w[4].author) + "") && te(_, h);
    },
    d(w) {
      w && (P(e), P(i), P(n));
    }
  };
}
function yv(l) {
  let e, t, i;
  return {
    c() {
      e = r("textarea"), s(e, "class", "editor-area svelte-1asc81e"), s(e, "placeholder", "Escreva aqui... Suporta HTML b√°sico.");
    },
    m(n, o) {
      q(n, e, o), x(
        e,
        /*activeEntry*/
        l[4].description
      ), t || (i = R(
        e,
        "input",
        /*textarea_input_handler*/
        l[22]
      ), t = !0);
    },
    p(n, o) {
      o[0] & /*activeEntry, TYPES*/
      272 && x(
        e,
        /*activeEntry*/
        n[4].description
      );
    },
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Av(l) {
  let e, t, i = (
    /*activeEntry*/
    l[4].id + ""
  ), n, o, c, f, u;
  return {
    c() {
      e = r("div"), t = B("ID: "), n = B(i), o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-edit"></i> EDITAR', s(e, "class", "status-id svelte-1asc81e"), s(c, "class", "btn edit svelte-1asc81e");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, n), q(d, o, p), q(d, c, p), f || (u = R(
        c,
        "click",
        /*click_handler_2*/
        l[24]
      ), f = !0);
    },
    p(d, p) {
      p[0] & /*activeEntry*/
      16 && i !== (i = /*activeEntry*/
      d[4].id + "") && te(n, i);
    },
    d(d) {
      d && (P(e), P(o), P(c)), f = !1, u();
    }
  };
}
function Ev(l) {
  let e, t, i, n, o, c, f;
  return {
    c() {
      e = r("button"), e.textContent = "CANCELAR", t = g(), i = r("button"), i.textContent = "EXCLUIR", n = g(), o = r("button"), o.innerHTML = '<i class="fas fa-save"></i> SALVAR', s(e, "class", "btn cancel svelte-1asc81e"), s(i, "class", "btn delete svelte-1asc81e"), s(o, "class", "btn save svelte-1asc81e");
    },
    m(u, d) {
      q(u, e, d), q(u, t, d), q(u, i, d), q(u, n, d), q(u, o, d), c || (f = [
        R(
          e,
          "click",
          /*click_handler_1*/
          l[23]
        ),
        R(
          i,
          "click",
          /*del*/
          l[12]
        ),
        R(
          o,
          "click",
          /*save*/
          l[11]
        )
      ], c = !0);
    },
    p: ge,
    d(u) {
      u && (P(e), P(t), P(i), P(n), P(o)), c = !1, Te(f);
    }
  };
}
function Ov(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I = ce(
    /*TYPES*/
    l[8]
  ), D = [];
  for (let V = 0; V < I.length; V += 1)
    D[V] = Gr(Ur(l, I, V));
  let M = ce(
    /*allTags*/
    l[7]
  ), G = [];
  for (let V = 0; V < M.length; V += 1)
    G[V] = Hr(qr(l, M, V));
  let L = ce(
    /*filtered*/
    l[6]
  ), U = [];
  for (let V = 0; V < L.length; V += 1)
    U[V] = Br(Pr(l, L, V));
  let z = (
    /*filtered*/
    l[6].length === 0 && Fr()
  );
  function F(V, J) {
    return (
      /*activeEntry*/
      V[4] ? gv : hv
    );
  }
  let W = F(l), H = W(l);
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), i.innerHTML = '<i class="fas fa-book-dead"></i> THE ARCHIVES', n = g(), o = r("div"), c = r("div"), f = r("i"), u = g(), d = r("input"), p = g(), m = r("div"), b = r("select"), v = r("option"), v.textContent = "Todos os Tipos";
      for (let V = 0; V < D.length; V += 1)
        D[V].c();
      h = g(), _ = r("select"), w = r("option"), w.textContent = "Todas as Tags";
      for (let V = 0; V < G.length; V += 1)
        G[V].c();
      k = g(), A = r("div"), y = r("button"), y.innerHTML = '<i class="fas fa-plus"></i> NOVA ENTRADA', E = g();
      for (let V = 0; V < U.length; V += 1)
        U[V].c();
      S = g(), z && z.c(), O = g(), C = r("main"), H.c(), s(i, "class", "header svelte-1asc81e"), s(f, "class", "fas fa-search svelte-1asc81e"), s(d, "placeholder", "Pesquisar..."), s(d, "class", "svelte-1asc81e"), s(c, "class", "search-box svelte-1asc81e"), v.__value = "TODOS", x(v, v.__value), s(b, "class", "svelte-1asc81e"), /*selectedType*/
      l[2] === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[16].call(b)
      )), w.__value = "TODOS", x(w, w.__value), s(_, "class", "svelte-1asc81e"), /*selectedTag*/
      l[3] === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[17].call(_)
      )), s(m, "class", "filters svelte-1asc81e"), s(o, "class", "tools svelte-1asc81e"), s(y, "class", "create-btn svelte-1asc81e"), s(A, "class", "list svelte-1asc81e"), s(t, "class", "sidebar svelte-1asc81e"), s(C, "class", "workspace svelte-1asc81e"), s(e, "class", "archives-root svelte-1asc81e"), s(
        e,
        "style",
        /*themeStyle*/
        l[0]
      );
    },
    m(V, J) {
      q(V, e, J), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(c, f), a(c, u), a(c, d), x(
        d,
        /*searchQuery*/
        l[1]
      ), a(o, p), a(o, m), a(m, b), a(b, v);
      for (let j = 0; j < D.length; j += 1)
        D[j] && D[j].m(b, null);
      ot(
        b,
        /*selectedType*/
        l[2],
        !0
      ), a(m, h), a(m, _), a(_, w);
      for (let j = 0; j < G.length; j += 1)
        G[j] && G[j].m(_, null);
      ot(
        _,
        /*selectedTag*/
        l[3],
        !0
      ), a(t, k), a(t, A), a(A, y), a(A, E);
      for (let j = 0; j < U.length; j += 1)
        U[j] && U[j].m(A, null);
      a(A, S), z && z.m(A, null), a(e, O), a(e, C), H.m(C, null), T || (N = [
        R(
          d,
          "input",
          /*input_input_handler*/
          l[15]
        ),
        R(
          b,
          "change",
          /*select0_change_handler*/
          l[16]
        ),
        R(
          _,
          "change",
          /*select1_change_handler*/
          l[17]
        ),
        R(
          y,
          "click",
          /*createNew*/
          l[10]
        )
      ], T = !0);
    },
    p(V, J) {
      if (J[0] & /*searchQuery*/
      2 && d.value !== /*searchQuery*/
      V[1] && x(
        d,
        /*searchQuery*/
        V[1]
      ), J[0] & /*TYPES*/
      256) {
        I = ce(
          /*TYPES*/
          V[8]
        );
        let j;
        for (j = 0; j < I.length; j += 1) {
          const X = Ur(V, I, j);
          D[j] ? D[j].p(X, J) : (D[j] = Gr(X), D[j].c(), D[j].m(b, null));
        }
        for (; j < D.length; j += 1)
          D[j].d(1);
        D.length = I.length;
      }
      if (J[0] & /*selectedType, TYPES*/
      260 && ot(
        b,
        /*selectedType*/
        V[2]
      ), J[0] & /*allTags*/
      128) {
        M = ce(
          /*allTags*/
          V[7]
        );
        let j;
        for (j = 0; j < M.length; j += 1) {
          const X = qr(V, M, j);
          G[j] ? G[j].p(X, J) : (G[j] = Hr(X), G[j].c(), G[j].m(_, null));
        }
        for (; j < G.length; j += 1)
          G[j].d(1);
        G.length = M.length;
      }
      if (J[0] & /*selectedTag, allTags*/
      136 && ot(
        _,
        /*selectedTag*/
        V[3]
      ), J[0] & /*activeEntry, filtered, isEditing*/
      112) {
        L = ce(
          /*filtered*/
          V[6]
        );
        let j;
        for (j = 0; j < L.length; j += 1) {
          const X = Pr(V, L, j);
          U[j] ? U[j].p(X, J) : (U[j] = Br(X), U[j].c(), U[j].m(A, S));
        }
        for (; j < U.length; j += 1)
          U[j].d(1);
        U.length = L.length;
      }
      /*filtered*/
      V[6].length === 0 ? z || (z = Fr(), z.c(), z.m(A, null)) : z && (z.d(1), z = null), W === (W = F(V)) && H ? H.p(V, J) : (H.d(1), H = W(V), H && (H.c(), ne(H, 1), H.m(C, null))), J[0] & /*themeStyle*/
      1 && s(
        e,
        "style",
        /*themeStyle*/
        V[0]
      );
    },
    i(V) {
      ne(H);
    },
    o: ge,
    d(V) {
      V && P(e), Fe(D, V), Fe(G, V), Fe(U, V), z && z.d(), H.d(), T = !1, Te(N);
    }
  };
}
function Sv(l, e, t) {
  let i, n, { themeStyle: o = "" } = e, c = [], f = "", u = "TODOS", d = "TODOS", p = null, m = !1;
  const b = [
    "Di√°rio",
    "NPC",
    "Local",
    "Fac√ß√£o",
    "Anota√ß√£o",
    "Teoria",
    "Invent√°rio",
    "Quest"
  ], v = {
    id: null,
    name: "Novo Arquivo",
    type: "Anota√ß√£o",
    tags: "",
    img: "icons/svg/book.svg",
    description: "",
    author: ""
  };
  qt(() => {
    try {
      El.ensureRegistered();
    } catch {
    }
    h(), Hooks.on("nexusUpdate", h);
  });
  function h() {
    if (t(14, c = El.getAll()), p) {
      const G = c.find((L) => L.id === p.id);
      G && !m && t(4, p = G);
    }
  }
  function _() {
    t(4, p = {
      ...v,
      id: foundry.utils.randomID(),
      author: game.user.name
    }), t(5, m = !0);
  }
  async function w() {
    t(4, p.lastEditor = game.user.name, p), p.img || t(4, p.img = "icons/svg/book.svg", p), await El.saveEntry(p), t(5, m = !1);
  }
  async function k() {
    new Dialog({
      title: "Excluir?",
      content: "Tem certeza que deseja apagar este registro?",
      buttons: {
        yes: {
          label: "Sim",
          callback: async () => {
            await El.deleteEntry(p.id), t(4, p = null), t(5, m = !1);
          }
        },
        no: { label: "N√£o" }
      },
      default: "no"
    }).render(!0);
  }
  function A() {
    new Dialog({
      title: "Escolher Imagem",
      content: `
                <div style="margin-bottom: 10px;">
                    <label><b>Op√ß√£o 1:</b> Cole um link da internet (Discord, Imgur...)</label>
                    <input type="text" id="img-url-input" value="${p.img}" style="width: 100%; box-sizing: border-box; margin-top:5px;">
                </div>
                <hr>
                <div style="font-size: 11px; color: #666; margin-bottom: 5px;">
                    <b>Op√ß√£o 2:</b> Usar arquivo do servidor (Apenas se tiver acesso).
                </div>
            `,
      buttons: {
        link: {
          label: "USAR LINK",
          icon: "<i class='fas fa-link'></i>",
          callback: (G) => {
            const L = G.find("#img-url-input").val();
            L && t(4, p.img = L, p);
          }
        },
        server: {
          label: "SERVIDOR",
          icon: "<i class='fas fa-folder-open'></i>",
          callback: () => {
            new FilePicker({
              type: "image",
              callback: (G) => t(4, p.img = G, p)
            }).render(!0);
          }
        }
      },
      default: "link"
    }).render(!0);
  }
  function y() {
    f = this.value, t(1, f);
  }
  function E() {
    u = Gt(this), t(2, u), t(8, b);
  }
  function S() {
    d = Gt(this), t(3, d), t(7, i), t(14, c);
  }
  const O = (G) => {
    t(4, p = JSON.parse(JSON.stringify(G))), t(5, m = !1);
  };
  function C() {
    p.name = this.value, t(4, p), t(8, b);
  }
  function T() {
    p.type = Gt(this), t(4, p), t(8, b);
  }
  function N() {
    p.tags = this.value, t(4, p), t(8, b);
  }
  function I() {
    p.description = this.value, t(4, p), t(8, b);
  }
  const D = () => {
    t(5, m = !1), h();
  }, M = () => t(5, m = !0);
  return l.$$set = (G) => {
    "themeStyle" in G && t(0, o = G.themeStyle);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*entries*/
    16384 && t(7, i = [
      "TODOS",
      ...new Set(c.flatMap((G) => G.tags ? G.tags.split(",").map((L) => L.trim()) : []))
    ].sort()), l.$$.dirty[0] & /*entries, searchQuery, selectedType, selectedTag*/
    16398 && t(6, n = c.filter((G) => {
      const L = f.toLowerCase(), U = G.name.toLowerCase().includes(L) || G.description.toLowerCase().includes(L), z = u === "TODOS" || G.type === u, F = d === "TODOS" || G.tags && G.tags.includes(d);
      return U && z && F;
    }));
  }, [
    o,
    f,
    u,
    d,
    p,
    m,
    n,
    i,
    b,
    h,
    _,
    w,
    k,
    A,
    c,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M
  ];
}
class Cv extends mt {
  constructor(e) {
    super(), pt(this, e, Sv, Ov, dt, { themeStyle: 0 }, null, [-1, -1]);
  }
}
const Kt = "multiversus-rpg", ql = {
  init: () => {
    [
      { key: "comms_chat_log", def: [] },
      { key: "comms_groups", def: [{ id: "global", name: "REDE_MUNDIAL", icon: "fa-globe", isPrivate: !1, password: null }] },
      { key: "comms_status", def: [] }
    ].forEach((e) => {
      game.settings.settings.has(`${Kt}.${e.key}`) || game.settings.register(Kt, e.key, { scope: "world", config: !1, type: Object, default: e.def, onChange: () => Hooks.callAll("commsUpdate") });
    });
  },
  getRPWarning: () => `
        <div class="rp-warning-box" style="font-family: 'Share Tech Mono', monospace; color: #fff;">
            <h2 style="color: var(--c-primary); border-bottom: 2px solid var(--c-primary); padding-bottom: 5px; margin-bottom: 15px; text-transform: uppercase; letter-spacing: 2px;">
                ‚ö†Ô∏è PROTOCOLO DE TRANSMISS√ÉO CAN√îNICA
            </h2>
            
            <p style="font-size: 14px; line-height: 1.5; margin-bottom: 15px; border-left: 3px solid var(--c-primary); padding-left: 10px;">
                Este terminal de comunica√ß√µes √© um <b>ITEM INTEGRAL DO MUNDO (IN-GAME)</b>. Toda e qualquer intera√ß√£o realizada aqui √© considerada can√¥nica e interpretada pelo seu personagem.
            </p>

            <div style="background: rgba(var(--c-primary), 0.1); padding: 10px; border: 1px solid rgba(var(--c-primary), 0.3); font-size: 12px;">
                <ul style="list-style: none; padding: 0; margin: 0;">
                    <li style="margin-bottom: 8px;"><b>üîπ EXPOSI√á√ÉO DE ID:</b> Ao transmitir em canais p√∫blicos (Rede Mundial), seu <b>MV-ID</b> ser√° automaticamente exposto, permitindo que outros usu√°rios rastreiem sua frequ√™ncia.</li>
                    
                    <li style="margin-bottom: 8px;"><b>üîπ AQUISI√á√ÉO DE LINKS:</b> A sincroniza√ß√£o de contatos e entrada em grupos privados exige <b>DI√ÅLOGO IN-GAME</b> pr√©vio. Voc√™ s√≥ pode contatar indiv√≠duos que seu personagem conheceu narrativamente e obteve o ID.</li>
                    
                    <li style="margin-bottom: 8px;"><b>üîπ INTERL√öDIOS:</b> Este chat permanece ativo entre as sess√µes para simular comunica√ß√µes de longa dist√¢ncia. O momento can√¥nico destas mensagens ocorre durante os <b>INTERL√öDIOS</b> (momentos de descanso/viagem).</li>
                    
                    <li style="margin-bottom: 8px; color: #ff4444;"><b>‚ö†Ô∏è META-GAME:</b> Discuss√µes fora do personagem (OFF-GAME) s√£o <b>ESTRITAMENTE PROIBIDAS</b> neste terminal e resultar√£o em puni√ß√£o administrativa. Para comunica√ß√µes externas, utilize o <b>Discord</b>.</li>
                </ul>
            </div>

            <p style="text-align: center; margin-top: 15px; font-size: 11px; opacity: 0.6; font-style: italic;">
                "Sua voz ecoa na rede da Multiversus. Escolha bem suas palavras, elas deixam rastros."
            </p>
        </div>`,
  getCommID: async (l) => {
    let e = l.getFlag(Kt, "commID");
    return e || (e = `${l.type === "character" ? "MV" : "NET"}-${Math.floor(1e3 + Math.random() * 9e3)}`, await l.setFlag(Kt, "commID", e)), e;
  },
  sendMessage: async (l) => {
    if (game.user.isGM) {
      let e = game.settings.get(Kt, "comms_chat_log") || [];
      e.push({ id: foundry.utils.randomID(), timestamp: Date.now(), ...l }), e.length > 500 && e.shift(), await game.settings.set(Kt, "comms_chat_log", e), Hooks.callAll("commsUpdate"), game.socket.emit(`module.${Kt}`, { type: "COMMS_REFRESH" });
    } else
      game.socket.emit(`module.${Kt}`, { type: "COMMS_SEND_MSG", msg: l });
  },
  createGroup: async (l, e = null) => {
    const t = { id: foundry.utils.randomID(), name: l.toUpperCase(), icon: e ? "fa-user-lock" : "fa-users", isPrivate: !!e, password: e };
    if (game.user.isGM) {
      let i = game.settings.get(Kt, "comms_groups") || [];
      i.push(t), await game.settings.set(Kt, "comms_groups", i), Hooks.callAll("commsUpdate"), game.socket.emit(`module.${Kt}`, { type: "COMMS_REFRESH" });
    } else
      game.socket.emit(`module.${Kt}`, { type: "COMMS_CREATE_GROUP", group: t });
  },
  addContact: async (l, e) => {
    const t = game.actors.find((n) => n.getFlag(Kt, "commID") === e);
    if (!t) return ui.notifications.warn("ID_N√ÉO_LOCALIZADO");
    let i = l.getFlag(Kt, "contacts") || [];
    i.find((n) => n.id === t.id) || (i.push({ id: t.id, name: t.name, img: t.img, commID: e }), await l.setFlag(Kt, "contacts", i), Hooks.callAll("commsUpdate"));
  },
  updateStatus: async (l, e) => {
    if (game.user.isGM) {
      let t = game.settings.get(Kt, "comms_status");
      Array.isArray(t) || (t = []), t = t.filter((n) => n.actorId !== l.id), t.push({
        actorId: l.id,
        name: l.name,
        img: l.img,
        timestamp: Date.now(),
        ...e
      });
      const i = 24 * 60 * 60 * 1e3;
      t = t.filter((n) => Date.now() - n.timestamp < i), await game.settings.set(Kt, "comms_status", t), Hooks.callAll("commsUpdate"), game.socket.emit(`module.${Kt}`, { type: "COMMS_REFRESH" });
    } else
      game.socket.emit(`module.${Kt}`, { type: "COMMS_UPDATE_STATUS", actorId: l.id, status: e });
  },
  getPrivateChatId: (l, e) => [l, e].sort().join("_")
}, Si = /* @__PURE__ */ Object.freeze(/* @__PURE__ */ Object.defineProperty({
  __proto__: null,
  CommsDatabase: ql
}, Symbol.toStringTag, { value: "Module" })), M0 = jl([]), N0 = jl([]), Xr = jl("chats"), Jr = jl("global"), Yr = jl("REDE_MUNDIAL");
function Qr() {
  const l = game.settings.get("multiversus-rpg", "comms_chat_log") || [], e = game.settings.get("multiversus-rpg", "comms_groups") || [];
  M0.set([...l]), N0.set([...e]);
}
function Kr(l, e, t) {
  const i = l.slice();
  return i[63] = e[t], i;
}
function Zr(l, e, t) {
  const i = l.slice();
  return i[55] = e[t], i;
}
function xr(l, e, t) {
  const i = l.slice();
  return i[52] = e[t], i;
}
function $r(l, e, t) {
  const i = l.slice();
  return i[55] = e[t], i;
}
function ec(l, e, t) {
  const i = l.slice();
  return i[58] = e[t], i;
}
function tc(l) {
  let e, t, i;
  function n(f, u) {
    if (
      /*showWarning*/
      f[7]
    ) return Mv;
    if (
      /*activeModal*/
      f[8] === "password"
    ) return Rv;
    if (
      /*activeModal*/
      f[8] === "add_contact"
    ) return Dv;
    if (
      /*activeModal*/
      f[8] === "create_group"
    ) return Tv;
    if (
      /*activeModal*/
      f[8] === "post_status"
    ) return Iv;
  }
  let o = n(l), c = o && o(l);
  return {
    c() {
      e = r("div"), c && c.c(), s(e, "class", "modal-layer svelte-8clotx");
    },
    m(f, u) {
      q(f, e, u), c && c.m(e, null), i = !0;
    },
    p(f, u) {
      o === (o = n(f)) && c ? c.p(f, u) : (c && c.d(1), c = o && o(f), c && (c.c(), ne(c, 1), c.m(e, null)));
    },
    i(f) {
      i || (ne(c), f && Ne(() => {
        i && (t || (t = We(e, Qe, {}, !0)), t.run(1));
      }), i = !0);
    },
    o(f) {
      f && (t || (t = We(e, Qe, {}, !1)), t.run(0)), i = !1;
    },
    d(f) {
      f && P(e), c && c.d(), f && t && t.end();
    }
  };
}
function Iv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "TRANSMITIR_AO_FEED", i = g(), n = r("div"), o = r("input"), c = g(), f = r("input"), u = g(), d = r("div"), p = r("button"), p.textContent = "ABORTAR", m = g(), b = r("button"), b.textContent = "TRANSMITIR", s(t, "class", "svelte-8clotx"), s(o, "type", "text"), s(o, "class", "hacker-input svelte-8clotx"), s(o, "placeholder", "Mensagem..."), s(f, "type", "text"), s(f, "class", "hacker-input svelte-8clotx"), s(f, "placeholder", "URL da Imagem..."), ae(f, "margin-top", "10px"), s(n, "class", "card-content svelte-8clotx"), s(p, "class", "btn-ghost svelte-8clotx"), s(b, "class", "btn-main svelte-8clotx"), s(d, "class", "card-footer svelte-8clotx"), s(e, "class", "terminal-card svelte-8clotx");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*modalData*/
        l[9].input
      ), a(n, c), a(n, f), x(
        f,
        /*modalData*/
        l[9].input2
      ), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), h || (_ = [
        R(
          o,
          "input",
          /*input0_input_handler_1*/
          l[31]
        ),
        R(
          f,
          "input",
          /*input1_input_handler_1*/
          l[32]
        ),
        R(
          p,
          "click",
          /*closeModal*/
          l[15]
        ),
        R(
          b,
          "click",
          /*click_handler_3*/
          l[33]
        )
      ], h = !0);
    },
    p(w, k) {
      k[0] & /*modalData*/
      512 && o.value !== /*modalData*/
      w[9].input && x(
        o,
        /*modalData*/
        w[9].input
      ), k[0] & /*modalData*/
      512 && f.value !== /*modalData*/
      w[9].input2 && x(
        f,
        /*modalData*/
        w[9].input2
      );
    },
    i(w) {
      w && (v || Ne(() => {
        v = st(e, Mt, {}), v.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), h = !1, Te(_);
    }
  };
}
function Tv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "NOVA_FREQU√äNCIA", i = g(), n = r("div"), o = r("input"), c = g(), f = r("input"), u = g(), d = r("div"), p = r("button"), p.textContent = "VOLTAR", m = g(), b = r("button"), b.textContent = "INICIALIZAR", s(t, "class", "svelte-8clotx"), s(o, "type", "text"), s(o, "class", "hacker-input svelte-8clotx"), s(o, "placeholder", "NOME DO CANAL"), s(f, "type", "password"), s(f, "maxlength", "4"), s(f, "class", "hacker-input svelte-8clotx"), s(f, "placeholder", "SENHA (OPCIONAL)"), ae(f, "margin-top", "10px"), s(n, "class", "card-content svelte-8clotx"), s(p, "class", "btn-ghost svelte-8clotx"), s(b, "class", "btn-main svelte-8clotx"), s(d, "class", "card-footer svelte-8clotx"), s(e, "class", "terminal-card svelte-8clotx");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*modalData*/
        l[9].input
      ), a(n, c), a(n, f), x(
        f,
        /*modalData*/
        l[9].input2
      ), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), h || (_ = [
        R(
          o,
          "input",
          /*input0_input_handler*/
          l[28]
        ),
        R(
          f,
          "input",
          /*input1_input_handler*/
          l[29]
        ),
        R(
          p,
          "click",
          /*closeModal*/
          l[15]
        ),
        R(
          b,
          "click",
          /*click_handler_2*/
          l[30]
        )
      ], h = !0);
    },
    p(w, k) {
      k[0] & /*modalData*/
      512 && o.value !== /*modalData*/
      w[9].input && x(
        o,
        /*modalData*/
        w[9].input
      ), k[0] & /*modalData*/
      512 && f.value !== /*modalData*/
      w[9].input2 && x(
        f,
        /*modalData*/
        w[9].input2
      );
    },
    i(w) {
      w && (v || Ne(() => {
        v = st(e, Mt, {}), v.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), h = !1, Te(_);
    }
  };
}
function Dv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "VINCULAR_NOVO_ID", i = g(), n = r("div"), o = r("input"), c = g(), f = r("div"), u = r("button"), u.textContent = "CANCELAR", d = g(), p = r("button"), p.textContent = "SINCRONIZAR", s(t, "class", "svelte-8clotx"), s(o, "type", "text"), s(o, "class", "hacker-input svelte-8clotx"), s(o, "placeholder", "MV-XXXX"), s(n, "class", "card-content center svelte-8clotx"), s(u, "class", "btn-ghost svelte-8clotx"), s(p, "class", "btn-main svelte-8clotx"), s(f, "class", "card-footer svelte-8clotx"), s(e, "class", "terminal-card small svelte-8clotx");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*modalData*/
        l[9].input
      ), a(e, c), a(e, f), a(f, u), a(f, d), a(f, p), b || (v = [
        R(
          o,
          "input",
          /*input_input_handler_1*/
          l[26]
        ),
        R(
          u,
          "click",
          /*closeModal*/
          l[15]
        ),
        R(
          p,
          "click",
          /*click_handler_1*/
          l[27]
        )
      ], b = !0);
    },
    p(h, _) {
      _[0] & /*modalData*/
      512 && o.value !== /*modalData*/
      h[9].input && x(
        o,
        /*modalData*/
        h[9].input
      );
    },
    i(h) {
      h && (m || Ne(() => {
        m = st(e, Mt, {}), m.start();
      }));
    },
    o: ge,
    d(h) {
      h && P(e), b = !1, Te(v);
    }
  };
}
function Rv(l) {
  let e, t, i, n = (
    /*modalData*/
    l[9].targetGroup.name + ""
  ), o, c, f, u, d, p, m, b, v, h, _, w;
  return {
    c() {
      e = r("div"), t = r("header"), i = B("SENHA REQUERIDA: "), o = B(n), c = g(), f = r("div"), u = r("input"), d = g(), p = r("div"), m = r("button"), m.textContent = "ABORTAR", b = g(), v = r("button"), v.textContent = "ENTRAR", s(t, "class", "svelte-8clotx"), s(u, "type", "password"), s(u, "maxlength", "4"), s(u, "class", "hacker-input-large svelte-8clotx"), u.autofocus = !0, s(f, "class", "card-content center svelte-8clotx"), s(m, "class", "btn-ghost svelte-8clotx"), s(v, "class", "btn-main svelte-8clotx"), s(p, "class", "card-footer svelte-8clotx"), s(e, "class", "terminal-card small svelte-8clotx");
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, i), a(t, o), a(e, c), a(e, f), a(f, u), x(
        u,
        /*modalData*/
        l[9].input
      ), a(e, d), a(e, p), a(p, m), a(p, b), a(p, v), u.focus(), _ || (w = [
        R(
          u,
          "input",
          /*input_input_handler*/
          l[24]
        ),
        R(
          u,
          "keydown",
          /*keydown_handler*/
          l[25]
        ),
        R(
          m,
          "click",
          /*closeModal*/
          l[15]
        ),
        R(
          v,
          "click",
          /*confirmPassword*/
          l[18]
        )
      ], _ = !0);
    },
    p(k, A) {
      A[0] & /*modalData*/
      512 && n !== (n = /*modalData*/
      k[9].targetGroup.name + "") && te(o, n), A[0] & /*modalData*/
      512 && u.value !== /*modalData*/
      k[9].input && x(
        u,
        /*modalData*/
        k[9].input
      );
    },
    i(k) {
      k && (h || Ne(() => {
        h = st(e, Mt, {}), h.start();
      }));
    },
    o: ge,
    d(k) {
      k && P(e), _ = !1, Te(w);
    }
  };
}
function Mv(l) {
  let e, t, i, n, o, c = ql.getRPWarning() + "", f, u, d, p, m;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "‚ö†Ô∏è PROTOCOLO_CAN√îNICO", i = g(), n = r("div"), o = new ps(!1), f = g(), u = r("button"), u.textContent = "AUTENTICAR", s(t, "class", "svelte-8clotx"), o.a = f, s(u, "class", "btn-full svelte-8clotx"), s(n, "class", "card-content svelte-8clotx"), s(e, "class", "terminal-card warning svelte-8clotx");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, i), a(e, n), o.m(c, n), a(n, f), a(n, u), p || (m = R(
        u,
        "click",
        /*click_handler*/
        l[23]
      ), p = !0);
    },
    p: ge,
    i(b) {
      b && (d || Ne(() => {
        d = st(e, Mt, {}), d.start();
      }));
    },
    o: ge,
    d(b) {
      b && P(e), p = !1, m();
    }
  };
}
function Nv(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*statusFeed*/
    l[11]
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = lc(Kr(l, u, p));
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "ATUALIZAR_MEU_FEED", i = g(), n = r("div");
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      s(t, "class", "btn-status-post svelte-8clotx"), s(n, "class", "status-list svelte-8clotx"), s(e, "class", "status-panel svelte-8clotx");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, n);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(n, null);
      c || (f = R(
        t,
        "click",
        /*click_handler_16*/
        l[49]
      ), c = !0);
    },
    p(p, m) {
      if (m[0] & /*statusFeed*/
      2048) {
        u = ce(
          /*statusFeed*/
          p[11]
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = Kr(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = lc(v), d[b].c(), d[b].m(n, null));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
    },
    i(p) {
      p && (o || Ne(() => {
        o = st(e, Qe, {}), o.start();
      }));
    },
    o: ge,
    d(p) {
      p && P(e), Fe(d, p), c = !1, f();
    }
  };
}
function Lv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h = ce(
    /*contacts*/
    l[12]
  ), _ = [];
  for (let w = 0; w < h.length; w += 1)
    _[w] = ac(Zr(l, h, w));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.textContent = "ID_LOCAL", n = g(), o = r("div"), c = B(
        /*myCommID*/
        l[10]
      ), f = g(), u = r("button"), u.textContent = "SINCRONIZAR_ID", d = g(), p = r("div");
      for (let w = 0; w < _.length; w += 1)
        _[w].c();
      s(i, "class", "hero-label svelte-8clotx"), s(o, "class", "hero-val svelte-8clotx"), s(u, "class", "btn-main svelte-8clotx"), s(t, "class", "id-hero svelte-8clotx"), s(p, "class", "contact-grid svelte-8clotx"), s(e, "class", "contacts-panel svelte-8clotx");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(t, f), a(t, u), a(e, d), a(e, p);
      for (let A = 0; A < _.length; A += 1)
        _[A] && _[A].m(p, null);
      b || (v = R(
        u,
        "click",
        /*click_handler_14*/
        l[47]
      ), b = !0);
    },
    p(w, k) {
      if (k[0] & /*myCommID*/
      1024 && te(
        c,
        /*myCommID*/
        w[10]
      ), k[0] & /*openDM, contacts*/
      1052672) {
        h = ce(
          /*contacts*/
          w[12]
        );
        let A;
        for (A = 0; A < h.length; A += 1) {
          const y = Zr(w, h, A);
          _[A] ? _[A].p(y, k) : (_[A] = ac(y), _[A].c(), _[A].m(p, null));
        }
        for (; A < _.length; A += 1)
          _[A].d(1);
        _.length = h.length;
      }
    },
    i(w) {
      w && (m || Ne(() => {
        m = st(e, Qe, {}), m.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), Fe(_, w), b = !1, v();
    }
  };
}
function Pv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = [], S = /* @__PURE__ */ new Map(), O, C, T, N, I, D, M, G, L, U, z = ce(
    /*groups*/
    l[13]
  ), F = [];
  for (let j = 0; j < z.length; j += 1)
    F[j] = ic(ec(l, z, j));
  let W = ce(
    /*contacts*/
    l[12]
  ), H = [];
  for (let j = 0; j < W.length; j += 1)
    H[j] = sc($r(l, W, j));
  let V = ce(
    /*messages*/
    l[14]
  );
  const J = (j) => (
    /*m*/
    j[52].id
  );
  for (let j = 0; j < V.length; j += 1) {
    let X = xr(l, V, j), K = J(X);
    S.set(K, E[j] = oc(K, X));
  }
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), n = B("CANAIS "), o = r("button"), o.textContent = "+", c = g(), f = r("div");
      for (let j = 0; j < F.length; j += 1)
        F[j].c();
      u = g(), d = r("div"), d.textContent = "DIRETAS", p = g(), m = r("div");
      for (let j = 0; j < H.length; j += 1)
        H[j].c();
      b = g(), v = r("main"), h = r("header"), _ = r("div"), w = B("# "), k = B(
        /*activeChatName*/
        l[4]
      ), A = g(), y = r("div");
      for (let j = 0; j < E.length; j += 1)
        E[j].c();
      O = g(), C = r("div"), T = r("button"), T.innerHTML = '<i class="fas fa-paperclip svelte-8clotx"></i>', N = g(), I = r("textarea"), D = g(), M = r("button"), M.innerHTML = '<i class="fas fa-paper-plane svelte-8clotx"></i>', s(o, "class", "btn-mini svelte-8clotx"), s(i, "class", "sidebar-label svelte-8clotx"), s(f, "class", "scroll-list svelte-8clotx"), s(d, "class", "sidebar-label svelte-8clotx"), s(m, "class", "scroll-list svelte-8clotx"), s(t, "class", "chat-selector svelte-8clotx"), s(_, "class", "title-wrap svelte-8clotx"), s(h, "class", "chat-info svelte-8clotx"), s(y, "class", "message-log svelte-8clotx"), s(T, "class", "btn-small-icon svelte-8clotx"), s(I, "class", "chat-input svelte-8clotx"), s(M, "class", "btn-small-send svelte-8clotx"), s(C, "class", "chat-composer svelte-8clotx"), s(v, "class", "chat-main svelte-8clotx"), s(e, "class", "split-view svelte-8clotx");
    },
    m(j, X) {
      q(j, e, X), a(e, t), a(t, i), a(i, n), a(i, o), a(t, c), a(t, f);
      for (let K = 0; K < F.length; K += 1)
        F[K] && F[K].m(f, null);
      a(t, u), a(t, d), a(t, p), a(t, m);
      for (let K = 0; K < H.length; K += 1)
        H[K] && H[K].m(m, null);
      a(e, b), a(e, v), a(v, h), a(h, _), a(_, w), a(_, k), a(v, A), a(v, y);
      for (let K = 0; K < E.length; K += 1)
        E[K] && E[K].m(y, null);
      l[42](y), a(v, O), a(v, C), a(C, T), a(C, N), a(C, I), x(
        I,
        /*newMessage*/
        l[5]
      ), a(C, D), a(C, M), L || (U = [
        R(
          o,
          "click",
          /*click_handler_7*/
          l[37]
        ),
        R(
          T,
          "click",
          /*click_handler_12*/
          l[43]
        ),
        R(
          I,
          "input",
          /*textarea_input_handler*/
          l[44]
        ),
        R(
          I,
          "keydown",
          /*keydown_handler_1*/
          l[45]
        ),
        R(
          M,
          "click",
          /*click_handler_13*/
          l[46]
        )
      ], L = !0);
    },
    p(j, X) {
      if (X[0] & /*activeChatId, groups, handleEnterGroup*/
      139268) {
        z = ce(
          /*groups*/
          j[13]
        );
        let K;
        for (K = 0; K < z.length; K += 1) {
          const Z = ec(j, z, K);
          F[K] ? F[K].p(Z, X) : (F[K] = ic(Z), F[K].c(), F[K].m(f, null));
        }
        for (; K < F.length; K += 1)
          F[K].d(1);
        F.length = z.length;
      }
      if (X[0] & /*activeChatId, actor, contacts, openDM*/
      1052677) {
        W = ce(
          /*contacts*/
          j[12]
        );
        let K;
        for (K = 0; K < W.length; K += 1) {
          const Z = $r(j, W, K);
          H[K] ? H[K].p(Z, X) : (H[K] = sc(Z), H[K].c(), H[K].m(m, null));
        }
        for (; K < H.length; K += 1)
          H[K].d(1);
        H.length = W.length;
      }
      X[0] & /*activeChatName*/
      16 && te(
        k,
        /*activeChatName*/
        j[4]
      ), X[0] & /*messages, actor*/
      16385 && (V = ce(
        /*messages*/
        j[14]
      ), E = Tl(E, X, J, 1, j, V, S, y, Qa, oc, null, xr)), X[0] & /*newMessage*/
      32 && x(
        I,
        /*newMessage*/
        j[5]
      );
    },
    i(j) {
      for (let X = 0; X < V.length; X += 1)
        ne(E[X]);
      j && (G || Ne(() => {
        G = st(e, Qe, {}), G.start();
      }));
    },
    o: ge,
    d(j) {
      j && P(e), Fe(F, j), Fe(H, j);
      for (let X = 0; X < E.length; X += 1)
        E[X].d();
      l[42](null), L = !1, Te(U);
    }
  };
}
function lc(l) {
  let e, t, i, n, o, c, f, u = (
    /*s*/
    l[63].name + ""
  ), d, p, m = (
    /*s*/
    l[63].text + ""
  ), b, v;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("img"), o = g(), c = r("div"), f = r("b"), d = B(u), p = r("p"), b = B(m), v = g(), at(i.src, n = /*s*/
      l[63].img) || s(i, "src", n), s(i, "class", "s-av svelte-8clotx"), s(i, "alt", "av"), s(f, "class", "svelte-8clotx"), s(p, "class", "svelte-8clotx"), s(c, "class", "s-info svelte-8clotx"), s(t, "class", "card-overlay svelte-8clotx"), s(e, "class", "status-card-v2 svelte-8clotx"), ae(e, "background-image", "url(" + /*s*/
      (l[63].image && /*s*/
      l[63].image.length > 3 ? (
        /*s*/
        l[63].image
      ) : "icons/svg/hazard.svg") + ")");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(t, i), a(t, o), a(t, c), a(c, f), a(f, d), a(c, p), a(p, b), a(e, v);
    },
    p(h, _) {
      _[0] & /*statusFeed*/
      2048 && !at(i.src, n = /*s*/
      h[63].img) && s(i, "src", n), _[0] & /*statusFeed*/
      2048 && u !== (u = /*s*/
      h[63].name + "") && te(d, u), _[0] & /*statusFeed*/
      2048 && m !== (m = /*s*/
      h[63].text + "") && te(b, m), _[0] & /*statusFeed*/
      2048 && ae(e, "background-image", "url(" + /*s*/
      (h[63].image && /*s*/
      h[63].image.length > 3 ? (
        /*s*/
        h[63].image
      ) : "icons/svg/hazard.svg") + ")");
    },
    d(h) {
      h && P(e);
    }
  };
}
function ac(l) {
  let e, t, i, n, o, c, f = (
    /*c*/
    l[55].name + ""
  ), u, d, p = (
    /*c*/
    l[55].commID + ""
  ), m, b, v, h;
  function _() {
    return (
      /*click_handler_15*/
      l[48](
        /*c*/
        l[55]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("b"), u = B(f), d = r("span"), m = B(p), b = g(), at(t.src, i = /*c*/
      l[55].img) || s(t, "src", i), s(t, "alt", "av"), s(t, "class", "svelte-8clotx"), s(c, "class", "svelte-8clotx"), s(d, "class", "svelte-8clotx"), s(o, "class", "c-meta svelte-8clotx"), s(e, "class", "contact-card svelte-8clotx");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(o, d), a(d, m), a(e, b), v || (h = R(e, "click", _), v = !0);
    },
    p(w, k) {
      l = w, k[0] & /*contacts*/
      4096 && !at(t.src, i = /*c*/
      l[55].img) && s(t, "src", i), k[0] & /*contacts*/
      4096 && f !== (f = /*c*/
      l[55].name + "") && te(u, f), k[0] & /*contacts*/
      4096 && p !== (p = /*c*/
      l[55].commID + "") && te(m, p);
    },
    d(w) {
      w && P(e), v = !1, h();
    }
  };
}
function ic(l) {
  let e, t, i, n, o, c = (
    /*g*/
    l[58].name + ""
  ), f, u, d, p;
  function m() {
    return (
      /*click_handler_8*/
      l[38](
        /*g*/
        l[58]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("i"), n = g(), o = r("span"), f = B(c), u = g(), s(t, "class", i = "fas " + /*g*/
      l[58].icon + " svelte-8clotx"), s(o, "class", "svelte-8clotx"), s(e, "class", "chat-tab svelte-8clotx"), he(
        e,
        "active",
        /*activeChatId*/
        l[2] === /*g*/
        l[58].id
      );
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, n), a(e, o), a(o, f), a(e, u), d || (p = R(e, "click", m), d = !0);
    },
    p(b, v) {
      l = b, v[0] & /*groups*/
      8192 && i !== (i = "fas " + /*g*/
      l[58].icon + " svelte-8clotx") && s(t, "class", i), v[0] & /*groups*/
      8192 && c !== (c = /*g*/
      l[58].name + "") && te(f, c), v[0] & /*activeChatId, groups*/
      8196 && he(
        e,
        "active",
        /*activeChatId*/
        l[2] === /*g*/
        l[58].id
      );
    },
    d(b) {
      b && P(e), d = !1, p();
    }
  };
}
function sc(l) {
  let e, t, i, n, o, c = (
    /*c*/
    l[55].name + ""
  ), f, u, d, p;
  function m() {
    return (
      /*click_handler_9*/
      l[39](
        /*c*/
        l[55]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("img"), n = g(), o = r("span"), f = B(c), u = g(), at(t.src, i = /*c*/
      l[55].img) || s(t, "src", i), s(t, "class", "av-mini svelte-8clotx"), s(t, "alt", "av"), s(o, "class", "svelte-8clotx"), s(e, "class", "chat-tab svelte-8clotx"), he(
        e,
        "active",
        /*activeChatId*/
        l[2] === ql.getPrivateChatId(
          /*actor*/
          l[0].id,
          /*c*/
          l[55].id
        )
      );
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, n), a(e, o), a(o, f), a(e, u), d || (p = R(e, "click", m), d = !0);
    },
    p(b, v) {
      l = b, v[0] & /*contacts*/
      4096 && !at(t.src, i = /*c*/
      l[55].img) && s(t, "src", i), v[0] & /*contacts*/
      4096 && c !== (c = /*c*/
      l[55].name + "") && te(f, c), v[0] & /*activeChatId, actor, contacts*/
      4101 && he(
        e,
        "active",
        /*activeChatId*/
        l[2] === ql.getPrivateChatId(
          /*actor*/
          l[0].id,
          /*c*/
          l[55].id
        )
      );
    },
    d(b) {
      b && P(e), d = !1, p();
    }
  };
}
function nc(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_11*/
      l[41](
        /*m*/
        l[52]
      )
    );
  }
  return {
    c() {
      e = r("img"), at(e.src, t = /*m*/
      l[52].image) || s(e, "src", t), s(e, "class", "b-img svelte-8clotx"), s(e, "alt", "media");
    },
    m(c, f) {
      q(c, e, f), i || (n = R(e, "click", o), i = !0);
    },
    p(c, f) {
      l = c, f[0] & /*messages*/
      16384 && !at(e.src, t = /*m*/
      l[52].image) && s(e, "src", t);
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function oc(l, e) {
  let t, i, n, o, c = (
    /*m*/
    e[52].senderName + ""
  ), f, u, d, p, m = (
    /*m*/
    e[52].senderCommID + ""
  ), b, v, h, _, w = (
    /*m*/
    e[52].text.replace(/\n/g, "<br>") + ""
  ), k, A, y = new Date(
    /*m*/
    e[52].timestamp
  ).toLocaleTimeString() + "", E, S, O, C, T;
  function N() {
    return (
      /*click_handler_10*/
      e[40](
        /*m*/
        e[52]
      )
    );
  }
  let I = (
    /*m*/
    e[52].image && nc(e)
  );
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), n = r("div"), o = r("span"), f = B(c), u = g(), d = r("span"), p = B("#"), b = B(m), v = g(), I && I.c(), h = g(), _ = r("div"), k = g(), A = r("div"), E = B(y), S = g(), s(o, "class", "b-name svelte-8clotx"), s(d, "class", "b-id svelte-8clotx"), s(n, "class", "b-head svelte-8clotx"), s(_, "class", "b-text svelte-8clotx"), s(A, "class", "b-time svelte-8clotx"), s(i, "class", "bubble svelte-8clotx"), s(t, "class", "msg-block svelte-8clotx"), he(
        t,
        "me",
        /*m*/
        e[52].senderActorId === /*actor*/
        e[0].id
      ), this.first = t;
    },
    m(D, M) {
      q(D, t, M), a(t, i), a(i, n), a(n, o), a(o, f), a(n, u), a(n, d), a(d, p), a(d, b), a(i, v), I && I.m(i, null), a(i, h), a(i, _), _.innerHTML = w, a(i, k), a(i, A), a(A, E), a(t, S), C || (T = R(d, "click", N), C = !0);
    },
    p(D, M) {
      e = D, M[0] & /*messages*/
      16384 && c !== (c = /*m*/
      e[52].senderName + "") && te(f, c), M[0] & /*messages*/
      16384 && m !== (m = /*m*/
      e[52].senderCommID + "") && te(b, m), /*m*/
      e[52].image ? I ? I.p(e, M) : (I = nc(e), I.c(), I.m(i, h)) : I && (I.d(1), I = null), M[0] & /*messages*/
      16384 && w !== (w = /*m*/
      e[52].text.replace(/\n/g, "<br>") + "") && (_.innerHTML = w), M[0] & /*messages*/
      16384 && y !== (y = new Date(
        /*m*/
        e[52].timestamp
      ).toLocaleTimeString() + "") && te(E, y), M[0] & /*messages, actor*/
      16385 && he(
        t,
        "me",
        /*m*/
        e[52].senderActorId === /*actor*/
        e[0].id
      );
    },
    i(D) {
      D && (O || Ne(() => {
        O = st(t, Qe, {}), O.start();
      }));
    },
    o: ge,
    d(D) {
      D && P(t), I && I.d(), C = !1, T();
    }
  };
}
function qv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*activeModal*/
    (l[8] || /*showWarning*/
    l[7]) && tc(l)
  );
  function h(k, A) {
    if (
      /*activeTab*/
      k[3] === "chats"
    ) return Pv;
    if (
      /*activeTab*/
      k[3] === "contacts"
    ) return Lv;
    if (
      /*activeTab*/
      k[3] === "status"
    ) return Nv;
  }
  let _ = h(l), w = _ && _(l);
  return {
    c() {
      e = r("div"), v && v.c(), t = g(), i = r("nav"), n = r("button"), n.innerHTML = '<i class="fas fa-terminal svelte-8clotx"></i><span class="svelte-8clotx">REDE</span>', o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-users-cog svelte-8clotx"></i><span class="svelte-8clotx">LINKS</span>', f = g(), u = r("button"), u.innerHTML = '<i class="fas fa-satellite svelte-8clotx"></i><span class="svelte-8clotx">FEED</span>', d = g(), p = r("div"), w && w.c(), s(n, "class", "svelte-8clotx"), he(
        n,
        "active",
        /*activeTab*/
        l[3] === "chats"
      ), s(c, "class", "svelte-8clotx"), he(
        c,
        "active",
        /*activeTab*/
        l[3] === "contacts"
      ), s(u, "class", "svelte-8clotx"), he(
        u,
        "active",
        /*activeTab*/
        l[3] === "status"
      ), s(i, "class", "app-nav svelte-8clotx"), s(p, "class", "app-viewport svelte-8clotx"), s(e, "class", "comms-app-root svelte-8clotx"), s(
        e,
        "style",
        /*themeStyle*/
        l[1]
      );
    },
    m(k, A) {
      q(k, e, A), v && v.m(e, null), a(e, t), a(e, i), a(i, n), a(i, o), a(i, c), a(i, f), a(i, u), a(e, d), a(e, p), w && w.m(p, null), m || (b = [
        R(
          n,
          "click",
          /*click_handler_4*/
          l[34]
        ),
        R(
          c,
          "click",
          /*click_handler_5*/
          l[35]
        ),
        R(
          u,
          "click",
          /*click_handler_6*/
          l[36]
        )
      ], m = !0);
    },
    p(k, A) {
      /*activeModal*/
      k[8] || /*showWarning*/
      k[7] ? v ? (v.p(k, A), A[0] & /*activeModal, showWarning*/
      384 && ne(v, 1)) : (v = tc(k), v.c(), ne(v, 1), v.m(e, t)) : v && ($e(), Ae(v, 1, 1, () => {
        v = null;
      }), et()), A[0] & /*activeTab*/
      8 && he(
        n,
        "active",
        /*activeTab*/
        k[3] === "chats"
      ), A[0] & /*activeTab*/
      8 && he(
        c,
        "active",
        /*activeTab*/
        k[3] === "contacts"
      ), A[0] & /*activeTab*/
      8 && he(
        u,
        "active",
        /*activeTab*/
        k[3] === "status"
      ), _ === (_ = h(k)) && w ? w.p(k, A) : (w && w.d(1), w = _ && _(k), w && (w.c(), ne(w, 1), w.m(p, null))), A[0] & /*themeStyle*/
      2 && s(
        e,
        "style",
        /*themeStyle*/
        k[1]
      );
    },
    i(k) {
      ne(v), ne(w);
    },
    o(k) {
      Ae(v);
    },
    d(k) {
      k && P(e), v && v.d(), w && w.d(), m = !1, Te(b);
    }
  };
}
const Zi = "multiversus-rpg";
function Uv(l, e, t) {
  let i, n, o, c, f, u, d;
  _a(l, N0, (re) => t(21, u = re)), _a(l, M0, (re) => t(22, d = re));
  let { actor: p } = e, { themeStyle: m = "" } = e, b;
  Xr.subscribe((re) => t(3, b = re));
  let v;
  Jr.subscribe((re) => t(2, v = re));
  let h;
  Yr.subscribe((re) => t(4, h = re));
  let _ = "", w, k = !0, A = null, y = { input: "", input2: "", targetGroup: null };
  qt(async () => {
    t(10, f = await ql.getCommID(p)), Qr(), Hooks.on("commsUpdate", () => {
      Qr(), E();
    });
  });
  async function E() {
    await pi(), w && t(6, w.scrollTop = w.scrollHeight, w);
  }
  function S() {
    t(8, A = null), t(9, y = { input: "", input2: "", targetGroup: null });
  }
  function O(re) {
    Xr.set(re);
  }
  function C(re, ye) {
    Jr.set(re), Yr.set(ye), E();
  }
  function T(re) {
    if (!re.isPrivate || game.user.isGM)
      return C(re.id, re.name);
    t(9, y = { input: "", targetGroup: re }), t(8, A = "password");
  }
  function N() {
    y.input === y.targetGroup.password ? (C(y.targetGroup.id, y.targetGroup.name), S()) : (ui.notifications.error("CHAVE_INV√ÅLIDA"), t(9, y.input = "", y));
  }
  async function I(re = null) {
    !_.trim() && !re || (await ql.sendMessage({
      chatId: v,
      senderActorId: p.id,
      senderName: p.name,
      senderImg: p.img,
      senderCommID: f,
      text: _.trim(),
      image: re
    }), t(5, _ = ""));
  }
  function D(re) {
    const ye = ql.getPrivateChatId(p.id, re.id);
    C(ye, re.name), O("chats");
  }
  const M = () => t(7, k = !1);
  function G() {
    y.input = this.value, t(9, y);
  }
  const L = (re) => re.key === "Enter" && N();
  function U() {
    y.input = this.value, t(9, y);
  }
  const z = () => {
    ql.addContact(p, y.input.toUpperCase()), S();
  };
  function F() {
    y.input = this.value, t(9, y);
  }
  function W() {
    y.input2 = this.value, t(9, y);
  }
  const H = () => {
    ql.createGroup(y.input, y.input2), S();
  };
  function V() {
    y.input = this.value, t(9, y);
  }
  function J() {
    y.input2 = this.value, t(9, y);
  }
  const j = () => {
    ql.updateStatus(p, {
      text: y.input,
      image: y.input2
    }), S();
  }, X = () => O("chats"), K = () => O("contacts"), Z = () => O("status"), le = () => t(8, A = "create_group"), $ = (re) => T(re), se = (re) => D(re), Y = (re) => ql.addContact(p, re.senderCommID), Q = (re) => window.open(re.image);
  function ie(re) {
    wa[re ? "unshift" : "push"](() => {
      w = re, t(6, w);
    });
  }
  const ee = () => {
    new Dialog({
      title: "ANEXAR",
      content: '<input id="u" class="hacker-input" style="width:100%" placeholder="URL da imagem...">',
      buttons: {
        ok: {
          label: "ENVIAR",
          callback: (re) => I(re.find("#u").val())
        }
      }
    }).render(!0);
  };
  function pe() {
    _ = this.value, t(5, _);
  }
  const Ee = (re) => re.key === "Enter" && !re.shiftKey && (re.preventDefault(), I()), De = () => I(), we = () => t(8, A = "add_contact"), ke = (re) => D(re), me = () => t(8, A = "post_status");
  return l.$$set = (re) => {
    "actor" in re && t(0, p = re.actor), "themeStyle" in re && t(1, m = re.themeStyle);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*$chatStore, activeChatId*/
    4194308 && t(14, i = (d || []).filter((re) => re.chatId === v)), l.$$.dirty[0] & /*$groupsStore*/
    2097152 && t(13, n = u || []), l.$$.dirty[0] & /*actor*/
    1 && t(12, o = p.getFlag(Zi, "contacts") || []), l.$$.dirty[0] & /*actor*/
    1 && t(10, f = p.getFlag(Zi, "commID") || "MV-0000");
  }, t(11, c = game.settings.get(Zi, "comms_status") || []), [
    p,
    m,
    v,
    b,
    h,
    _,
    w,
    k,
    A,
    y,
    f,
    c,
    o,
    n,
    i,
    S,
    O,
    T,
    N,
    I,
    D,
    u,
    d,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me
  ];
}
class Gv extends mt {
  constructor(e) {
    super(), pt(this, e, Uv, qv, dt, { actor: 0, themeStyle: 1 }, null, [-1, -1, -1]);
  }
}
const rc = "multiversus-rpg", Hv = {
  // Busca todos os dados do Testamento salvos na ficha
  getTestData: (l) => l.getFlag(rc, "testamento") || {
    isLocked: !0,
    isPublic: !1,
    notes: [
      { id: foundry.utils.randomID(), title: "√öLTIMAS_VONTADES", content: "Escreva aqui o que deve ser feito com seus pertences..." },
      { id: foundry.utils.randomID(), title: "DI√ÅRIO_PESSOAL", content: "" }
    ]
  },
  // Salva uma altera√ß√£o completa no Testamento
  saveTestData: async (l, e) => {
    await l.setFlag(rc, "testamento", e);
  },
  // AVISO MAXIMIZADO - FUNCIONA COMO UMA BARREIRA VISUAL
  getSacredWarning: () => `
        <div style="font-family: 'Share Tech Mono', monospace; text-align: center;">
            <div style="font-size: 70px; color: var(--c-primary); margin-bottom: 10px;">
                <i class="fas fa-user-secret"></i>
            </div>
            <h1 style="font-size: 32px; letter-spacing: 5px; color: #fff; margin-bottom: 20px; border-bottom: 2px solid var(--c-primary); display: inline-block; padding-bottom: 10px;">
                ACESSO RESTRITO
            </h1>
            
            <div style="background: rgba(255, 0, 0, 0.1); border: 1px solid #ff4444; padding: 25px; text-align: left; margin: 20px 0;">
                <h3 style="color: #ff4444; margin-top: 0; font-size: 20px;">‚ö†Ô∏è PROTOCOLO DE PRIVACIDADE N√çVEL 5</h3>
                <p style="font-size: 16px; line-height: 1.5; color: #ffbcbc;">
                    Este ambiente cont√©m dados da <b>PSIQUE PRIVADA</b> do jogador. O acesso n√£o autorizado por mestres ou auxiliares sem o rompimento do "Lacre de Morte" narrativo √© uma <b>VIOLA√á√ÉO GRAVE</b> das regras da Multiversus RPG.
                </p>
                <p style="font-size: 14px; color: #ffbcbc; opacity: 0.8;">
                    O descumprimento resultar√° em banimento administrativo e quebra permanente de confian√ßa.
                </p>
            </div>

            <p style="font-style: italic; opacity: 0.5; margin-top: 20px;">
                "O que aqui reside pertence apenas ao portador do c√≥digo e ao destino final."
            </p>
        </div>
    `
};
function cc(l, e, t) {
  const i = l.slice();
  return i[18] = e[t], i;
}
function fc(l) {
  let e, t, i, n, o = Hv.getSacredWarning() + "", c, f, u, d, p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = new ps(!1), c = g(), f = r("div"), u = r("div"), u.textContent = "SISTEMA_AGUARDANDO_AUTENTICA√á√ÉO...", d = g(), p = r("button"), p.innerHTML = '<i class="fas fa-fingerprint"></i> RECONHECER IDENTIDADE E ACESSAR', n.a = c, s(u, "class", "status-blink svelte-aznqzl"), s(p, "class", "auth-btn svelte-aznqzl"), s(f, "class", "auth-section svelte-aznqzl"), s(i, "class", "barrier-content"), s(t, "class", "barrier-card svelte-aznqzl"), s(e, "class", "sacred-overlay svelte-aznqzl");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), n.m(o, i), a(i, c), a(i, f), a(f, u), a(f, d), a(f, p), v = !0, h || (_ = R(
        p,
        "click",
        /*click_handler*/
        l[13]
      ), h = !0);
    },
    p: ge,
    i(w) {
      v || (w && (m || Ne(() => {
        m = st(t, Mt, { duration: 300, start: 0.95 }), m.start();
      })), w && Ne(() => {
        v && (b || (b = We(e, Qe, { duration: 200 }, !0)), b.run(1));
      }), v = !0);
    },
    o(w) {
      w && (b || (b = We(e, Qe, { duration: 200 }, !1)), b.run(0)), v = !1;
    },
    d(w) {
      w && P(e), w && b && b.end(), h = !1, _();
    }
  };
}
function dc(l, e) {
  let t, i, n, o, c, f, u, d, p, m;
  function b(..._) {
    return (
      /*blur_handler*/
      e[14](
        /*note*/
        e[18],
        ..._
      )
    );
  }
  function v() {
    return (
      /*click_handler_1*/
      e[15](
        /*note*/
        e[18]
      )
    );
  }
  function h() {
    return (
      /*click_handler_2*/
      e[16](
        /*note*/
        e[18]
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), n = g(), o = r("input"), f = g(), u = r("button"), u.textContent = "√ó", d = g(), s(i, "class", "tab-indicator svelte-aznqzl"), o.value = c = /*note*/
      e[18].title, s(o, "spellcheck", "false"), s(o, "class", "svelte-aznqzl"), s(u, "class", "btn-del svelte-aznqzl"), s(t, "class", "note-tab svelte-aznqzl"), he(
        t,
        "active",
        /*activeNoteId*/
        e[1] === /*note*/
        e[18].id
      ), this.first = t;
    },
    m(_, w) {
      q(_, t, w), a(t, i), a(t, n), a(t, o), a(t, f), a(t, u), a(t, d), p || (m = [
        R(o, "blur", b),
        R(u, "click", Lt(v)),
        R(t, "click", h)
      ], p = !0);
    },
    p(_, w) {
      e = _, w & /*notes*/
      4 && c !== (c = /*note*/
      e[18].title) && o.value !== c && (o.value = c), w & /*activeNoteId, notes*/
      6 && he(
        t,
        "active",
        /*activeNoteId*/
        e[1] === /*note*/
        e[18].id
      );
    },
    d(_) {
      _ && P(t), p = !1, Te(m);
    }
  };
}
function uc(l) {
  let e, t, i, n = (
    /*activeNote*/
    l[5].title.toLowerCase() + ""
  ), o, c, f, u, d = (
    /*isPublic*/
    l[4] ? "DECRYPTED" : "AES-256_ENCRYPTED"
  ), p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("span"), i = B("root/memorial/logs/"), o = B(n), c = B(".data"), f = g(), u = r("span"), p = B(d), m = g(), b = r("textarea"), s(t, "class", "path"), s(u, "class", "encryption"), s(e, "class", "editor-header svelte-aznqzl"), s(b, "class", "main-textarea svelte-aznqzl"), b.value = v = /*activeNote*/
      l[5].content, s(b, "placeholder", "Insira aqui seus relatos, pensamentos finais ou instru√ß√µes de legado..."), s(b, "spellcheck", "false");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, o), a(t, c), a(e, f), a(e, u), a(u, p), q(w, m, k), q(w, b, k), h || (_ = R(
        b,
        "input",
        /*handleContentInput*/
        l[8]
      ), h = !0);
    },
    p(w, k) {
      k & /*activeNote*/
      32 && n !== (n = /*activeNote*/
      w[5].title.toLowerCase() + "") && te(o, n), k & /*isPublic*/
      16 && d !== (d = /*isPublic*/
      w[4] ? "DECRYPTED" : "AES-256_ENCRYPTED") && te(p, d), k & /*activeNote*/
      32 && v !== (v = /*activeNote*/
      w[5].content) && (b.value = v);
    },
    d(w) {
      w && (P(e), P(m), P(b)), h = !1, _();
    }
  };
}
function zv(l) {
  let e, t, i, n, o, c, f, u, d, p = [], m = /* @__PURE__ */ new Map(), b, v, h, _, w, k, A = (
    /*isPublic*/
    l[4] ? "STATUS: EXPOSTO" : "STATUS: SELADO"
  ), y, E, S, O, C, T = (
    /*showOverlay*/
    l[3] && fc(l)
  ), N = ce(
    /*notes*/
    l[2]
  );
  const I = (M) => (
    /*note*/
    M[18].id
  );
  for (let M = 0; M < N.length; M += 1) {
    let G = cc(l, N, M), L = I(G);
    m.set(L, p[M] = dc(L, G));
  }
  let D = (
    /*activeNote*/
    l[5] && uc(l)
  );
  return {
    c() {
      e = r("div"), T && T.c(), t = g(), i = r("aside"), n = r("div"), o = r("div"), o.innerHTML = '<i class="fas fa-database"></i> MEMORIAL', c = g(), f = r("button"), f.textContent = "+", u = g(), d = r("div");
      for (let M = 0; M < p.length; M += 1)
        p[M].c();
      b = g(), v = r("div"), h = r("button"), _ = r("i"), k = g(), y = B(A), E = g(), S = r("main"), D && D.c(), s(o, "class", "header-title svelte-aznqzl"), s(f, "class", "btn-add svelte-aznqzl"), s(f, "title", "Nova P√°gina"), s(n, "class", "sidebar-header svelte-aznqzl"), s(d, "class", "notes-list svelte-aznqzl"), s(_, "class", w = "fas " + /*isPublic*/
      (l[4] ? "fa-unlock" : "fa-lock")), s(h, "class", "btn-lacre svelte-aznqzl"), he(
        h,
        "exposed",
        /*isPublic*/
        l[4]
      ), s(v, "class", "sidebar-footer svelte-aznqzl"), s(i, "class", "test-sidebar svelte-aznqzl"), s(S, "class", "test-editor-container svelte-aznqzl"), s(e, "class", "testamento-root svelte-aznqzl"), s(
        e,
        "style",
        /*themeStyle*/
        l[0]
      );
    },
    m(M, G) {
      q(M, e, G), T && T.m(e, null), a(e, t), a(e, i), a(i, n), a(n, o), a(n, c), a(n, f), a(i, u), a(i, d);
      for (let L = 0; L < p.length; L += 1)
        p[L] && p[L].m(d, null);
      a(i, b), a(i, v), a(v, h), a(h, _), a(h, k), a(h, y), a(e, E), a(e, S), D && D.m(S, null), O || (C = [
        R(
          f,
          "click",
          /*addNote*/
          l[6]
        ),
        R(
          h,
          "click",
          /*togglePublic*/
          l[10]
        )
      ], O = !0);
    },
    p(M, [G]) {
      /*showOverlay*/
      M[3] ? T ? (T.p(M, G), G & /*showOverlay*/
      8 && ne(T, 1)) : (T = fc(M), T.c(), ne(T, 1), T.m(e, t)) : T && ($e(), Ae(T, 1, 1, () => {
        T = null;
      }), et()), G & /*activeNoteId, notes, deleteNote, handleTitleBlur*/
      646 && (N = ce(
        /*notes*/
        M[2]
      ), p = Tl(p, G, I, 1, M, N, m, d, Qa, dc, null, cc)), G & /*isPublic*/
      16 && w !== (w = "fas " + /*isPublic*/
      (M[4] ? "fa-unlock" : "fa-lock")) && s(_, "class", w), G & /*isPublic*/
      16 && A !== (A = /*isPublic*/
      M[4] ? "STATUS: EXPOSTO" : "STATUS: SELADO") && te(y, A), G & /*isPublic*/
      16 && he(
        h,
        "exposed",
        /*isPublic*/
        M[4]
      ), /*activeNote*/
      M[5] ? D ? D.p(M, G) : (D = uc(M), D.c(), D.m(S, null)) : D && (D.d(1), D = null), G & /*themeStyle*/
      1 && s(
        e,
        "style",
        /*themeStyle*/
        M[0]
      );
    },
    i(M) {
      ne(T);
    },
    o(M) {
      Ae(T);
    },
    d(M) {
      M && P(e), T && T.d();
      for (let G = 0; G < p.length; G += 1)
        p[G].d();
      D && D.d(), O = !1, Te(C);
    }
  };
}
const pc = "multiversus-rpg";
function Bv(l, e, t) {
  let i, n, o, c, { actor: f } = e, { themeStyle: u = "" } = e, d = !0, p = null;
  qt(() => {
    t(3, d = !0);
  });
  async function m(S, O = null) {
    const C = {
      notes: S,
      isPublic: O !== null ? O : n
    };
    await f.setFlag(pc, "testamento", C);
  }
  function b() {
    const S = {
      id: foundry.utils.randomID(),
      title: `ENTRADA_0${o.length + 1}`,
      content: ""
    }, O = [...o, S];
    t(1, p = S.id), m(O);
  }
  function v(S) {
    if (o.length <= 1) return ui.notifications.warn("O N√öCLEO EXIGE AO MENOS UM REGISTRO.");
    const O = o.filter((C) => C.id !== S);
    p === S && t(1, p = O[0].id), m(O);
  }
  function h(S) {
    const O = o.map((C) => C.id === p ? { ...C, content: S.target.value } : C);
    m(O);
  }
  function _(S, O) {
    const C = o.map((T) => T.id === O ? {
      ...T,
      title: S.target.value.toUpperCase().replace(/\s+/g, "_")
    } : T);
    m(C);
  }
  function w() {
    const S = n ? "RESELAR MEMORIAL? (O conte√∫do voltar√° a ser privado)" : "‚ö†Ô∏è ROMPER LACRE DE MORTE? Isso tornar√° suas √∫ltimas palavras vis√≠veis para outros jogadores e mestres.";
    new Dialog({
      title: "SISTEMA DE SEGURAN√áA",
      content: `<p style="font-family: 'Share Tech Mono', monospace;">${S}</p>`,
      buttons: {
        confirm: {
          label: "CONFIRMAR",
          callback: () => m(o, !n)
        },
        cancel: { label: "ABORTAR" }
      }
    }).render(!0);
  }
  const k = () => t(3, d = !1), A = (S, O) => _(O, S.id), y = (S) => v(S.id), E = (S) => t(1, p = S.id);
  return l.$$set = (S) => {
    "actor" in S && t(11, f = S.actor), "themeStyle" in S && t(0, u = S.themeStyle);
  }, l.$$.update = () => {
    var S, O;
    l.$$.dirty & /*actor*/
    2048 && t(12, i = ((O = (S = f == null ? void 0 : f.flags) == null ? void 0 : S[pc]) == null ? void 0 : O.testamento) || {}), l.$$.dirty & /*testamentoFlags*/
    4096 && t(4, n = i.isPublic || !1), l.$$.dirty & /*testamentoFlags*/
    4096 && t(2, o = Array.isArray(i.notes) ? i.notes : [
      {
        id: foundry.utils.randomID(),
        title: "MEMORIAL_PRINCIPAL",
        content: ""
      }
    ]), l.$$.dirty & /*activeNoteId, notes*/
    6 && !p && o.length > 0 && t(1, p = o[0].id), l.$$.dirty & /*notes, activeNoteId*/
    6 && t(5, c = o.find((C) => C.id === p) || o[0]);
  }, [
    u,
    p,
    o,
    d,
    n,
    c,
    b,
    v,
    h,
    _,
    w,
    f,
    i,
    k,
    A,
    y,
    E
  ];
}
class Fv extends mt {
  constructor(e) {
    super(), pt(this, e, Bv, zv, dt, { actor: 11, themeStyle: 0 });
  }
}
const Ba = "multiversus-rpg", ni = {
  COBRE: { id: "cobre", label: "ü•â COBRE (Padr√£o)", color: "#cd7f32" },
  PRATA: { id: "prata", label: "ü•à PRATA", color: "#e0e0e0" },
  OURO: { id: "ouro", label: "ü•á OURO", color: "#ffcc00" },
  DIAMANTE: { id: "diamante", label: "üíé DIAMANTE", color: "#00fbff" },
  GAMBIARRITE: { id: "gambiarrite", label: "‚ò£Ô∏è GAMBIARRITE", color: "#ff3333" }
}, Xt = {
  // INICIALIZA√á√ÉO (Registra a Setting no Foundry)
  init: () => {
    game.settings && (game.settings.register(Ba, "battlePassSeason", {
      name: "Dados da Temporada",
      scope: "world",
      config: !1,
      type: Object,
      default: { status: "closed", startDate: null, endDate: null, name: "Temporada 1" },
      onChange: () => Hooks.callAll("passSystemUpdate")
      // Avisa a UI para atualizar
    }), console.log("PassSystem | M√≥dulo de Passe Inicializado."));
  },
  // --- M√âTODOS DE TEMPORADA (Global) ---
  getSeasonData: () => {
    try {
      return game.settings.get(Ba, "battlePassSeason");
    } catch {
      return { status: "closed", startDate: null, endDate: null, name: "Temporada X" };
    }
  },
  async updateSeason(l) {
    if (!game.user.isGM) return;
    const t = { ...Xt.getSeasonData(), ...l };
    await game.settings.set(Ba, "battlePassSeason", t), game.socket.emit(`module.${Ba}`, { type: "passUpdate" });
  },
  // --- M√âTODOS DE JOGADOR (Individual via Flags) ---
  getPlayerTier: (l) => {
    const e = game.users.get(l);
    if (!e) return ni.COBRE;
    const t = e.getFlag(Ba, "passTier");
    return Object.values(ni).find((i) => i.id === t) || ni.COBRE;
  },
  async setPlayerTier(l, e) {
    if (!game.user.isGM) return;
    const t = game.users.get(l);
    t && (await t.setFlag(Ba, "passTier", e), Hooks.callAll("passSystemUpdate"));
  },
  // --- UTILIT√ÅRIOS (Matem√°tica) ---
  utils: {
    calculateEndDate: (l) => {
      const e = new Date(l);
      return e.setMonth(e.getMonth() + 3), e.getTime();
    },
    formatDate: (l) => l ? new Date(l).toLocaleDateString("pt-BR") : "--/--/----",
    getDaysRemaining: (l) => {
      if (!l) return 0;
      const e = Date.now();
      if (e > l) return 0;
      const t = l - e;
      return Math.ceil(t / (1e3 * 60 * 60 * 24));
    }
  },
  // Busca o mapa de 12 semanas do banco de dados global
  getRewardsMap: () => Xt.getSeasonData().rewardsMap || Array(12).fill({}).map((e, t) => ({
    week: t + 1,
    gambiarrite: null,
    diamante: null,
    ouro: null,
    prata: null,
    cobre: null
  })),
  // Salva o mapa (Apenas GM)
  saveRewardsMap: async (l) => {
    game.user.isGM && await Xt.updateSeason({ rewardsMap: l });
  },
  // L√≥gica STONKS: Retorna quais tiers o jogador ganha ao resgatar um espec√≠fico
  getEligibleTiers: (l) => {
    const e = ["cobre", "prata", "ouro", "diamante", "gambiarrite"], t = e.indexOf(l);
    return e.slice(0, t + 1);
  }
}, sl = "multiversus-rpg", ul = {
  ARCHIVE: "masterArchive",
  STORE: "storeCatalog",
  SEASON: "battlePassSeason"
}, _t = {
  // --- INICIALIZA√á√ÉO PADR√ÉO ---
  init: () => {
    _t._registerAll(), console.log("Multiversus RPG | Database Inicializada.");
  },
  _registerAll: () => {
    if (!game.settings) return;
    const l = (e, t) => {
      game.settings.settings.has(`${sl}.${e}`) || game.settings.register(sl, e, {
        name: e,
        scope: "world",
        config: !1,
        type: Object,
        default: t,
        onChange: () => {
          e === ul.SEASON ? Hooks.callAll("passSystemUpdate") : Hooks.callAll("storeUpdate");
        }
      });
    };
    l(ul.ARCHIVE, []), l(ul.STORE, []), l(ul.SEASON, { status: "closed", startDate: null, endDate: null, name: "Temporada 1", rewardsMap: [] });
  },
  _safeGet: (l) => {
    try {
      return game.settings.get(sl, l);
    } catch {
      return console.warn(`StoreDatabase | Recuperando database perdida: ${l}`), _t._registerAll(), game.settings.get(sl, l);
    }
  },
  _safeSet: async (l, e) => {
    try {
      await game.settings.set(sl, l, e);
    } catch {
      console.warn(`StoreDatabase | Criando database para salvar: ${l}`), _t._registerAll(), await game.settings.set(sl, l, e);
    }
  },
  getArchive: () => _t._safeGet(ul.ARCHIVE) || [],
  getStore: () => _t._safeGet(ul.STORE) || [],
  getSeasonData: () => _t._safeGet(ul.SEASON) || { status: "closed", name: "Temporada X" },
  getPlayerData: (l) => {
    const e = game.users.get(l);
    return e ? e.getFlag(sl, "playerData") || { coins: 0, items: [] } : { coins: 0, items: [] };
  },
  getPassData: (l) => {
    const e = game.users.get(l);
    return e ? e.getFlag(sl, "passData") || { tier: "cobre" } : { tier: "cobre" };
  },
  updateSeason: async (l) => {
    if (!game.user.isGM) return;
    const t = { ..._t.getSeasonData(), ...l };
    await _t._safeSet(ul.SEASON, t), game.socket.emit(`module.${sl}`, { type: "passUpdate" }), Hooks.callAll("passSystemUpdate");
  },
  setPlayerTier: async (l, e) => {
    if (!game.user.isGM) return;
    const t = game.users.get(l);
    t && (await t.setFlag(sl, "passData", { tier: e }), game.socket.emit(`module.${sl}`, { type: "passUpdate" }), Hooks.callAll("passSystemUpdate"));
  },
  createItem: async (l) => {
    if (!game.user.isGM) return;
    let e = JSON.parse(JSON.stringify(l)), t = _t.getArchive();
    const i = t.findIndex((c) => c.id === e.id);
    i >= 0 ? t[i] = e : t.push(e), await _t._safeSet(ul.ARCHIVE, t);
    let n = _t.getStore();
    const o = n.findIndex((c) => c.id === e.id);
    o >= 0 && (n[o] = e, await _t._safeSet(ul.STORE, n));
  },
  // --- MERCADOR: Adicionar Item √† Loja ---
  toggleStoreListing: async (l) => {
    if (!game.user.isGM) return;
    let e = _t.getStore();
    const t = e.findIndex((i) => i.id === l.id);
    t >= 0 ? e.splice(t, 1) : (e.push(l), Hooks.callAll("nexusStoreItemAdded", l)), await _t._safeSet(ul.STORE, e);
  },
  deleteFromStore: async (l) => {
    if (!game.user.isGM) return;
    let e = _t.getStore();
    e = e.filter((t) => t.id !== l), await _t._safeSet(ul.STORE, e);
  },
  deleteFromArchive: async (l) => {
    if (!game.user.isGM) return;
    let e = _t.getArchive().filter((i) => i.id !== l), t = _t.getStore().filter((i) => i.id !== l);
    await _t._safeSet(ul.ARCHIVE, e), await _t._safeSet(ul.STORE, t);
  },
  buyItemLocal: async (l) => {
    const e = game.user;
    let t = _t.getPlayerData(e.id);
    if (t.coins < l.price)
      return { success: !1, msg: "Saldo Insuficiente!" };
    t.coins -= l.price;
    const i = {
      ...l,
      uniqueId: foundry.utils.randomID(),
      purchaseDate: Date.now(),
      active: !1,
      isPassItem: !1
    };
    return t.items || (t.items = []), t.items.push(i), await e.setFlag(sl, "playerData", t), l.system.stock !== -1 && game.socket.emit(`module.${sl}`, { type: "updateStock", itemId: l.id }), Hooks.callAll("nexusTransaction", e, l), { success: !0, msg: `Adquirido: ${l.name}` };
  },
  injectPassItem: async (l, e) => {
    const t = game.users.get(l);
    if (!t) return { success: !1 };
    let i = _t.getPlayerData(l);
    const n = {
      ...e,
      uniqueId: foundry.utils.randomID(),
      purchaseDate: Date.now(),
      active: !1,
      isPassItem: !0,
      price: 0
    };
    return i.items || (i.items = []), i.items.push(n), await t.setFlag(sl, "playerData", i), { success: !0 };
  },
  adminModifyCoins: async (l, e, t) => {
    if (!game.user.isGM) return;
    const i = game.users.get(l);
    if (!i) return;
    let n = _t.getPlayerData(l);
    t === "add" && (n.coins += e), t === "remove" && (n.coins = Math.max(0, n.coins - e)), await i.setFlag(sl, "playerData", n);
  },
  // --- ATIVADOR: Renderizar Item ---
  toggleActivationLocal: async (l) => {
    const e = game.user;
    let t = _t.getPlayerData(e.id);
    if (!t || !t.items) return;
    const i = t.items.findIndex((n) => n.uniqueId === l);
    i >= 0 && (t.items[i].active || (t.items[i].active = !0, await e.setFlag(sl, "playerData", t), ui.notifications.info("Renderiza√ß√£o Iniciada..."), Hooks.callAll("nexusItemActivated", t.items[i], e)));
  },
  decreaseStock: async (l) => {
    if (!game.user.isGM) return;
    let e = _t.getStore();
    const t = e.findIndex((i) => i.id === l);
    t >= 0 && e[t].system.stock > 0 && (e[t].system.stock -= 1, await _t._safeSet(ul.STORE, e));
  }
};
function jv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _ = (
    /*item*/
    l[0].systemTag + ""
  ), w, k, A, y, E, S, O, C = (
    /*item*/
    l[0].name + ""
  ), T, N, I, D, M = (
    /*item*/
    l[0].price + ""
  ), G, L, U, z, F, W, H;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("img"), c = g(), f = r("div"), u = g(), d = r("div"), p = g(), m = r("div"), b = r("div"), v = r("span"), h = B("["), w = B(_), k = B("]"), A = g(), y = r("span"), E = g(), S = r("div"), O = r("h3"), T = B(C), N = g(), I = r("div"), D = r("span"), G = B(M), L = g(), U = r("small"), U.textContent = "MC", z = g(), F = r("div"), F.textContent = ">>", at(i.src, n = /*item*/
      l[0].img) || s(i, "src", n), s(i, "alt", o = /*item*/
      l[0].name), s(i, "class", "svelte-1x2gaax"), s(f, "class", "scan-overlay svelte-1x2gaax"), s(d, "class", "corner-bracket svelte-1x2gaax"), s(t, "class", "holo-frame svelte-1x2gaax"), s(v, "class", "type-tag svelte-1x2gaax"), s(y, "class", "rarity-dot svelte-1x2gaax"), s(b, "class", "header svelte-1x2gaax"), s(O, "class", "name svelte-1x2gaax"), s(S, "class", "title-scroller"), s(U, "class", "svelte-1x2gaax"), s(D, "class", "price svelte-1x2gaax"), s(F, "class", "action-arrow svelte-1x2gaax"), s(I, "class", "footer-info svelte-1x2gaax"), s(m, "class", "data-block svelte-1x2gaax"), s(e, "class", "matrix-card svelte-1x2gaax"), ae(
        e,
        "--r-color",
        /*rarityColor*/
        l[1]
      );
    },
    m(V, J) {
      q(V, e, J), a(e, t), a(t, i), a(t, c), a(t, f), a(t, u), a(t, d), a(e, p), a(e, m), a(m, b), a(b, v), a(v, h), a(v, w), a(v, k), a(b, A), a(b, y), a(m, E), a(m, S), a(S, O), a(O, T), a(m, N), a(m, I), a(I, D), a(D, G), a(D, L), a(D, U), a(I, z), a(I, F), W || (H = R(
        e,
        "click",
        /*click_handler*/
        l[4]
      ), W = !0);
    },
    p(V, [J]) {
      J & /*item*/
      1 && !at(i.src, n = /*item*/
      V[0].img) && s(i, "src", n), J & /*item*/
      1 && o !== (o = /*item*/
      V[0].name) && s(i, "alt", o), J & /*item*/
      1 && _ !== (_ = /*item*/
      V[0].systemTag + "") && te(w, _), J & /*item*/
      1 && C !== (C = /*item*/
      V[0].name + "") && te(T, C), J & /*item*/
      1 && M !== (M = /*item*/
      V[0].price + "") && te(G, M), J & /*rarityColor*/
      2 && ae(
        e,
        "--r-color",
        /*rarityColor*/
        V[1]
      );
    },
    i: ge,
    o: ge,
    d(V) {
      V && P(e), W = !1, H();
    }
  };
}
function Vv(l, e, t) {
  let i, { item: n } = e, { isGM: o = !1 } = e;
  const c = ml(), f = {
    Comum: "#888888",
    Raro: "#00aaff",
    Lend√°rio: "#ffcc00",
    M√≠tico: "#ff3333",
    Universal: "#aa00ff",
    Multiversal: "#00ff41"
  }, u = () => c("click", n);
  return l.$$set = (d) => {
    "item" in d && t(0, n = d.item), "isGM" in d && t(3, o = d.isGM);
  }, l.$$.update = () => {
    l.$$.dirty & /*item*/
    1 && t(1, i = f[n.rarity] || "#fff");
  }, [n, i, c, o, u];
}
class hi extends mt {
  constructor(e) {
    super(), pt(this, e, Vv, jv, dt, { item: 0, isGM: 3 });
  }
}
function mc(l, e, t) {
  const i = l.slice();
  return i[48] = e[t], i;
}
function bc(l, e, t) {
  const i = l.slice();
  return i[51] = e[t], i;
}
function vc(l, e, t) {
  const i = l.slice();
  return i[45] = e[t], i;
}
function hc(l, e, t) {
  const i = l.slice();
  return i[54] = e[t], i[56] = t, i;
}
function gc(l, e, t) {
  const i = l.slice();
  return i[57] = e[t], i;
}
function Wv(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "+", s(e, "class", "empty-plus svelte-wvyl6l");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Xv(l) {
  let e, t, i, n, o, c, f = (
    /*week*/
    l[54][
      /*tier*/
      l[57]
    ].name + ""
  ), u;
  return {
    c() {
      e = r("div"), t = r("img"), o = g(), c = r("span"), u = B(f), at(t.src, i = /*week*/
      l[54][
        /*tier*/
        l[57]
      ].img) || s(t, "src", i), s(t, "title", n = /*week*/
      l[54][
        /*tier*/
        l[57]
      ].name), s(t, "alt", "item"), s(t, "class", "svelte-wvyl6l"), s(c, "class", "tiny-name svelte-wvyl6l"), s(e, "class", "content svelte-wvyl6l");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, o), a(e, c), a(c, u);
    },
    p(d, p) {
      p[0] & /*rewardsMap*/
      16 && !at(t.src, i = /*week*/
      d[54][
        /*tier*/
        d[57]
      ].img) && s(t, "src", i), p[0] & /*rewardsMap*/
      16 && n !== (n = /*week*/
      d[54][
        /*tier*/
        d[57]
      ].name) && s(t, "title", n), p[0] & /*rewardsMap*/
      16 && f !== (f = /*week*/
      d[54][
        /*tier*/
        d[57]
      ].name + "") && te(u, f);
    },
    d(d) {
      d && P(e);
    }
  };
}
function _c(l) {
  let e, t, i;
  function n(d, p) {
    return (
      /*week*/
      d[54][
        /*tier*/
        d[57]
      ] ? Xv : Wv
    );
  }
  let o = n(l), c = o(l);
  function f() {
    return (
      /*click_handler*/
      l[23](
        /*idx*/
        l[56],
        /*tier*/
        l[57]
      )
    );
  }
  function u() {
    return (
      /*contextmenu_handler*/
      l[24](
        /*idx*/
        l[56],
        /*tier*/
        l[57]
      )
    );
  }
  return {
    c() {
      var d, p;
      e = r("td"), c.c(), s(e, "class", "cell " + /*tier*/
      l[57] + " svelte-wvyl6l"), he(
        e,
        "selected",
        /*selectedCell*/
        ((d = l[6]) == null ? void 0 : d.weekIdx) === /*idx*/
        l[56] && /*selectedCell*/
        ((p = l[6]) == null ? void 0 : p.tier) === /*tier*/
        l[57]
      );
    },
    m(d, p) {
      q(d, e, p), c.m(e, null), t || (i = [
        R(e, "click", f),
        R(e, "contextmenu", ri(u))
      ], t = !0);
    },
    p(d, p) {
      var m, b;
      l = d, o === (o = n(l)) && c ? c.p(l, p) : (c.d(1), c = o(l), c && (c.c(), c.m(e, null))), p[0] & /*selectedCell*/
      64 && he(
        e,
        "selected",
        /*selectedCell*/
        ((m = l[6]) == null ? void 0 : m.weekIdx) === /*idx*/
        l[56] && /*selectedCell*/
        ((b = l[6]) == null ? void 0 : b.tier) === /*tier*/
        l[57]
      );
    },
    d(d) {
      d && P(e), c.d(), t = !1, Te(i);
    }
  };
}
function kc(l) {
  let e, t, i, n, o = ce(["gambiarrite", "diamante", "ouro", "prata", "cobre"]), c = [];
  for (let f = 0; f < 5; f += 1)
    c[f] = _c(gc(l, o, f));
  return {
    c() {
      e = r("tr"), t = r("td"), t.textContent = `S${/*idx*/
      l[56] + 1}`, i = g();
      for (let f = 0; f < 5; f += 1)
        c[f].c();
      n = g(), s(t, "class", "week-idx svelte-wvyl6l");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i);
      for (let d = 0; d < 5; d += 1)
        c[d] && c[d].m(e, null);
      a(e, n);
    },
    p(f, u) {
      if (u[0] & /*selectedCell, selectCell, clearCell, rewardsMap*/
      49232) {
        o = ce(["gambiarrite", "diamante", "ouro", "prata", "cobre"]);
        let d;
        for (d = 0; d < 5; d += 1) {
          const p = gc(f, o, d);
          c[d] ? c[d].p(p, u) : (c[d] = _c(p), c[d].c(), c[d].m(e, n));
        }
        for (; d < 5; d += 1)
          c[d].d(1);
      }
    },
    d(f) {
      f && P(e), Fe(c, f);
    }
  };
}
function Jv(l) {
  let e, t, i = (
    /*formMode*/
    l[8] === "create" ? "CRIAR NOVO ITEM" : "EDITAR ITEM"
  ), n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q = (
    /*isManualMode*/
    l[3] ? "MODO HTML" : "MODO F√ÅCIL"
  ), ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be = (
    /*formMode*/
    l[8] === "create" ? "CRIAR ITEM" : "SALVAR ALTERA√á√ïES"
  ), de, Oe, _e, ue, Re, Ce, He = ce(
    /*TAGS*/
    l[11]
  ), Ge = [];
  for (let Se = 0; Se < He.length; Se += 1)
    Ge[Se] = wc(bc(l, He, Se));
  let Xe = ce(
    /*RARITIES*/
    l[12]
  ), fe = [];
  for (let Se = 0; Se < Xe.length; Se += 1)
    fe[Se] = yc(mc(l, Xe, Se));
  function Le(Se, ve) {
    return (
      /*isManualMode*/
      Se[3] ? Qv : Kv
    );
  }
  let qe = Le(l), Me = qe(l);
  return me = new hi({ props: { item: (
    /*previewItem*/
    l[10]
  ) } }), {
    c() {
      e = r("div"), t = r("div"), n = B(i), o = g(), c = r("div"), f = r("label"), f.textContent = "NOME", u = g(), d = r("input"), p = g(), m = r("div"), b = r("div"), v = r("label"), v.textContent = "TIPO", h = g(), _ = r("select");
      for (let Se = 0; Se < Ge.length; Se += 1)
        Ge[Se].c();
      w = g(), k = r("div"), A = r("label"), A.textContent = "RARIDADE", y = g(), E = r("select");
      for (let Se = 0; Se < fe.length; Se += 1)
        fe[Se].c();
      S = g(), O = r("div"), C = r("label"), C.textContent = "IMAGEM", T = g(), N = r("div"), I = r("input"), D = g(), M = r("img"), L = g(), U = r("div"), z = r("div"), F = r("label"), F.textContent = "SERIAL", W = g(), H = r("input"), V = g(), J = r("div"), j = r("label"), j.textContent = "ESTOQUE", X = g(), K = r("input"), Z = g(), le = r("div"), $ = r("label"), $.textContent = "DESCRI√á√ÉO", se = g(), Y = r("button"), ie = B(Q), ee = g(), Me.c(), pe = g(), Ee = r("div"), De = r("label"), De.textContent = "PREVIEW:", we = g(), ke = r("div"), kt(me.$$.fragment), re = g(), ye = r("div"), oe = r("button"), de = B(be), Oe = g(), _e = r("button"), _e.textContent = "CANCELAR", s(t, "class", "form-title svelte-wvyl6l"), s(f, "class", "svelte-wvyl6l"), s(d, "type", "text"), s(d, "class", "svelte-wvyl6l"), s(c, "class", "form-group svelte-wvyl6l"), s(_, "class", "svelte-wvyl6l"), /*draft*/
      l[0].systemTag === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[32].call(_)
      )), s(b, "class", "field svelte-wvyl6l"), s(E, "class", "svelte-wvyl6l"), /*draft*/
      l[0].rarity === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[33].call(E)
      )), s(k, "class", "field svelte-wvyl6l"), s(m, "class", "row svelte-wvyl6l"), s(C, "class", "svelte-wvyl6l"), s(I, "type", "text"), s(I, "class", "svelte-wvyl6l"), at(M.src, G = /*draft*/
      l[0].img) || s(M, "src", G), s(M, "class", "preview-mini svelte-wvyl6l"), s(M, "alt", "p"), s(N, "class", "img-row svelte-wvyl6l"), s(O, "class", "form-group svelte-wvyl6l"), s(H, "type", "text"), s(H, "class", "svelte-wvyl6l"), s(z, "class", "field svelte-wvyl6l"), s(K, "type", "number"), s(K, "placeholder", "-1"), s(K, "class", "svelte-wvyl6l"), s(J, "class", "field svelte-wvyl6l"), s(U, "class", "row svelte-wvyl6l"), s(Y, "class", "mini-mode svelte-wvyl6l"), s(le, "class", "desc-header svelte-wvyl6l"), s(De, "class", "svelte-wvyl6l"), s(ke, "class", "card-render svelte-wvyl6l"), s(Ee, "class", "preview-box svelte-wvyl6l"), s(oe, "class", "do-save svelte-wvyl6l"), s(_e, "class", "do-cancel svelte-wvyl6l"), s(ye, "class", "create-actions svelte-wvyl6l"), s(e, "class", "tool-content create-mode svelte-wvyl6l");
    },
    m(Se, ve) {
      q(Se, e, ve), a(e, t), a(t, n), a(e, o), a(e, c), a(c, f), a(c, u), a(c, d), x(
        d,
        /*draft*/
        l[0].name
      ), a(e, p), a(e, m), a(m, b), a(b, v), a(b, h), a(b, _);
      for (let Ue = 0; Ue < Ge.length; Ue += 1)
        Ge[Ue] && Ge[Ue].m(_, null);
      ot(
        _,
        /*draft*/
        l[0].systemTag,
        !0
      ), a(m, w), a(m, k), a(k, A), a(k, y), a(k, E);
      for (let Ue = 0; Ue < fe.length; Ue += 1)
        fe[Ue] && fe[Ue].m(E, null);
      ot(
        E,
        /*draft*/
        l[0].rarity,
        !0
      ), a(e, S), a(e, O), a(O, C), a(O, T), a(O, N), a(N, I), x(
        I,
        /*draft*/
        l[0].img
      ), a(N, D), a(N, M), a(e, L), a(e, U), a(U, z), a(z, F), a(z, W), a(z, H), x(
        H,
        /*draft*/
        l[0].system.serialBase
      ), a(U, V), a(U, J), a(J, j), a(J, X), a(J, K), x(
        K,
        /*draft*/
        l[0].system.stock
      ), a(e, Z), a(e, le), a(le, $), a(le, se), a(le, Y), a(Y, ie), a(e, ee), Me.m(e, null), a(e, pe), a(e, Ee), a(Ee, De), a(Ee, we), a(Ee, ke), ht(me, ke, null), a(e, re), a(e, ye), a(ye, oe), a(oe, de), a(ye, Oe), a(ye, _e), ue = !0, Re || (Ce = [
        R(
          d,
          "input",
          /*input0_input_handler*/
          l[31]
        ),
        R(
          _,
          "change",
          /*select0_change_handler*/
          l[32]
        ),
        R(
          E,
          "change",
          /*select1_change_handler*/
          l[33]
        ),
        R(
          I,
          "input",
          /*input1_input_handler*/
          l[34]
        ),
        R(
          H,
          "input",
          /*input2_input_handler*/
          l[35]
        ),
        R(
          K,
          "input",
          /*input3_input_handler*/
          l[36]
        ),
        R(
          Y,
          "click",
          /*click_handler_6*/
          l[37]
        ),
        R(
          oe,
          "click",
          /*saveItem*/
          l[21]
        ),
        R(
          _e,
          "click",
          /*click_handler_7*/
          l[41]
        )
      ], Re = !0);
    },
    p(Se, ve) {
      if ((!ue || ve[0] & /*formMode*/
      256) && i !== (i = /*formMode*/
      Se[8] === "create" ? "CRIAR NOVO ITEM" : "EDITAR ITEM") && te(n, i), ve[0] & /*draft, TAGS*/
      2049 && d.value !== /*draft*/
      Se[0].name && x(
        d,
        /*draft*/
        Se[0].name
      ), ve[0] & /*TAGS*/
      2048) {
        He = ce(
          /*TAGS*/
          Se[11]
        );
        let Ve;
        for (Ve = 0; Ve < He.length; Ve += 1) {
          const rt = bc(Se, He, Ve);
          Ge[Ve] ? Ge[Ve].p(rt, ve) : (Ge[Ve] = wc(rt), Ge[Ve].c(), Ge[Ve].m(_, null));
        }
        for (; Ve < Ge.length; Ve += 1)
          Ge[Ve].d(1);
        Ge.length = He.length;
      }
      if (ve[0] & /*draft, TAGS*/
      2049 && ot(
        _,
        /*draft*/
        Se[0].systemTag
      ), ve[0] & /*RARITIES*/
      4096) {
        Xe = ce(
          /*RARITIES*/
          Se[12]
        );
        let Ve;
        for (Ve = 0; Ve < Xe.length; Ve += 1) {
          const rt = mc(Se, Xe, Ve);
          fe[Ve] ? fe[Ve].p(rt, ve) : (fe[Ve] = yc(rt), fe[Ve].c(), fe[Ve].m(E, null));
        }
        for (; Ve < fe.length; Ve += 1)
          fe[Ve].d(1);
        fe.length = Xe.length;
      }
      ve[0] & /*draft, TAGS*/
      2049 && ot(
        E,
        /*draft*/
        Se[0].rarity
      ), ve[0] & /*draft, TAGS*/
      2049 && I.value !== /*draft*/
      Se[0].img && x(
        I,
        /*draft*/
        Se[0].img
      ), (!ue || ve[0] & /*draft, TAGS*/
      2049 && !at(M.src, G = /*draft*/
      Se[0].img)) && s(M, "src", G), ve[0] & /*draft, TAGS*/
      2049 && H.value !== /*draft*/
      Se[0].system.serialBase && x(
        H,
        /*draft*/
        Se[0].system.serialBase
      ), ve[0] & /*draft, TAGS*/
      2049 && Je(K.value) !== /*draft*/
      Se[0].system.stock && x(
        K,
        /*draft*/
        Se[0].system.stock
      ), (!ue || ve[0] & /*isManualMode*/
      8) && Q !== (Q = /*isManualMode*/
      Se[3] ? "MODO HTML" : "MODO F√ÅCIL") && te(ie, Q), qe === (qe = Le(Se)) && Me ? Me.p(Se, ve) : (Me.d(1), Me = qe(Se), Me && (Me.c(), Me.m(e, pe)));
      const Ue = {};
      ve[0] & /*previewItem*/
      1024 && (Ue.item = /*previewItem*/
      Se[10]), me.$set(Ue), (!ue || ve[0] & /*formMode*/
      256) && be !== (be = /*formMode*/
      Se[8] === "create" ? "CRIAR ITEM" : "SALVAR ALTERA√á√ïES") && te(de, be);
    },
    i(Se) {
      ue || (ne(me.$$.fragment, Se), ue = !0);
    },
    o(Se) {
      Ae(me.$$.fragment, Se), ue = !1;
    },
    d(Se) {
      Se && P(e), Fe(Ge, Se), Fe(fe, Se), Me.d(), gt(me), Re = !1, Te(Ce);
    }
  };
}
function Yv(l) {
  let e, t, i, n, o, c, f, u, d, p = ce(
    /*filteredArchive*/
    l[5]
  ), m = [];
  for (let b = 0; b < p.length; b += 1)
    m[b] = Ac(vc(l, p, b));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), n = g(), o = r("input"), c = g(), f = r("div");
      for (let b = 0; b < m.length; b += 1)
        m[b].c();
      s(i, "class", "fas fa-search svelte-wvyl6l"), s(o, "type", "text"), s(o, "placeholder", "Buscar..."), s(o, "class", "svelte-wvyl6l"), s(t, "class", "search-box svelte-wvyl6l"), s(f, "class", "item-list svelte-wvyl6l"), s(e, "class", "tool-content svelte-wvyl6l");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(t, i), a(t, n), a(t, o), x(
        o,
        /*searchQuery*/
        l[9]
      ), a(e, c), a(e, f);
      for (let h = 0; h < m.length; h += 1)
        m[h] && m[h].m(f, null);
      u || (d = [
        R(
          o,
          "input",
          /*input_input_handler*/
          l[26]
        ),
        R(
          o,
          "input",
          /*filterList*/
          l[13]
        )
      ], u = !0);
    },
    p(b, v) {
      if (v[0] & /*searchQuery*/
      512 && o.value !== /*searchQuery*/
      b[9] && x(
        o,
        /*searchQuery*/
        b[9]
      ), v[0] & /*assignItem, filteredArchive, deleteItem, startEdit*/
      1638432) {
        p = ce(
          /*filteredArchive*/
          b[5]
        );
        let h;
        for (h = 0; h < p.length; h += 1) {
          const _ = vc(b, p, h);
          m[h] ? m[h].p(_, v) : (m[h] = Ac(_), m[h].c(), m[h].m(f, null));
        }
        for (; h < m.length; h += 1)
          m[h].d(1);
        m.length = p.length;
      }
    },
    i: ge,
    o: ge,
    d(b) {
      b && P(e), Fe(m, b), u = !1, Te(d);
    }
  };
}
function wc(l) {
  let e, t = (
    /*t*/
    l[51] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[51], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function yc(l) {
  let e, t = (
    /*r*/
    l[48] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[48], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Qv(l) {
  let e, t, i;
  return {
    c() {
      e = r("textarea"), s(e, "class", "input-raw svelte-wvyl6l"), s(e, "placeholder", "C√≥digo HTML completo...");
    },
    m(n, o) {
      q(n, e, o), x(
        e,
        /*draft*/
        l[0].system.description
      ), t || (i = R(
        e,
        "input",
        /*textarea_input_handler*/
        l[40]
      ), t = !0);
    },
    p(n, o) {
      o[0] & /*draft, TAGS*/
      2049 && x(
        e,
        /*draft*/
        n[0].system.description
      );
    },
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Kv(l) {
  let e, t, i, n, o;
  return {
    c() {
      e = r("textarea"), t = g(), i = r("textarea"), s(e, "class", "input-desc svelte-wvyl6l"), s(e, "placeholder", "Descri√ß√£o visual do item..."), s(i, "class", "input-warn svelte-wvyl6l"), s(i, "placeholder", "Avisos de regra (opcional)...");
    },
    m(c, f) {
      q(c, e, f), x(
        e,
        /*simpleDesc*/
        l[1]
      ), q(c, t, f), q(c, i, f), x(
        i,
        /*simpleWarn*/
        l[2]
      ), n || (o = [
        R(
          e,
          "input",
          /*textarea0_input_handler*/
          l[38]
        ),
        R(
          i,
          "input",
          /*textarea1_input_handler*/
          l[39]
        )
      ], n = !0);
    },
    p(c, f) {
      f[0] & /*simpleDesc*/
      2 && x(
        e,
        /*simpleDesc*/
        c[1]
      ), f[0] & /*simpleWarn*/
      4 && x(
        i,
        /*simpleWarn*/
        c[2]
      );
    },
    d(c) {
      c && (P(e), P(t), P(i)), n = !1, Te(o);
    }
  };
}
function Ac(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*item*/
    l[45].name + ""
  ), h, _, w, k = (
    /*item*/
    l[45].systemTag + ""
  ), A, y, E = (
    /*item*/
    l[45].rarity + ""
  ), S, O, C, T, N, I;
  function D() {
    return (
      /*click_handler_2*/
      l[27](
        /*item*/
        l[45]
      )
    );
  }
  function M() {
    return (
      /*click_handler_3*/
      l[28](
        /*item*/
        l[45]
      )
    );
  }
  function G() {
    return (
      /*click_handler_4*/
      l[29](
        /*item*/
        l[45]
      )
    );
  }
  function L() {
    return (
      /*click_handler_5*/
      l[30](
        /*item*/
        l[45]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("button"), i.innerHTML = '<i class="fas fa-edit"></i>', n = g(), o = r("button"), o.innerHTML = '<i class="fas fa-trash"></i>', c = g(), f = r("div"), u = r("img"), p = g(), m = r("div"), b = r("div"), h = B(v), _ = g(), w = r("div"), A = B(k), y = B(" ‚Ä¢ "), S = B(E), O = g(), C = r("button"), C.innerHTML = '<i class="fas fa-arrow-left"></i>', T = g(), s(i, "class", "act-btn edit svelte-wvyl6l"), s(i, "title", "Editar"), s(o, "class", "act-btn del svelte-wvyl6l"), s(o, "title", "Apagar"), s(t, "class", "actions-left svelte-wvyl6l"), at(u.src, d = /*item*/
      l[45].img) || s(u, "src", d), s(u, "alt", "i"), s(u, "class", "svelte-wvyl6l"), s(b, "class", "n svelte-wvyl6l"), s(w, "class", "t svelte-wvyl6l"), s(m, "class", "inf svelte-wvyl6l"), s(f, "class", "item-display svelte-wvyl6l"), s(C, "class", "assign-btn svelte-wvyl6l"), s(C, "title", "Alocar no Slot Selecionado"), s(e, "class", "db-item svelte-wvyl6l");
    },
    m(U, z) {
      q(U, e, z), a(e, t), a(t, i), a(t, n), a(t, o), a(e, c), a(e, f), a(f, u), a(f, p), a(f, m), a(m, b), a(b, h), a(m, _), a(m, w), a(w, A), a(w, y), a(w, S), a(e, O), a(e, C), a(e, T), N || (I = [
        R(i, "click", D),
        R(o, "click", M),
        R(f, "click", G),
        R(C, "click", L)
      ], N = !0);
    },
    p(U, z) {
      l = U, z[0] & /*filteredArchive*/
      32 && !at(u.src, d = /*item*/
      l[45].img) && s(u, "src", d), z[0] & /*filteredArchive*/
      32 && v !== (v = /*item*/
      l[45].name + "") && te(h, v), z[0] & /*filteredArchive*/
      32 && k !== (k = /*item*/
      l[45].systemTag + "") && te(A, k), z[0] & /*filteredArchive*/
      32 && E !== (E = /*item*/
      l[45].rarity + "") && te(S, E);
    },
    d(U) {
      U && P(e), N = !1, Te(I);
    }
  };
}
function Zv(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D = ce(
    /*rewardsMap*/
    l[4]
  ), M = [];
  for (let z = 0; z < D.length; z += 1)
    M[z] = kc(hc(l, D, z));
  const G = [Yv, Jv], L = [];
  function U(z, F) {
    return (
      /*activeTab*/
      z[7] === "list" ? 0 : 1
    );
  }
  return O = U(l), C = L[O] = G[O](l), {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("h3"), n.textContent = "MATRIZ DE RECOMPENSAS", o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-save"></i> SALVAR MATRIZ', f = g(), u = r("div"), d = r("table"), p = r("thead"), p.innerHTML = '<tr><th class="w-col svelte-wvyl6l">#</th> <th class="gambi svelte-wvyl6l">GAMBIARRITE</th> <th class="diam svelte-wvyl6l">DIAMANTE</th> <th class="ouro svelte-wvyl6l">OURO</th> <th class="prata svelte-wvyl6l">PRATA</th> <th class="cobre svelte-wvyl6l">COBRE</th></tr>', m = g(), b = r("tbody");
      for (let z = 0; z < M.length; z += 1)
        M[z].c();
      v = g(), h = r("div"), h.innerHTML = "<small>Clique = Selecionar | Dir. Clique = Limpar | Selecione um slot e clique na seta da lista para alocar.</small>", _ = g(), w = r("aside"), k = r("div"), A = r("button"), A.textContent = "DATABASE", y = g(), E = r("button"), E.textContent = "CRIAR NOVO", S = g(), C.c(), s(n, "class", "svelte-wvyl6l"), s(c, "class", "save-main-btn svelte-wvyl6l"), s(i, "class", "table-header svelte-wvyl6l"), s(d, "class", "svelte-wvyl6l"), s(u, "class", "table-scroll svelte-wvyl6l"), s(h, "class", "help-text svelte-wvyl6l"), s(t, "class", "grid-area svelte-wvyl6l"), s(A, "class", "svelte-wvyl6l"), he(
        A,
        "active",
        /*activeTab*/
        l[7] === "list"
      ), s(E, "class", "svelte-wvyl6l"), he(
        E,
        "active",
        /*activeTab*/
        l[7] === "form"
      ), s(k, "class", "tabs svelte-wvyl6l"), s(w, "class", "sidebar-tools svelte-wvyl6l"), s(e, "class", "pass-admin svelte-wvyl6l");
    },
    m(z, F) {
      q(z, e, F), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(d, p), a(d, m), a(d, b);
      for (let W = 0; W < M.length; W += 1)
        M[W] && M[W].m(b, null);
      a(t, v), a(t, h), a(e, _), a(e, w), a(w, k), a(k, A), a(k, y), a(k, E), a(w, S), L[O].m(w, null), T = !0, N || (I = [
        R(
          c,
          "click",
          /*saveConfig*/
          l[17]
        ),
        R(
          A,
          "click",
          /*click_handler_1*/
          l[25]
        ),
        R(
          E,
          "click",
          /*startCreate*/
          l[18]
        )
      ], N = !0);
    },
    p(z, F) {
      if (F[0] & /*selectedCell, selectCell, clearCell, rewardsMap*/
      49232) {
        D = ce(
          /*rewardsMap*/
          z[4]
        );
        let H;
        for (H = 0; H < D.length; H += 1) {
          const V = hc(z, D, H);
          M[H] ? M[H].p(V, F) : (M[H] = kc(V), M[H].c(), M[H].m(b, null));
        }
        for (; H < M.length; H += 1)
          M[H].d(1);
        M.length = D.length;
      }
      (!T || F[0] & /*activeTab*/
      128) && he(
        A,
        "active",
        /*activeTab*/
        z[7] === "list"
      ), (!T || F[0] & /*activeTab*/
      128) && he(
        E,
        "active",
        /*activeTab*/
        z[7] === "form"
      );
      let W = O;
      O = U(z), O === W ? L[O].p(z, F) : ($e(), Ae(L[W], 1, 1, () => {
        L[W] = null;
      }), et(), C = L[O], C ? C.p(z, F) : (C = L[O] = G[O](z), C.c()), ne(C, 1), C.m(w, null));
    },
    i(z) {
      T || (ne(C), T = !0);
    },
    o(z) {
      Ae(C), T = !1;
    },
    d(z) {
      z && P(e), Fe(M, z), L[O].d(), N = !1, Te(I);
    }
  };
}
function Ec(l, e, t, i, n, o) {
  const c = (u) => u ? u.toString() : "", f = (u) => u ? u.replace(/\*(.*?)\*/g, '<strong style="color: #fff; text-shadow: 0 0 5px #00ff41;">$1</strong>').replace(/\n/g, "<br>") : "";
  return `
        <div class="gama-window-container">
            <div class="gama-window-header">
                <div class="window-controls"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
                <div class="window-title">TERMINAL_GAMA // ${c(o).toUpperCase()}</div>
            </div>
            <div class="gama-window-layout">
                <aside class="gama-window-sidebar">
                    <div class="sidebar-section"><small>STATUS</small><div class="status-box">PASSE</div></div>
                    <div class="sidebar-section"><small>N√çVEL</small><div class="rarity-text">${c(n).toUpperCase()}</div></div>
                    <div class="sidebar-section"><small>LOTE</small><p>${c(t)}</p></div>
                </aside>
                <main class="gama-window-main">
                    <div class="scanlines"></div>
                    <h2 class="power-title">${c(i).toUpperCase()}</h2>
                    <div class="text-content">
                        <p>${f(l)}</p>
                        ${e ? `<p class="warning-text">[AVISO]: ${f(e)}</p>` : ""}
                    </div>
                </main>
            </div>
        </div>`;
}
function xv(l, e, t) {
  let i, n, o = [], c = [], f = [], u = null, d = "list", p = "create", m = "";
  const b = {
    id: null,
    name: "",
    systemTag: "Passe",
    rarity: "Comum",
    price: 0,
    img: "icons/svg/item-bag.svg",
    system: {
      description: "",
      costPerDie: 0,
      xpCost: 0,
      stock: -1,
      serialBase: "BP-00",
      isManual: !1
    }
  };
  let v = JSON.parse(JSON.stringify(b)), h = "", _ = "", w = !1;
  const k = [
    "Passe",
    "Poder Principal",
    "Poder Secundario",
    "Habilidade Especial",
    "Item",
    "Veiculo",
    "Moeda"
  ], A = ["Comum", "Raro", "Lend√°rio", "M√≠tico", "Universal", "Multiversal"];
  qt(() => {
    _t.getArchive ? y() : setTimeout(y, 1e3);
  });
  function y() {
    t(4, o = Xt.getRewardsMap()), c = _t.getArchive() || [], E();
  }
  function E() {
    if (!m)
      t(5, f = c);
    else {
      const ee = m.toLowerCase();
      t(5, f = c.filter((pe) => pe.name.toLowerCase().includes(ee)));
    }
  }
  function S(ee, pe) {
    t(6, u = { weekIdx: ee, tier: pe });
  }
  function O(ee, pe) {
    t(4, o[ee][pe] = null, o);
  }
  async function C(ee) {
    if (!u) return ui.notifications.warn("Selecione um slot na tabela primeiro.");
    t(
      4,
      o[u.weekIdx][u.tier] = {
        id: ee.id,
        name: ee.name,
        img: ee.img,
        systemTag: ee.systemTag,
        rarity: ee.rarity,
        // Se for moeda, define tipo currency para o App saber dar dinheiro
        type: ee.systemTag === "Moeda" || ee.type === "currency" ? "currency" : "item"
      },
      o
    ), ui.notifications.info(`Item [${ee.name}] alocado.`);
  }
  async function T() {
    await Xt.saveRewardsMap(o), ui.notifications.info("Matriz do Passe Salva!");
  }
  function N() {
    t(0, v = JSON.parse(JSON.stringify(b))), t(1, h = ""), t(2, _ = ""), t(3, w = !1), t(8, p = "create"), t(7, d = "form");
  }
  function I(ee) {
    t(0, v = JSON.parse(JSON.stringify(ee))), v.system || t(0, v.system = {}, v), v.system.isManual ? t(3, w = !0) : (t(3, w = !1), t(1, h = v.system.rawDesc || ""), t(2, _ = v.system.rawWarn || "")), t(8, p = "edit"), t(7, d = "form");
  }
  async function D(ee) {
    await _t.deleteFromArchive(ee), y(), ui.notifications.info("Item apagado.");
  }
  async function M() {
    if (!v.name) return ui.notifications.warn("Nome √© obrigat√≥rio.");
    v.id || t(0, v.id = foundry.utils.randomID(), v), w || (t(0, v.system.description = Ec(h, _, v.system.serialBase, v.name, v.rarity, v.systemTag), v), t(0, v.system.rawDesc = h, v), t(0, v.system.rawWarn = _, v)), t(0, v.system.isManual = w, v), await _t.createItem(v), y(), ui.notifications.info(p === "create" ? "Item Criado!" : "Item Atualizado!"), p === "create" && u && C(v), t(7, d = "list");
  }
  const G = (ee, pe) => S(ee, pe), L = (ee, pe) => O(ee, pe), U = () => t(7, d = "list");
  function z() {
    m = this.value, t(9, m);
  }
  const F = (ee) => I(ee), W = (ee) => D(ee.id), H = (ee) => C(ee), V = (ee) => C(ee);
  function J() {
    v.name = this.value, t(0, v), t(11, k);
  }
  function j() {
    v.systemTag = Gt(this), t(0, v), t(11, k);
  }
  function X() {
    v.rarity = Gt(this), t(0, v), t(11, k);
  }
  function K() {
    v.img = this.value, t(0, v), t(11, k);
  }
  function Z() {
    v.system.serialBase = this.value, t(0, v), t(11, k);
  }
  function le() {
    v.system.stock = Je(this.value), t(0, v), t(11, k);
  }
  const $ = () => t(3, w = !w);
  function se() {
    h = this.value, t(1, h);
  }
  function Y() {
    _ = this.value, t(2, _);
  }
  function Q() {
    v.system.description = this.value, t(0, v), t(11, k);
  }
  const ie = () => t(7, d = "list");
  return l.$$.update = () => {
    l.$$.dirty[0] & /*isManualMode, draft, simpleDesc, simpleWarn*/
    15 && t(22, i = w ? v.system.description : Ec(h, _, v.system.serialBase, v.name, v.rarity, v.systemTag)), l.$$.dirty[0] & /*draft, previewHTML*/
    4194305 && t(10, n = {
      ...v,
      system: {
        ...v.system,
        description: i
      }
    });
  }, [
    v,
    h,
    _,
    w,
    o,
    f,
    u,
    d,
    p,
    m,
    n,
    k,
    A,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    i,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie
  ];
}
class $v extends mt {
  constructor(e) {
    super(), pt(this, e, xv, Zv, dt, {}, null, [-1, -1]);
  }
}
const { window: Oc } = Fi;
function Sc(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = "<span>RENDER_ACTIVE</span>", s(e, "class", "stamp active svelte-1fooboy");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Cc(l) {
  let e, t, i, n, o;
  return {
    c() {
      e = r("div"), t = r("span"), t.textContent = "GLOBAL_STOCK", i = g(), n = r("span"), o = B(
        /*stockDisplay*/
        l[6]
      ), s(t, "class", "label svelte-1fooboy"), s(n, "class", "val stock svelte-1fooboy"), s(e, "class", "data-row svelte-1fooboy");
    },
    m(c, f) {
      q(c, e, f), a(e, t), a(e, i), a(e, n), a(n, o);
    },
    p(c, f) {
      f & /*stockDisplay*/
      64 && te(
        o,
        /*stockDisplay*/
        c[6]
      );
    },
    d(c) {
      c && P(e);
    }
  };
}
function eh(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "PREVIEW_MODE_ONLY", s(e, "class", "info-tag svelte-1fooboy");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function th(l) {
  let e;
  function t(o, c) {
    return (
      /*isRendered*/
      o[7] ? ah : ih
    );
  }
  let i = t(l), n = i(l);
  return {
    c() {
      n.c(), e = Pt();
    },
    m(o, c) {
      n.m(o, c), q(o, e, c);
    },
    p(o, c) {
      i === (i = t(o)) && n ? n.p(o, c) : (n.d(1), n = i(o), n && (n.c(), n.m(e.parentNode, e)));
    },
    d(o) {
      o && P(e), n.d(o);
    }
  };
}
function lh(l) {
  let e, t, i, n, o = (
    /*item*/
    l[0].price + ""
  ), c, f, u, d, p, m;
  return {
    c() {
      e = r("div"), t = r("span"), t.textContent = "UNIT_PRICE:", i = g(), n = r("span"), c = B(o), f = B(" MC"), u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-shopping-cart"></i> EXECUTE_TRANSACTION', s(t, "class", "label svelte-1fooboy"), s(n, "class", "amount svelte-1fooboy"), s(e, "class", "price-display svelte-1fooboy"), s(d, "class", "cyber-btn buy svelte-1fooboy");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, i), a(e, n), a(n, c), a(n, f), q(b, u, v), q(b, d, v), p || (m = R(
        d,
        "click",
        /*click_handler_2*/
        l[15]
      ), p = !0);
    },
    p(b, v) {
      v & /*item*/
      1 && o !== (o = /*item*/
      b[0].price + "") && te(c, o);
    },
    d(b) {
      b && (P(e), P(u), P(d)), p = !1, m();
    }
  };
}
function ah(l) {
  let e;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-check"></i> SYSTEM_ONLINE', s(e, "class", "cyber-btn disabled svelte-1fooboy"), e.disabled = !0;
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function ih(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-power-off"></i> RENDER_ITEM', s(e, "class", "cyber-btn activate svelte-1fooboy");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_3*/
        l[16]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function sh(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = (
    /*item*/
    l[0].name.toUpperCase() + ""
  ), v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z = (
    /*item*/
    (l[0].systemTag || "N/A") + ""
  ), F, W, H, V, J, j, X = (
    /*item*/
    (l[0].rarity || "COMUM") + ""
  ), K, Z, le, $, se, Y, Q, ie = (
    /*sys*/
    (l[3].costPerDie || 0) + ""
  ), ee, pe, Ee, De, we, ke, me = (
    /*sys*/
    (l[3].xpCost || 0) + ""
  ), re, ye, oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe = (
    /*isRendered*/
    l[7] && /*mode*/
    l[2] === "inventory" && Sc()
  ), Le = (
    /*mode*/
    l[2] === "shop" && Cc(l)
  );
  function qe(ve, Ue) {
    if (
      /*mode*/
      ve[2] === "shop"
    ) return lh;
    if (
      /*mode*/
      ve[2] === "inventory"
    ) return th;
    if (
      /*mode*/
      ve[2] === "view"
    ) return eh;
  }
  let Me = qe(l), Se = Me && Me(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = g(), o = r("div"), c = g(), f = r("header"), u = r("div"), d = r("span"), d.textContent = "Running_Process::", p = g(), m = r("span"), v = B(b), h = g(), _ = r("button"), _.textContent = "[ TERMINATE ]", w = g(), k = r("div"), A = r("aside"), y = r("div"), E = r("img"), C = g(), T = r("div"), N = g(), fe && fe.c(), I = g(), D = r("div"), M = r("div"), G = r("span"), G.textContent = "CLASS_TYPE", L = g(), U = r("span"), F = B(z), W = g(), H = r("div"), V = r("span"), V.textContent = "RARITY_LEVEL", J = g(), j = r("span"), K = B(X), Z = g(), Le && Le.c(), le = g(), $ = r("div"), se = r("span"), se.textContent = "COST_PB", Y = g(), Q = r("span"), ee = B(ie), pe = g(), Ee = r("div"), De = r("span"), De.textContent = "COST_XP", we = g(), ke = r("span"), re = B(me), ye = g(), oe = r("div"), Se && Se.c(), be = g(), de = r("main"), Oe = r("div"), _e = g(), ue = r("div"), s(i, "class", "bg-grid svelte-1fooboy"), s(o, "class", "scanline svelte-1fooboy"), s(d, "class", "icon svelte-1fooboy"), s(m, "class", "item-name svelte-1fooboy"), s(u, "class", "title-block svelte-1fooboy"), s(_, "class", "close-btn svelte-1fooboy"), s(f, "class", "svelte-1fooboy"), at(E.src, S = /*item*/
      l[0].img) || s(E, "src", S), s(E, "alt", O = /*item*/
      l[0].name), s(E, "class", "svelte-1fooboy"), s(T, "class", "crt-overlay svelte-1fooboy"), s(y, "class", "holo-frame svelte-1fooboy"), s(G, "class", "label svelte-1fooboy"), s(U, "class", "val svelte-1fooboy"), s(M, "class", "data-row svelte-1fooboy"), s(V, "class", "label svelte-1fooboy"), s(j, "class", "val svelte-1fooboy"), ae(j, "color", "var(--th)"), s(H, "class", "data-row svelte-1fooboy"), s(se, "class", "label svelte-1fooboy"), s(Q, "class", "val gold svelte-1fooboy"), s($, "class", "data-row svelte-1fooboy"), s(De, "class", "label svelte-1fooboy"), s(ke, "class", "val xp svelte-1fooboy"), s(Ee, "class", "data-row svelte-1fooboy"), s(D, "class", "data-table svelte-1fooboy"), s(oe, "class", "actions-area svelte-1fooboy"), s(A, "class", "svelte-1fooboy"), s(Oe, "class", "html-renderer svelte-1fooboy"), s(de, "class", "svelte-1fooboy"), s(k, "class", "window-body svelte-1fooboy"), s(ue, "class", "resize-handle svelte-1fooboy"), s(t, "class", "item-window svelte-1fooboy"), ae(
        t,
        "left",
        /*pos*/
        l[4].x + "px"
      ), ae(
        t,
        "top",
        /*pos*/
        l[4].y + "px"
      ), ae(
        t,
        "--th",
        /*themeColor*/
        l[1]
      ), s(e, "class", "window-overlay svelte-1fooboy");
    },
    m(ve, Ue) {
      q(ve, e, Ue), a(e, t), a(t, i), a(t, n), a(t, o), a(t, c), a(t, f), a(f, u), a(u, d), a(u, p), a(u, m), a(m, v), a(f, h), a(f, _), a(t, w), a(t, k), a(k, A), a(A, y), a(y, E), a(y, C), a(y, T), a(y, N), fe && fe.m(y, null), a(A, I), a(A, D), a(D, M), a(M, G), a(M, L), a(M, U), a(U, F), a(D, W), a(D, H), a(H, V), a(H, J), a(H, j), a(j, K), a(D, Z), Le && Le.m(D, null), a(D, le), a(D, $), a($, se), a($, Y), a($, Q), a(Q, ee), a(D, pe), a(D, Ee), a(Ee, De), a(Ee, we), a(Ee, ke), a(ke, re), a(A, ye), a(A, oe), Se && Se.m(oe, null), a(k, be), a(k, de), a(de, Oe), Oe.innerHTML = /*descHTML*/
      l[5], a(t, _e), a(t, ue), He = !0, Ge || (Xe = [
        R(
          Oc,
          "mousemove",
          /*onMove*/
          l[11]
        ),
        R(
          Oc,
          "mouseup",
          /*stopDrag*/
          l[10]
        ),
        R(
          _,
          "click",
          /*click_handler_1*/
          l[14]
        ),
        R(
          f,
          "mousedown",
          /*startDrag*/
          l[9]
        ),
        R(t, "click", Lt(
          /*click_handler*/
          l[13]
        )),
        R(
          e,
          "click",
          /*click_handler_4*/
          l[17]
        )
      ], Ge = !0);
    },
    p(ve, [Ue]) {
      (!He || Ue & /*item*/
      1) && b !== (b = /*item*/
      ve[0].name.toUpperCase() + "") && te(v, b), (!He || Ue & /*item*/
      1 && !at(E.src, S = /*item*/
      ve[0].img)) && s(E, "src", S), (!He || Ue & /*item*/
      1 && O !== (O = /*item*/
      ve[0].name)) && s(E, "alt", O), /*isRendered*/
      ve[7] && /*mode*/
      ve[2] === "inventory" ? fe || (fe = Sc(), fe.c(), fe.m(y, null)) : fe && (fe.d(1), fe = null), (!He || Ue & /*item*/
      1) && z !== (z = /*item*/
      (ve[0].systemTag || "N/A") + "") && te(F, z), (!He || Ue & /*item*/
      1) && X !== (X = /*item*/
      (ve[0].rarity || "COMUM") + "") && te(K, X), /*mode*/
      ve[2] === "shop" ? Le ? Le.p(ve, Ue) : (Le = Cc(ve), Le.c(), Le.m(D, le)) : Le && (Le.d(1), Le = null), (!He || Ue & /*sys*/
      8) && ie !== (ie = /*sys*/
      (ve[3].costPerDie || 0) + "") && te(ee, ie), (!He || Ue & /*sys*/
      8) && me !== (me = /*sys*/
      (ve[3].xpCost || 0) + "") && te(re, me), Me === (Me = qe(ve)) && Se ? Se.p(ve, Ue) : (Se && Se.d(1), Se = Me && Me(ve), Se && (Se.c(), Se.m(oe, null))), (!He || Ue & /*descHTML*/
      32) && (Oe.innerHTML = /*descHTML*/
      ve[5]), (!He || Ue & /*pos*/
      16) && ae(
        t,
        "left",
        /*pos*/
        ve[4].x + "px"
      ), (!He || Ue & /*pos*/
      16) && ae(
        t,
        "top",
        /*pos*/
        ve[4].y + "px"
      ), (!He || Ue & /*themeColor*/
      2) && ae(
        t,
        "--th",
        /*themeColor*/
        ve[1]
      );
    },
    i(ve) {
      He || (ve && Ne(() => {
        He && (Re || (Re = We(t, Mt, { duration: 200, start: 0.95 }, !0)), Re.run(1));
      }), ve && Ne(() => {
        He && (Ce || (Ce = We(e, Qe, { duration: 100 }, !0)), Ce.run(1));
      }), He = !0);
    },
    o(ve) {
      ve && (Re || (Re = We(t, Mt, { duration: 200, start: 0.95 }, !1)), Re.run(0)), ve && (Ce || (Ce = We(e, Qe, { duration: 100 }, !1)), Ce.run(0)), He = !1;
    },
    d(ve) {
      ve && P(e), fe && fe.d(), Le && Le.d(), Se && Se.d(), ve && Re && Re.end(), ve && Ce && Ce.end(), Ge = !1, Te(Xe);
    }
  };
}
function nh(l, e, t) {
  let i, n, o, c, { item: f } = e, { isGM: u = !1 } = e, { themeColor: d = "#00ff41" } = e, { mode: p = "shop" } = e;
  const m = ml();
  let b = {
    x: window.innerWidth / 2 - 375,
    y: window.innerHeight / 2 - 250
  }, v = !1;
  function h() {
    v = !0;
  }
  function _() {
    v = !1;
  }
  function w(O) {
    v && (t(4, b.x += O.movementX, b), t(4, b.y += O.movementY, b));
  }
  function k(O) {
    Ol.call(this, l, O);
  }
  const A = () => m("close"), y = () => m("buy", f), E = () => m("activate", f), S = () => m("close");
  return l.$$set = (O) => {
    "item" in O && t(0, f = O.item), "isGM" in O && t(12, u = O.isGM), "themeColor" in O && t(1, d = O.themeColor), "mode" in O && t(2, p = O.mode);
  }, l.$$.update = () => {
    l.$$.dirty & /*item*/
    1 && t(3, i = f.system || {}), l.$$.dirty & /*item*/
    1 && t(7, n = f.active === !0), l.$$.dirty & /*sys*/
    8 && t(6, o = i.stock === -1 ? "‚àû" : i.stock), l.$$.dirty & /*sys*/
    8 && t(5, c = i.description || '<div style="padding:20px; color:#666;">DADOS CORROMPIDOS OU INEXISTENTES.</div>');
  }, [
    f,
    d,
    p,
    i,
    b,
    c,
    o,
    n,
    m,
    h,
    _,
    w,
    u,
    k,
    A,
    y,
    E,
    S
  ];
}
class L0 extends mt {
  constructor(e) {
    super(), pt(this, e, nh, sh, dt, {
      item: 0,
      isGM: 12,
      themeColor: 1,
      mode: 2
    });
  }
}
function Ic(l, e, t) {
  const i = l.slice();
  i[30] = e[t], i[35] = t;
  const n = (
    /*isWeekFuture*/
    i[17](
      /*idx*/
      i[35]
    )
  );
  i[31] = n;
  const o = (
    /*isWeekCurrent*/
    i[18](
      /*idx*/
      i[35]
    )
  );
  i[32] = o;
  const c = (
    /*idx*/
    i[35] + 1
  );
  return i[33] = c, i;
}
function Tc(l, e, t) {
  const i = l.slice();
  i[36] = e[t];
  const n = !!/*week*/
  i[30][
    /*t*/
    i[36]
  ];
  i[37] = n;
  const o = (
    /*isLockedTier*/
    i[19](
      /*t*/
      i[36]
    )
  );
  i[38] = o;
  const c = (
    /*isItemTaken*/
    i[20](
      /*idx*/
      i[35],
      /*t*/
      i[36]
    )
  );
  i[39] = c;
  const f = (
    /*TIER_CONFIG*/
    i[12][
      /*t*/
      i[36]
    ]
  );
  return i[40] = f, i;
}
function Dc(l) {
  let e, t;
  return e = new L0({
    props: {
      item: (
        /*selectedItemForInspect*/
        l[9]
      ),
      mode: "view",
      isGM: (
        /*isGM*/
        l[11]
      ),
      themeColor: "#00ff41"
    }
  }), e.$on(
    "close",
    /*close_handler*/
    l[22]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*selectedItemForInspect*/
      512 && (o.item = /*selectedItemForInspect*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function oh(l) {
  let e, t, i, n, o, c, f = (
    /*season*/
    l[2].name + ""
  ), u, d, p, m = (
    /*season*/
    l[2].status === "active" ? "ATIVO" : "OFF"
  ), b, v, h, _, w, k, A, y, E = (
    /*playerTier*/
    l[1].label + ""
  ), S, O, C, T, N = (
    /*actor*/
    l[0].name.toUpperCase() + ""
  ), I, D, M, G, L, U, z, F = Math.round(
    /*progressPercent*/
    l[7]
  ) + "", W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be, de, Oe, _e, ue, Re, Ce = (
    /*isGM*/
    l[11] && ch(l)
  ), He = ce(
    /*rewardsMap*/
    l[3]
  ), Ge = [];
  for (let fe = 0; fe < He.length; fe += 1)
    Ge[fe] = Nc(Ic(l, He, fe));
  const Xe = (fe) => Ae(Ge[fe], 1, 1, () => {
    Ge[fe] = null;
  });
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), n = r("div"), o = r("div"), c = r("span"), u = B(f), d = g(), p = r("span"), b = B(m), v = g(), h = r("div"), _ = r("div"), w = r("img"), A = g(), y = r("h2"), S = B(E), O = g(), C = r("p"), T = B("ID: "), I = B(N), D = g(), M = r("div"), G = r("div"), L = r("span"), L.textContent = "PROGRESSO", U = g(), z = r("span"), W = B(F), H = B("%"), V = g(), J = r("div"), j = r("div"), X = g(), K = r("div"), Z = B("FIM EM: "), le = B(
        /*daysRemaining*/
        l[6]
      ), $ = B(" DIAS"), se = g(), Y = r("div"), Q = g(), Ce && Ce.c(), ie = g(), ee = r("main"), pe = r("div"), Ee = r("h3"), Ee.textContent = "CRONOGRAMA DE SUPRIMENTOS", De = g(), we = r("div"), ke = B("SEMANA ATUAL: "), me = r("span"), re = B(
        /*currentWeekNumber*/
        l[5]
      ), ye = B(" / 12"), oe = g(), be = r("div"), de = r("div"), Oe = g();
      for (let fe = 0; fe < Ge.length; fe += 1)
        Ge[fe].c();
      s(c, "class", "season-lbl"), s(p, "class", "status-lbl"), s(o, "class", "card-header svelte-1u1qq2e"), at(w.src, k = /*actor*/
      l[0].img) || s(w, "src", k), s(w, "alt", "Player"), s(w, "class", "svelte-1u1qq2e"), s(_, "class", "avatar-frame svelte-1u1qq2e"), ae(
        _,
        "border-color",
        /*currentStyle*/
        l[10].border
      ), ae(
        y,
        "color",
        /*currentStyle*/
        l[10].border
      ), s(y, "class", "svelte-1u1qq2e"), s(C, "class", "card-id svelte-1u1qq2e"), s(h, "class", "card-body svelte-1u1qq2e"), s(G, "class", "progress-info svelte-1u1qq2e"), s(j, "class", "fill svelte-1u1qq2e"), ae(
        j,
        "width",
        /*progressPercent*/
        l[7] + "%"
      ), ae(
        j,
        "background",
        /*currentStyle*/
        l[10].border
      ), s(J, "class", "p-bar svelte-1u1qq2e"), s(K, "class", "timer-txt svelte-1u1qq2e"), s(M, "class", "card-footer svelte-1u1qq2e"), s(Y, "class", "holo-sheen svelte-1u1qq2e"), s(n, "class", "holo-card svelte-1u1qq2e"), ae(
        n,
        "background",
        /*currentStyle*/
        l[10].bg
      ), ae(
        n,
        "border-color",
        /*currentStyle*/
        l[10].border
      ), ae(n, "box-shadow", "0 0 40px " + /*currentStyle*/
      l[10].shadow), s(i, "class", "card-container svelte-1u1qq2e"), ae(i, "transform", "perspective(1000px) rotateX(" + /*cardTilt*/
      l[8].x + "deg) rotateY(" + /*cardTilt*/
      l[8].y + "deg)"), s(t, "class", "profile-zone svelte-1u1qq2e"), s(Ee, "class", "svelte-1u1qq2e"), s(me, "class", "accent svelte-1u1qq2e"), s(we, "class", "week-indicator"), s(pe, "class", "track-header svelte-1u1qq2e"), s(de, "class", "connection-line svelte-1u1qq2e"), s(be, "class", "scroll-track svelte-1u1qq2e"), s(ee, "class", "tracks-zone svelte-1u1qq2e"), s(e, "class", "bp-layout svelte-1u1qq2e");
    },
    m(fe, Le) {
      q(fe, e, Le), a(e, t), a(t, i), a(i, n), a(n, o), a(o, c), a(c, u), a(o, d), a(o, p), a(p, b), a(n, v), a(n, h), a(h, _), a(_, w), a(h, A), a(h, y), a(y, S), a(h, O), a(h, C), a(C, T), a(C, I), a(n, D), a(n, M), a(M, G), a(G, L), a(G, U), a(G, z), a(z, W), a(z, H), a(M, V), a(M, J), a(J, j), a(M, X), a(M, K), a(K, Z), a(K, le), a(K, $), a(n, se), a(n, Y), a(t, Q), Ce && Ce.m(t, null), a(e, ie), a(e, ee), a(ee, pe), a(pe, Ee), a(pe, De), a(pe, we), a(we, ke), a(we, me), a(me, re), a(we, ye), a(ee, oe), a(ee, be), a(be, de), a(be, Oe);
      for (let qe = 0; qe < Ge.length; qe += 1)
        Ge[qe] && Ge[qe].m(be, null);
      _e = !0, ue || (Re = [
        R(
          i,
          "mousemove",
          /*handleMouseMove*/
          l[14]
        ),
        R(
          i,
          "mouseleave",
          /*resetTilt*/
          l[15]
        )
      ], ue = !0);
    },
    p(fe, Le) {
      if ((!_e || Le[0] & /*season*/
      4) && f !== (f = /*season*/
      fe[2].name + "") && te(u, f), (!_e || Le[0] & /*season*/
      4) && m !== (m = /*season*/
      fe[2].status === "active" ? "ATIVO" : "OFF") && te(b, m), (!_e || Le[0] & /*actor*/
      1 && !at(w.src, k = /*actor*/
      fe[0].img)) && s(w, "src", k), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(
        _,
        "border-color",
        /*currentStyle*/
        fe[10].border
      ), (!_e || Le[0] & /*playerTier*/
      2) && E !== (E = /*playerTier*/
      fe[1].label + "") && te(S, E), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(
        y,
        "color",
        /*currentStyle*/
        fe[10].border
      ), (!_e || Le[0] & /*actor*/
      1) && N !== (N = /*actor*/
      fe[0].name.toUpperCase() + "") && te(I, N), (!_e || Le[0] & /*progressPercent*/
      128) && F !== (F = Math.round(
        /*progressPercent*/
        fe[7]
      ) + "") && te(W, F), (!_e || Le[0] & /*progressPercent*/
      128) && ae(
        j,
        "width",
        /*progressPercent*/
        fe[7] + "%"
      ), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(
        j,
        "background",
        /*currentStyle*/
        fe[10].border
      ), (!_e || Le[0] & /*daysRemaining*/
      64) && te(
        le,
        /*daysRemaining*/
        fe[6]
      ), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(
        n,
        "background",
        /*currentStyle*/
        fe[10].bg
      ), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(
        n,
        "border-color",
        /*currentStyle*/
        fe[10].border
      ), (!_e || Le[0] & /*currentStyle*/
      1024) && ae(n, "box-shadow", "0 0 40px " + /*currentStyle*/
      fe[10].shadow), (!_e || Le[0] & /*cardTilt*/
      256) && ae(i, "transform", "perspective(1000px) rotateX(" + /*cardTilt*/
      fe[8].x + "deg) rotateY(" + /*cardTilt*/
      fe[8].y + "deg)"), /*isGM*/
      fe[11] && Ce.p(fe, Le), (!_e || Le[0] & /*currentWeekNumber*/
      32) && te(
        re,
        /*currentWeekNumber*/
        fe[5]
      ), Le[0] & /*isWeekFuture, isWeekCurrent, getUnlockDateDisplay, claimWeek, TIER_CONFIG, isLockedTier, isItemTaken, inspectItem, rewardsMap*/
      4141064) {
        He = ce(
          /*rewardsMap*/
          fe[3]
        );
        let qe;
        for (qe = 0; qe < He.length; qe += 1) {
          const Me = Ic(fe, He, qe);
          Ge[qe] ? (Ge[qe].p(Me, Le), ne(Ge[qe], 1)) : (Ge[qe] = Nc(Me), Ge[qe].c(), ne(Ge[qe], 1), Ge[qe].m(be, null));
        }
        for ($e(), qe = He.length; qe < Ge.length; qe += 1)
          Xe(qe);
        et();
      }
    },
    i(fe) {
      if (!_e) {
        for (let Le = 0; Le < He.length; Le += 1)
          ne(Ge[Le]);
        _e = !0;
      }
    },
    o(fe) {
      Ge = Ge.filter(Boolean);
      for (let Le = 0; Le < Ge.length; Le += 1)
        Ae(Ge[Le]);
      _e = !1;
    },
    d(fe) {
      fe && P(e), Ce && Ce.d(), Fe(Ge, fe), ue = !1, Te(Re);
    }
  };
}
function rh(l) {
  let e, t, i, n, o, c, f;
  return n = new $v({}), {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-arrow-left"></i> VOLTAR', i = g(), kt(n.$$.fragment), s(t, "class", "back-btn svelte-1u1qq2e"), s(e, "class", "admin-wrapper svelte-1u1qq2e");
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(e, i), ht(n, e, null), o = !0, c || (f = R(
        t,
        "click",
        /*click_handler*/
        l[23]
      ), c = !0);
    },
    p: ge,
    i(u) {
      o || (ne(n.$$.fragment, u), o = !0);
    },
    o(u) {
      Ae(n.$$.fragment, u), o = !1;
    },
    d(u) {
      u && P(e), gt(n), c = !1, f();
    }
  };
}
function ch(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-edit"></i> ADMIN', s(e, "class", "gm-edit-btn svelte-1u1qq2e");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_1*/
        l[24]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Rc(l) {
  let e, t, i, n, o = (
    /*config*/
    l[40].label + ""
  ), c, f, u, d, p, m, b, v, h, _, w;
  p = new hi({
    props: {
      item: {
        .../*week*/
        l[30][
          /*t*/
          l[36]
        ],
        price: 0
      }
    }
  });
  let k = (
    /*taken*/
    l[39] && fh()
  ), A = (
    /*lockedTier*/
    l[38] && dh()
  );
  function y() {
    return (
      /*click_handler_2*/
      l[25](
        /*week*/
        l[30],
        /*t*/
        l[36]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), n = g(), c = B(o), f = g(), u = r("div"), d = r("div"), kt(p.$$.fragment), m = g(), k && k.c(), b = g(), A && A.c(), v = g(), s(i, "class", "fas " + /*config*/
      l[40].icon + " svelte-1u1qq2e"), s(t, "class", "tier-label svelte-1u1qq2e"), ae(
        t,
        "color",
        /*config*/
        l[40].color
      ), s(d, "class", "card-wrapper svelte-1u1qq2e"), s(u, "class", "card-slot svelte-1u1qq2e"), s(u, "title", "Clique para inspecionar"), he(
        u,
        "locked",
        /*lockedTier*/
        l[38]
      ), he(
        u,
        "taken",
        /*taken*/
        l[39]
      ), s(e, "class", "tier-row svelte-1u1qq2e"), ae(
        e,
        "--tier-color",
        /*config*/
        l[40].color
      ), ae(
        e,
        "background",
        /*config*/
        l[40].bg
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(t, c), a(e, f), a(e, u), a(u, d), ht(p, d, null), a(u, m), k && k.m(u, null), a(u, b), A && A.m(u, null), a(e, v), h = !0, _ || (w = R(u, "click", y), _ = !0);
    },
    p(E, S) {
      l = E;
      const O = {};
      S[0] & /*rewardsMap*/
      8 && (O.item = {
        .../*week*/
        l[30][
          /*t*/
          l[36]
        ],
        price: 0
      }), p.$set(O);
    },
    i(E) {
      h || (ne(p.$$.fragment, E), h = !0);
    },
    o(E) {
      Ae(p.$$.fragment, E), h = !1;
    },
    d(E) {
      E && P(e), gt(p), k && k.d(), A && A.d(), _ = !1, w();
    }
  };
}
function fh(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-check svelte-1u1qq2e"></i> RESGATADO', s(e, "class", "overlay taken svelte-1u1qq2e");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function dh(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-lock svelte-1u1qq2e"></i> BLOQUEADO', s(e, "class", "overlay lock svelte-1u1qq2e");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Mc(l) {
  let e, t, i = (
    /*hasItem*/
    l[37] && Rc(l)
  );
  return {
    c() {
      i && i.c(), e = Pt();
    },
    m(n, o) {
      i && i.m(n, o), q(n, e, o), t = !0;
    },
    p(n, o) {
      /*hasItem*/
      n[37] ? i ? (i.p(n, o), o[0] & /*rewardsMap*/
      8 && ne(i, 1)) : (i = Rc(n), i.c(), ne(i, 1), i.m(e.parentNode, e)) : i && ($e(), Ae(i, 1, 1, () => {
        i = null;
      }), et());
    },
    i(n) {
      t || (ne(i), t = !0);
    },
    o(n) {
      Ae(i), t = !1;
    },
    d(n) {
      n && P(e), i && i.d(n);
    }
  };
}
function uh(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_3*/
      l[26](
        /*idx*/
        l[35]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = `RESGATAR SEMANA ${/*weekNum*/
      l[33]}`, s(e, "class", "claim-btn svelte-1u1qq2e");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function ph(l) {
  let e, t, i, n;
  return {
    c() {
      e = r("div"), t = r("i"), i = g(), n = r("span"), n.textContent = `${/*getUnlockDateDisplay*/
      l[13](
        /*idx*/
        l[35]
      )}`, s(t, "class", "fas fa-clock svelte-1u1qq2e"), s(e, "class", "time-lock-display svelte-1u1qq2e");
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, i), a(e, n);
    },
    p: ge,
    d(o) {
      o && P(e);
    }
  };
}
function Nc(l) {
  let e, t, i, n, o, c, f, u, d, p, m = ce(["gambiarrite", "diamante", "ouro", "prata", "cobre"]), b = [];
  for (let k = 0; k < 5; k += 1)
    b[k] = Mc(Tc(l, m, k));
  const v = (k) => Ae(b[k], 1, 1, () => {
    b[k] = null;
  });
  function h(k, A) {
    return (
      /*isFuture*/
      k[31] ? ph : uh
    );
  }
  let w = h(l)(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), i.textContent = `S${/*weekNum*/
      l[33]}`, n = g(), o = r("div"), c = r("div");
      for (let k = 0; k < 5; k += 1)
        b[k].c();
      f = g(), u = r("div"), w.c(), d = g(), s(i, "class", "num"), s(t, "class", "node-marker svelte-1u1qq2e"), s(c, "class", "tier-list svelte-1u1qq2e"), s(u, "class", "week-footer svelte-1u1qq2e"), s(o, "class", "week-content svelte-1u1qq2e"), s(e, "class", "week-node svelte-1u1qq2e"), he(
        e,
        "locked-time",
        /*isFuture*/
        l[31]
      ), he(
        e,
        "current",
        /*isCurrent*/
        l[32]
      );
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, i), a(e, n), a(e, o), a(o, c);
      for (let y = 0; y < 5; y += 1)
        b[y] && b[y].m(c, null);
      a(o, f), a(o, u), w.m(u, null), a(e, d), p = !0;
    },
    p(k, A) {
      if (A[0] & /*TIER_CONFIG, isLockedTier, isItemTaken, inspectItem, rewardsMap*/
      1642504) {
        m = ce(["gambiarrite", "diamante", "ouro", "prata", "cobre"]);
        let y;
        for (y = 0; y < 5; y += 1) {
          const E = Tc(k, m, y);
          b[y] ? (b[y].p(E, A), ne(b[y], 1)) : (b[y] = Mc(E), b[y].c(), ne(b[y], 1), b[y].m(c, null));
        }
        for ($e(), y = 5; y < 5; y += 1)
          v(y);
        et();
      }
      w.p(k, A);
    },
    i(k) {
      if (!p) {
        for (let A = 0; A < 5; A += 1)
          ne(b[A]);
        p = !0;
      }
    },
    o(k) {
      b = b.filter(Boolean);
      for (let A = 0; A < 5; A += 1)
        Ae(b[A]);
      p = !1;
    },
    d(k) {
      k && P(e), Fe(b, k), w.d();
    }
  };
}
function mh(l) {
  let e, t, i, n, o, c = (
    /*selectedItemForInspect*/
    l[9] && Dc(l)
  );
  const f = [rh, oh], u = [];
  function d(p, m) {
    return (
      /*showAdmin*/
      p[4] ? 0 : 1
    );
  }
  return i = d(l), n = u[i] = f[i](l), {
    c() {
      c && c.c(), e = g(), t = r("div"), n.c(), s(t, "class", "bp-root svelte-1u1qq2e");
    },
    m(p, m) {
      c && c.m(p, m), q(p, e, m), q(p, t, m), u[i].m(t, null), o = !0;
    },
    p(p, m) {
      /*selectedItemForInspect*/
      p[9] ? c ? (c.p(p, m), m[0] & /*selectedItemForInspect*/
      512 && ne(c, 1)) : (c = Dc(p), c.c(), ne(c, 1), c.m(e.parentNode, e)) : c && ($e(), Ae(c, 1, 1, () => {
        c = null;
      }), et());
      let b = i;
      i = d(p), i === b ? u[i].p(p, m) : ($e(), Ae(u[b], 1, 1, () => {
        u[b] = null;
      }), et(), n = u[i], n ? n.p(p, m) : (n = u[i] = f[i](p), n.c()), ne(n, 1), n.m(t, null));
    },
    i(p) {
      o || (ne(c), ne(n), o = !0);
    },
    o(p) {
      Ae(c), Ae(n), o = !1;
    },
    d(p) {
      p && (P(e), P(t)), c && c.d(p), u[i].d();
    }
  };
}
const Lc = "multiversus-rpg";
function bh(l, e, t) {
  let i, { actor: n } = e;
  const o = game.user.isGM;
  let c = {}, f = ni.COBRE, u = [], d = [], p = !1, m = 1, b = 0, v = 0, h = { x: 0, y: 0 }, _ = null;
  const w = {
    gambiarrite: {
      label: "GAMBIARRITE",
      icon: "fa-biohazard",
      color: "#ff3333",
      bg: "rgba(255, 51, 51, 0.05)"
    },
    diamante: {
      label: "DIAMANTE",
      icon: "fa-gem",
      color: "#00fbff",
      bg: "rgba(0, 251, 255, 0.05)"
    },
    ouro: {
      label: "OURO",
      icon: "fa-trophy",
      color: "#ffcc00",
      bg: "rgba(255, 204, 0, 0.05)"
    },
    prata: {
      label: "PRATA",
      icon: "fa-medal",
      color: "#e0e0e0",
      bg: "rgba(224, 224, 224, 0.05)"
    },
    cobre: {
      label: "COBRE",
      icon: "fa-shield-alt",
      color: "#cd7f32",
      bg: "rgba(205, 127, 50, 0.05)"
    }
  };
  qt(() => {
    k(), Hooks.on("passSystemUpdate", k);
  });
  async function k() {
    t(2, c = Xt.getSeasonData()), t(1, f = Xt.getPlayerTier(game.user.id)), t(3, u = Xt.getRewardsMap()), d = n.getFlag(Lc, "claimedRewards") || [], A();
  }
  function A() {
    if (!c.startDate || !c.endDate) return;
    const F = Date.now(), W = 1e3 * 60 * 60 * 24 * 7, H = c.endDate - c.startDate, V = F - c.startDate;
    t(5, m = Math.min(12, Math.floor(V / W) + 1)), c.status !== "active" && t(5, m = 0), t(7, v = Math.min(100, Math.max(0, V / H * 100))), t(6, b = Xt.utils.getDaysRemaining(c.endDate));
  }
  function y(F) {
    if (!c.startDate) return "EM BREVE";
    const W = 1e3 * 60 * 60 * 24 * 7, H = c.startDate + F * W, V = new Date(H), J = String(V.getDate()).padStart(2, "0"), j = String(V.getMonth() + 1).padStart(2, "0"), X = String(V.getHours()).padStart(2, "0"), K = String(V.getMinutes()).padStart(2, "0");
    return `LIBERA√á√ÉO: ${J}/${j} √†s ${X}:${K}`;
  }
  function E(F) {
    const W = F.currentTarget.getBoundingClientRect(), H = (F.clientX - W.left) / W.width, V = (F.clientY - W.top) / W.height;
    t(8, h = { x: (0.5 - V) * 20, y: (H - 0.5) * 20 });
  }
  function S() {
    t(8, h = { x: 0, y: 0 });
  }
  async function O(F) {
    if (!F) return;
    const H = _t.getArchive().find((J) => J.id === F.id);
    let V = H ? { ...H, ...F } : { ...F };
    t(9, _ = {
      ...V,
      system: {
        description: "Sem descri√ß√£o.",
        ...V.system,
        stock: -1
      },
      price: 0,
      isPassItem: !0
    });
  }
  function C(F) {
    return F + 1 > m;
  }
  function T(F) {
    return F + 1 === m;
  }
  function N(F) {
    return Xt.getEligibleTiers(f.id).indexOf(F) === -1;
  }
  function I(F, W) {
    return d.includes(`w${F}_${W}`);
  }
  async function D(F) {
    if (c.status !== "active") return ui.notifications.warn("Temporada Inativa.");
    if (F + 1 > m) return ui.notifications.warn(`Semana ${F + 1} bloqueada temporalmente!`);
    const W = u[F], H = Xt.getEligibleTiers(f.id);
    let V = [], J = [...d];
    for (const j of H) {
      const X = W[j], K = `w${F}_${j}`;
      if (X && !d.includes(K)) {
        const le = _t.getArchive().find(($) => $.id === X.id) || X;
        V.push(le), J.push(K);
      }
    }
    if (V.length !== 0) {
      AudioHelper.play(
        {
          src: "sounds/lock.wav",
          volume: 0.8,
          autoplay: !0,
          loop: !1
        },
        !1
      );
      for (const j of V)
        j.type === "currency" || j.systemTag === "Moeda" ? (await _t.adminModifyCoins(game.user.id, 500, "add"), ui.notifications.info("[PASSE] Cr√©ditos Recebidos!")) : (await _t.injectPassItem(game.user.id, j), ui.notifications.info(`[PASSE] ${j.name} enviado para o Invent√°rio.`));
      await n.setFlag(Lc, "claimedRewards", J), d = J;
    }
  }
  const M = () => t(9, _ = null), G = () => t(4, p = !1), L = () => t(4, p = !0), U = (F, W) => O(F[W]), z = (F) => D(F);
  return l.$$set = (F) => {
    "actor" in F && t(0, n = F.actor);
  }, l.$$.update = () => {
    var F, W, H;
    l.$$.dirty[0] & /*playerTier*/
    2 && t(10, i = {
      bg: `linear-gradient(135deg, #050505, ${((F = w[f.id]) == null ? void 0 : F.color) || "#cd7f32"})`,
      border: ((W = w[f.id]) == null ? void 0 : W.color) || "#cd7f32",
      shadow: `${(H = w[f.id]) == null ? void 0 : H.color}40`
    });
  }, [
    n,
    f,
    c,
    u,
    p,
    m,
    b,
    v,
    h,
    _,
    i,
    o,
    w,
    y,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z
  ];
}
class vh extends mt {
  constructor(e) {
    super(), pt(this, e, bh, mh, dt, { actor: 0 }, null, [-1, -1]);
  }
}
let Pc = null;
const qc = {
  apply: (l, e) => {
    if (l === Pc) return;
    const t = "multiversus-theme-injector", i = document.getElementById(t);
    if (i && i.remove(), e != null && e.extraCSS) {
      const n = document.createElement("style");
      n.id = t, n.textContent = e.extraCSS, document.head.appendChild(n);
    }
    Pc = l, console.log("MOTOR DE TEMA | Aplicado:", l);
  }
};
function Uc(l, e, t) {
  const i = l.slice();
  return i[25] = e[t], i;
}
function Gc(l, e, t) {
  const i = l.slice();
  return i[22] = e[t], i[24] = t, i;
}
function hh(l) {
  let e, t, i, n, o, c, f = (
    /*currentThemeData*/
    l[2].label + ""
  ), u, d, p, m = (
    /*actor*/
    l[0].name + ""
  ), b, v, h, _, w, k, A;
  const y = [kh, _h], E = [];
  function S(O, C) {
    return (
      /*activeApp*/
      O[5] === null ? 0 : 1
    );
  }
  return _ = S(l), w = E[_] = y[_](l), {
    c() {
      e = r("div"), t = r("header"), i = r("div"), i.innerHTML = '<span class="led svelte-n489he"></span> ONLINE', n = g(), o = r("div"), c = B("MULTIVERSUS OS // "), u = B(f), d = g(), p = r("div"), b = B(m), v = g(), h = r("main"), w.c(), s(i, "class", "bar-left"), s(o, "class", "bar-center"), s(p, "class", "bar-right"), s(t, "class", "status-bar svelte-n489he"), s(h, "class", "viewport svelte-n489he"), s(e, "class", "os-container svelte-n489he");
    },
    m(O, C) {
      q(O, e, C), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, u), a(t, d), a(t, p), a(p, b), a(e, v), a(e, h), E[_].m(h, null), A = !0;
    },
    p(O, C) {
      (!A || C & /*currentThemeData*/
      4) && f !== (f = /*currentThemeData*/
      O[2].label + "") && te(u, f), (!A || C & /*actor*/
      1) && m !== (m = /*actor*/
      O[0].name + "") && te(b, m);
      let T = _;
      _ = S(O), _ === T ? E[_].p(O, C) : ($e(), Ae(E[T], 1, 1, () => {
        E[T] = null;
      }), et(), w = E[_], w ? w.p(O, C) : (w = E[_] = y[_](O), w.c()), ne(w, 1), w.m(h, null));
    },
    i(O) {
      A || (ne(w), O && (k || Ne(() => {
        k = st(e, Qe, {
          duration: 1e3,
          delay: 200,
          easing: Dl
        }), k.start();
      })), A = !0);
    },
    o(O) {
      Ae(w), A = !1;
    },
    d(O) {
      O && P(e), E[_].d();
    }
  };
}
function gh(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = (
    /*actor*/
    l[0].name.toUpperCase() + ""
  ), v, h, _, w, k = (
    /*loginState*/
    l[3] === "idle" ? "SISTEMA BLOQUEADO" : "PROCESSANDO LOGIN..."
  ), A, y, E, S, O = (
    /*loginState*/
    l[3] === "verifying" && zc()
  );
  function C(I, D) {
    return (
      /*loginState*/
      I[3] === "idle" ? qh : Ph
    );
  }
  let T = C(l), N = T(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("img"), c = g(), f = r("div"), u = g(), O && O.c(), d = g(), p = r("div"), m = r("h1"), v = B(b), h = g(), _ = r("small"), w = B(">> "), A = B(k), y = g(), N.c(), at(n.src, o = /*actor*/
      l[0].img) || s(n, "src", o), s(n, "class", "bio-img svelte-n489he"), s(n, "alt", "Avatar"), s(f, "class", "scanner-beam"), s(i, "class", "bio-scanner svelte-n489he"), he(
        i,
        "scanning",
        /*loginState*/
        l[3] === "verifying"
      ), s(m, "class", "svelte-n489he"), s(p, "class", "login-info svelte-n489he"), s(t, "class", "login-container svelte-n489he"), s(e, "class", "login-layer svelte-n489he");
    },
    m(I, D) {
      q(I, e, D), a(e, t), a(t, i), a(i, n), a(i, c), a(i, f), a(i, u), O && O.m(i, null), a(t, d), a(t, p), a(p, m), a(m, v), a(p, h), a(p, _), a(_, w), a(_, A), a(t, y), N.m(t, null), S = !0;
    },
    p(I, D) {
      (!S || D & /*actor*/
      1 && !at(n.src, o = /*actor*/
      I[0].img)) && s(n, "src", o), /*loginState*/
      I[3] === "verifying" ? O || (O = zc(), O.c(), O.m(i, null)) : O && (O.d(1), O = null), (!S || D & /*loginState*/
      8) && he(
        i,
        "scanning",
        /*loginState*/
        I[3] === "verifying"
      ), (!S || D & /*actor*/
      1) && b !== (b = /*actor*/
      I[0].name.toUpperCase() + "") && te(v, b), (!S || D & /*loginState*/
      8) && k !== (k = /*loginState*/
      I[3] === "idle" ? "SISTEMA BLOQUEADO" : "PROCESSANDO LOGIN...") && te(A, k), T === (T = C(I)) && N ? N.p(I, D) : (N.d(1), N = T(I), N && (N.c(), ne(N, 1), N.m(t, null)));
    },
    i(I) {
      S || (ne(N), E && E.end(1), S = !0);
    },
    o(I) {
      I && (E = vi(e, Sl, { y: -100, duration: 800, easing: pm })), S = !1;
    },
    d(I) {
      I && P(e), O && O.d(), N.d(), I && E && E.end();
    }
  };
}
function _h(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y;
  const E = [
    Lh,
    Nh,
    Mh,
    Rh,
    Dh,
    Th,
    Ih,
    Ch,
    Sh,
    Oh,
    Eh,
    Ah,
    yh,
    wh
  ], S = [];
  function O(C, T) {
    return (
      /*activeApp*/
      C[5] === "combat" ? 0 : (
        /*activeApp*/
        C[5] === "profile" ? 1 : (
          /*activeApp*/
          C[5] === "settings" ? 2 : (
            /*activeApp*/
            C[5] === "survival" ? 3 : (
              /*activeApp*/
              C[5] === "comms" ? 4 : (
                /*activeApp*/
                C[5] === "testamento" ? 5 : (
                  /*activeApp*/
                  C[5] === "oracle" ? 6 : (
                    /*activeApp*/
                    C[5] === "archives" ? 7 : (
                      /*activeApp*/
                      C[5] === "base" ? 8 : (
                        /*activeApp*/
                        C[5] === "powers" ? 9 : (
                          /*activeApp*/
                          C[5] === "inv" ? 10 : (
                            /*activeApp*/
                            C[5] === "stats" ? 11 : (
                              /*activeApp*/
                              C[5] === "battlepass" ? 12 : 13
                            )
                          )
                        )
                      )
                    )
                  )
                )
              )
            )
          )
        )
      )
    );
  }
  return h = O(l), _ = S[h] = E[h](l), {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("i"), o = g(), c = r("span"), f = B("run/"), u = B(
        /*activeApp*/
        l[5]
      ), d = B(".exe"), p = g(), m = r("button"), m.innerHTML = '[ VOLTAR ] <i class="fas fa-undo"></i>', b = g(), v = r("div"), _.c(), s(n, "class", "fas fa-terminal"), s(c, "class", "win-title"), s(i, "class", "header-left svelte-n489he"), s(m, "class", "win-close svelte-n489he"), s(t, "class", "window-header svelte-n489he"), s(v, "class", "window-content-area svelte-n489he"), s(e, "class", "window-frame svelte-n489he");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(c, u), a(c, d), a(t, p), a(t, m), a(e, b), a(e, v), S[h].m(v, null), k = !0, A || (y = R(
        m,
        "click",
        /*click_handler_1*/
        l[16]
      ), A = !0);
    },
    p(C, T) {
      (!k || T & /*activeApp*/
      32) && te(
        u,
        /*activeApp*/
        C[5]
      );
      let N = h;
      h = O(C), h === N ? S[h].p(C, T) : ($e(), Ae(S[N], 1, 1, () => {
        S[N] = null;
      }), et(), _ = S[h], _ ? _.p(C, T) : (_ = S[h] = E[h](C), _.c()), ne(_, 1), _.m(v, null));
    },
    i(C) {
      k || (ne(_), C && (w || Ne(() => {
        w = st(e, Sl, { y: 20, duration: 300 }), w.start();
      })), k = !0);
    },
    o(C) {
      Ae(_), k = !1;
    },
    d(C) {
      C && P(e), S[h].d(), A = !1, y();
    }
  };
}
function kh(l) {
  let e, t, i = ce(
    /*desktopIcons*/
    l[13]
  ), n = [];
  for (let o = 0; o < i.length; o += 1)
    n[o] = Hc(Uc(l, i, o));
  return {
    c() {
      e = r("div");
      for (let o = 0; o < n.length; o += 1)
        n[o].c();
      s(e, "class", "desktop-grid svelte-n489he");
    },
    m(o, c) {
      q(o, e, c);
      for (let f = 0; f < n.length; f += 1)
        n[f] && n[f].m(e, null);
    },
    p(o, c) {
      if (c & /*desktopIcons, activeApp*/
      8224) {
        i = ce(
          /*desktopIcons*/
          o[13]
        );
        let f;
        for (f = 0; f < i.length; f += 1) {
          const u = Uc(o, i, f);
          n[f] ? n[f].p(u, c) : (n[f] = Hc(u), n[f].c(), n[f].m(e, null));
        }
        for (; f < n.length; f += 1)
          n[f].d(1);
        n.length = i.length;
      }
    },
    i(o) {
      o && (t || Ne(() => {
        t = st(e, Qe, { duration: 300 }), t.start();
      }));
    },
    o: ge,
    d(o) {
      o && P(e), Fe(n, o);
    }
  };
}
function wh(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <span>M√ìDULO OFF-LINE</span>', s(e, "class", "wip-msg svelte-n489he");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function yh(l) {
  let e, t;
  return e = new vh({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Ah(l) {
  let e, t;
  return e = new pv({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      system: (
        /*system*/
        l[11]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*system*/
      2048 && (o.system = /*system*/
      i[11]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Eh(l) {
  let e, t;
  return e = new Jb({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Oh(l) {
  let e, t;
  return e = new D0({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Sh(l) {
  let e, t;
  return e = new kb({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Ch(l) {
  let e, t;
  return e = new Cv({
    props: { themeStyle: (
      /*cssString*/
      l[10]
    ) }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*cssString*/
      1024 && (o.themeStyle = /*cssString*/
      i[10]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Ih(l) {
  let e, t;
  return e = new vv({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeStyle: (
        /*cssString*/
        l[10]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*cssString*/
      1024 && (o.themeStyle = /*cssString*/
      i[10]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Th(l) {
  let e, t;
  return e = new Fv({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeStyle: (
        /*cssString*/
        l[10]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*cssString*/
      1024 && (o.themeStyle = /*cssString*/
      i[10]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Dh(l) {
  let e, t;
  return e = new Gv({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeStyle: (
        /*cssString*/
        l[10]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*cssString*/
      1024 && (o.themeStyle = /*cssString*/
      i[10]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Rh(l) {
  let e, t;
  return e = new Bm({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Mh(l) {
  let e, t;
  return e = new Sm({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      flags: (
        /*flags*/
        l[1]
      )
    }
  }), e.$on(
    "close",
    /*close_handler*/
    l[17]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Nh(l) {
  let e, t;
  return e = new _m({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      system: (
        /*system*/
        l[11]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*system*/
      2048 && (o.system = /*system*/
      i[11]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Lh(l) {
  let e, t;
  return e = new Rm({
    props: {
      actor: (
        /*actor*/
        l[0]
      ),
      system: (
        /*system*/
        l[11]
      ),
      flags: (
        /*flags*/
        l[1]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*actor*/
      1 && (o.actor = /*actor*/
      i[0]), n & /*system*/
      2048 && (o.system = /*system*/
      i[11]), n & /*flags*/
      2 && (o.flags = /*flags*/
      i[1]), n & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Hc(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  function b() {
    return (
      /*click_handler*/
      l[15](
        /*icon*/
        l[25]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("div"), i = r("i"), n = g(), o = r("div"), c = g(), f = r("div"), u = r("span"), u.textContent = `${/*icon*/
      l[25].label}`, d = g(), s(i, "class", "fas " + /*icon*/
      l[25].icon + " svelte-n489he"), s(o, "class", "glitch-effect"), s(t, "class", "icon-frame svelte-n489he"), s(u, "class", "icon-label svelte-n489he"), s(f, "class", "label-box"), s(e, "class", "icon-btn svelte-n489he"), he(
        e,
        "danger",
        /*icon*/
        l[25].id === "shutdown"
      );
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, i), a(t, n), a(t, o), a(e, c), a(e, f), a(f, u), a(e, d), p || (m = R(e, "click", b), p = !0);
    },
    p(v, h) {
      l = v;
    },
    d(v) {
      v && P(e), p = !1, m();
    }
  };
}
function zc(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "processing-ring");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Ph(l) {
  let e, t, i, n, o, c = (
    /*loginState*/
    l[3] === "verifying" && Bc()
  );
  return {
    c() {
      e = r("div"), c && c.c(), t = g(), i = r("span"), n = B(
        /*bootText*/
        l[4]
      ), s(i, "class", "boot-text"), he(
        i,
        "success",
        /*loginState*/
        l[3] === "welcome"
      ), s(e, "class", "boot-sequence");
    },
    m(f, u) {
      q(f, e, u), c && c.m(e, null), a(e, t), a(e, i), a(i, n);
    },
    p(f, u) {
      /*loginState*/
      f[3] === "verifying" ? c || (c = Bc(), c.c(), c.m(e, t)) : c && (c.d(1), c = null), u & /*bootText*/
      16 && te(
        n,
        /*bootText*/
        f[4]
      ), u & /*loginState*/
      8 && he(
        i,
        "success",
        /*loginState*/
        f[3] === "welcome"
      );
    },
    i(f) {
      f && (o || Ne(() => {
        o = st(e, Qe, {}), o.start();
      }));
    },
    o: ge,
    d(f) {
      f && P(e), c && c.d();
    }
  };
}
function qh(l) {
  let e, t, i, n, o = (
    /*inputBuffer*/
    l[6].length < 6 ? (
      /*savedPassword*/
      l[7] ? "INSIRA SENHA" : "DEFINA ACESSO TEMPOR√ÅRIO"
    ) : "[ PRESSIONE ENTER ]"
  ), c, f = ce(Array(6)), u = [];
  for (let d = 0; d < f.length; d += 1)
    u[d] = Fc(Gc(l, f, d));
  return {
    c() {
      e = r("div");
      for (let d = 0; d < u.length; d += 1)
        u[d].c();
      i = g(), n = r("div"), c = B(o), s(e, "class", "pass-input-box svelte-n489he"), s(n, "class", "login-msg blink svelte-n489he");
    },
    m(d, p) {
      q(d, e, p);
      for (let m = 0; m < u.length; m += 1)
        u[m] && u[m].m(e, null);
      q(d, i, p), q(d, n, p), a(n, c);
    },
    p(d, p) {
      if (p & /*inputBuffer*/
      64) {
        f = ce(Array(6));
        let m;
        for (m = 0; m < f.length; m += 1) {
          const b = Gc(d, f, m);
          u[m] ? u[m].p(b, p) : (u[m] = Fc(b), u[m].c(), u[m].m(e, null));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = f.length;
      }
      p & /*inputBuffer, savedPassword*/
      192 && o !== (o = /*inputBuffer*/
      d[6].length < 6 ? (
        /*savedPassword*/
        d[7] ? "INSIRA SENHA" : "DEFINA ACESSO TEMPOR√ÅRIO"
      ) : "[ PRESSIONE ENTER ]") && te(c, o);
    },
    i(d) {
      d && (t || Ne(() => {
        t = st(e, Qe, {}), t.start();
      }));
    },
    o: ge,
    d(d) {
      d && (P(e), P(i), P(n)), Fe(u, d);
    }
  };
}
function Bc(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "spinner");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Fc(l) {
  let e, t = (
    /*i*/
    l[24] < /*inputBuffer*/
    l[6].length ? "‚óè" : ""
  ), i, n;
  return {
    c() {
      e = r("div"), i = B(t), n = g(), s(e, "class", "digit-box svelte-n489he"), he(
        e,
        "filled",
        /*i*/
        l[24] < /*inputBuffer*/
        l[6].length
      );
    },
    m(o, c) {
      q(o, e, c), a(e, i), a(e, n);
    },
    p(o, c) {
      c & /*inputBuffer*/
      64 && t !== (t = /*i*/
      o[24] < /*inputBuffer*/
      o[6].length ? "‚óè" : "") && te(i, t), c & /*inputBuffer*/
      64 && he(
        e,
        "filled",
        /*i*/
        o[24] < /*inputBuffer*/
        o[6].length
      );
    },
    d(o) {
      o && P(e);
    }
  };
}
function Uh(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z;
  const F = [gh, hh], W = [];
  function H(V, J) {
    return (
      /*loginState*/
      V[3] !== "logged_in" ? 0 : 1
    );
  }
  return D = H(l), M = W[D] = F[D](l), {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = g(), c = r("div"), f = g(), u = r("div"), d = g(), p = r("div"), m = g(), b = r("div"), v = g(), h = r("div"), _ = g(), w = r("div"), k = g(), A = r("div"), y = r("div"), E = g(), S = r("div"), O = g(), C = r("div"), T = g(), N = r("div"), I = g(), M.c(), s(t, "class", "code-border code-top svelte-n489he"), s(n, "class", "code-border code-bottom svelte-n489he"), s(c, "class", "code-border code-left svelte-n489he"), s(u, "class", "code-border code-right svelte-n489he"), s(p, "class", "corner-decor top-left svelte-n489he"), s(b, "class", "corner-decor top-right svelte-n489he"), s(h, "class", "corner-decor bottom-left svelte-n489he"), s(w, "class", "corner-decor bottom-right svelte-n489he"), s(y, "class", "wallpaper-layer svelte-n489he"), ae(y, "background-image", "url('" + /*wallpaperURL*/
      l[8] + "')"), s(S, "class", "grid-layer svelte-n489he"), s(C, "class", "scanlines svelte-n489he"), s(N, "class", "vignette svelte-n489he"), s(A, "class", "inner-terminal-screen svelte-n489he"), s(e, "class", G = "cyber-frame root-terminal " + /*currentThemeData*/
      l[2].class + " svelte-n489he"), s(
        e,
        "style",
        /*cssString*/
        l[10]
      );
    },
    m(V, J) {
      q(V, e, J), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(e, m), a(e, b), a(e, v), a(e, h), a(e, _), a(e, w), a(e, k), a(e, A), a(A, y), a(A, E), a(A, S), a(A, O), a(A, C), a(A, T), a(A, N), a(A, I), W[D].m(A, null), L = !0, U || (z = R(
        window,
        "keydown",
        /*handleKeydown*/
        l[12]
      ), U = !0);
    },
    p(V, [J]) {
      (!L || J & /*wallpaperURL*/
      256) && ae(y, "background-image", "url('" + /*wallpaperURL*/
      V[8] + "')");
      let j = D;
      D = H(V), D === j ? W[D].p(V, J) : ($e(), Ae(W[j], 1, 1, () => {
        W[j] = null;
      }), et(), M = W[D], M ? M.p(V, J) : (M = W[D] = F[D](V), M.c()), ne(M, 1), M.m(A, null)), (!L || J & /*currentThemeData*/
      4 && G !== (G = "cyber-frame root-terminal " + /*currentThemeData*/
      V[2].class + " svelte-n489he")) && s(e, "class", G), (!L || J & /*cssString*/
      1024) && s(
        e,
        "style",
        /*cssString*/
        V[10]
      );
    },
    i(V) {
      L || (ne(M), L = !0);
    },
    o(V) {
      Ae(M), L = !1;
    },
    d(V) {
      V && P(e), W[D].d(), U = !1, z();
    }
  };
}
const Ci = "multiversus-rpg";
function Gh(l, e, t) {
  let i, n, o, c, f, u, d, p, { actor: m } = e;
  const b = game.user.isGM;
  qt(() => {
    const T = Hooks.on("updateActor", (N, I) => {
      N.id === m.id && N.flags[Ci] && t(1, i = { ...N.flags[Ci] });
    });
    return () => Hooks.off("updateActor", T);
  });
  let v = b || m.getFlag(Ci, "sheetConfig.fastBoot") === !0 ? "logged_in" : "idle", h = "", _ = null, w = "";
  function k() {
    m.sheet.close();
  }
  function A() {
    t(3, v = "verifying"), t(4, h = "VERIFICANDO CREDENCIAIS..."), setTimeout(
      () => {
        t(3, v = "welcome"), t(4, h = `BEM-VINDO, ${m.name.toUpperCase()}.`), setTimeout(
          () => {
            t(3, v = "logged_in");
          },
          1500
        );
      },
      2e3
    );
  }
  function y(T) {
    v === "idle" && (T.key === "Enter" ? o ? w === o ? A() : (t(6, w = ""), ui.notifications.warn(">> ACESSO NEGADO: C√ìDIGO INV√ÅLIDO")) : w.length >= 4 ? A() : ui.notifications.warn(
      "DIGITE UM C√ìDIGO DE ACESSO INICIAL (M√çN 4)"
    ) : T.key === "Backspace" ? t(6, w = w.slice(0, -1)) : T.key.length === 1 && w.length < 6 && t(6, w += T.key));
  }
  const E = [
    {
      id: "combat",
      icon: "fa-crosshairs",
      label: "COMBATE"
    },
    {
      id: "profile",
      icon: "fa-id-card",
      label: "PERFIL"
    },
    {
      id: "stats",
      icon: "fa-dna",
      label: "ATRIBUTOS"
    },
    {
      id: "inv",
      icon: "fa-box-open",
      label: "INVENT√ÅRIO"
    },
    {
      id: "powers",
      icon: "fa-bolt",
      label: "PODERES"
    },
    {
      id: "survival",
      icon: "fa-heartbeat",
      label: "SOBREVIVENTE"
    },
    {
      id: "oracle",
      icon: "fa-terminal",
      label: "ORACLE LINK"
    },
    {
      id: "archives",
      icon: "fa-book-dead",
      label: "THE ARCHIVES"
    },
    {
      id: "testamento",
      icon: "fa-file-signature",
      label: "MEMORIAL"
    },
    {
      id: "comms",
      icon: "fa-comments",
      label: "ZAP_NET"
    },
    {
      id: "base",
      icon: "fa-warehouse",
      label: "BASE / GRUPO"
    },
    {
      id: "battlepass",
      icon: "fa-trophy",
      label: "BATTLE PASS"
    },
    {
      id: "settings",
      icon: "fa-cogs",
      label: "SISTEMA"
    },
    {
      id: "shutdown",
      icon: "fa-power-off",
      label: "DESLIGAR",
      action: k
    }
  ], S = (T) => T.action ? T.action() : t(5, _ = T.id), O = () => t(5, _ = null), C = () => t(5, _ = null);
  return l.$$set = (T) => {
    "actor" in T && t(0, m = T.actor);
  }, l.$$.update = () => {
    var T, N, I, D, M;
    l.$$.dirty & /*actor*/
    1 && t(1, i = ((T = m == null ? void 0 : m.flags) == null ? void 0 : T[Ci]) || {}), l.$$.dirty & /*actor*/
    1 && t(11, n = (m == null ? void 0 : m.system) || {}), l.$$.dirty & /*flags*/
    2 && (b || (N = i.sheetConfig) != null && N.fastBoot), l.$$.dirty & /*flags*/
    2 && t(7, o = ((I = i.sheetConfig) == null ? void 0 : I.password) || ""), l.$$.dirty & /*flags*/
    2 && t(14, c = ((D = i.sheetConfig) == null ? void 0 : D.theme) || "terminal"), l.$$.dirty & /*activeThemeKey*/
    16384 && t(2, f = sa[c] || sa.terminal), l.$$.dirty & /*currentThemeData*/
    4 && t(10, u = Object.entries(f.vars).map(([G, L]) => `${G}: ${L};`).join(" ")), l.$$.dirty & /*currentThemeData*/
    4 && t(9, d = f.vars["--c-primary"]), l.$$.dirty & /*flags*/
    2 && t(8, p = ((M = i.sheetConfig) == null ? void 0 : M.wallpaper) || "https://mir-s3-cdn-cf.behance.net/project_modules/hd/e4316a93890387.5e70ade47b737.gif"), l.$$.dirty & /*activeThemeKey*/
    16384 && typeof qc < "u" && sa[c] && setTimeout(() => qc.apply(c, sa[c]), 10);
  }, [
    m,
    i,
    f,
    v,
    h,
    _,
    w,
    o,
    p,
    d,
    u,
    n,
    y,
    E,
    c,
    S,
    O,
    C
  ];
}
class Hh extends mt {
  constructor(e) {
    super(), pt(this, e, Gh, Uh, dt, { actor: 0 });
  }
}
function jc(l, e, t) {
  const i = l.slice();
  return i[24] = e[t], i;
}
function Vc(l, e, t) {
  const i = l.slice();
  return i[27] = e[t], i;
}
function Wc(l) {
  let e, t = (
    /*g*/
    l[27] + ""
  ), i, n;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = n = /*g*/
      l[27], x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, i);
    },
    p(o, c) {
      c & /*allGroups*/
      16 && t !== (t = /*g*/
      o[27] + "") && te(i, t), c & /*allGroups*/
      16 && n !== (n = /*g*/
      o[27]) && (e.__value = n, x(e, e.__value));
    },
    d(o) {
      o && P(e);
    }
  };
}
function Xc(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*u*/
    l[24].name + ""
  ), h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G = (
    /*u*/
    l[24].data.earnedXP + ""
  ), L, U, z, F, W = (
    /*u*/
    l[24].levelInfo.nextXP + ""
  ), H, V, J, j, X, K, Z = (
    /*u*/
    l[24].levelInfo.level + ""
  ), le, $, se, Y, Q, ie, ee = (
    /*u*/
    l[24].levelInfo.limits + ""
  ), pe, Ee, De, we, ke, me = (
    /*u*/
    l[24].levelInfo.buffs + ""
  ), re, ye, oe, be, de;
  function Oe() {
    return (
      /*click_handler*/
      l[17](
        /*u*/
        l[24]
      )
    );
  }
  const _e = [Bh, zh], ue = [];
  function Re(Ce, He) {
    return (
      /*editingGroupUser*/
      Ce[5] === /*u*/
      Ce[24].id ? 0 : 1
    );
  }
  return w = Re(l), k = ue[w] = _e[w](l), {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("div"), c = g(), f = r("div"), u = r("i"), d = g(), p = r("div"), m = r("div"), b = r("span"), h = B(v), _ = g(), k.c(), A = g(), y = r("div"), E = r("div"), S = r("div"), O = r("div"), C = g(), T = r("div"), N = g(), I = r("div"), D = r("span"), M = B("XP_TOTAL: "), L = B(G), U = g(), z = r("span"), F = B("PR√ìXIMO_N√çVEL: "), H = B(W), V = g(), J = r("div"), j = r("div"), j.textContent = "N√çVEL", X = g(), K = r("div"), le = B(Z), $ = g(), se = r("div"), Y = r("div"), Y.textContent = "LIMITES_OPERACIONAIS", Q = g(), ie = r("p"), pe = B(ee), Ee = g(), De = r("div"), De.textContent = "BUFFS_ATIVOS", we = g(), ke = r("p"), re = B(me), ye = g(), s(n, "class", o = "chk-indicator " + /*selectedUserIds*/
      (l[1].includes(
        /*u*/
        l[24].id
      ) ? "active" : "") + " svelte-1jlwsyo"), s(i, "class", "selector"), s(u, "class", "fas fa-user-secret"), s(f, "class", "portrait-sim svelte-1jlwsyo"), ae(
        f,
        "--agent-color",
        /*u*/
        l[24].color
      ), s(t, "class", "dossier-id svelte-1jlwsyo"), s(b, "class", "agent-name svelte-1jlwsyo"), s(m, "class", "name-row svelte-1jlwsyo"), s(O, "class", "progress-fill svelte-1jlwsyo"), ae(
        O,
        "width",
        /*u*/
        l[24].levelInfo.progress + "%"
      ), s(T, "class", "glitch-line svelte-1jlwsyo"), ae(
        T,
        "left",
        /*u*/
        l[24].levelInfo.progress + "%"
      ), s(S, "class", "progress-bar svelte-1jlwsyo"), s(I, "class", "xp-labels svelte-1jlwsyo"), s(E, "class", "progress-container svelte-1jlwsyo"), s(y, "class", "xp-logic-area"), s(p, "class", "dossier-main svelte-1jlwsyo"), s(j, "class", "rank-label svelte-1jlwsyo"), s(K, "class", "rank-num svelte-1jlwsyo"), s(Y, "class", "tt-header svelte-1jlwsyo"), s(ie, "class", "svelte-1jlwsyo"), s(De, "class", "tt-header svelte-1jlwsyo"), s(ke, "class", "svelte-1jlwsyo"), s(se, "class", "tech-tooltip svelte-1jlwsyo"), s(J, "class", "dossier-rank svelte-1jlwsyo"), s(e, "class", "dossier-card svelte-1jlwsyo"), he(
        e,
        "selected",
        /*selectedUserIds*/
        l[1].includes(
          /*u*/
          l[24].id
        )
      );
    },
    m(Ce, He) {
      q(Ce, e, He), a(e, t), a(t, i), a(i, n), a(t, c), a(t, f), a(f, u), a(e, d), a(e, p), a(p, m), a(m, b), a(b, h), a(m, _), ue[w].m(m, null), a(p, A), a(p, y), a(y, E), a(E, S), a(S, O), a(S, C), a(S, T), a(E, N), a(E, I), a(I, D), a(D, M), a(D, L), a(I, U), a(I, z), a(z, F), a(z, H), a(e, V), a(e, J), a(J, j), a(J, X), a(J, K), a(K, le), a(J, $), a(J, se), a(se, Y), a(se, Q), a(se, ie), a(ie, pe), a(se, Ee), a(se, De), a(se, we), a(se, ke), a(ke, re), a(e, ye), be || (de = R(t, "click", Oe), be = !0);
    },
    p(Ce, He) {
      l = Ce, He & /*selectedUserIds, users*/
      3 && o !== (o = "chk-indicator " + /*selectedUserIds*/
      (l[1].includes(
        /*u*/
        l[24].id
      ) ? "active" : "") + " svelte-1jlwsyo") && s(n, "class", o), He & /*users*/
      1 && ae(
        f,
        "--agent-color",
        /*u*/
        l[24].color
      ), He & /*users*/
      1 && v !== (v = /*u*/
      l[24].name + "") && te(h, v);
      let Ge = w;
      w = Re(l), w === Ge ? ue[w].p(l, He) : ($e(), Ae(ue[Ge], 1, 1, () => {
        ue[Ge] = null;
      }), et(), k = ue[w], k ? k.p(l, He) : (k = ue[w] = _e[w](l), k.c()), ne(k, 1), k.m(m, null)), He & /*users*/
      1 && ae(
        O,
        "width",
        /*u*/
        l[24].levelInfo.progress + "%"
      ), He & /*users*/
      1 && ae(
        T,
        "left",
        /*u*/
        l[24].levelInfo.progress + "%"
      ), He & /*users*/
      1 && G !== (G = /*u*/
      l[24].data.earnedXP + "") && te(L, G), He & /*users*/
      1 && W !== (W = /*u*/
      l[24].levelInfo.nextXP + "") && te(H, W), He & /*users*/
      1 && Z !== (Z = /*u*/
      l[24].levelInfo.level + "") && te(le, Z), He & /*users*/
      1 && ee !== (ee = /*u*/
      l[24].levelInfo.limits + "") && te(pe, ee), He & /*users*/
      1 && me !== (me = /*u*/
      l[24].levelInfo.buffs + "") && te(re, me), He & /*selectedUserIds, users*/
      3 && he(
        e,
        "selected",
        /*selectedUserIds*/
        l[1].includes(
          /*u*/
          l[24].id
        )
      );
    },
    i(Ce) {
      ne(k), Ce && (oe || Ne(() => {
        oe = st(e, Qe, { duration: 200 }), oe.start();
      }));
    },
    o(Ce) {
      Ae(k);
    },
    d(Ce) {
      Ce && P(e), ue[w].d(), be = !1, de();
    }
  };
}
function zh(l) {
  let e, t = (
    /*u*/
    l[24].data.group + ""
  ), i, n, o;
  function c() {
    return (
      /*click_handler_2*/
      l[21](
        /*u*/
        l[24]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "unit-tag svelte-1jlwsyo");
    },
    m(f, u) {
      q(f, e, u), a(e, i), n || (o = R(e, "click", c), n = !0);
    },
    p(f, u) {
      l = f, u & /*users*/
      1 && t !== (t = /*u*/
      l[24].data.group + "") && te(i, t);
    },
    i: ge,
    o: ge,
    d(f) {
      f && P(e), n = !1, o();
    }
  };
}
function Bh(l) {
  let e, t, i, n, o, c, f, u;
  function d(...m) {
    return (
      /*keypress_handler*/
      l[19](
        /*u*/
        l[24],
        ...m
      )
    );
  }
  function p() {
    return (
      /*click_handler_1*/
      l[20](
        /*u*/
        l[24]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("button"), n.textContent = "SET", s(t, "type", "text"), s(t, "class", "svelte-1jlwsyo"), s(n, "class", "svelte-1jlwsyo"), s(e, "class", "edit-group-input svelte-1jlwsyo");
    },
    m(m, b) {
      q(m, e, b), a(e, t), x(
        t,
        /*newGroupName*/
        l[6]
      ), a(e, i), a(e, n), c = !0, f || (u = [
        R(
          t,
          "input",
          /*input_input_handler_1*/
          l[18]
        ),
        R(t, "keypress", d),
        R(n, "click", p)
      ], f = !0);
    },
    p(m, b) {
      l = m, b & /*newGroupName*/
      64 && t.value !== /*newGroupName*/
      l[6] && x(
        t,
        /*newGroupName*/
        l[6]
      );
    },
    i(m) {
      c || (m && Ne(() => {
        c && (o || (o = We(e, yt, { axis: "x" }, !0)), o.run(1));
      }), c = !0);
    },
    o(m) {
      m && (o || (o = We(e, yt, { axis: "x" }, !1)), o.run(0)), c = !1;
    },
    d(m) {
      m && P(e), m && o && o.end(), f = !1, Te(u);
    }
  };
}
function Jc(l) {
  let e, t = (
    /*groupFilter*/
    (l[3] === "Todos" || /*u*/
    l[24].data.group === /*groupFilter*/
    l[3]) && Xc(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*groupFilter*/
      i[3] === "Todos" || /*u*/
      i[24].data.group === /*groupFilter*/
      i[3] ? t ? (t.p(i, n), n & /*groupFilter, users*/
      9 && ne(t, 1)) : (t = Xc(i), t.c(), ne(t, 1), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function Fh(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y = (
    /*selectedUserIds*/
    l[1].length + ""
  ), E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $ = (
    /*users*/
    l[0].length + ""
  ), se, Y, Q, ie, ee, pe = ce(
    /*allGroups*/
    l[4]
  ), Ee = [];
  for (let ke = 0; ke < pe.length; ke += 1)
    Ee[ke] = Wc(Vc(l, pe, ke));
  let De = ce(
    /*users*/
    l[0]
  ), we = [];
  for (let ke = 0; ke < De.length; ke += 1)
    we[ke] = Jc(jc(l, De, ke));
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), i.innerHTML = '<i class="fas fa-satellite-dish"></i> <h3 class="svelte-1jlwsyo">COMMAND_CENTER</h3>', n = g(), o = r("div"), c = r("label"), c.textContent = "FILTRAGEM_DE_SQUAD", f = g(), u = r("div"), d = r("select");
      for (let ke = 0; ke < Ee.length; ke += 1)
        Ee[ke].c();
      p = g(), m = r("div"), b = r("label"), b.textContent = "DISTRIBUI√á√ÉO_DE_CARGA", v = g(), h = r("div"), _ = r("input"), w = g(), k = r("div"), A = B("ALVOS: "), E = B(y), S = g(), O = r("button"), C = B("EXECUTAR_ENVIO_NEURAL"), N = g(), I = r("div"), D = r("div"), D.textContent = "LOG_DE_SISTEMA:", M = g(), G = r("div"), L = B("> "), U = B(
        /*lastLog*/
        l[7]
      ), z = g(), F = r("section"), W = r("header"), H = r("div"), V = r("div"), j = g(), X = r("span"), X.textContent = "SELECIONAR_TODOS_VIS√çVEIS", K = g(), Z = r("div"), le = B("AGENTES_IDENTIFICADOS: "), se = B($), Y = g(), Q = r("div");
      for (let ke = 0; ke < we.length; ke += 1)
        we[ke].c();
      s(i, "class", "panel-header svelte-1jlwsyo"), s(c, "class", "svelte-1jlwsyo"), s(d, "class", "svelte-1jlwsyo"), /*groupFilter*/
      l[3] === void 0 && Ne(() => (
        /*select_change_handler*/
        l[13].call(d)
      )), s(u, "class", "select-wrapper svelte-1jlwsyo"), s(o, "class", "control-group svelte-1jlwsyo"), s(b, "class", "svelte-1jlwsyo"), s(_, "type", "number"), s(_, "placeholder", "QUANTIA_XP"), s(_, "class", "svelte-1jlwsyo"), s(k, "class", "target-count svelte-1jlwsyo"), s(h, "class", "xp-input-wrapper svelte-1jlwsyo"), s(O, "class", "execute-btn svelte-1jlwsyo"), O.disabled = T = /*selectedUserIds*/
      l[1].length === 0, s(m, "class", "control-group highlight svelte-1jlwsyo"), s(D, "class", "log-title"), s(G, "class", "log-entry svelte-1jlwsyo"), s(I, "class", "system-logs svelte-1jlwsyo"), s(t, "class", "command-panel svelte-1jlwsyo"), s(V, "class", J = "chk-box " + /*selectedUserIds*/
      (l[1].length > 0 ? "partial" : "") + " " + /*selectedUserIds*/
      (l[1].length === /*users*/
      l[0].filter(
        /*func*/
        l[16]
      ).length && /*selectedUserIds*/
      l[1].length > 0 ? "all" : "") + " svelte-1jlwsyo"), s(H, "class", "bulk-select svelte-1jlwsyo"), s(Z, "class", "archive-stats"), s(W, "class", "archive-header svelte-1jlwsyo"), s(Q, "class", "dossier-grid svelte-1jlwsyo"), s(F, "class", "archive-section svelte-1jlwsyo"), s(e, "class", "tactical-xp-interface svelte-1jlwsyo");
    },
    m(ke, me) {
      q(ke, e, me), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), a(u, d);
      for (let re = 0; re < Ee.length; re += 1)
        Ee[re] && Ee[re].m(d, null);
      ot(
        d,
        /*groupFilter*/
        l[3],
        !0
      ), a(t, p), a(t, m), a(m, b), a(m, v), a(m, h), a(h, _), x(
        _,
        /*xpAmount*/
        l[2]
      ), a(h, w), a(h, k), a(k, A), a(k, E), a(m, S), a(m, O), a(O, C), a(t, N), a(t, I), a(I, D), a(I, M), a(I, G), a(G, L), a(G, U), a(e, z), a(e, F), a(F, W), a(W, H), a(H, V), a(H, j), a(H, X), a(W, K), a(W, Z), a(Z, le), a(Z, se), a(F, Y), a(F, Q);
      for (let re = 0; re < we.length; re += 1)
        we[re] && we[re].m(Q, null);
      ie || (ee = [
        R(
          d,
          "change",
          /*select_change_handler*/
          l[13]
        ),
        R(
          d,
          "change",
          /*change_handler*/
          l[14]
        ),
        R(
          _,
          "input",
          /*input_input_handler*/
          l[15]
        ),
        R(
          O,
          "click",
          /*giveXP*/
          l[10]
        ),
        R(
          H,
          "click",
          /*selectAll*/
          l[9]
        )
      ], ie = !0);
    },
    p(ke, [me]) {
      if (me & /*allGroups*/
      16) {
        pe = ce(
          /*allGroups*/
          ke[4]
        );
        let re;
        for (re = 0; re < pe.length; re += 1) {
          const ye = Vc(ke, pe, re);
          Ee[re] ? Ee[re].p(ye, me) : (Ee[re] = Wc(ye), Ee[re].c(), Ee[re].m(d, null));
        }
        for (; re < Ee.length; re += 1)
          Ee[re].d(1);
        Ee.length = pe.length;
      }
      if (me & /*groupFilter, allGroups*/
      24 && ot(
        d,
        /*groupFilter*/
        ke[3]
      ), me & /*xpAmount*/
      4 && Je(_.value) !== /*xpAmount*/
      ke[2] && x(
        _,
        /*xpAmount*/
        ke[2]
      ), me & /*selectedUserIds*/
      2 && y !== (y = /*selectedUserIds*/
      ke[1].length + "") && te(E, y), me & /*selectedUserIds*/
      2 && T !== (T = /*selectedUserIds*/
      ke[1].length === 0) && (O.disabled = T), me & /*lastLog*/
      128 && te(
        U,
        /*lastLog*/
        ke[7]
      ), me & /*selectedUserIds, users, groupFilter, allGroups*/
      27 && J !== (J = "chk-box " + /*selectedUserIds*/
      (ke[1].length > 0 ? "partial" : "") + " " + /*selectedUserIds*/
      (ke[1].length === /*users*/
      ke[0].filter(
        /*func*/
        ke[16]
      ).length && /*selectedUserIds*/
      ke[1].length > 0 ? "all" : "") + " svelte-1jlwsyo") && s(V, "class", J), me & /*users*/
      1 && $ !== ($ = /*users*/
      ke[0].length + "") && te(se, $), me & /*selectedUserIds, users, saveGroup, newGroupName, editingGroupUser, changeGroup, toggleSelect, groupFilter*/
      6507) {
        De = ce(
          /*users*/
          ke[0]
        );
        let re;
        for (re = 0; re < De.length; re += 1) {
          const ye = jc(ke, De, re);
          we[re] ? we[re].p(ye, me) : (we[re] = Jc(ye), we[re].c(), we[re].m(Q, null));
        }
        for (; re < we.length; re += 1)
          we[re].d(1);
        we.length = De.length;
      }
    },
    i: ge,
    o: ge,
    d(ke) {
      ke && P(e), Fe(Ee, ke), Fe(we, ke), ie = !1, Te(ee);
    }
  };
}
function jh(l, e, t) {
  ml();
  let i = [], n = [], o = 0, c = "Todos", f = ["Todos", "Sem Grupo"], u = null, d = "", p = "SISTEMA INICIALIZADO...";
  qt(() => {
    m(), Hooks.on("updateUser", m);
  });
  function m() {
    const I = game.users.filter((M) => !M.isGM);
    t(0, i = I.map((M) => {
      const G = $l.getPlayerData(M.id), L = C0.getLevelInfo(G.earnedXP);
      return {
        id: M.id,
        name: M.name,
        color: M.color,
        data: G,
        levelInfo: L
      };
    }));
    const D = /* @__PURE__ */ new Set(["Todos", "Sem Grupo"]);
    i.forEach((M) => D.add(M.data.group)), t(4, f = Array.from(D));
  }
  function b(I) {
    n.includes(I) ? t(1, n = n.filter((D) => D !== I)) : t(1, n = [...n, I]);
  }
  function v() {
    const I = i.filter((D) => c === "Todos" || D.data.group === c);
    t(1, n = n.length === I.length ? [] : I.map((D) => D.id));
  }
  async function h() {
    if (!(o === 0 || n.length === 0)) {
      for (const I of n)
        await $l.addXP(I, o, "Admin Grant");
      t(7, p = `TRANSFER√äNCIA DE ${o} XP CONCLU√çDA PARA ${n.length} AGENTES.`), ui.notifications.info(p), t(2, o = 0), m();
    }
  }
  async function _(I) {
    t(5, u = I.id), t(6, d = I.data.group);
  }
  async function w(I) {
    await $l.setGroup(I, d), t(5, u = null), t(7, p = `UNIDADE DO AGENTE ATUALIZADA PARA: ${d}`), m();
  }
  function k() {
    c = Gt(this), t(3, c), t(4, f);
  }
  const A = () => t(1, n = []);
  function y() {
    o = Je(this.value), t(2, o);
  }
  const E = (I) => c === "Todos" || I.data.group === c, S = (I) => b(I.id);
  function O() {
    d = this.value, t(6, d);
  }
  return [
    i,
    n,
    o,
    c,
    f,
    u,
    d,
    p,
    b,
    v,
    h,
    _,
    w,
    k,
    A,
    y,
    E,
    S,
    O,
    (I, D) => D.key === "Enter" && w(I.id),
    (I) => w(I.id),
    (I) => _(I)
  ];
}
class Vh extends mt {
  constructor(e) {
    super(), pt(this, e, jh, Fh, dt, {});
  }
}
function Yc(l, e, t) {
  const i = l.slice();
  return i[13] = e[t], i;
}
function Qc(l, e, t) {
  const i = l.slice();
  return i[16] = e[t], i;
}
function Kc(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "ABRIR PR√â-VENDA", s(e, "class", "mode-btn pre svelte-2e3lxu");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler*/
        l[8]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Zc(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "INICIAR TEMPORADA (3 MESES)", s(e, "class", "mode-btn start svelte-2e3lxu");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_1*/
        l[9]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function xc(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "ENCERRAR TEMPORADA", s(e, "class", "mode-btn close svelte-2e3lxu");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_2*/
        l[10]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function $c(l) {
  let e, t = (
    /*t*/
    l[16].label + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[16].id, x(e, e.__value), s(e, "class", "svelte-2e3lxu");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Wh(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "PREMIUM ATIVO", s(e, "class", "badge premium svelte-2e3lxu");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Xh(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "PADR√ÉO", s(e, "class", "badge cobre svelte-2e3lxu");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Jh(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "AGUARDANDO", s(e, "class", "badge closed svelte-2e3lxu");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ef(l) {
  let e, t, i, n = (
    /*u*/
    l[13].name + ""
  ), o, c, f, u, d = (
    /*u*/
    l[13].id + ""
  ), p, m, b, v, h, _, w, k, A, y, E = ce(
    /*TIERS*/
    l[4]
  ), S = [];
  for (let I = 0; I < E.length; I += 1)
    S[I] = $c(Qc(l, E, I));
  function O(...I) {
    return (
      /*change_handler*/
      l[11](
        /*u*/
        l[13],
        ...I
      )
    );
  }
  function C(I, D) {
    return (
      /*season*/
      I[0].status === "closed" ? Jh : (
        /*u*/
        I[13].tierInfo.id === "cobre" ? Xh : Wh
      )
    );
  }
  let T = C(l), N = T(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), c = g(), f = r("span"), u = B("ID: "), p = B(d), m = g(), b = r("div"), v = r("select");
      for (let I = 0; I < S.length; I += 1)
        S[I].c();
      _ = g(), w = r("div"), N.c(), k = g(), s(i, "class", "name svelte-2e3lxu"), ae(
        i,
        "color",
        /*u*/
        l[13].color
      ), s(f, "class", "id-tag svelte-2e3lxu"), s(t, "class", "col user svelte-2e3lxu"), ae(
        v,
        "color",
        /*u*/
        l[13].tierInfo.color
      ), ae(
        v,
        "border-color",
        /*u*/
        l[13].tierInfo.color
      ), s(v, "class", "svelte-2e3lxu"), s(b, "class", "col tier svelte-2e3lxu"), s(w, "class", "col status svelte-2e3lxu"), s(e, "class", "row svelte-2e3lxu"), ae(e, "border-left", "4px solid " + /*u*/
      l[13].tierInfo.color);
    },
    m(I, D) {
      q(I, e, D), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, u), a(f, p), a(e, m), a(e, b), a(b, v);
      for (let M = 0; M < S.length; M += 1)
        S[M] && S[M].m(v, null);
      ot(
        v,
        /*u*/
        l[13].currentTierId
      ), a(e, _), a(e, w), N.m(w, null), a(e, k), A || (y = R(v, "change", O), A = !0);
    },
    p(I, D) {
      if (l = I, D & /*users*/
      2 && n !== (n = /*u*/
      l[13].name + "") && te(o, n), D & /*users*/
      2 && ae(
        i,
        "color",
        /*u*/
        l[13].color
      ), D & /*users*/
      2 && d !== (d = /*u*/
      l[13].id + "") && te(p, d), D & /*TIERS*/
      16) {
        E = ce(
          /*TIERS*/
          l[4]
        );
        let M;
        for (M = 0; M < E.length; M += 1) {
          const G = Qc(l, E, M);
          S[M] ? S[M].p(G, D) : (S[M] = $c(G), S[M].c(), S[M].m(v, null));
        }
        for (; M < S.length; M += 1)
          S[M].d(1);
        S.length = E.length;
      }
      D & /*users, TIERS*/
      18 && h !== (h = /*u*/
      l[13].currentTierId) && ot(
        v,
        /*u*/
        l[13].currentTierId
      ), D & /*users*/
      2 && ae(
        v,
        "color",
        /*u*/
        l[13].tierInfo.color
      ), D & /*users*/
      2 && ae(
        v,
        "border-color",
        /*u*/
        l[13].tierInfo.color
      ), T !== (T = C(l)) && (N.d(1), N = T(l), N && (N.c(), N.m(w, null))), D & /*users*/
      2 && ae(e, "border-left", "4px solid " + /*u*/
      l[13].tierInfo.color);
    },
    d(I) {
      I && P(e), Fe(S, I), N.d(), A = !1, y();
    }
  };
}
function Yh(l) {
  let e, t, i, n, o, c, f, u, d, p, m = (
    /*season*/
    (l[0].endDate ? Xt.utils.formatDate(
      /*season*/
      l[0].endDate
    ) : "--") + ""
  ), b, v, h, _, w, k, A, y, E, S, O = (
    /*season*/
    l[0].status === "closed" && Kc(l)
  ), C = (
    /*season*/
    (l[0].status === "presale" || /*season*/
    l[0].status === "closed") && Zc(l)
  ), T = (
    /*season*/
    l[0].status !== "closed" && xc(l)
  ), N = ce(
    /*users*/
    l[1]
  ), I = [];
  for (let D = 0; D < N.length; D += 1)
    I[D] = ef(Yc(l, N, D));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), n.textContent = "STATUS DO SISTEMA:", o = g(), c = r("span"), f = B(
        /*statusLabel*/
        l[3]
      ), u = g(), d = r("small"), p = B("Data Fim: "), b = B(m), v = g(), h = r("div"), O && O.c(), _ = g(), C && C.c(), w = g(), T && T.c(), k = g(), A = r("div"), y = r("div"), y.innerHTML = "<span>AGENTE</span> <span>TIER ATUAL</span> <span>STATUS INDIVIDUAL</span>", E = g(), S = r("div");
      for (let D = 0; D < I.length; D += 1)
        I[D].c();
      s(n, "class", "label svelte-2e3lxu"), s(c, "class", "status-display svelte-2e3lxu"), ae(
        c,
        "color",
        /*statusColor*/
        l[2]
      ), ae(
        c,
        "border-color",
        /*statusColor*/
        l[2]
      ), s(i, "class", "season-info svelte-2e3lxu"), s(h, "class", "season-actions svelte-2e3lxu"), s(t, "class", "season-control svelte-2e3lxu"), s(y, "class", "grid-header svelte-2e3lxu"), s(S, "class", "scroll-rows svelte-2e3lxu"), s(A, "class", "list-container svelte-2e3lxu"), s(e, "class", "pass-layout svelte-2e3lxu");
    },
    m(D, M) {
      q(D, e, M), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(i, u), a(i, d), a(d, p), a(d, b), a(t, v), a(t, h), O && O.m(h, null), a(h, _), C && C.m(h, null), a(h, w), T && T.m(h, null), a(e, k), a(e, A), a(A, y), a(A, E), a(A, S);
      for (let G = 0; G < I.length; G += 1)
        I[G] && I[G].m(S, null);
    },
    p(D, [M]) {
      if (M & /*statusLabel*/
      8 && te(
        f,
        /*statusLabel*/
        D[3]
      ), M & /*statusColor*/
      4 && ae(
        c,
        "color",
        /*statusColor*/
        D[2]
      ), M & /*statusColor*/
      4 && ae(
        c,
        "border-color",
        /*statusColor*/
        D[2]
      ), M & /*season*/
      1 && m !== (m = /*season*/
      (D[0].endDate ? Xt.utils.formatDate(
        /*season*/
        D[0].endDate
      ) : "--") + "") && te(b, m), /*season*/
      D[0].status === "closed" ? O ? O.p(D, M) : (O = Kc(D), O.c(), O.m(h, _)) : O && (O.d(1), O = null), /*season*/
      D[0].status === "presale" || /*season*/
      D[0].status === "closed" ? C ? C.p(D, M) : (C = Zc(D), C.c(), C.m(h, w)) : C && (C.d(1), C = null), /*season*/
      D[0].status !== "closed" ? T ? T.p(D, M) : (T = xc(D), T.c(), T.m(h, null)) : T && (T.d(1), T = null), M & /*users, season, setTier, TIERS*/
      83) {
        N = ce(
          /*users*/
          D[1]
        );
        let G;
        for (G = 0; G < N.length; G += 1) {
          const L = Yc(D, N, G);
          I[G] ? I[G].p(L, M) : (I[G] = ef(L), I[G].c(), I[G].m(S, null));
        }
        for (; G < I.length; G += 1)
          I[G].d(1);
        I.length = N.length;
      }
    },
    i: ge,
    o: ge,
    d(D) {
      D && P(e), O && O.d(), C && C.d(), T && T.d(), Fe(I, D);
    }
  };
}
function Qh(l, e, t) {
  let i, n, o, c = [], f = { status: "closed" };
  const u = Object.values(ni);
  qt(() => {
    d(), Hooks.on("passSystemUpdate", d);
  });
  function d() {
    t(0, f = Xt.getSeasonData());
    const w = game.users.filter((k) => !k.isGM);
    t(1, c = w.map((k) => {
      const A = Xt.getPlayerTier(k.id);
      return {
        id: k.id,
        name: k.name,
        color: k.color,
        tierInfo: A,
        // Mapeamos o tier ID para o select funcionar corretamente
        currentTierId: A.id
      };
    }));
  }
  async function p(w) {
    let k = { status: w };
    if (w === "active") {
      const A = Date.now();
      k.startDate = A, k.endDate = Xt.utils.calculateEndDate(A);
    } else
      w === "closed" && (k.startDate = null, k.endDate = null);
    await Xt.updateSeason(k), d();
  }
  async function m(w, k) {
    await Xt.setPlayerTier(w, k), d();
  }
  const b = () => p("presale"), v = () => p("active"), h = () => p("closed"), _ = (w, k) => m(w.id, k.target.value);
  return l.$$.update = () => {
    l.$$.dirty & /*season*/
    1 && t(7, i = f.endDate ? Xt.utils.getDaysRemaining(f.endDate) : 0), l.$$.dirty & /*season, daysLeft*/
    129 && t(3, n = f.status === "closed" ? "FECHADO / OFF-SEASON" : f.status === "presale" ? "PR√â-VENDA (AGUARDANDO IN√çCIO)" : f.status === "active" ? `ATIVO (RESTAM ${i} DIAS)` : "DESCONHECIDO"), l.$$.dirty & /*season*/
    1 && t(2, o = f.status === "closed" ? "#666" : f.status === "presale" ? "#0088ff" : f.status === "active" ? "#00ff41" : "#fff");
  }, [
    f,
    c,
    o,
    n,
    u,
    p,
    m,
    i,
    b,
    v,
    h,
    _
  ];
}
class Kh extends mt {
  constructor(e) {
    super(), pt(this, e, Qh, Yh, dt, {});
  }
}
function tf(l, e, t) {
  const i = l.slice();
  return i[65] = e[t], i;
}
function lf(l, e, t) {
  const i = l.slice();
  return i[73] = e[t], i;
}
function af(l, e, t) {
  const i = l.slice();
  i[65] = e[t];
  const n = (
    /*storeItems*/
    i[0].some(function(...c) {
      return (
        /*func*/
        l[48](
          /*item*/
          i[65],
          ...c
        )
      );
    })
  );
  return i[68] = n, i;
}
function sf(l, e, t) {
  const i = l.slice();
  return i[65] = e[t], i;
}
function nf(l, e, t) {
  const i = l.slice();
  return i[59] = e[t], i;
}
function of(l, e, t) {
  const i = l.slice();
  return i[62] = e[t], i;
}
function Zh(l) {
  let e, t, i, n, o = ce(
    /*playerList*/
    l[8]
  ), c = [];
  for (let p = 0; p < o.length; p += 1)
    c[p] = rf(lf(l, o, p));
  function f(p, m) {
    return (
      /*inspectedPlayer*/
      p[11] ? lg : tg
    );
  }
  let u = f(l), d = u(l);
  return {
    c() {
      e = r("div"), t = r("div");
      for (let p = 0; p < c.length; p += 1)
        c[p].c();
      i = g(), n = r("div"), d.c(), s(t, "class", "players-sidebar svelte-86f6qt"), s(n, "class", "inspection-panel svelte-86f6qt"), s(e, "class", "players-layout svelte-86f6qt");
    },
    m(p, m) {
      q(p, e, m), a(e, t);
      for (let b = 0; b < c.length; b += 1)
        c[b] && c[b].m(t, null);
      a(e, i), a(e, n), d.m(n, null);
    },
    p(p, m) {
      if (m[0] & /*inspectedPlayer, playerList, openInspector*/
      33556736) {
        o = ce(
          /*playerList*/
          p[8]
        );
        let b;
        for (b = 0; b < o.length; b += 1) {
          const v = lf(p, o, b);
          c[b] ? c[b].p(v, m) : (c[b] = rf(v), c[b].c(), c[b].m(t, null));
        }
        for (; b < c.length; b += 1)
          c[b].d(1);
        c.length = o.length;
      }
      u === (u = f(p)) && d ? d.p(p, m) : (d.d(1), d = u(p), d && (d.c(), d.m(n, null)));
    },
    i: ge,
    o: ge,
    d(p) {
      p && P(e), Fe(c, p), d.d();
    }
  };
}
function xh(l) {
  let e, t, i, n, o = (
    /*archiveItems*/
    l[10].length + ""
  ), c, f, u, d = ce(
    /*archiveItems*/
    l[10]
  ), p = [];
  for (let m = 0; m < d.length; m += 1)
    p[m] = pf(af(l, d, m));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), n = B("TOTAL DE ARQUIVOS: "), c = B(o), f = g(), u = r("div");
      for (let m = 0; m < p.length; m += 1)
        p[m].c();
      s(t, "class", "header-info"), s(u, "class", "items-list"), s(e, "class", "archive-view svelte-86f6qt");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(t, i), a(i, n), a(i, c), a(e, f), a(e, u);
      for (let v = 0; v < p.length; v += 1)
        p[v] && p[v].m(u, null);
    },
    p(m, b) {
      if (b[0] & /*archiveItems*/
      1024 && o !== (o = /*archiveItems*/
      m[10].length + "") && te(c, o), b[0] & /*storeItems, archiveItems, deletePermanent, editItem, toggleStore*/
      6816769) {
        d = ce(
          /*archiveItems*/
          m[10]
        );
        let v;
        for (v = 0; v < d.length; v += 1) {
          const h = af(m, d, v);
          p[v] ? p[v].p(h, b) : (p[v] = pf(h), p[v].c(), p[v].m(u, null));
        }
        for (; v < p.length; v += 1)
          p[v].d(1);
        p.length = d.length;
      }
    },
    i: ge,
    o: ge,
    d(m) {
      m && P(e), Fe(p, m);
    }
  };
}
function $h(l) {
  let e, t = ce(
    /*storeItems*/
    l[0]
  ), i = [];
  for (let n = 0; n < t.length; n += 1)
    i[n] = mf(sf(l, t, n));
  return {
    c() {
      e = r("div");
      for (let n = 0; n < i.length; n += 1)
        i[n].c();
      s(e, "class", "list svelte-86f6qt");
    },
    m(n, o) {
      q(n, e, o);
      for (let c = 0; c < i.length; c += 1)
        i[c] && i[c].m(e, null);
    },
    p(n, o) {
      if (o[0] & /*deleteItem, storeItems, editItem*/
      1572865) {
        t = ce(
          /*storeItems*/
          n[0]
        );
        let c;
        for (c = 0; c < t.length; c += 1) {
          const f = sf(n, t, c);
          i[c] ? i[c].p(f, o) : (i[c] = mf(f), i[c].c(), i[c].m(e, null));
        }
        for (; c < i.length; c += 1)
          i[c].d(1);
        i.length = t.length;
      }
    },
    i: ge,
    o: ge,
    d(n) {
      n && P(e), Fe(i, n);
    }
  };
}
function eg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be, de, Oe, _e, ue, Re, Ce, He, Ge, Xe, fe, Le, qe, Me, Se, ve = (
    /*isManualMode*/
    l[2] ? "MODO HTML PURO (ATIVADO)" : "MODO TEMPLATE GAMA"
  ), Ue, Ve, rt, Tt, ze, it, Ze, ut, Be, Pe, je, xe, St, It = ce(
    /*TAGS*/
    l[15]
  ), Dt = [];
  for (let Ie = 0; Ie < It.length; Ie += 1)
    Dt[Ie] = bf(of(l, It, Ie));
  let Ct = ce(
    /*RARITIES*/
    l[16]
  ), At = [];
  for (let Ie = 0; Ie < Ct.length; Ie += 1)
    At[Ie] = vf(nf(l, Ct, Ie));
  W = new hi({
    props: {
      item: {
        .../*draft*/
        l[1],
        price: (
          /*draft*/
          l[1].price || /*suggPrice*/
          l[12]
        )
      }
    }
  });
  function Et(Ie, tt) {
    return (
      /*isManualMode*/
      Ie[2] ? ag : ig
    );
  }
  let Nt = Et(l), ct = Nt(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "DADOS T√âCNICOS", n = g(), o = r("div"), c = r("label"), c.textContent = "NOME", f = g(), u = r("input"), d = g(), p = r("div"), m = r("div"), b = r("label"), b.textContent = "TIPO", v = g(), h = r("select");
      for (let Ie = 0; Ie < Dt.length; Ie += 1)
        Dt[Ie].c();
      _ = g(), w = r("div"), k = r("label"), k.textContent = "RARIDADE", A = g(), y = r("select");
      for (let Ie = 0; Ie < At.length; Ie += 1)
        At[Ie].c();
      E = g(), S = r("div"), O = r("label"), O.textContent = "TAG DE S√âRIE (BASE)", C = g(), T = r("input"), N = g(), I = r("div"), D = r("label"), D.textContent = "IMAGEM (URL)", M = g(), G = r("input"), L = g(), U = r("div"), z = r("span"), z.textContent = "CARD PREVIEW", F = g(), kt(W.$$.fragment), H = g(), V = r("div"), J = r("h3"), J.textContent = "ECONOMIA & MEC√ÇNICA", j = g(), X = r("div"), K = r("div"), Z = r("label"), le = B("CUSTO PB (Auto: "), $ = B(
        /*suggPB*/
        l[6]
      ), se = B(")"), Y = g(), Q = r("input"), ie = g(), ee = r("div"), pe = r("label"), Ee = B("CUSTO XP (Auto: "), De = B(
        /*suggXP*/
        l[13]
      ), we = B(")"), ke = g(), me = r("input"), re = g(), ye = r("div"), oe = r("label"), be = B("PRE√áO (Auto: "), de = B(
        /*suggPrice*/
        l[12]
      ), Oe = B(")"), _e = g(), ue = r("input"), Re = g(), Ce = r("div"), He = r("label"), He.textContent = "ESTOQUE (-1 = Infinito)", Ge = g(), Xe = r("input"), fe = g(), Le = r("div"), qe = r("h3"), qe.textContent = "EDITOR DE DOCUMENTO", Me = g(), Se = r("button"), Ue = B(ve), Ve = g(), rt = r("div"), ct.c(), Tt = g(), ze = r("div"), it = r("label"), it.textContent = "PREVIEW DO DOCUMENTO FINAL:", Ze = g(), ut = r("div"), Be = g(), Pe = r("button"), Pe.innerHTML = '<i class="fas fa-save"></i> COMPILAR &amp; SALVAR', s(i, "class", "svelte-86f6qt"), s(c, "class", "svelte-86f6qt"), s(u, "type", "text"), s(u, "placeholder", "Ex: Espada Laser"), s(u, "class", "svelte-86f6qt"), s(o, "class", "field svelte-86f6qt"), s(b, "class", "svelte-86f6qt"), s(h, "class", "svelte-86f6qt"), /*draft*/
      l[1].systemTag === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[31].call(h)
      )), s(m, "class", "field svelte-86f6qt"), s(k, "class", "svelte-86f6qt"), s(y, "class", "svelte-86f6qt"), /*draft*/
      l[1].rarity === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[32].call(y)
      )), s(w, "class", "field svelte-86f6qt"), s(p, "class", "row svelte-86f6qt"), s(O, "class", "svelte-86f6qt"), s(T, "type", "text"), s(T, "placeholder", "Ex: MVB-01"), ae(T, "color", "#00ff41"), T.disabled = /*isManualMode*/
      l[2], s(T, "class", "svelte-86f6qt"), s(S, "class", "field svelte-86f6qt"), s(D, "class", "svelte-86f6qt"), s(G, "type", "text"), s(G, "class", "svelte-86f6qt"), s(I, "class", "field svelte-86f6qt"), s(z, "class", "preview-label svelte-86f6qt"), s(U, "class", "preview-card-box svelte-86f6qt"), s(t, "class", "col svelte-86f6qt"), s(J, "class", "svelte-86f6qt"), s(Z, "class", "svelte-86f6qt"), s(Q, "type", "number"), s(Q, "class", "svelte-86f6qt"), s(K, "class", "field svelte-86f6qt"), s(pe, "class", "svelte-86f6qt"), s(me, "type", "number"), s(me, "class", "svelte-86f6qt"), s(ee, "class", "field svelte-86f6qt"), s(oe, "class", "svelte-86f6qt"), s(ue, "type", "number"), ae(ue, "color", "#ffcc00"), s(ue, "class", "svelte-86f6qt"), s(ye, "class", "field svelte-86f6qt"), s(He, "class", "svelte-86f6qt"), s(Xe, "type", "number"), s(Xe, "placeholder", "-1"), s(Xe, "class", "svelte-86f6qt"), s(Ce, "class", "field svelte-86f6qt"), s(X, "class", "row svelte-86f6qt"), s(qe, "class", "svelte-86f6qt"), s(Se, "class", "mode-btn svelte-86f6qt"), he(
        Se,
        "active",
        /*isManualMode*/
        l[2]
      ), s(Le, "class", "desc-header svelte-86f6qt"), s(rt, "class", "editor-area"), s(ut, "class", "render-window svelte-86f6qt"), s(ze, "class", "html-preview-box svelte-86f6qt"), s(Pe, "class", "save-btn svelte-86f6qt"), s(V, "class", "col grow svelte-86f6qt"), s(e, "class", "create-form svelte-86f6qt");
    },
    m(Ie, tt) {
      q(Ie, e, tt), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), x(
        u,
        /*draft*/
        l[1].name
      ), a(t, d), a(t, p), a(p, m), a(m, b), a(m, v), a(m, h);
      for (let Ye = 0; Ye < Dt.length; Ye += 1)
        Dt[Ye] && Dt[Ye].m(h, null);
      ot(
        h,
        /*draft*/
        l[1].systemTag,
        !0
      ), a(p, _), a(p, w), a(w, k), a(w, A), a(w, y);
      for (let Ye = 0; Ye < At.length; Ye += 1)
        At[Ye] && At[Ye].m(y, null);
      ot(
        y,
        /*draft*/
        l[1].rarity,
        !0
      ), a(t, E), a(t, S), a(S, O), a(S, C), a(S, T), x(
        T,
        /*serialBase*/
        l[5]
      ), a(t, N), a(t, I), a(I, D), a(I, M), a(I, G), x(
        G,
        /*draft*/
        l[1].img
      ), a(t, L), a(t, U), a(U, z), a(U, F), ht(W, U, null), a(e, H), a(e, V), a(V, J), a(V, j), a(V, X), a(X, K), a(K, Z), a(Z, le), a(Z, $), a(Z, se), a(K, Y), a(K, Q), x(
        Q,
        /*draft*/
        l[1].system.costPerDie
      ), a(X, ie), a(X, ee), a(ee, pe), a(pe, Ee), a(pe, De), a(pe, we), a(ee, ke), a(ee, me), x(
        me,
        /*draft*/
        l[1].system.xpCost
      ), a(X, re), a(X, ye), a(ye, oe), a(oe, be), a(oe, de), a(oe, Oe), a(ye, _e), a(ye, ue), x(
        ue,
        /*draft*/
        l[1].price
      ), a(X, Re), a(X, Ce), a(Ce, He), a(Ce, Ge), a(Ce, Xe), x(
        Xe,
        /*draft*/
        l[1].system.stock
      ), a(V, fe), a(V, Le), a(Le, qe), a(Le, Me), a(Le, Se), a(Se, Ue), a(V, Ve), a(V, rt), ct.m(rt, null), a(V, Tt), a(V, ze), a(ze, it), a(ze, Ze), a(ze, ut), ut.innerHTML = /*previewHTML*/
      l[14], a(V, Be), a(V, Pe), je = !0, xe || (St = [
        R(
          u,
          "input",
          /*input0_input_handler*/
          l[30]
        ),
        R(
          h,
          "change",
          /*select0_change_handler*/
          l[31]
        ),
        R(
          y,
          "change",
          /*select1_change_handler*/
          l[32]
        ),
        R(
          T,
          "input",
          /*input1_input_handler*/
          l[33]
        ),
        R(
          G,
          "input",
          /*input2_input_handler*/
          l[34]
        ),
        R(
          Q,
          "input",
          /*input3_input_handler*/
          l[35]
        ),
        R(
          me,
          "input",
          /*input4_input_handler*/
          l[36]
        ),
        R(
          ue,
          "input",
          /*input5_input_handler*/
          l[37]
        ),
        R(
          Xe,
          "input",
          /*input6_input_handler*/
          l[38]
        ),
        R(
          Se,
          "click",
          /*click_handler_4*/
          l[39]
        ),
        R(
          Pe,
          "click",
          /*saveItem*/
          l[18]
        )
      ], xe = !0);
    },
    p(Ie, tt) {
      if (tt[0] & /*draft, TAGS*/
      32770 && u.value !== /*draft*/
      Ie[1].name && x(
        u,
        /*draft*/
        Ie[1].name
      ), tt[0] & /*TAGS*/
      32768) {
        It = ce(
          /*TAGS*/
          Ie[15]
        );
        let bt;
        for (bt = 0; bt < It.length; bt += 1) {
          const Jt = of(Ie, It, bt);
          Dt[bt] ? Dt[bt].p(Jt, tt) : (Dt[bt] = bf(Jt), Dt[bt].c(), Dt[bt].m(h, null));
        }
        for (; bt < Dt.length; bt += 1)
          Dt[bt].d(1);
        Dt.length = It.length;
      }
      if (tt[0] & /*draft, TAGS*/
      32770 && ot(
        h,
        /*draft*/
        Ie[1].systemTag
      ), tt[0] & /*RARITIES*/
      65536) {
        Ct = ce(
          /*RARITIES*/
          Ie[16]
        );
        let bt;
        for (bt = 0; bt < Ct.length; bt += 1) {
          const Jt = nf(Ie, Ct, bt);
          At[bt] ? At[bt].p(Jt, tt) : (At[bt] = vf(Jt), At[bt].c(), At[bt].m(y, null));
        }
        for (; bt < At.length; bt += 1)
          At[bt].d(1);
        At.length = Ct.length;
      }
      tt[0] & /*draft, TAGS*/
      32770 && ot(
        y,
        /*draft*/
        Ie[1].rarity
      ), (!je || tt[0] & /*isManualMode*/
      4) && (T.disabled = /*isManualMode*/
      Ie[2]), tt[0] & /*serialBase*/
      32 && T.value !== /*serialBase*/
      Ie[5] && x(
        T,
        /*serialBase*/
        Ie[5]
      ), tt[0] & /*draft, TAGS*/
      32770 && G.value !== /*draft*/
      Ie[1].img && x(
        G,
        /*draft*/
        Ie[1].img
      );
      const Ye = {};
      tt[0] & /*draft, suggPrice*/
      4098 && (Ye.item = {
        .../*draft*/
        Ie[1],
        price: (
          /*draft*/
          Ie[1].price || /*suggPrice*/
          Ie[12]
        )
      }), W.$set(Ye), (!je || tt[0] & /*suggPB*/
      64) && te(
        $,
        /*suggPB*/
        Ie[6]
      ), tt[0] & /*draft, TAGS*/
      32770 && Je(Q.value) !== /*draft*/
      Ie[1].system.costPerDie && x(
        Q,
        /*draft*/
        Ie[1].system.costPerDie
      ), (!je || tt[0] & /*suggXP*/
      8192) && te(
        De,
        /*suggXP*/
        Ie[13]
      ), tt[0] & /*draft, TAGS*/
      32770 && Je(me.value) !== /*draft*/
      Ie[1].system.xpCost && x(
        me,
        /*draft*/
        Ie[1].system.xpCost
      ), (!je || tt[0] & /*suggPrice*/
      4096) && te(
        de,
        /*suggPrice*/
        Ie[12]
      ), tt[0] & /*draft, TAGS*/
      32770 && Je(ue.value) !== /*draft*/
      Ie[1].price && x(
        ue,
        /*draft*/
        Ie[1].price
      ), tt[0] & /*draft, TAGS*/
      32770 && Je(Xe.value) !== /*draft*/
      Ie[1].system.stock && x(
        Xe,
        /*draft*/
        Ie[1].system.stock
      ), (!je || tt[0] & /*isManualMode*/
      4) && ve !== (ve = /*isManualMode*/
      Ie[2] ? "MODO HTML PURO (ATIVADO)" : "MODO TEMPLATE GAMA") && te(Ue, ve), (!je || tt[0] & /*isManualMode*/
      4) && he(
        Se,
        "active",
        /*isManualMode*/
        Ie[2]
      ), Nt === (Nt = Et(Ie)) && ct ? ct.p(Ie, tt) : (ct.d(1), ct = Nt(Ie), ct && (ct.c(), ct.m(rt, null))), (!je || tt[0] & /*previewHTML*/
      16384) && (ut.innerHTML = /*previewHTML*/
      Ie[14]);
    },
    i(Ie) {
      je || (ne(W.$$.fragment, Ie), je = !0);
    },
    o(Ie) {
      Ae(W.$$.fragment, Ie), je = !1;
    },
    d(Ie) {
      Ie && P(e), Fe(Dt, Ie), Fe(At, Ie), gt(W), ct.d(), xe = !1, Te(St);
    }
  };
}
function rf(l) {
  let e, t, i, n, o = (
    /*p*/
    l[73].name + ""
  ), c, f, u, d = (
    /*p*/
    l[73].coins + ""
  ), p, m, b, v, h;
  function _() {
    return (
      /*click_handler_10*/
      l[49](
        /*p*/
        l[73]
      )
    );
  }
  return {
    c() {
      var w;
      e = r("div"), t = r("div"), i = g(), n = r("span"), c = B(o), f = g(), u = r("span"), p = B(d), m = B(" MC"), b = g(), s(t, "class", "tab-indicator svelte-86f6qt"), ae(
        t,
        "background",
        /*p*/
        l[73].color
      ), s(n, "class", "p-name svelte-86f6qt"), s(u, "class", "p-coins svelte-86f6qt"), s(e, "class", "player-tab svelte-86f6qt"), he(
        e,
        "active",
        /*inspectedPlayer*/
        ((w = l[11]) == null ? void 0 : w.id) === /*p*/
        l[73].id
      );
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, i), a(e, n), a(n, c), a(e, f), a(e, u), a(u, p), a(u, m), a(e, b), v || (h = R(e, "click", _), v = !0);
    },
    p(w, k) {
      var A;
      l = w, k[0] & /*playerList*/
      256 && ae(
        t,
        "background",
        /*p*/
        l[73].color
      ), k[0] & /*playerList*/
      256 && o !== (o = /*p*/
      l[73].name + "") && te(c, o), k[0] & /*playerList*/
      256 && d !== (d = /*p*/
      l[73].coins + "") && te(p, d), k[0] & /*inspectedPlayer, playerList*/
      2304 && he(
        e,
        "active",
        /*inspectedPlayer*/
        ((A = l[11]) == null ? void 0 : A.id) === /*p*/
        l[73].id
      );
    },
    d(w) {
      w && P(e), v = !1, h();
    }
  };
}
function tg(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "SELECIONE UM JOGADOR PARA GERENCIAR", s(e, "class", "no-select-msg svelte-86f6qt");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function lg(l) {
  let e, t, i = (
    /*inspectedPlayer*/
    l[11].name.toUpperCase() + ""
  ), n, o, c, f, u = (
    /*inspectedPlayer*/
    l[11].coins + ""
  ), d, p, m, b, v, h, _, w, k, A, y, E, S, O = (
    /*inspectedPlayer*/
    l[11].inventory.length + ""
  ), C, T, N, I, D, M, G, L = (
    /*inspectedPlayer*/
    l[11].inventory.length === 0 && cf()
  ), U = ce(
    /*inspectedPlayer*/
    l[11].inventory
  ), z = [];
  for (let F = 0; F < U.length; F += 1)
    z[F] = uf(tf(l, U, F));
  return {
    c() {
      e = r("div"), t = r("h2"), n = B(i), o = g(), c = r("div"), f = r("span"), d = B(u), p = B(" MC"), m = g(), b = r("div"), v = r("input"), h = g(), _ = r("button"), _.textContent = "+", w = g(), k = r("button"), k.textContent = "-", A = g(), y = r("div"), E = r("span"), S = B("INVENT√ÅRIO ("), C = B(O), T = B(" ITENS)"), N = g(), I = r("div"), L && L.c(), D = g();
      for (let F = 0; F < z.length; F += 1)
        z[F].c();
      s(t, "class", "svelte-86f6qt"), s(f, "class", "current-money svelte-86f6qt"), s(v, "type", "number"), s(v, "placeholder", "0"), s(v, "class", "svelte-86f6qt"), s(_, "class", "add svelte-86f6qt"), s(k, "class", "sub svelte-86f6qt"), s(b, "class", "transact-grp svelte-86f6qt"), s(c, "class", "coin-ops svelte-86f6qt"), s(e, "class", "insp-header svelte-86f6qt"), s(E, "class", "sec-label svelte-86f6qt"), s(I, "class", "inv-list svelte-86f6qt"), s(y, "class", "insp-inventory svelte-86f6qt");
    },
    m(F, W) {
      q(F, e, W), a(e, t), a(t, n), a(e, o), a(e, c), a(c, f), a(f, d), a(f, p), a(c, m), a(c, b), a(b, v), x(
        v,
        /*transactionValues*/
        l[9][
          /*inspectedPlayer*/
          l[11].id
        ]
      ), a(b, h), a(b, _), a(b, w), a(b, k), q(F, A, W), q(F, y, W), a(y, E), a(E, S), a(E, C), a(E, T), a(y, N), a(y, I), L && L.m(I, null), a(I, D);
      for (let H = 0; H < z.length; H += 1)
        z[H] && z[H].m(I, null);
      M || (G = [
        R(
          v,
          "input",
          /*input_input_handler*/
          l[50]
        ),
        R(
          _,
          "click",
          /*click_handler_11*/
          l[51]
        ),
        R(
          k,
          "click",
          /*click_handler_12*/
          l[52]
        )
      ], M = !0);
    },
    p(F, W) {
      if (W[0] & /*inspectedPlayer*/
      2048 && i !== (i = /*inspectedPlayer*/
      F[11].name.toUpperCase() + "") && te(n, i), W[0] & /*inspectedPlayer*/
      2048 && u !== (u = /*inspectedPlayer*/
      F[11].coins + "") && te(d, u), W[0] & /*transactionValues, inspectedPlayer*/
      2560 && Je(v.value) !== /*transactionValues*/
      F[9][
        /*inspectedPlayer*/
        F[11].id
      ] && x(
        v,
        /*transactionValues*/
        F[9][
          /*inspectedPlayer*/
          F[11].id
        ]
      ), W[0] & /*inspectedPlayer*/
      2048 && O !== (O = /*inspectedPlayer*/
      F[11].inventory.length + "") && te(C, O), /*inspectedPlayer*/
      F[11].inventory.length === 0 ? L || (L = cf(), L.c(), L.m(I, D)) : L && (L.d(1), L = null), W[0] & /*inspectedPlayer, removeItemFromPlayer*/
      16779264) {
        U = ce(
          /*inspectedPlayer*/
          F[11].inventory
        );
        let H;
        for (H = 0; H < U.length; H += 1) {
          const V = tf(F, U, H);
          z[H] ? z[H].p(V, W) : (z[H] = uf(V), z[H].c(), z[H].m(I, null));
        }
        for (; H < z.length; H += 1)
          z[H].d(1);
        z.length = U.length;
      }
    },
    d(F) {
      F && (P(e), P(A), P(y)), L && L.d(), Fe(z, F), M = !1, Te(G);
    }
  };
}
function cf(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nenhum item encontrado.", s(e, "class", "empty-inv svelte-86f6qt");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ff(l) {
  let e;
  return {
    c() {
      e = r("small"), e.textContent = "[RECOMPENSA_PASSE]", ae(e, "color", "#00fbff");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function df(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = "ATIVO", s(e, "class", "active-badge svelte-86f6qt");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function uf(l) {
  let e, t, i, n, o, c, f = (
    /*item*/
    l[65].name + ""
  ), u, d, p, m, b = (
    /*item*/
    l[65].systemTag + ""
  ), v, h, _ = (
    /*item*/
    l[65].rarity + ""
  ), w, k, A, y, E, S, O, C = (
    /*item*/
    l[65].isPassItem && ff()
  ), T = (
    /*item*/
    l[65].active && df()
  );
  function N() {
    return (
      /*click_handler_13*/
      l[53](
        /*item*/
        l[65]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("span"), u = B(f), d = g(), C && C.c(), p = g(), m = r("span"), v = B(b), h = B(" ‚Ä¢ "), w = B(_), k = g(), T && T.c(), A = g(), y = r("button"), y.innerHTML = '<i class="fas fa-trash"></i>', E = g(), at(t.src, i = /*item*/
      l[65].img) || s(t, "src", i), s(t, "class", "item-thumb svelte-86f6qt"), s(c, "class", "i-name svelte-86f6qt"), s(m, "class", "i-meta svelte-86f6qt"), s(o, "class", "item-det svelte-86f6qt"), s(y, "class", "btn-trash svelte-86f6qt"), s(y, "title", "Remover do Jogador"), s(e, "class", "inv-row-item svelte-86f6qt"), he(
        e,
        "is-pass",
        /*item*/
        l[65].isPassItem
      );
    },
    m(I, D) {
      q(I, e, D), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(c, d), C && C.m(c, null), a(o, p), a(o, m), a(m, v), a(m, h), a(m, w), a(o, k), T && T.m(o, null), a(e, A), a(e, y), a(e, E), S || (O = R(y, "click", N), S = !0);
    },
    p(I, D) {
      l = I, D[0] & /*inspectedPlayer*/
      2048 && !at(t.src, i = /*item*/
      l[65].img) && s(t, "src", i), D[0] & /*inspectedPlayer*/
      2048 && f !== (f = /*item*/
      l[65].name + "") && te(u, f), /*item*/
      l[65].isPassItem ? C || (C = ff(), C.c(), C.m(c, null)) : C && (C.d(1), C = null), D[0] & /*inspectedPlayer*/
      2048 && b !== (b = /*item*/
      l[65].systemTag + "") && te(v, b), D[0] & /*inspectedPlayer*/
      2048 && _ !== (_ = /*item*/
      l[65].rarity + "") && te(w, _), /*item*/
      l[65].active ? T || (T = df(), T.c(), T.m(o, null)) : T && (T.d(1), T = null), D[0] & /*inspectedPlayer*/
      2048 && he(
        e,
        "is-pass",
        /*item*/
        l[65].isPassItem
      );
    },
    d(I) {
      I && P(e), C && C.d(), T && T.d(), S = !1, O();
    }
  };
}
function pf(l) {
  let e, t, i, n, o, c, f = (
    /*item*/
    l[65].name + ""
  ), u, d, p = (
    /*item*/
    l[65].systemTag + ""
  ), m, b, v, h, _ = (
    /*inStore*/
    l[68] ? "VENDENDO" : "OFFLINE"
  ), w, k, A, y, E, S, O, C;
  function T() {
    return (
      /*click_handler_7*/
      l[45](
        /*item*/
        l[65]
      )
    );
  }
  function N() {
    return (
      /*click_handler_8*/
      l[46](
        /*item*/
        l[65]
      )
    );
  }
  function I() {
    return (
      /*click_handler_9*/
      l[47](
        /*item*/
        l[65]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("span"), u = B(f), d = r("span"), m = B(p), b = g(), v = r("div"), h = r("button"), w = B(_), k = g(), A = r("button"), A.innerHTML = '<i class="fas fa-edit"></i>', y = g(), E = r("button"), E.innerHTML = '<i class="fas fa-trash"></i>', S = g(), at(t.src, i = /*item*/
      l[65].img) || s(t, "src", i), s(t, "class", "svelte-86f6qt"), s(c, "class", "name"), s(d, "class", "meta svelte-86f6qt"), s(o, "class", "info svelte-86f6qt"), s(h, "class", "toggle-btn svelte-86f6qt"), he(
        h,
        "active",
        /*inStore*/
        l[68]
      ), s(A, "class", "icon-btn svelte-86f6qt"), s(A, "title", "Editar"), s(E, "class", "icon-btn del svelte-86f6qt"), s(E, "title", "Deletar"), s(v, "class", "controls svelte-86f6qt"), s(e, "class", "db-row svelte-86f6qt"), he(
        e,
        "is-store",
        /*inStore*/
        l[68]
      );
    },
    m(D, M) {
      q(D, e, M), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(o, d), a(d, m), a(e, b), a(e, v), a(v, h), a(h, w), a(v, k), a(v, A), a(v, y), a(v, E), a(e, S), O || (C = [
        R(h, "click", T),
        R(A, "click", N),
        R(E, "click", I)
      ], O = !0);
    },
    p(D, M) {
      l = D, M[0] & /*archiveItems*/
      1024 && !at(t.src, i = /*item*/
      l[65].img) && s(t, "src", i), M[0] & /*archiveItems*/
      1024 && f !== (f = /*item*/
      l[65].name + "") && te(u, f), M[0] & /*archiveItems*/
      1024 && p !== (p = /*item*/
      l[65].systemTag + "") && te(m, p), M[0] & /*storeItems, archiveItems*/
      1025 && _ !== (_ = /*inStore*/
      l[68] ? "VENDENDO" : "OFFLINE") && te(w, _), M[0] & /*storeItems, archiveItems*/
      1025 && he(
        h,
        "active",
        /*inStore*/
        l[68]
      ), M[0] & /*storeItems, archiveItems*/
      1025 && he(
        e,
        "is-store",
        /*inStore*/
        l[68]
      );
    },
    d(D) {
      D && P(e), O = !1, Te(C);
    }
  };
}
function mf(l) {
  let e, t, i, n, o, c = (
    /*item*/
    l[65].name + ""
  ), f, u, d, p, m, b, v, h, _;
  function w() {
    return (
      /*click_handler_5*/
      l[43](
        /*item*/
        l[65]
      )
    );
  }
  function k() {
    return (
      /*click_handler_6*/
      l[44](
        /*item*/
        l[65]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("span"), f = B(c), u = g(), d = r("div"), p = r("button"), p.textContent = "EDITAR", m = g(), b = r("button"), b.textContent = "REMOVER", v = g(), at(t.src, i = /*item*/
      l[65].img) || s(t, "src", i), s(t, "class", "svelte-86f6qt"), s(b, "class", "del"), s(d, "class", "acts svelte-86f6qt"), s(e, "class", "row-item svelte-86f6qt");
    },
    m(A, y) {
      q(A, e, y), a(e, t), a(e, n), a(e, o), a(o, f), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), a(e, v), h || (_ = [
        R(p, "click", w),
        R(b, "click", k)
      ], h = !0);
    },
    p(A, y) {
      l = A, y[0] & /*storeItems*/
      1 && !at(t.src, i = /*item*/
      l[65].img) && s(t, "src", i), y[0] & /*storeItems*/
      1 && c !== (c = /*item*/
      l[65].name + "") && te(f, c);
    },
    d(A) {
      A && P(e), h = !1, Te(_);
    }
  };
}
function bf(l) {
  let e, t = (
    /*t*/
    l[62] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[62], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function vf(l) {
  let e, t = (
    /*r*/
    l[59] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[59], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function ag(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "C√ìDIGO HTML COMPLETO", i = g(), n = r("textarea"), s(t, "class", "svelte-86f6qt"), s(n, "class", "input-raw svelte-86f6qt"), s(n, "placeholder", "Cole seu HTML/CSS aqui..."), s(e, "class", "field grow svelte-86f6qt");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), a(e, n), x(
        n,
        /*draft*/
        l[1].system.description
      ), o || (c = R(
        n,
        "input",
        /*textarea_input_handler*/
        l[42]
      ), o = !0);
    },
    p(f, u) {
      u[0] & /*draft, TAGS*/
      32770 && x(
        n,
        /*draft*/
        f[1].system.description
      );
    },
    d(f) {
      f && P(e), o = !1, c();
    }
  };
}
function ig(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "DESCRI√á√ÉO (Use *palavra* para negrito)", i = g(), n = r("textarea"), o = g(), c = r("div"), f = r("label"), f.textContent = "AVISOS / FALHAS (Opcional)", u = g(), d = r("textarea"), s(t, "class", "svelte-86f6qt"), s(n, "class", "input-desc svelte-86f6qt"), s(n, "placeholder", "Descreva o poder aqui..."), s(e, "class", "field grow svelte-86f6qt"), s(f, "class", "svelte-86f6qt"), s(d, "class", "input-warn svelte-86f6qt"), s(d, "placeholder", "Ex: Requer 1 de Willpower para ativar."), s(c, "class", "field svelte-86f6qt");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, i), a(e, n), x(
        n,
        /*simpleDesc*/
        l[3]
      ), q(b, o, v), q(b, c, v), a(c, f), a(c, u), a(c, d), x(
        d,
        /*simpleWarn*/
        l[4]
      ), p || (m = [
        R(
          n,
          "input",
          /*textarea0_input_handler*/
          l[40]
        ),
        R(
          d,
          "input",
          /*textarea1_input_handler*/
          l[41]
        )
      ], p = !0);
    },
    p(b, v) {
      v[0] & /*simpleDesc*/
      8 && x(
        n,
        /*simpleDesc*/
        b[3]
      ), v[0] & /*simpleWarn*/
      16 && x(
        d,
        /*simpleWarn*/
        b[4]
      );
    },
    d(b) {
      b && (P(e), P(o), P(c)), p = !1, Te(m);
    }
  };
}
function sg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w;
  const k = [eg, $h, xh, Zh], A = [];
  function y(E, S) {
    return (
      /*activeSection*/
      E[7] === "create" ? 0 : (
        /*activeSection*/
        E[7] === "manage" ? 1 : (
          /*activeSection*/
          E[7] === "archive" ? 2 : (
            /*activeSection*/
            E[7] === "players" ? 3 : -1
          )
        )
      )
    );
  }
  return ~(m = y(l)) && (b = A[m] = k[m](l)), {
    c() {
      e = r("div"), t = r("nav"), i = r("button"), i.innerHTML = '<i class="fas fa-hammer"></i> CRIAR', n = g(), o = r("button"), o.innerHTML = '<i class="fas fa-list"></i> LOJA ATIVA', c = g(), f = r("button"), f.innerHTML = '<i class="fas fa-database"></i> DB GERAL', u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-users"></i> JOGADORES', p = g(), b && b.c(), s(i, "class", "svelte-86f6qt"), he(
        i,
        "active",
        /*activeSection*/
        l[7] === "create"
      ), s(o, "class", "svelte-86f6qt"), he(
        o,
        "active",
        /*activeSection*/
        l[7] === "manage"
      ), s(f, "class", "svelte-86f6qt"), he(
        f,
        "active",
        /*activeSection*/
        l[7] === "archive"
      ), s(d, "class", "svelte-86f6qt"), he(
        d,
        "active",
        /*activeSection*/
        l[7] === "players"
      ), s(t, "class", "admin-nav svelte-86f6qt"), s(e, "class", "admin-panel svelte-86f6qt");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(t, o), a(t, c), a(t, f), a(t, u), a(t, d), a(e, p), ~m && A[m].m(e, null), h = !0, _ || (w = [
        R(
          i,
          "click",
          /*click_handler*/
          l[26]
        ),
        R(
          o,
          "click",
          /*click_handler_1*/
          l[27]
        ),
        R(
          f,
          "click",
          /*click_handler_2*/
          l[28]
        ),
        R(
          d,
          "click",
          /*click_handler_3*/
          l[29]
        )
      ], _ = !0);
    },
    p(E, S) {
      (!h || S[0] & /*activeSection*/
      128) && he(
        i,
        "active",
        /*activeSection*/
        E[7] === "create"
      ), (!h || S[0] & /*activeSection*/
      128) && he(
        o,
        "active",
        /*activeSection*/
        E[7] === "manage"
      ), (!h || S[0] & /*activeSection*/
      128) && he(
        f,
        "active",
        /*activeSection*/
        E[7] === "archive"
      ), (!h || S[0] & /*activeSection*/
      128) && he(
        d,
        "active",
        /*activeSection*/
        E[7] === "players"
      );
      let O = m;
      m = y(E), m === O ? ~m && A[m].p(E, S) : (b && ($e(), Ae(A[O], 1, 1, () => {
        A[O] = null;
      }), et()), ~m ? (b = A[m], b ? b.p(E, S) : (b = A[m] = k[m](E), b.c()), ne(b, 1), b.m(e, null)) : b = null);
    },
    i(E) {
      h || (ne(b), E && (v || Ne(() => {
        v = st(e, Qe, {}), v.start();
      })), h = !0);
    },
    o(E) {
      Ae(b), h = !1;
    },
    d(E) {
      E && P(e), ~m && A[m].d(), _ = !1, Te(w);
    }
  };
}
function hf(l, e, t, i, n, o) {
  const c = (u) => u ? u.toString() : "", f = (u) => u ? u.replace(/\*(.*?)\*/g, '<strong style="color: #fff; text-shadow: 0 0 5px #00ff41;">$1</strong>').replace(/\n/g, "<br>") : "";
  return `
<div class="gama-window-container">
    <div class="gama-window-header">
        <div class="window-controls"><span class="dot red"></span><span class="dot yellow"></span><span class="dot green"></span></div>
        <div class="window-title">TERMINAL_GAMA // ${c(o).toUpperCase()}</div>
    </div>
    <div class="gama-window-layout">
        <aside class="gama-window-sidebar">
            <div class="sidebar-section"><small>STATUS</small><div class="status-box">ONLINE</div></div>
            <div class="sidebar-section"><small>N√çVEL</small><div class="rarity-text">${c(n).toUpperCase()}</div></div>
            <div class="sidebar-section"><small>LOTE/TAG</small><p>${c(t)}</p></div>
            <div class="sidebar-footer"><div class="pulse-icon"></div><span>CONEX√ÉO</span></div>
        </aside>
        <main class="gama-window-main">
            <div class="scanlines"></div>
            <h2 class="power-title">${c(i).toUpperCase() || "NOME DO ARQUIVO"}</h2>
            <div class="text-content">
                <p>${f(l)}</p>
                ${e ? `<p class="warning-text">[AVISO]: ${f(e)}</p>` : ""}
            </div>
        </main>
    </div>
</div>
<style>
@import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;500&display=swap');
.gama-window-container { width: 100%; height: 100%; background: #0d0208; border: 1px solid #00ff41; display: flex; flex-direction: column; overflow: hidden; font-family: 'Fira Code', monospace; box-shadow: 0 0 30px rgba(0, 255, 65, 0.2); }
.gama-window-header { background: #003b00; padding: 8px 15px; display: flex; align-items: center; border-bottom: 1px solid #00ff41; }
.window-controls { display: flex; gap: 6px; margin-right: 20px; }
.dot { width: 10px; height: 10px; border-radius: 50%; display: inline-block; }
.red { background: #ff5f56; } .yellow { background: #ffbd2e; } .green { background: #27c93f; }
.window-title { color: #00ff41; font-size: 0.7rem; letter-spacing: 1px; font-weight: bold; }
.gama-window-layout { display: flex; flex: 1; overflow: hidden; }
.gama-window-sidebar { width: 140px; background: rgba(0, 20, 0, 0.5); border-right: 1px solid #003b00; padding: 15px 10px; display: flex; flex-direction: column; gap: 15px; }
.sidebar-section small { color: #008f11; font-size: 0.6rem; display: block; margin-bottom: 4px; }
.status-box { background: #00ff41; color: #000; font-size: 0.7rem; font-weight: bold; padding: 2px; text-align: center; border-radius: 2px; }
.rarity-text { color: #ff003c; text-shadow: 0 0 5px #ff003c; font-size: 0.8rem; font-weight: bold; }
.gama-window-sidebar p { margin: 0; font-size: 0.75rem; color: #fff; }
.sidebar-footer { margin-top: auto; display: flex; align-items: center; gap: 5px; font-size: 0.6rem; color: #008f11; }
.pulse-icon { width: 6px; height: 6px; background: #00ff41; border-radius: 50%; box-shadow: 0 0 5px #00ff41; animation: pulse 1s infinite; }
.gama-window-main { flex: 1; padding: 20px; overflow-y: auto; position: relative; }
.power-title { color: #fff; font-size: 1.4rem; margin-top: 0; border-bottom: 1px dotted #00ff41; padding-bottom: 10px; text-shadow: 0 0 10px #00ff41; }
.text-content { color: #00ff41; font-size: 0.9rem; line-height: 1.4; }
.warning-text { color: #00fbff; font-size: 0.8rem; margin-top: 15px; border-left: 2px solid #00fbff; padding-left: 10px; }
.scanlines { position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.1) 50%); background-size: 100% 4px; pointer-events: none; z-index: 10; }
@keyframes pulse { 0% { opacity: 1; } 50% { opacity: 0.3; } 100% { opacity: 1; } }
.gama-window-main::-webkit-scrollbar { width: 4px; }
.gama-window-main::-webkit-scrollbar-track { background: #0d0208; }
.gama-window-main::-webkit-scrollbar-thumb { background: #003b00; border-radius: 10px; }
.gama-window-main::-webkit-scrollbar-thumb:hover { background: #00ff41; }
</style>`;
}
function ng(l, e, t) {
  let i, n, o, c, { storeItems: f = [] } = e;
  const u = ml(), d = [
    "Poder Principal",
    "Poder Secundario",
    "Habilidade Especial",
    "Hyper Stat",
    "Hyper Skill",
    "Item",
    "Veiculo",
    "Portais",
    "Bases",
    "Contatos",
    "Criaturas",
    "Origens",
    "Passe"
  ], p = ["Comum", "Raro", "Lend√°rio", "M√≠tico", "Universal", "Multiversal"], m = {
    "Poder Principal": {
      Comum: 2,
      Raro: 4,
      Lend√°rio: 8,
      M√≠tico: 12,
      Universal: 16,
      Multiversal: 32
    },
    "Poder Secundario": {
      Comum: 1,
      Raro: 2,
      Lend√°rio: 4,
      M√≠tico: 6,
      Universal: 8,
      Multiversal: 16
    },
    Item: {
      Comum: 1,
      Raro: 2,
      Lend√°rio: 4,
      M√≠tico: 6,
      Universal: 8,
      Multiversal: 16
    },
    Veiculo: {
      Comum: 2,
      Raro: 4,
      Lend√°rio: 8,
      M√≠tico: 12,
      Universal: 16,
      Multiversal: 32
    },
    "Habilidade Especial": {
      Comum: 0,
      Raro: 1,
      Lend√°rio: 2,
      M√≠tico: 3,
      Universal: 4,
      Multiversal: 8
    }
  }, b = {
    "Poder Principal": 8,
    "Poder Secundario": 4,
    "Habilidade Especial": 2,
    "Hyper Stat": 0,
    "Hyper Skill": 0
  }, v = {
    id: null,
    name: "",
    systemTag: "Poder Principal",
    rarity: "Comum",
    price: 0,
    img: "icons/svg/mystery-man.svg",
    system: {
      description: "",
      costPerDie: 0,
      xpCost: 0,
      stock: -1
    }
  };
  let h = JSON.parse(JSON.stringify(v)), _ = "create", w = !1, k = "", A = "", y = "V2-00", E = [], S = {}, O = [], C = null;
  qt(() => {
    T();
  });
  function T() {
    if (t(10, O = _t.getArchive()), t(8, E = game.users.filter((ue) => !ue.isGM).map((ue) => {
      const Re = ue.getFlag("multiversus-rpg", "playerData") || { coins: 0, items: [] };
      return S[ue.id] === void 0 && t(9, S[ue.id] = 0, S), {
        id: ue.id,
        name: ue.name,
        color: ue.color,
        coins: Re.coins,
        inventory: Re.items || []
      };
    })), C) {
      const ue = E.find((Re) => Re.id === C.id);
      ue && t(11, C = ue);
    }
  }
  async function N() {
    try {
      let ue = JSON.parse(JSON.stringify(h));
      ue.id || (ue.id = foundry.utils.randomID()), ue.name || (ue.name = "NOVO ITEM"), ue.system.costPerDie === 0 && (ue.system.costPerDie = i), ue.system.xpCost === 0 && (ue.system.xpCost = n), ue.price === 0 && (ue.price = o), w ? ue.system.isManual = !0 : (ue.system.description = hf(k, A, y, ue.name, ue.rarity, ue.systemTag), ue.system.rawDesc = k, ue.system.rawWarn = A, ue.system.serialBase = y, ue.system.isManual = !1), await _t.createItem(ue), ui.notifications.info("Item salvo com sucesso!"), I(), u("refresh");
    } catch (ue) {
      console.error("Erro StoreAdmin:", ue), ui.notifications.error("Erro no salvamento.");
    }
  }
  function I() {
    t(1, h = JSON.parse(JSON.stringify(v))), t(3, k = ""), t(4, A = ""), t(5, y = "V2-00"), t(2, w = !1);
  }
  function D(ue) {
    t(1, h = JSON.parse(JSON.stringify(ue))), h.system.isManual ? t(2, w = !0) : (t(2, w = !1), t(3, k = h.system.rawDesc || ""), t(4, A = h.system.rawWarn || ""), t(5, y = h.system.serialBase || "V2-00")), t(7, _ = "create");
  }
  async function M(ue) {
    await _t.deleteFromStore(ue), u("refresh");
  }
  async function G(ue) {
    await _t.deleteFromArchive(ue), T(), u("refresh");
  }
  async function L(ue) {
    await _t.toggleStoreListing(ue), u("refresh");
  }
  async function U(ue, Re) {
    const Ce = S[ue];
    !Ce || Ce <= 0 || (await _t.adminModifyCoins(ue, Ce, Re), t(9, S[ue] = 0, S), setTimeout(T, 200));
  }
  async function z(ue) {
    if (!C) return;
    let Re = _t.getPlayerData(C.id);
    Re.items = Re.items.filter((He) => He.uniqueId !== ue), await game.users.get(C.id).setFlag("multiversus-rpg", "playerData", Re), ui.notifications.info("Item removido do jogador."), T();
  }
  function F(ue) {
    t(11, C = ue);
  }
  const W = () => t(7, _ = "create"), H = () => t(7, _ = "manage"), V = () => {
    t(7, _ = "archive"), T();
  }, J = () => {
    t(7, _ = "players"), T();
  };
  function j() {
    h.name = this.value, t(1, h), t(15, d);
  }
  function X() {
    h.systemTag = Gt(this), t(1, h), t(15, d);
  }
  function K() {
    h.rarity = Gt(this), t(1, h), t(15, d);
  }
  function Z() {
    y = this.value, t(5, y);
  }
  function le() {
    h.img = this.value, t(1, h), t(15, d);
  }
  function $() {
    h.system.costPerDie = Je(this.value), t(1, h), t(15, d);
  }
  function se() {
    h.system.xpCost = Je(this.value), t(1, h), t(15, d);
  }
  function Y() {
    h.price = Je(this.value), t(1, h), t(15, d);
  }
  function Q() {
    h.system.stock = Je(this.value), t(1, h), t(15, d);
  }
  const ie = () => t(2, w = !w);
  function ee() {
    k = this.value, t(3, k);
  }
  function pe() {
    A = this.value, t(4, A);
  }
  function Ee() {
    h.system.description = this.value, t(1, h), t(15, d);
  }
  const De = (ue) => D(ue), we = (ue) => M(ue.id), ke = (ue) => L(ue), me = (ue) => D(ue), re = (ue) => G(ue.id), ye = (ue, Re) => Re.id === ue.id, oe = (ue) => F(ue);
  function be() {
    S[C.id] = Je(this.value), t(9, S);
  }
  const de = () => U(C.id, "add"), Oe = () => U(C.id, "remove"), _e = (ue) => z(ue.uniqueId);
  return l.$$set = (ue) => {
    "storeItems" in ue && t(0, f = ue.storeItems);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*draft*/
    2 && t(6, i = (() => {
      let ue = 0;
      return m[h.systemTag] && (ue = m[h.systemTag][h.rarity] || 0), h.systemTag === "Habilidade Especial" && (ue += 2), h.systemTag === "Hyper Stat" && (ue += 4), h.systemTag === "Hyper Skill" && (ue += 1), ue;
    })()), l.$$.dirty[0] & /*draft*/
    2 && t(13, n = b[h.systemTag] || 0), l.$$.dirty[0] & /*suggPB*/
    64 && t(12, o = i * 100), l.$$.dirty[0] & /*isManualMode, draft, simpleDesc, simpleWarn, serialBase*/
    62 && t(14, c = w ? h.system.description : hf(k, A, y, h.name, h.rarity, h.systemTag));
  }, [
    f,
    h,
    w,
    k,
    A,
    y,
    i,
    _,
    E,
    S,
    O,
    C,
    o,
    n,
    c,
    d,
    p,
    T,
    N,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e
  ];
}
class og extends mt {
  constructor(e) {
    super(), pt(this, e, ng, sg, dt, { storeItems: 0 }, null, [-1, -1, -1]);
  }
}
const Ii = "multiversus-rpg", rg = {
  init: () => {
    game.socket.off(`module.${Ii}`), console.log("MacroStore | Socket Listener Iniciado."), game.socket.on(`module.${Ii}`, async (l) => {
      game.user.isGM && (console.log("MacroStore | Pedido recebido:", l), l.type === "buyItem" && await _t.gmProcessBuy(l.userId, l.item), l.type === "activateItem" && await _t.gmProcessActivation(l.userId, l.uniqueId));
    });
  },
  // Jogador pede para comprar
  requestBuy: (l) => {
    if (!game.users.find((t) => t.isGM && t.active)) {
      ui.notifications.error("Erro: Nenhum Mestre online para processar a compra.");
      return;
    }
    game.user.isGM ? (console.log("MacroStore | GM comprando direto."), _t.gmProcessBuy(game.user.id, l)) : (console.log("MacroStore | Enviando pedido de compra ao GM..."), game.socket.emit(`module.${Ii}`, {
      type: "buyItem",
      userId: game.user.id,
      item: l
    }), ui.notifications.info("Processando compra com o servidor..."));
  },
  requestActivation: (l) => {
    game.user.isGM ? _t.gmProcessActivation(game.user.id, l.uniqueId) : game.socket.emit(`module.${Ii}`, {
      type: "activateItem",
      userId: game.user.id,
      uniqueId: l.uniqueId
    });
  }
};
function gf(l, e, t) {
  const i = l.slice();
  return i[42] = e[t], i;
}
function _f(l, e, t) {
  const i = l.slice();
  return i[42] = e[t], i;
}
function kf(l, e, t) {
  const i = l.slice();
  return i[47] = e[t], i;
}
function wf(l, e, t) {
  const i = l.slice();
  return i[50] = e[t], i;
}
function yf(l) {
  let e, t;
  return e = new L0({
    props: {
      item: (
        /*selectedItem*/
        l[7]
      ),
      mode: (
        /*viewMode*/
        l[8]
      ),
      isGM: (
        /*isGM*/
        l[14]
      ),
      themeColor: (
        /*themeColor*/
        l[12]
      )
    }
  }), e.$on(
    "close",
    /*close_handler*/
    l[29]
  ), e.$on(
    "buy",
    /*buy_handler*/
    l[30]
  ), e.$on(
    "activate",
    /*activate_handler*/
    l[31]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*selectedItem*/
      128 && (o.item = /*selectedItem*/
      i[7]), n[0] & /*viewMode*/
      256 && (o.mode = /*viewMode*/
      i[8]), n[0] & /*themeColor*/
      4096 && (o.themeColor = /*themeColor*/
      i[12]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function cg(l) {
  let e, t, i = (
    /*activeTab*/
    l[5] === "admin" ? "EXIT_ROOT" : "SUDO_ADMIN"
  ), n, o, c, f;
  return {
    c() {
      e = r("button"), t = B("["), n = B(i), o = B("]"), s(e, "class", "gm-btn svelte-1lyfvpm"), he(
        e,
        "active",
        /*activeTab*/
        l[5] === "admin"
      );
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(e, n), a(e, o), c || (f = R(
        e,
        "click",
        /*toggleAdminMode*/
        l[21]
      ), c = !0);
    },
    p(u, d) {
      d[0] & /*activeTab*/
      32 && i !== (i = /*activeTab*/
      u[5] === "admin" ? "EXIT_ROOT" : "SUDO_ADMIN") && te(n, i), d[0] & /*activeTab*/
      32 && he(
        e,
        "active",
        /*activeTab*/
        u[5] === "admin"
      );
    },
    d(u) {
      u && P(e), c = !1, f();
    }
  };
}
function Af(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H = ce(
    /*RARITIES*/
    l[16]
  ), V = [];
  for (let X = 0; X < H.length; X += 1)
    V[X] = Ef(wf(l, H, X));
  let J = ce(
    /*TAGS*/
    l[15]
  ), j = [];
  for (let X = 0; X < J.length; X += 1)
    j[X] = Of(kf(l, J, X));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), i.textContent = "CREDITS_AVAILABLE", n = g(), o = r("div"), c = r("i"), f = g(), u = r("span"), d = B(
        /*userCoins*/
        l[6]
      ), p = g(), m = r("span"), m.textContent = "MC", b = g(), v = r("nav"), h = r("button"), h.innerHTML = '<i class="fas fa-globe"></i> NET_MARKET', _ = g(), w = r("button"), w.innerHTML = '<i class="fas fa-box-open"></i> LOCAL_STORAGE', k = g(), A = r("section"), y = r("div"), E = r("span"), E.textContent = "QUERY://", S = g(), O = r("input"), C = g(), T = r("div"), N = g(), I = r("select"), D = r("option"), D.textContent = "FILTER: RARITY (*)";
      for (let X = 0; X < V.length; X += 1)
        V[X].c();
      M = g(), G = r("div"), L = r("div");
      for (let X = 0; X < j.length; X += 1)
        j[X].c();
      U = g(), z = r("button"), z.textContent = "ALL_DATA", s(i, "class", "label svelte-1lyfvpm"), s(c, "class", "fas fa-coins spin svelte-1lyfvpm"), s(u, "class", "numbers"), s(m, "class", "unit"), s(o, "class", "value-box svelte-1lyfvpm"), s(t, "class", "wallet-display svelte-1lyfvpm"), s(h, "class", "svelte-1lyfvpm"), he(
        h,
        "active",
        /*activeTab*/
        l[5] === "mercado"
      ), s(w, "class", "svelte-1lyfvpm"), he(
        w,
        "active",
        /*activeTab*/
        l[5] === "inventario"
      ), s(v, "class", "cyber-tabs svelte-1lyfvpm"), s(e, "class", "hud-top svelte-1lyfvpm"), s(E, "class", "prompt svelte-1lyfvpm"), s(O, "type", "text"), s(O, "placeholder", "Search database..."), s(O, "spellcheck", "false"), s(O, "class", "svelte-1lyfvpm"), s(T, "class", "deco-line svelte-1lyfvpm"), s(y, "class", "input-group svelte-1lyfvpm"), D.__value = "Todas", x(D, D.__value), s(I, "class", "cyber-select svelte-1lyfvpm"), /*selectedRarity*/
      l[3] === void 0 && Ne(() => (
        /*select_change_handler*/
        l[36].call(I)
      )), s(A, "class", "command-bar svelte-1lyfvpm"), s(z, "class", "cyber-chip svelte-1lyfvpm"), he(
        z,
        "selected",
        /*selectedTag*/
        l[1] === "Todos"
      ), s(L, "class", "scroll-track svelte-1lyfvpm"), s(G, "class", "tags-row svelte-1lyfvpm");
    },
    m(X, K) {
      q(X, e, K), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), a(u, d), a(o, p), a(o, m), a(e, b), a(e, v), a(v, h), a(v, _), a(v, w), q(X, k, K), q(X, A, K), a(A, y), a(y, E), a(y, S), a(y, O), x(
        O,
        /*searchQuery*/
        l[2]
      ), a(y, C), a(y, T), a(A, N), a(A, I), a(I, D);
      for (let Z = 0; Z < V.length; Z += 1)
        V[Z] && V[Z].m(I, null);
      ot(
        I,
        /*selectedRarity*/
        l[3],
        !0
      ), q(X, M, K), q(X, G, K), a(G, L);
      for (let Z = 0; Z < j.length; Z += 1)
        j[Z] && j[Z].m(L, null);
      a(L, U), a(L, z), F || (W = [
        R(
          h,
          "click",
          /*click_handler_1*/
          l[33]
        ),
        R(
          w,
          "click",
          /*click_handler_2*/
          l[34]
        ),
        R(
          O,
          "input",
          /*input_input_handler*/
          l[35]
        ),
        R(
          I,
          "change",
          /*select_change_handler*/
          l[36]
        ),
        R(
          z,
          "click",
          /*click_handler_4*/
          l[38]
        )
      ], F = !0);
    },
    p(X, K) {
      if (K[0] & /*userCoins*/
      64 && te(
        d,
        /*userCoins*/
        X[6]
      ), K[0] & /*activeTab*/
      32 && he(
        h,
        "active",
        /*activeTab*/
        X[5] === "mercado"
      ), K[0] & /*activeTab*/
      32 && he(
        w,
        "active",
        /*activeTab*/
        X[5] === "inventario"
      ), K[0] & /*searchQuery*/
      4 && O.value !== /*searchQuery*/
      X[2] && x(
        O,
        /*searchQuery*/
        X[2]
      ), K[0] & /*RARITIES*/
      65536) {
        H = ce(
          /*RARITIES*/
          X[16]
        );
        let Z;
        for (Z = 0; Z < H.length; Z += 1) {
          const le = wf(X, H, Z);
          V[Z] ? V[Z].p(le, K) : (V[Z] = Ef(le), V[Z].c(), V[Z].m(I, null));
        }
        for (; Z < V.length; Z += 1)
          V[Z].d(1);
        V.length = H.length;
      }
      if (K[0] & /*selectedRarity, RARITIES*/
      65544 && ot(
        I,
        /*selectedRarity*/
        X[3]
      ), K[0] & /*selectedTag, TAGS*/
      32770) {
        J = ce(
          /*TAGS*/
          X[15]
        );
        let Z;
        for (Z = 0; Z < J.length; Z += 1) {
          const le = kf(X, J, Z);
          j[Z] ? j[Z].p(le, K) : (j[Z] = Of(le), j[Z].c(), j[Z].m(L, U));
        }
        for (; Z < j.length; Z += 1)
          j[Z].d(1);
        j.length = J.length;
      }
      K[0] & /*selectedTag*/
      2 && he(
        z,
        "selected",
        /*selectedTag*/
        X[1] === "Todos"
      );
    },
    d(X) {
      X && (P(e), P(k), P(A), P(M), P(G)), Fe(V, X), Fe(j, X), F = !1, Te(W);
    }
  };
}
function fg(l) {
  let e, t = (
    /*r*/
    l[50].toUpperCase() + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[50], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Ef(l) {
  let e, t = (
    /*r*/
    l[50] !== "Todas" && fg(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*r*/
      i[50] !== "Todas" && t.p(i, n);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function dg(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_3*/
      l[37](
        /*tag*/
        l[47]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = `${/*tag*/
      l[47].toUpperCase()}`, s(e, "class", "cyber-chip svelte-1lyfvpm"), he(
        e,
        "selected",
        /*selectedTag*/
        l[1] === /*tag*/
        l[47]
      );
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*selectedTag, TAGS*/
      32770 && he(
        e,
        "selected",
        /*selectedTag*/
        l[1] === /*tag*/
        l[47]
      );
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function Of(l) {
  let e, t = (
    /*tag*/
    l[47] !== "Todos" && dg(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*tag*/
      i[47] !== "Todos" && t.p(i, n);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function ug(l) {
  let e, t;
  return e = new og({
    props: { storeItems: (
      /*storeItems*/
      l[4]
    ) }
  }), e.$on(
    "refresh",
    /*refreshData*/
    l[17]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*storeItems*/
      16 && (o.storeItems = /*storeItems*/
      i[4]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function pg(l) {
  let e, t, i, n, o = ce(
    /*filteredInventoryItems*/
    l[10]
  ), c = [];
  for (let d = 0; d < o.length; d += 1)
    c[d] = If(gf(l, o, d));
  const f = (d) => Ae(c[d], 1, 1, () => {
    c[d] = null;
  });
  let u = (
    /*filteredInventoryItems*/
    l[10].length === 0 && Tf()
  );
  return {
    c() {
      e = r("div");
      for (let d = 0; d < c.length; d += 1)
        c[d].c();
      t = g(), u && u.c(), i = Pt(), s(e, "class", "items-grid svelte-1lyfvpm");
    },
    m(d, p) {
      q(d, e, p);
      for (let m = 0; m < c.length; m += 1)
        c[m] && c[m].m(e, null);
      q(d, t, p), u && u.m(d, p), q(d, i, p), n = !0;
    },
    p(d, p) {
      if (p[0] & /*filteredInventoryItems, openInventoryItem*/
      8389632) {
        o = ce(
          /*filteredInventoryItems*/
          d[10]
        );
        let m;
        for (m = 0; m < o.length; m += 1) {
          const b = gf(d, o, m);
          c[m] ? (c[m].p(b, p), ne(c[m], 1)) : (c[m] = If(b), c[m].c(), ne(c[m], 1), c[m].m(e, null));
        }
        for ($e(), m = o.length; m < c.length; m += 1)
          f(m);
        et();
      }
      /*filteredInventoryItems*/
      d[10].length === 0 ? u || (u = Tf(), u.c(), u.m(i.parentNode, i)) : u && (u.d(1), u = null);
    },
    i(d) {
      if (!n) {
        for (let p = 0; p < o.length; p += 1)
          ne(c[p]);
        n = !0;
      }
    },
    o(d) {
      c = c.filter(Boolean);
      for (let p = 0; p < c.length; p += 1)
        Ae(c[p]);
      n = !1;
    },
    d(d) {
      d && (P(e), P(t), P(i)), Fe(c, d), u && u.d(d);
    }
  };
}
function mg(l) {
  let e, t = [], i = /* @__PURE__ */ new Map(), n, o, c, f = ce(
    /*filteredStoreItems*/
    l[11]
  );
  const u = (p) => (
    /*item*/
    p[42].id
  );
  for (let p = 0; p < f.length; p += 1) {
    let m = _f(l, f, p), b = u(m);
    i.set(b, t[p] = Df(b, m));
  }
  let d = (
    /*filteredStoreItems*/
    l[11].length === 0 && Rf()
  );
  return {
    c() {
      e = r("div");
      for (let p = 0; p < t.length; p += 1)
        t[p].c();
      n = g(), d && d.c(), o = Pt(), s(e, "class", "items-grid svelte-1lyfvpm");
    },
    m(p, m) {
      q(p, e, m);
      for (let b = 0; b < t.length; b += 1)
        t[b] && t[b].m(e, null);
      q(p, n, m), d && d.m(p, m), q(p, o, m), c = !0;
    },
    p(p, m) {
      m[0] & /*filteredStoreItems, isGM, openShopItem*/
      4212736 && (f = ce(
        /*filteredStoreItems*/
        p[11]
      ), $e(), t = Tl(t, m, u, 1, p, f, i, e, Ya, Df, null, _f), et()), /*filteredStoreItems*/
      p[11].length === 0 ? d || (d = Rf(), d.c(), d.m(o.parentNode, o)) : d && (d.d(1), d = null);
    },
    i(p) {
      if (!c) {
        for (let m = 0; m < f.length; m += 1)
          ne(t[m]);
        c = !0;
      }
    },
    o(p) {
      for (let m = 0; m < t.length; m += 1)
        Ae(t[m]);
      c = !1;
    },
    d(p) {
      p && (P(e), P(n), P(o));
      for (let m = 0; m < t.length; m += 1)
        t[m].d();
      d && d.d(p);
    }
  };
}
function Sf(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<span class="blink svelte-1lyfvpm">RENDER_ACTIVE</span>', s(e, "class", "active-overlay svelte-1lyfvpm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Cf(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "PASSE_DATA", s(e, "class", "pass-tag-indicator svelte-1lyfvpm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function If(l) {
  let e, t, i, n, o, c;
  function f() {
    return (
      /*click_handler_6*/
      l[40](
        /*item*/
        l[42]
      )
    );
  }
  t = new hi({ props: { item: (
    /*item*/
    l[42]
  ) } }), t.$on("click", f);
  let u = (
    /*item*/
    l[42].active && Sf()
  ), d = (
    /*item*/
    l[42].isPassItem && Cf()
  );
  return {
    c() {
      e = r("div"), kt(t.$$.fragment), i = g(), u && u.c(), n = g(), d && d.c(), o = g(), s(e, "class", "inv-slot svelte-1lyfvpm"), he(
        e,
        "active",
        /*item*/
        l[42].active
      ), he(
        e,
        "pass-reward",
        /*item*/
        l[42].isPassItem
      );
    },
    m(p, m) {
      q(p, e, m), ht(t, e, null), a(e, i), u && u.m(e, null), a(e, n), d && d.m(e, null), a(e, o), c = !0;
    },
    p(p, m) {
      l = p;
      const b = {};
      m[0] & /*filteredInventoryItems*/
      1024 && (b.item = /*item*/
      l[42]), t.$set(b), /*item*/
      l[42].active ? u || (u = Sf(), u.c(), u.m(e, n)) : u && (u.d(1), u = null), /*item*/
      l[42].isPassItem ? d || (d = Cf(), d.c(), d.m(e, o)) : d && (d.d(1), d = null), (!c || m[0] & /*filteredInventoryItems*/
      1024) && he(
        e,
        "active",
        /*item*/
        l[42].active
      ), (!c || m[0] & /*filteredInventoryItems*/
      1024) && he(
        e,
        "pass-reward",
        /*item*/
        l[42].isPassItem
      );
    },
    i(p) {
      c || (ne(t.$$.fragment, p), c = !0);
    },
    o(p) {
      Ae(t.$$.fragment, p), c = !1;
    },
    d(p) {
      p && P(e), gt(t), u && u.d(), d && d.d();
    }
  };
}
function Tf(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "STORAGE_EMPTY", s(e, "class", "empty-state svelte-1lyfvpm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Df(l, e) {
  let t, i, n;
  function o() {
    return (
      /*click_handler_5*/
      e[39](
        /*item*/
        e[42]
      )
    );
  }
  return i = new hi({
    props: {
      item: (
        /*item*/
        e[42]
      ),
      isGM: (
        /*isGM*/
        e[14]
      )
    }
  }), i.$on("click", o), {
    key: l,
    first: null,
    c() {
      t = Pt(), kt(i.$$.fragment), this.first = t;
    },
    m(c, f) {
      q(c, t, f), ht(i, c, f), n = !0;
    },
    p(c, f) {
      e = c;
      const u = {};
      f[0] & /*filteredStoreItems*/
      2048 && (u.item = /*item*/
      e[42]), i.$set(u);
    },
    i(c) {
      n || (ne(i.$$.fragment, c), n = !0);
    },
    o(c) {
      Ae(i.$$.fragment, c), n = !1;
    },
    d(c) {
      c && P(t), gt(i, c);
    }
  };
}
function Rf(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "NO_DATA_FOUND", s(e, "class", "empty-state svelte-1lyfvpm");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function bg(l) {
  var se, Y;
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*actor*/
    (((Y = (se = l[0]) == null ? void 0 : se.name) == null ? void 0 : Y.toUpperCase()) || "UNKNOWN") + ""
  ), h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G = (
    /*filteredInventoryItems*/
    l[10].length + ""
  ), L, U, z, F, W, H, V, J, j = (
    /*selectedItem*/
    l[7] && yf(l)
  ), X = (
    /*isGM*/
    l[14] && cg(l)
  ), K = (
    /*activeTab*/
    l[5] !== "admin" && Af(l)
  );
  const Z = [mg, pg, ug], le = [];
  function $(Q, ie) {
    return (
      /*activeTab*/
      Q[5] === "mercado" ? 0 : (
        /*activeTab*/
        Q[5] === "inventario" ? 1 : (
          /*activeTab*/
          Q[5] === "admin" && /*isGM*/
          Q[14] ? 2 : -1
        )
      )
    );
  }
  return ~(O = $(l)) && (C = le[O] = Z[O](l)), {
    c() {
      j && j.c(), e = g(), t = r("div"), i = r("div"), n = g(), o = r("div"), c = g(), f = r("div"), u = g(), d = r("header"), p = r("div"), m = r("span"), m.textContent = ">", b = B(" SYSTEM_ROOT :: "), h = B(v), _ = g(), w = r("div"), X && X.c(), k = g(), A = r("button"), A.textContent = "[ X ]", y = g(), K && K.c(), E = g(), S = r("main"), C && C.c(), T = g(), N = r("footer"), I = r("div"), D = r("span"), M = B(" CONNECTION_STABLE :: "), L = B(G), U = B(" OBJECTS LOADED"), z = g(), F = r("div"), s(i, "class", "crt-lines svelte-1lyfvpm"), s(o, "class", "hex-grid svelte-1lyfvpm"), s(f, "class", "scanline svelte-1lyfvpm"), s(m, "class", "blinking-cursor svelte-1lyfvpm"), s(p, "class", "sys-info svelte-1lyfvpm"), s(A, "class", "close-btn svelte-1lyfvpm"), s(w, "class", "win-controls svelte-1lyfvpm"), s(d, "class", "svelte-1lyfvpm"), s(S, "class", "data-viewport svelte-1lyfvpm"), s(D, "class", "led svelte-1lyfvpm"), s(I, "class", "status-line"), s(F, "class", "deco-corner svelte-1lyfvpm"), s(N, "class", "svelte-1lyfvpm"), s(t, "class", "store-shell svelte-1lyfvpm"), ae(
        t,
        "left",
        /*pos*/
        l[9].x + "px"
      ), ae(
        t,
        "top",
        /*pos*/
        l[9].y + "px"
      ), ae(
        t,
        "--c-theme",
        /*themeColor*/
        l[12]
      );
    },
    m(Q, ie) {
      j && j.m(Q, ie), q(Q, e, ie), q(Q, t, ie), a(t, i), a(t, n), a(t, o), a(t, c), a(t, f), a(t, u), a(t, d), a(d, p), a(p, m), a(p, b), a(p, h), a(d, _), a(d, w), X && X.m(w, null), a(w, k), a(w, A), a(t, y), K && K.m(t, null), a(t, E), a(t, S), ~O && le[O].m(S, null), a(t, T), a(t, N), a(N, I), a(I, D), a(I, M), a(I, L), a(I, U), a(N, z), a(N, F), H = !0, V || (J = [
        R(
          window,
          "mousemove",
          /*onMove*/
          l[20]
        ),
        R(
          window,
          "mouseup",
          /*stopDrag*/
          l[19]
        ),
        R(
          A,
          "click",
          /*click_handler*/
          l[32]
        ),
        R(
          d,
          "mousedown",
          /*startDrag*/
          l[18]
        )
      ], V = !0);
    },
    p(Q, ie) {
      var pe, Ee;
      /*selectedItem*/
      Q[7] ? j ? (j.p(Q, ie), ie[0] & /*selectedItem*/
      128 && ne(j, 1)) : (j = yf(Q), j.c(), ne(j, 1), j.m(e.parentNode, e)) : j && ($e(), Ae(j, 1, 1, () => {
        j = null;
      }), et()), (!H || ie[0] & /*actor*/
      1) && v !== (v = /*actor*/
      (((Ee = (pe = Q[0]) == null ? void 0 : pe.name) == null ? void 0 : Ee.toUpperCase()) || "UNKNOWN") + "") && te(h, v), /*isGM*/
      Q[14] && X.p(Q, ie), /*activeTab*/
      Q[5] !== "admin" ? K ? K.p(Q, ie) : (K = Af(Q), K.c(), K.m(t, E)) : K && (K.d(1), K = null);
      let ee = O;
      O = $(Q), O === ee ? ~O && le[O].p(Q, ie) : (C && ($e(), Ae(le[ee], 1, 1, () => {
        le[ee] = null;
      }), et()), ~O ? (C = le[O], C ? C.p(Q, ie) : (C = le[O] = Z[O](Q), C.c()), ne(C, 1), C.m(S, null)) : C = null), (!H || ie[0] & /*filteredInventoryItems*/
      1024) && G !== (G = /*filteredInventoryItems*/
      Q[10].length + "") && te(L, G), (!H || ie[0] & /*pos*/
      512) && ae(
        t,
        "left",
        /*pos*/
        Q[9].x + "px"
      ), (!H || ie[0] & /*pos*/
      512) && ae(
        t,
        "top",
        /*pos*/
        Q[9].y + "px"
      ), (!H || ie[0] & /*themeColor*/
      4096) && ae(
        t,
        "--c-theme",
        /*themeColor*/
        Q[12]
      );
    },
    i(Q) {
      H || (ne(j), ne(C), Q && Ne(() => {
        H && (W || (W = We(t, Qe, {}, !0)), W.run(1));
      }), H = !0);
    },
    o(Q) {
      Ae(j), Ae(C), Q && (W || (W = We(t, Qe, {}, !1)), W.run(0)), H = !1;
    },
    d(Q) {
      Q && (P(e), P(t)), j && j.d(Q), X && X.d(), K && K.d(), ~O && le[O].d(), Q && W && W.end(), V = !1, Te(J);
    }
  };
}
const Mf = "multiversus-rpg";
function Ti(l) {
  if (!l) return null;
  const e = { ...l };
  return e.system || (e.system = {}), e.system.stock === void 0 && (e.system.stock = -1), e.system.description || (e.system.description = "Sem descri√ß√£o."), e.name || (e.name = "Item Desconhecido"), e.rarity || (e.rarity = "Comum"), e;
}
function vg(l, e, t) {
  let i, n, o, c, f, { actor: u } = e;
  const d = ml(), p = game.user.isGM, m = [
    "Todos",
    "Poder Principal",
    "Poder Secundario",
    "Habilidade Especial",
    "Hyper Stat",
    "Hyper Skill",
    "Item",
    "Veiculo",
    "Portais",
    "Bases",
    "Contatos",
    "Criaturas",
    "Origens",
    "Passe"
  ], b = ["Todas", "Comum", "Raro", "Lend√°rio", "M√≠tico", "Universal", "Multiversal"];
  let v = "mercado", h = "Todos", _ = "", w = "Todas", k = 0, A = [], y = [], E = null, S = "shop", O = { x: 150, y: 50 }, C = !1;
  qt(() => {
    rg.init(), _t.init && !game.settings.settings.has(`${Mf}.storeCatalog`) && _t.init(), T(), Hooks.on("storeUpdate", T), Hooks.on("updateUser", (Y) => {
      Y.id === game.user.id && T();
    });
  });
  function T() {
    const Y = _t.getStore() || [];
    t(4, A = Y.map(Ti).filter((ee) => ee));
    const Q = _t.getPlayerData(game.user.id);
    t(6, k = Q.coins || 0);
    const ie = Q.items || [];
    t(26, y = ie.map(Ti).filter((ee) => ee));
  }
  function N() {
    C = !0;
  }
  function I() {
    C = !1;
  }
  function D(Y) {
    C && (t(9, O.x += Y.movementX, O), t(9, O.y += Y.movementY, O));
  }
  function M() {
    t(5, v = v === "admin" ? "mercado" : "admin");
  }
  function G(Y) {
    t(7, E = Ti(Y)), t(8, S = "shop");
  }
  function L(Y) {
    t(7, E = Ti(Y)), t(8, S = "inventory");
  }
  async function U(Y) {
    if (!Y) return;
    const Q = await _t.buyItemLocal(Y);
    Q.success ? (ui.notifications.info(Q.msg), T(), t(7, E = null)) : ui.notifications.warn(Q.msg);
  }
  async function z(Y) {
    !Y || !Y.uniqueId || (await _t.toggleActivationLocal(Y.uniqueId), T(), t(7, E = null));
  }
  const F = () => t(7, E = null), W = (Y) => U(Y.detail), H = (Y) => z(Y.detail), V = () => d("close"), J = () => t(5, v = "mercado"), j = () => t(5, v = "inventario");
  function X() {
    _ = this.value, t(2, _);
  }
  function K() {
    w = Gt(this), t(3, w), t(16, b);
  }
  const Z = (Y) => t(1, h = Y), le = () => t(1, h = "Todos"), $ = (Y) => G(Y), se = (Y) => L(Y);
  return l.$$set = (Y) => {
    "actor" in Y && t(0, u = Y.actor);
  }, l.$$.update = () => {
    var Y;
    l.$$.dirty[0] & /*actor*/
    1 && t(28, i = ((Y = u == null ? void 0 : u.flags) == null ? void 0 : Y[Mf]) || {}), l.$$.dirty[0] & /*flags*/
    268435456 && t(12, n = (() => {
      const Q = i.theme || "green", ie = {
        green: "#00ff41",
        amber: "#ffcc00",
        blue: "#0088ff",
        red: "#ff3333"
      };
      return Q.startsWith("#") ? Q : ie[Q] || "#00ff41";
    })()), l.$$.dirty[0] & /*selectedTag, selectedRarity, searchQuery*/
    14 && t(27, o = (Q) => {
      if (!Q) return !1;
      const ie = Q.systemTag || "Item", ee = Q.rarity || "Comum";
      Q.isPassItem;
      const pe = h === "Todos" || ie === h, Ee = w === "Todas" || ee === w, De = _ === "" || Q.name && Q.name.toLowerCase().includes(_.toLowerCase());
      return pe && Ee && De;
    }), l.$$.dirty[0] & /*storeItems, checkFilter*/
    134217744 && t(11, c = A.filter(o)), l.$$.dirty[0] & /*inventoryItems, checkFilter*/
    201326592 && t(10, f = y.filter(o));
  }, [
    u,
    h,
    _,
    w,
    A,
    v,
    k,
    E,
    S,
    O,
    f,
    c,
    n,
    d,
    p,
    m,
    b,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    y,
    o,
    i,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se
  ];
}
class P0 extends mt {
  constructor(e) {
    super(), pt(this, e, vg, bg, dt, { actor: 0 }, null, [-1, -1]);
  }
}
function Nf(l, e, t) {
  const i = l.slice();
  return i[42] = e[t], i[43] = e, i[44] = t, i;
}
function Lf(l, e, t) {
  const i = l.slice();
  return i[36] = e[t], i;
}
function Pf(l, e, t) {
  const i = l.slice();
  return i[39] = e[t], i;
}
function qf(l, e, t) {
  const i = l.slice();
  return i[45] = e[t], i;
}
function Uf(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*allGroups*/
    l[5]
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = Gf(qf(l, u, p));
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "FILTRAGEM_DE_SQUAD", i = g(), n = r("select");
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      s(t, "class", "svelte-19m9xq8"), s(n, "class", "svelte-19m9xq8"), /*groupFilter*/
      l[4] === void 0 && Ne(() => (
        /*select_change_handler*/
        l[18].call(n)
      )), s(e, "class", "filter-panel svelte-19m9xq8");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, n);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(n, null);
      ot(
        n,
        /*groupFilter*/
        l[4],
        !0
      ), c || (f = R(
        n,
        "change",
        /*select_change_handler*/
        l[18]
      ), c = !0);
    },
    p(p, m) {
      if (m[0] & /*allGroups*/
      32) {
        u = ce(
          /*allGroups*/
          p[5]
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = qf(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = Gf(v), d[b].c(), d[b].m(n, null));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
      m[0] & /*groupFilter, allGroups*/
      48 && ot(
        n,
        /*groupFilter*/
        p[4]
      );
    },
    i(p) {
      p && (o || Ne(() => {
        o = st(e, Qe, {}), o.start();
      }));
    },
    o: ge,
    d(p) {
      p && P(e), Fe(d, p), c = !1, f();
    }
  };
}
function Gf(l) {
  let e, t = (
    /*g*/
    l[45] + ""
  ), i, n;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = n = /*g*/
      l[45], x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, i);
    },
    p(o, c) {
      c[0] & /*allGroups*/
      32 && t !== (t = /*g*/
      o[45] + "") && te(i, t), c[0] & /*allGroups*/
      32 && n !== (n = /*g*/
      o[45]) && (e.__value = n, x(e, e.__value));
    },
    d(o) {
      o && P(e);
    }
  };
}
function hg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie = ce(
    /*form*/
    l[0].traits
  ), ee = [];
  for (let Ee = 0; Ee < ie.length; Ee += 1)
    ee[Ee] = Hf(Nf(l, ie, Ee));
  const pe = (Ee) => Ae(ee[Ee], 1, 1, () => {
    ee[Ee] = null;
  });
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("div"), o = r("label"), o.textContent = "NOME_DA_RA√áA", c = r("input"), f = g(), u = r("div"), d = r("label"), d.textContent = "ICON", p = r("input"), m = g(), b = r("div"), v = r("label"), v.textContent = "TIPO_CUSTO", h = r("input"), _ = g(), w = r("label"), w.textContent = "ARQUIVO_HIST√ìRICO (HTML)", k = r("textarea"), A = g(), y = r("div"), E = r("label"), E.textContent = "MEC√ÇNICA_EXCLUSIVA", S = g(), O = r("input"), C = g(), T = r("textarea"), N = g(), I = r("div"), D = r("div"), M = r("label"), M.textContent = "TRAITS_GEN√âTICAS", G = r("button"), G.textContent = "+ ADICIONAR", L = g();
      for (let Ee = 0; Ee < ee.length; Ee += 1)
        ee[Ee].c();
      U = g(), z = r("label"), z.textContent = "PODERES_REGRAS (HTML)", F = r("textarea"), W = g(), H = r("div"), V = r("header"), J = r("span"), J.textContent = "KERNEL_BLUEPRINT.js", j = r("button"), j.textContent = "COPIAR_DADOS", X = g(), K = r("pre"), Z = r("code"), le = B(
        /*generatedCode*/
        l[8]
      ), s(c, "type", "text"), s(c, "class", "svelte-19m9xq8"), s(n, "class", "f-group svelte-19m9xq8"), s(p, "type", "text"), s(p, "class", "svelte-19m9xq8"), s(u, "class", "f-group mini svelte-19m9xq8"), s(h, "type", "text"), s(h, "class", "svelte-19m9xq8"), s(b, "class", "f-group svelte-19m9xq8"), s(i, "class", "form-row svelte-19m9xq8"), s(k, "class", "svelte-19m9xq8"), s(O, "type", "text"), s(O, "placeholder", "Nome..."), s(O, "class", "svelte-19m9xq8"), s(T, "placeholder", "Regras..."), s(T, "class", "svelte-19m9xq8"), s(y, "class", "sub-panel svelte-19m9xq8"), s(G, "class", "svelte-19m9xq8"), s(D, "class", "panel-header-btn svelte-19m9xq8"), s(I, "class", "sub-panel svelte-19m9xq8"), s(F, "class", "svelte-19m9xq8"), s(t, "class", "editor-pane svelte-19m9xq8"), s(j, "class", "copy-btn svelte-19m9xq8"), s(V, "class", "svelte-19m9xq8"), s(K, "class", "svelte-19m9xq8"), s(H, "class", "output-pane svelte-19m9xq8"), s(e, "class", "architect-view svelte-19m9xq8");
    },
    m(Ee, De) {
      q(Ee, e, De), a(e, t), a(t, i), a(i, n), a(n, o), a(n, c), x(
        c,
        /*form*/
        l[0].name
      ), a(i, f), a(i, u), a(u, d), a(u, p), x(
        p,
        /*form*/
        l[0].icon
      ), a(i, m), a(i, b), a(b, v), a(b, h), x(
        h,
        /*form*/
        l[0].type
      ), a(t, _), a(t, w), a(t, k), x(
        k,
        /*form*/
        l[0].desc
      ), a(t, A), a(t, y), a(y, E), a(y, S), a(y, O), x(
        O,
        /*form*/
        l[0].mechName
      ), a(y, C), a(y, T), x(
        T,
        /*form*/
        l[0].mechDesc
      ), a(t, N), a(t, I), a(I, D), a(D, M), a(D, G), a(I, L);
      for (let we = 0; we < ee.length; we += 1)
        ee[we] && ee[we].m(I, null);
      a(t, U), a(t, z), a(t, F), x(
        F,
        /*form*/
        l[0].powers
      ), a(e, W), a(e, H), a(H, V), a(V, J), a(V, j), a(H, X), a(H, K), a(K, Z), a(Z, le), se = !0, Y || (Q = [
        R(
          c,
          "input",
          /*input0_input_handler*/
          l[24]
        ),
        R(
          p,
          "input",
          /*input1_input_handler*/
          l[25]
        ),
        R(
          h,
          "input",
          /*input2_input_handler*/
          l[26]
        ),
        R(
          k,
          "input",
          /*textarea0_input_handler*/
          l[27]
        ),
        R(
          O,
          "input",
          /*input3_input_handler*/
          l[28]
        ),
        R(
          T,
          "input",
          /*textarea1_input_handler*/
          l[29]
        ),
        R(
          G,
          "click",
          /*addTrait*/
          l[12]
        ),
        R(
          F,
          "input",
          /*textarea2_input_handler*/
          l[33]
        ),
        R(
          j,
          "click",
          /*copyCode*/
          l[14]
        )
      ], Y = !0);
    },
    p(Ee, De) {
      if (De[0] & /*form*/
      1 && c.value !== /*form*/
      Ee[0].name && x(
        c,
        /*form*/
        Ee[0].name
      ), De[0] & /*form*/
      1 && p.value !== /*form*/
      Ee[0].icon && x(
        p,
        /*form*/
        Ee[0].icon
      ), De[0] & /*form*/
      1 && h.value !== /*form*/
      Ee[0].type && x(
        h,
        /*form*/
        Ee[0].type
      ), De[0] & /*form*/
      1 && x(
        k,
        /*form*/
        Ee[0].desc
      ), De[0] & /*form*/
      1 && O.value !== /*form*/
      Ee[0].mechName && x(
        O,
        /*form*/
        Ee[0].mechName
      ), De[0] & /*form*/
      1 && x(
        T,
        /*form*/
        Ee[0].mechDesc
      ), De[0] & /*removeTrait, form*/
      8193) {
        ie = ce(
          /*form*/
          Ee[0].traits
        );
        let we;
        for (we = 0; we < ie.length; we += 1) {
          const ke = Nf(Ee, ie, we);
          ee[we] ? (ee[we].p(ke, De), ne(ee[we], 1)) : (ee[we] = Hf(ke), ee[we].c(), ne(ee[we], 1), ee[we].m(I, null));
        }
        for ($e(), we = ie.length; we < ee.length; we += 1)
          pe(we);
        et();
      }
      De[0] & /*form*/
      1 && x(
        F,
        /*form*/
        Ee[0].powers
      ), (!se || De[0] & /*generatedCode*/
      256) && te(
        le,
        /*generatedCode*/
        Ee[8]
      );
    },
    i(Ee) {
      if (!se) {
        for (let De = 0; De < ie.length; De += 1)
          ne(ee[De]);
        Ee && ($ || Ne(() => {
          $ = st(e, Qe, {}), $.start();
        })), se = !0;
      }
    },
    o(Ee) {
      ee = ee.filter(Boolean);
      for (let De = 0; De < ee.length; De += 1)
        Ae(ee[De]);
      se = !1;
    },
    d(Ee) {
      Ee && P(e), Fe(ee, Ee), Y = !1, Te(Q);
    }
  };
}
function gg(l) {
  let e, t, i, n, o, c = ce(
    /*users*/
    l[1]
  ), f = [];
  for (let u = 0; u < c.length; u += 1)
    f[u] = Ff(Lf(l, c, u));
  return {
    c() {
      e = r("div"), t = r("header"), t.innerHTML = "<span>AGENTES_IDENTIFICADOS_NO_SISTEMA</span>", i = g(), n = r("div");
      for (let u = 0; u < f.length; u += 1)
        f[u].c();
      s(t, "class", "view-header svelte-19m9xq8"), s(n, "class", "dossier-grid svelte-19m9xq8"), s(e, "class", "dossier-view svelte-19m9xq8");
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(e, i), a(e, n);
      for (let p = 0; p < f.length; p += 1)
        f[p] && f[p].m(n, null);
    },
    p(u, d) {
      if (d[0] & /*users, setOrigin, originList, saveGroup, newGroupName, editingGroupUser, changeGroup, groupFilter*/
      3798) {
        c = ce(
          /*users*/
          u[1]
        );
        let p;
        for (p = 0; p < c.length; p += 1) {
          const m = Lf(u, c, p);
          f[p] ? f[p].p(m, d) : (f[p] = Ff(m), f[p].c(), f[p].m(n, null));
        }
        for (; p < f.length; p += 1)
          f[p].d(1);
        f.length = c.length;
      }
    },
    i(u) {
      u && (o || Ne(() => {
        o = st(e, Qe, {}), o.start();
      }));
    },
    o: ge,
    d(u) {
      u && P(e), Fe(f, u);
    }
  };
}
function Hf(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  function b() {
    l[30].call(
      t,
      /*each_value_2*/
      l[43],
      /*i*/
      l[44]
    );
  }
  function v() {
    l[31].call(
      n,
      /*each_value_2*/
      l[43],
      /*i*/
      l[44]
    );
  }
  function h() {
    return (
      /*click_handler_4*/
      l[32](
        /*i*/
        l[44]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("input"), o = g(), c = r("button"), c.textContent = "X", f = g(), s(t, "type", "text"), s(t, "placeholder", "Nome"), s(t, "class", "svelte-19m9xq8"), s(n, "type", "text"), s(n, "placeholder", "Efeito"), s(n, "class", "svelte-19m9xq8"), s(c, "class", "del-btn svelte-19m9xq8"), s(e, "class", "trait-row svelte-19m9xq8");
    },
    m(_, w) {
      q(_, e, w), a(e, t), x(
        t,
        /*t*/
        l[42].name
      ), a(e, i), a(e, n), x(
        n,
        /*t*/
        l[42].effect
      ), a(e, o), a(e, c), a(e, f), d = !0, p || (m = [
        R(t, "input", b),
        R(n, "input", v),
        R(c, "click", h)
      ], p = !0);
    },
    p(_, w) {
      l = _, w[0] & /*form*/
      1 && t.value !== /*t*/
      l[42].name && x(
        t,
        /*t*/
        l[42].name
      ), w[0] & /*form*/
      1 && n.value !== /*t*/
      l[42].effect && x(
        n,
        /*t*/
        l[42].effect
      );
    },
    i(_) {
      d || (_ && Ne(() => {
        d && (u || (u = We(e, yt, {}, !0)), u.run(1));
      }), d = !0);
    },
    o(_) {
      _ && (u || (u = We(e, yt, {}, !1)), u.run(0)), d = !1;
    },
    d(_) {
      _ && P(e), _ && u && u.end(), p = !1, Te(m);
    }
  };
}
function zf(l) {
  let e, t, i, n, o, c, f, u, d, p = (
    /*u*/
    l[36].name.toUpperCase() + ""
  ), m, b, v, h, _, w = (
    /*u*/
    l[36].origin.icon + ""
  ), k, A, y = (
    /*u*/
    l[36].origin.name + ""
  ), E, S, O, C, T = (
    /*u*/
    l[36].origin.type + ""
  ), N, I, D, M, G, L, U, z, F, W, H;
  const V = [kg, _g], J = [];
  function j(le, $) {
    return (
      /*editingGroupUser*/
      le[6] === /*u*/
      le[36].id ? 0 : 1
    );
  }
  o = j(l), c = J[o] = V[o](l);
  let X = ce(
    /*originList*/
    l[2]
  ), K = [];
  for (let le = 0; le < X.length; le += 1)
    K[le] = Bf(Pf(l, X, le));
  function Z(...le) {
    return (
      /*change_handler*/
      l[23](
        /*u*/
        l[36],
        ...le
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.innerHTML = '<i class="fas fa-fingerprint"></i>', n = g(), c.c(), f = g(), u = r("div"), d = r("span"), m = B(p), b = g(), v = r("div"), h = r("span"), _ = g(), k = B(w), A = g(), E = B(y), S = g(), O = r("small"), C = B("["), N = B(T), I = B("]"), D = g(), M = r("div"), G = r("label"), G.textContent = "MODIFICAR_C√ìDIGO_GEN√âTICO", L = g(), U = r("select");
      for (let le = 0; le < K.length; le += 1)
        K[le].c();
      F = g(), s(i, "class", "id-icon svelte-19m9xq8"), s(t, "class", "card-identity svelte-19m9xq8"), s(d, "class", "agent-name svelte-19m9xq8"), s(h, "class", "orb svelte-19m9xq8"), ae(h, "background", "var(--c-primary)"), s(O, "class", "svelte-19m9xq8"), s(v, "class", "current-origin svelte-19m9xq8"), s(u, "class", "card-info svelte-19m9xq8"), s(G, "class", "svelte-19m9xq8"), s(U, "class", "svelte-19m9xq8"), s(M, "class", "card-select svelte-19m9xq8"), s(e, "class", "dossier-card svelte-19m9xq8"), ae(e, "border-left", "6px solid " + /*u*/
      l[36].color);
    },
    m(le, $) {
      q(le, e, $), a(e, t), a(t, i), a(t, n), J[o].m(t, null), a(e, f), a(e, u), a(u, d), a(d, m), a(u, b), a(u, v), a(v, h), a(v, _), a(v, k), a(v, A), a(v, E), a(v, S), a(v, O), a(O, C), a(O, N), a(O, I), a(e, D), a(e, M), a(M, G), a(M, L), a(M, U);
      for (let se = 0; se < K.length; se += 1)
        K[se] && K[se].m(U, null);
      ot(
        U,
        /*u*/
        l[36].origin.id
      ), a(e, F), W || (H = R(U, "change", Z), W = !0);
    },
    p(le, $) {
      l = le;
      let se = o;
      if (o = j(l), o === se ? J[o].p(l, $) : ($e(), Ae(J[se], 1, 1, () => {
        J[se] = null;
      }), et(), c = J[o], c ? c.p(l, $) : (c = J[o] = V[o](l), c.c()), ne(c, 1), c.m(t, null)), $[0] & /*users*/
      2 && p !== (p = /*u*/
      l[36].name.toUpperCase() + "") && te(m, p), $[0] & /*users*/
      2 && w !== (w = /*u*/
      l[36].origin.icon + "") && te(k, w), $[0] & /*users*/
      2 && y !== (y = /*u*/
      l[36].origin.name + "") && te(E, y), $[0] & /*users*/
      2 && T !== (T = /*u*/
      l[36].origin.type + "") && te(N, T), $[0] & /*originList*/
      4) {
        X = ce(
          /*originList*/
          l[2]
        );
        let Y;
        for (Y = 0; Y < X.length; Y += 1) {
          const Q = Pf(l, X, Y);
          K[Y] ? K[Y].p(Q, $) : (K[Y] = Bf(Q), K[Y].c(), K[Y].m(U, null));
        }
        for (; Y < K.length; Y += 1)
          K[Y].d(1);
        K.length = X.length;
      }
      $[0] & /*users, originList*/
      6 && z !== (z = /*u*/
      l[36].origin.id) && ot(
        U,
        /*u*/
        l[36].origin.id
      ), $[0] & /*users*/
      2 && ae(e, "border-left", "6px solid " + /*u*/
      l[36].color);
    },
    d(le) {
      le && P(e), J[o].d(), Fe(K, le), W = !1, H();
    }
  };
}
function _g(l) {
  let e, t = (
    /*u*/
    l[36].group + ""
  ), i, n, o;
  function c() {
    return (
      /*click_handler_3*/
      l[22](
        /*u*/
        l[36]
      )
    );
  }
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "unit-tag svelte-19m9xq8"), s(e, "title", "Clique para editar grupo");
    },
    m(f, u) {
      q(f, e, u), a(e, i), n || (o = R(e, "click", c), n = !0);
    },
    p(f, u) {
      l = f, u[0] & /*users*/
      2 && t !== (t = /*u*/
      l[36].group + "") && te(i, t);
    },
    i: ge,
    o: ge,
    d(f) {
      f && P(e), n = !1, o();
    }
  };
}
function kg(l) {
  let e, t, i, n, o, c, f, u;
  function d(...m) {
    return (
      /*keypress_handler*/
      l[20](
        /*u*/
        l[36],
        ...m
      )
    );
  }
  function p() {
    return (
      /*click_handler_2*/
      l[21](
        /*u*/
        l[36]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("button"), n.textContent = "OK", s(t, "type", "text"), s(t, "class", "svelte-19m9xq8"), s(n, "class", "svelte-19m9xq8"), s(e, "class", "group-editor svelte-19m9xq8");
    },
    m(m, b) {
      q(m, e, b), a(e, t), x(
        t,
        /*newGroupName*/
        l[7]
      ), a(e, i), a(e, n), c = !0, f || (u = [
        R(
          t,
          "input",
          /*input_input_handler*/
          l[19]
        ),
        R(t, "keypress", d),
        R(n, "click", p)
      ], f = !0);
    },
    p(m, b) {
      l = m, b[0] & /*newGroupName*/
      128 && t.value !== /*newGroupName*/
      l[7] && x(
        t,
        /*newGroupName*/
        l[7]
      );
    },
    i(m) {
      c || (m && Ne(() => {
        c && (o || (o = We(e, yt, { axis: "y" }, !0)), o.run(1));
      }), c = !0);
    },
    o(m) {
      m && (o || (o = We(e, yt, { axis: "y" }, !1)), o.run(0)), c = !1;
    },
    d(m) {
      m && P(e), m && o && o.end(), f = !1, Te(u);
    }
  };
}
function Bf(l) {
  let e, t = (
    /*org*/
    l[39].icon + ""
  ), i, n, o = (
    /*org*/
    l[39].name + ""
  ), c, f;
  return {
    c() {
      e = r("option"), i = B(t), n = g(), c = B(o), e.__value = f = /*org*/
      l[39].id, x(e, e.__value);
    },
    m(u, d) {
      q(u, e, d), a(e, i), a(e, n), a(e, c);
    },
    p(u, d) {
      d[0] & /*originList*/
      4 && t !== (t = /*org*/
      u[39].icon + "") && te(i, t), d[0] & /*originList*/
      4 && o !== (o = /*org*/
      u[39].name + "") && te(c, o), d[0] & /*originList*/
      4 && f !== (f = /*org*/
      u[39].id) && (e.__value = f, x(e, e.__value));
    },
    d(u) {
      u && P(e);
    }
  };
}
function Ff(l) {
  let e, t = (
    /*groupFilter*/
    (l[4] === "Todos" || /*u*/
    l[36].group === /*groupFilter*/
    l[4]) && zf(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*groupFilter*/
      i[4] === "Todos" || /*u*/
      i[36].group === /*groupFilter*/
      i[4] ? t ? t.p(i, n) : (t = zf(i), t.c(), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function wg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y = (
    /*currentTab*/
    l[3] === "manage" && Uf(l)
  );
  const E = [gg, hg], S = [];
  function O(C, T) {
    return (
      /*currentTab*/
      C[3] === "manage" ? 0 : 1
    );
  }
  return h = O(l), _ = S[h] = E[h](l), {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), i.innerHTML = '<i class="fas fa-dna"></i> <h3>GENETIC_HUB</h3>', n = g(), o = r("nav"), c = r("button"), c.innerHTML = '<i class="fas fa-users-cog"></i> GEST√ÉO_AGENTES', f = g(), u = r("button"), u.innerHTML = '<i class="fas fa-microchip"></i> ARQUITETO_CODE', d = g(), y && y.c(), p = g(), m = r("div"), m.innerHTML = '<small>KERNEL_LINK: STABLE</small><div class="blink-dot svelte-19m9xq8"></div>', b = g(), v = r("main"), _.c(), s(i, "class", "sidebar-header svelte-19m9xq8"), s(c, "class", "svelte-19m9xq8"), he(
        c,
        "active",
        /*currentTab*/
        l[3] === "manage"
      ), s(u, "class", "svelte-19m9xq8"), he(
        u,
        "active",
        /*currentTab*/
        l[3] === "architect"
      ), s(o, "class", "nav-menu svelte-19m9xq8"), s(m, "class", "system-footer svelte-19m9xq8"), s(t, "class", "command-sidebar svelte-19m9xq8"), s(v, "class", "content-area svelte-19m9xq8"), s(e, "class", "tactical-origin-interface svelte-19m9xq8");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), a(t, d), y && y.m(t, null), a(t, p), a(t, m), a(e, b), a(e, v), S[h].m(v, null), w = !0, k || (A = [
        R(
          c,
          "click",
          /*click_handler*/
          l[16]
        ),
        R(
          u,
          "click",
          /*click_handler_1*/
          l[17]
        )
      ], k = !0);
    },
    p(C, T) {
      (!w || T[0] & /*currentTab*/
      8) && he(
        c,
        "active",
        /*currentTab*/
        C[3] === "manage"
      ), (!w || T[0] & /*currentTab*/
      8) && he(
        u,
        "active",
        /*currentTab*/
        C[3] === "architect"
      ), /*currentTab*/
      C[3] === "manage" ? y ? (y.p(C, T), T[0] & /*currentTab*/
      8 && ne(y, 1)) : (y = Uf(C), y.c(), ne(y, 1), y.m(t, p)) : y && (y.d(1), y = null);
      let N = h;
      h = O(C), h === N ? S[h].p(C, T) : ($e(), Ae(S[N], 1, 1, () => {
        S[N] = null;
      }), et(), _ = S[h], _ ? _.p(C, T) : (_ = S[h] = E[h](C), _.c()), ne(_, 1), _.m(v, null));
    },
    i(C) {
      w || (ne(y), ne(_), w = !0);
    },
    o(C) {
      Ae(_), w = !1;
    },
    d(C) {
      C && P(e), y && y.d(), S[h].d(), k = !1, Te(A);
    }
  };
}
function yg(l, e, t) {
  let i, n, o = [], c = [], f = {}, u = "manage", d = "Todos", p = ["Todos", "Sem Grupo"], m = null, b = "", v = {
    name: "Nova Ra√ßa",
    icon: "üß¨",
    type: "M√≠tico (80+)",
    desc: "<p>Hist√≥ria aqui...</p>",
    mechName: "Mec√¢nica",
    mechDesc: "<p>Regras aqui...</p>",
    traits: [{ name: "Trait 1", effect: "Efeito..." }],
    powers: "<h3>Poderes Aqui</h3>"
  };
  qt(async () => {
    await h(), Hooks.on("updateUser", h), Hooks.on("updateActor", h);
  });
  async function h() {
    f = await I0.load(), t(2, c = Object.values(f));
    const X = game.users.filter((Z) => !Z.isGM);
    t(1, o = X.map((Z) => {
      const le = $l.getPlayerData(Z.id), $ = Z.character, se = $ == null ? void 0 : $.getFlag("multiversus-rpg", "origin"), Y = Z.getFlag("multiversus-rpg", "origin"), Q = se || Y || "humano";
      return {
        id: Z.id,
        name: Z.name,
        color: Z.color,
        actorId: $ == null ? void 0 : $.id,
        // Guarda ID do ator para update
        group: le.group || "Sem Grupo",
        origin: f[Q] || f.humano
      };
    }));
    const K = /* @__PURE__ */ new Set(["Todos", "Sem Grupo"]);
    o.forEach((Z) => K.add(Z.group)), t(5, p = Array.from(K));
  }
  async function _(X, K) {
    const Z = game.users.get(X);
    Z && (await Z.setFlag("multiversus-rpg", "origin", K), Z.character ? (await Z.character.update({ "flags.multiversus-rpg.origin": K }), ui.notifications.info(`Origem de ${Z.name} atualizada para ${K}`)) : ui.notifications.warn(`Origem salva no usu√°rio ${Z.name}, mas ele n√£o tem personagem vinculado.`), h());
  }
  function w(X) {
    t(6, m = X.id), t(7, b = X.group);
  }
  async function k(X) {
    await $l.setGroup(X, b), t(6, m = null), h();
  }
  function A() {
    t(0, v.traits = [...v.traits, { name: "", effect: "" }], v);
  }
  function y(X) {
    t(0, v.traits = v.traits.filter((K, Z) => Z !== X), v);
  }
  function E() {
    navigator.clipboard.writeText(n), ui.notifications.info("C√ìDIGO COPIADO.");
  }
  const S = () => t(3, u = "manage"), O = () => t(3, u = "architect");
  function C() {
    d = Gt(this), t(4, d), t(5, p);
  }
  function T() {
    b = this.value, t(7, b);
  }
  const N = (X, K) => K.key === "Enter" && k(X.id), I = (X) => k(X.id), D = (X) => w(X), M = (X, K) => _(X.id, K.target.value);
  function G() {
    v.name = this.value, t(0, v);
  }
  function L() {
    v.icon = this.value, t(0, v);
  }
  function U() {
    v.type = this.value, t(0, v);
  }
  function z() {
    v.desc = this.value, t(0, v);
  }
  function F() {
    v.mechName = this.value, t(0, v);
  }
  function W() {
    v.mechDesc = this.value, t(0, v);
  }
  function H(X, K) {
    X[K].name = this.value, t(0, v);
  }
  function V(X, K) {
    X[K].effect = this.value, t(0, v);
  }
  const J = (X) => y(X);
  function j() {
    v.powers = this.value, t(0, v);
  }
  return l.$$.update = () => {
    l.$$.dirty[0] & /*form*/
    1 && t(15, i = v.name.toLowerCase().normalize("NFD").replace(/[\u0300-\u036f]/g, "").replace(/[^a-z0-9]/g, "-")), l.$$.dirty[0] & /*safeID, form*/
    32769 && t(8, n = `    "${i}": {
        id: "${i}",
        name: "${v.name}",
        icon: "${v.icon}",
        type: "${v.type}",
        desc: \`${v.desc}\`,
        mechanic: { name: "${v.mechName}", desc: \`${v.mechDesc}\` },
        traits: [
${v.traits.map((X) => `            { name: "${X.name}", effect: "${X.effect}" }`).join(`,
`)}
        ],
        powers: \`${v.powers}\`
    },`);
  }, [
    v,
    o,
    c,
    u,
    d,
    p,
    m,
    b,
    n,
    _,
    w,
    k,
    A,
    y,
    E,
    i,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j
  ];
}
class Ag extends mt {
  constructor(e) {
    super(), pt(this, e, yg, wg, dt, {}, null, [-1, -1]);
  }
}
function jf(l, e, t) {
  const i = l.slice();
  return i[20] = e[t], i;
}
function Vf(l) {
  let e, t, i = (
    /*msg*/
    l[20].text + ""
  ), n;
  return {
    c() {
      e = r("div"), t = r("div"), s(t, "class", "bubble svelte-af29pp"), s(e, "class", n = "msg-row " + /*msg*/
      l[20].role + " svelte-af29pp");
    },
    m(o, c) {
      q(o, e, c), a(e, t), t.innerHTML = i;
    },
    p(o, c) {
      c & /*chatHistory*/
      1 && i !== (i = /*msg*/
      o[20].text + "") && (t.innerHTML = i), c & /*chatHistory*/
      1 && n !== (n = "msg-row " + /*msg*/
      o[20].role + " svelte-af29pp") && s(e, "class", n);
    },
    d(o) {
      o && P(e);
    }
  };
}
function Eg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _ = ce(
    /*chatHistory*/
    l[0]
  ), w = [];
  for (let k = 0; k < _.length; k += 1)
    w[k] = Vf(jf(l, _, k));
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), i.innerHTML = '<span class="led svelte-af29pp"></span> ORACLE', n = g(), o = r("button"), o.innerHTML = '<i class="fas fa-trash"></i>', c = g(), f = r("div");
      for (let k = 0; k < w.length; k += 1)
        w[k].c();
      u = g(), d = r("div"), p = r("input"), m = g(), b = r("button"), b.innerHTML = '<i class="fas fa-terminal"></i>', s(i, "class", "status-indicator svelte-af29pp"), s(o, "class", "btn-clear svelte-af29pp"), s(t, "class", "oracle-header svelte-af29pp"), s(f, "class", "chat-display svelte-af29pp"), s(p, "type", "text"), s(p, "placeholder", "..."), s(p, "class", "svelte-af29pp"), s(b, "class", "svelte-af29pp"), s(d, "class", "input-area svelte-af29pp"), s(e, "class", "oracle-container svelte-af29pp");
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, i), a(t, n), a(t, o), a(e, c), a(e, f);
      for (let y = 0; y < w.length; y += 1)
        w[y] && w[y].m(f, null);
      l[6](f), a(e, u), a(e, d), a(d, p), x(
        p,
        /*userInput*/
        l[1]
      ), a(d, m), a(d, b), v || (h = [
        R(
          o,
          "click",
          /*clearMemory*/
          l[4]
        ),
        R(
          p,
          "input",
          /*input_input_handler*/
          l[7]
        ),
        R(
          p,
          "keydown",
          /*keydown_handler*/
          l[8]
        ),
        R(
          b,
          "click",
          /*processInput*/
          l[3]
        )
      ], v = !0);
    },
    p(k, [A]) {
      if (A & /*chatHistory*/
      1) {
        _ = ce(
          /*chatHistory*/
          k[0]
        );
        let y;
        for (y = 0; y < _.length; y += 1) {
          const E = jf(k, _, y);
          w[y] ? w[y].p(E, A) : (w[y] = Vf(E), w[y].c(), w[y].m(f, null));
        }
        for (; y < w.length; y += 1)
          w[y].d(1);
        w.length = _.length;
      }
      A & /*userInput*/
      2 && p.value !== /*userInput*/
      k[1] && x(
        p,
        /*userInput*/
        k[1]
      );
    },
    i: ge,
    o: ge,
    d(k) {
      k && P(e), Fe(w, k), l[6](null), v = !1, Te(h);
    }
  };
}
const aa = "multiversus-rpg", xi = "oracle_history_final";
function $i(l) {
  if (!l) return "";
  try {
    const e = document.createElement("DIV");
    return e.innerHTML = l, (e.textContent || e.innerText || "").trim();
  } catch {
    return "";
  }
}
function Og(l, e, t) {
  let { actor: i } = e, n = [], o = "", c;
  async function f() {
    await pi(), c && t(2, c.scrollTop = c.scrollHeight, c);
  }
  qt(async () => {
    try {
      let C = game.user.getFlag(aa, xi);
      C && Array.isArray(C) ? t(0, n = C) : m("model", `<div class="sys-init">ORACLE NET v7.1 ONLINE<br>ID: ${game.user.name}</div>`), await f();
    } catch {
      console.log("Resetando...");
    }
    if (game.socket.on(`module.${aa}`, async (C) => {
      if (C.type === "EXECUTE_SCRIPT") {
        if (C.targets && Array.isArray(C.targets) && !C.targets.includes(game.user.id))
          return;
        console.log("Oracle Network: Script recebido."), ui.notifications.info("‚ö†Ô∏è Oracle: Recebendo dados do Mestre..."), await p(C.code, C.args || "");
      }
    }), game.user.isGM) {
      if (payload.type === "PLAYER_DB_SAVE") {
        console.log(`Oracle Server: Salvando entrada de ${payload.entry.author}...`);
        const { PlayerDatabase: C } = await Promise.resolve().then(() => fs);
        await C.saveEntry(payload.entry), game.socket.emit(`module.${aa}`, { type: "PLAYER_DB_UPDATE_NOTIFY" }), ui.notifications.info("Oracle: Nova entrada de jogador salva.");
      }
      if (payload.type === "PLAYER_DB_DELETE") {
        const { PlayerDatabase: C } = await Promise.resolve().then(() => fs);
        await C.deleteEntry(payload.id), game.socket.emit(`module.${aa}`, { type: "PLAYER_DB_UPDATE_NOTIFY" });
      }
    }
    payload.type === "PLAYER_DB_UPDATE_NOTIFY" && Hooks.callAll("nexusUpdate");
  });
  async function u() {
    if (!o.trim()) return;
    const C = o.trim();
    m("user", C), t(1, o = ""), await pi(), y(), await new Promise((D) => setTimeout(D, 100));
    const T = C.toLowerCase(), I = C.split(" ")[0].toLowerCase();
    if (["ajuda", "help", "?"].includes(I)) {
      A();
      return;
    }
    if (["limpar", "cls"].includes(I)) {
      b();
      return;
    }
    if (!await d(C)) {
      if (T.includes("vida") || T.includes("hp")) {
        v();
        return;
      }
      if (T.includes("xp") || T.includes("dinheiro")) {
        h();
        return;
      }
      (T.includes("rolar") || T.includes("teste")) && k(T) || _(C) || w(C) || m("error", `Comando desconhecido: "<b>${I}</b>"`);
    }
  }
  async function d(C) {
    try {
      const T = al.getAll(), N = C.split(" "), I = N[0].toLowerCase(), D = N.slice(1).join(" "), M = T.find((G) => G.name.toLowerCase() === I);
      if (M) {
        if (M.type === "Script")
          return ui.notifications.info(`‚öôÔ∏è Executando: ${M.name}`), await p(M.description, D), !0;
        if (["Sistema", "Instru√ß√µes", "Anota√ß√µes"].includes(M.type)) {
          let G = $i(M.description);
          const L = G.match(/\[\[(.*?)\]\]/);
          return L ? (G = G.replace(L[0], ""), m("model", `<div class="system-msg"><b>${M.name}</b><br>${G}<hr><em>Rolando: ${L[1]}</em></div>`), !0) : (m("model", `<div class="system-msg"><b>${M.name}:</b><br>${G}</div>`), !0);
        }
      }
    } catch (T) {
      console.error(T);
    }
    return !1;
  }
  async function p(C, T) {
    const N = C.replace(/&nbsp;/g, " ").replace(/&lt;/g, "<").replace(/&gt;/g, ">").replace(/&amp;/g, "&");
    try {
      const I = Object.getPrototypeOf(async function() {
      }).constructor, D = new I("actor", "game", "ui", "canvas", "NexusDatabase", "args", "render", "chatContainer", "socket", N), M = (L) => m("model", L), G = {
        emit: (L, U) => game.socket.emit(`module.${aa}`, { type: L, ...U })
      };
      await D(i, game, ui, canvas, al, T, M, c, G);
    } catch (I) {
      m("error", `ERRO DE SCRIPT: ${I.message}`);
    }
  }
  function m(C, T) {
    t(0, n = [...n, { role: C, text: T }]), game.user.setFlag(aa, xi, n.slice(-30)), f();
  }
  async function b() {
    t(0, n = []), await game.user.unsetFlag(aa, xi), m("model", "Terminal limpo.");
  }
  function v() {
    var N;
    const C = ((N = i == null ? void 0 : i.system) == null ? void 0 : N.health) || { value: 0, max: 1 }, T = Math.min(100, Math.max(0, C.value / (C.max || 1) * 100));
    m("model", `<div class="status-card"><div class="status-title">STATUS</div><div class="hp-text">${C.value}/${C.max}</div><div class="bar-bg"><div class="bar-fill" style="width: ${T}%"></div></div></div>`);
  }
  function h() {
    var N, I;
    const C = ((N = i == null ? void 0 : i.getFlag(aa, "playerData")) == null ? void 0 : N.coins) || 0, T = ((I = i == null ? void 0 : i.system) == null ? void 0 : I.spentXP) || 0;
    m("model", `<div class="res-block"><div>XP: <b>${T}</b></div><div>$: <b>${C}</b></div></div>`);
  }
  function _(C) {
    var N;
    if (!i) return !1;
    const T = i.items.find((I) => I.name.toLowerCase().includes(C.toLowerCase()));
    if (T) {
      const I = $i(((N = T.system.description) == null ? void 0 : N.value) || "...");
      return m("model", `<div class="item-card"><img src="${T.img}" class="item-icon"/><div class="item-data"><strong>${T.name}</strong><p>${I}</p></div></div>`), !0;
    }
    return !1;
  }
  function w(C) {
    try {
      const N = al.getAll().filter((I) => I.type !== "Script" && (I.name.toLowerCase().includes(C.toLowerCase()) || I.tags.includes(C)));
      if (N.length > 0) {
        let I = '<div class="search-header">RESULTADOS:</div>';
        return N.forEach((D) => I += `<div class="nexus-entry"><b>${D.name}</b><br>${$i(D.description).slice(0, 150)}...</div>`), m("model", I), !0;
      }
    } catch {
    }
    return !1;
  }
  function k(C) {
    return i ? (m("model", `Comando de rolagem recebido: ${C}`), !0) : !1;
  }
  function A() {
    m("model", '<div class="help-box"><b>ORACLE NET v7.0</b><br>Sistema conectado √† rede.</div>');
  }
  function y() {
    c && t(2, c.scrollTop = c.scrollHeight, c);
  }
  function E(C) {
    wa[C ? "unshift" : "push"](() => {
      c = C, t(2, c);
    });
  }
  function S() {
    o = this.value, t(1, o);
  }
  const O = (C) => C.key === "Enter" && u();
  return l.$$set = (C) => {
    "actor" in C && t(5, i = C.actor);
  }, [
    n,
    o,
    c,
    u,
    b,
    i,
    E,
    S,
    O
  ];
}
class Sg extends mt {
  constructor(e) {
    super(), pt(this, e, Og, Eg, dt, { actor: 5 });
  }
}
function Wf(l, e, t) {
  const i = l.slice();
  return i[30] = e[t], i;
}
function Xf(l, e, t) {
  const i = l.slice();
  return i[27] = e[t], i;
}
function Jf(l, e, t) {
  const i = l.slice();
  return i[33] = e[t], i;
}
function Yf(l, e, t) {
  const i = l.slice();
  return i[30] = e[t], i;
}
function Qf(l, e, t) {
  const i = l.slice();
  return i[27] = e[t], i;
}
function Kf(l) {
  let e, t = (
    /*t*/
    l[27] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[27], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Zf(l) {
  let e, t, i = (
    /*tag*/
    l[30] + ""
  ), n, o;
  return {
    c() {
      e = r("option"), t = B("Tag: "), n = B(i), e.__value = o = /*tag*/
      l[30], x(e, e.__value);
    },
    m(c, f) {
      q(c, e, f), a(e, t), a(e, n);
    },
    p(c, f) {
      f[0] & /*allTags*/
      64 && i !== (i = /*tag*/
      c[30] + "") && te(n, i), f[0] & /*allTags*/
      64 && o !== (o = /*tag*/
      c[30]) && (e.__value = o, x(e, e.__value));
    },
    d(c) {
      c && P(e);
    }
  };
}
function Cg(l) {
  let e, t;
  return {
    c() {
      e = r("img"), at(e.src, t = /*e*/
      l[33].img) || s(e, "src", t), s(e, "alt", "icon"), s(e, "class", "svelte-1u7fvq2");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n[0] & /*filtered*/
      32 && !at(e.src, t = /*e*/
      i[33].img) && s(e, "src", t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function Ig(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-code"></i>', s(e, "class", "code-icon svelte-1u7fvq2");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function xf(l) {
  let e, t = (
    /*e*/
    l[33].tags.split(",")[0] + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "tag-pill svelte-1u7fvq2");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*filtered*/
      32 && t !== (t = /*e*/
      n[33].tags.split(",")[0] + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function $f(l) {
  let e, t, i, n, o, c = (
    /*e*/
    l[33].name + ""
  ), f, u, d, p, m = (
    /*e*/
    l[33].type + ""
  ), b, v, h, _;
  function w(S, O) {
    return (
      /*e*/
      S[33].type === "Script" ? Ig : Cg
    );
  }
  let k = w(l), A = k(l), y = (
    /*e*/
    l[33].tags && xf(l)
  );
  function E() {
    return (
      /*click_handler*/
      l[19](
        /*e*/
        l[33]
      )
    );
  }
  return {
    c() {
      var S;
      e = r("div"), t = r("div"), A.c(), i = g(), n = r("div"), o = r("span"), f = B(c), u = g(), d = r("div"), p = r("span"), b = B(m), v = g(), y && y.c(), s(t, "class", "item-img svelte-1u7fvq2"), s(o, "class", "item-name svelte-1u7fvq2"), s(p, "class", "type-pill svelte-1u7fvq2"), s(d, "class", "item-meta svelte-1u7fvq2"), s(n, "class", "item-info svelte-1u7fvq2"), s(e, "class", "item svelte-1u7fvq2"), he(
        e,
        "active",
        /*activeEntry*/
        ((S = l[3]) == null ? void 0 : S.id) === /*e*/
        l[33].id
      ), he(e, "system-item", ya(
        /*e*/
        l[33].type
      )), he(
        e,
        "script-item",
        /*e*/
        l[33].type === "Script"
      );
    },
    m(S, O) {
      q(S, e, O), a(e, t), A.m(t, null), a(e, i), a(e, n), a(n, o), a(o, f), a(n, u), a(n, d), a(d, p), a(p, b), a(d, v), y && y.m(d, null), h || (_ = R(e, "click", E), h = !0);
    },
    p(S, O) {
      var C;
      l = S, k === (k = w(l)) && A ? A.p(l, O) : (A.d(1), A = k(l), A && (A.c(), A.m(t, null))), O[0] & /*filtered*/
      32 && c !== (c = /*e*/
      l[33].name + "") && te(f, c), O[0] & /*filtered*/
      32 && m !== (m = /*e*/
      l[33].type + "") && te(b, m), /*e*/
      l[33].tags ? y ? y.p(l, O) : (y = xf(l), y.c(), y.m(d, null)) : y && (y.d(1), y = null), O[0] & /*activeEntry, filtered*/
      40 && he(
        e,
        "active",
        /*activeEntry*/
        ((C = l[3]) == null ? void 0 : C.id) === /*e*/
        l[33].id
      ), O[0] & /*filtered*/
      32 && he(e, "system-item", ya(
        /*e*/
        l[33].type
      )), O[0] & /*filtered*/
      32 && he(
        e,
        "script-item",
        /*e*/
        l[33].type === "Script"
      );
    },
    d(S) {
      S && P(e), A.d(), y && y.d(), h = !1, _();
    }
  };
}
function ed(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "Nada encontrado.", s(e, "class", "no-results svelte-1u7fvq2");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Tg(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-database big-icon svelte-1u7fvq2"></i> <h1>NEXUS ADMIN</h1> <p>Selecione um arquivo ou crie um novo.</p> <div class="tips svelte-1u7fvq2"><small>Crie um tipo <b>&quot;Script&quot;</b> para adicionar comandos ao Oracle.</small></div>', s(e, "class", "empty-state svelte-1u7fvq2");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Dg(l) {
  let e, t, i, n, o, c, f, u;
  function d(A, y) {
    return (
      /*isEditing*/
      A[4] ? Mg : Rg
    );
  }
  let p = d(l), m = p(l);
  function b(A, y) {
    return (
      /*isEditing*/
      A[4] ? Lg : Ng
    );
  }
  let v = b(l), h = v(l);
  function _(A, y) {
    return (
      /*isEditing*/
      A[4] ? Hg : Gg
    );
  }
  let w = _(l), k = w(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), m.c(), n = g(), o = r("div"), h.c(), c = g(), f = r("div"), k.c(), s(i, "class", "header-overlay svelte-1u7fvq2"), s(t, "class", "header svelte-1u7fvq2"), ae(t, "background-image", "url('" + /*activeEntry*/
      l[3].img + "')"), he(t, "system-header", ya(
        /*activeEntry*/
        l[3].type
      )), s(o, "class", "body svelte-1u7fvq2"), s(f, "class", "footer svelte-1u7fvq2"), s(e, "class", "card svelte-1u7fvq2");
    },
    m(A, y) {
      q(A, e, y), a(e, t), a(t, i), m.m(i, null), a(e, n), a(e, o), h.m(o, null), a(e, c), a(e, f), k.m(f, null);
    },
    p(A, y) {
      p === (p = d(A)) && m ? m.p(A, y) : (m.d(1), m = p(A), m && (m.c(), m.m(i, null))), y[0] & /*activeEntry*/
      8 && ae(t, "background-image", "url('" + /*activeEntry*/
      A[3].img + "')"), y[0] & /*activeEntry*/
      8 && he(t, "system-header", ya(
        /*activeEntry*/
        A[3].type
      )), v === (v = b(A)) && h ? h.p(A, y) : (h.d(1), h = v(A), h && (h.c(), h.m(o, null))), w === (w = _(A)) && k ? k.p(A, y) : (k.d(1), k = w(A), k && (k.c(), k.m(f, null)));
    },
    i(A) {
      A && (u || Ne(() => {
        u = st(e, Qe, { duration: 150 }), u.start();
      }));
    },
    o: ge,
    d(A) {
      A && P(e), m.d(), h.d(), k.d();
    }
  };
}
function Rg(l) {
  let e, t, i = (
    /*activeEntry*/
    l[3].name + ""
  ), n, o, c, f, u = (
    /*activeEntry*/
    l[3].type + ""
  ), d, p, m = ce(
    /*activeEntry*/
    l[3].tags.split(",")
  ), b = [];
  for (let v = 0; v < m.length; v += 1)
    b[v] = ld(Wf(l, m, v));
  return {
    c() {
      e = r("div"), t = r("h1"), n = B(i), o = g(), c = r("div"), f = r("span"), d = B(u), p = g();
      for (let v = 0; v < b.length; v += 1)
        b[v].c();
      s(t, "class", "svelte-1u7fvq2"), s(f, "class", "badge main svelte-1u7fvq2"), s(c, "class", "badges svelte-1u7fvq2"), s(e, "class", "view-mode-header svelte-1u7fvq2");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, n), a(e, o), a(e, c), a(c, f), a(f, d), a(c, p);
      for (let _ = 0; _ < b.length; _ += 1)
        b[_] && b[_].m(c, null);
    },
    p(v, h) {
      if (h[0] & /*activeEntry*/
      8 && i !== (i = /*activeEntry*/
      v[3].name + "") && te(n, i), h[0] & /*activeEntry*/
      8 && u !== (u = /*activeEntry*/
      v[3].type + "") && te(d, u), h[0] & /*activeEntry*/
      8) {
        m = ce(
          /*activeEntry*/
          v[3].tags.split(",")
        );
        let _;
        for (_ = 0; _ < m.length; _ += 1) {
          const w = Wf(v, m, _);
          b[_] ? b[_].p(w, h) : (b[_] = ld(w), b[_].c(), b[_].m(c, null));
        }
        for (; _ < b.length; _ += 1)
          b[_].d(1);
        b.length = m.length;
      }
    },
    d(v) {
      v && P(e), Fe(b, v);
    }
  };
}
function Mg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b = ce(
    /*TYPES*/
    l[7]
  ), v = [];
  for (let h = 0; h < b.length; h += 1)
    v[h] = ad(Xf(l, b, h));
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("div"), o = r("select");
      for (let h = 0; h < v.length; h += 1)
        v[h].c();
      c = g(), f = r("input"), u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-image"></i>', s(t, "class", "title-input svelte-1u7fvq2"), s(t, "placeholder", "Nome (Comando)"), s(o, "class", "svelte-1u7fvq2"), /*activeEntry*/
      l[3].type === void 0 && Ne(() => (
        /*select_change_handler*/
        l[21].call(o)
      )), s(f, "class", "tags-input svelte-1u7fvq2"), s(f, "placeholder", "Tags"), s(n, "class", "meta-inputs svelte-1u7fvq2"), s(e, "class", "edit-mode-header svelte-1u7fvq2"), s(d, "class", "img-btn svelte-1u7fvq2"), s(d, "title", "Alterar Imagem");
    },
    m(h, _) {
      q(h, e, _), a(e, t), x(
        t,
        /*activeEntry*/
        l[3].name
      ), a(e, i), a(e, n), a(n, o);
      for (let w = 0; w < v.length; w += 1)
        v[w] && v[w].m(o, null);
      ot(
        o,
        /*activeEntry*/
        l[3].type,
        !0
      ), a(n, c), a(n, f), x(
        f,
        /*activeEntry*/
        l[3].tags
      ), q(h, u, _), q(h, d, _), p || (m = [
        R(
          t,
          "input",
          /*input0_input_handler*/
          l[20]
        ),
        R(
          o,
          "change",
          /*select_change_handler*/
          l[21]
        ),
        R(
          f,
          "input",
          /*input1_input_handler*/
          l[22]
        ),
        R(
          d,
          "click",
          /*pickImg*/
          l[12]
        )
      ], p = !0);
    },
    p(h, _) {
      if (_[0] & /*activeEntry, TYPES*/
      136 && t.value !== /*activeEntry*/
      h[3].name && x(
        t,
        /*activeEntry*/
        h[3].name
      ), _[0] & /*TYPES*/
      128) {
        b = ce(
          /*TYPES*/
          h[7]
        );
        let w;
        for (w = 0; w < b.length; w += 1) {
          const k = Xf(h, b, w);
          v[w] ? v[w].p(k, _) : (v[w] = ad(k), v[w].c(), v[w].m(o, null));
        }
        for (; w < v.length; w += 1)
          v[w].d(1);
        v.length = b.length;
      }
      _[0] & /*activeEntry, TYPES*/
      136 && ot(
        o,
        /*activeEntry*/
        h[3].type
      ), _[0] & /*activeEntry, TYPES*/
      136 && f.value !== /*activeEntry*/
      h[3].tags && x(
        f,
        /*activeEntry*/
        h[3].tags
      );
    },
    d(h) {
      h && (P(e), P(u), P(d)), Fe(v, h), p = !1, Te(m);
    }
  };
}
function td(l) {
  let e, t = (
    /*tag*/
    l[30].trim() + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "badge tag svelte-1u7fvq2");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*activeEntry*/
      8 && t !== (t = /*tag*/
      n[30].trim() + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function ld(l) {
  let e = (
    /*tag*/
    l[30].trim()
  ), t, i = e && td(l);
  return {
    c() {
      i && i.c(), t = Pt();
    },
    m(n, o) {
      i && i.m(n, o), q(n, t, o);
    },
    p(n, o) {
      o[0] & /*activeEntry*/
      8 && (e = /*tag*/
      n[30].trim()), e ? i ? i.p(n, o) : (i = td(n), i.c(), i.m(t.parentNode, t)) : i && (i.d(1), i = null);
    },
    d(n) {
      n && P(t), i && i.d(n);
    }
  };
}
function ad(l) {
  let e, t = (
    /*t*/
    l[27] + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*t*/
      l[27], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function Ng(l) {
  let e, t;
  function i(c, f) {
    return f[0] & /*activeEntry*/
    8 && (t = null), /*activeEntry*/
    c[3].type === "Script" ? Ug : (t == null && (t = !!ya(
      /*activeEntry*/
      c[3].type
    )), t ? qg : Pg);
  }
  let n = i(l, [-1, -1]), o = n(l);
  return {
    c() {
      e = r("div"), o.c(), s(e, "class", "reader svelte-1u7fvq2");
    },
    m(c, f) {
      q(c, e, f), o.m(e, null);
    },
    p(c, f) {
      n === (n = i(c, f)) && o ? o.p(c, f) : (o.d(1), o = n(c), o && (o.c(), o.m(e, null)));
    },
    d(c) {
      c && P(e), o.d();
    }
  };
}
function Lg(l) {
  let e, t, i, n;
  return {
    c() {
      e = r("textarea"), s(e, "placeholder", t = /*activeEntry*/
      l[3].type === "Script" ? `// JAVASCRIPT AQUI.
// Dispon√≠veis: actor, game, args, render(html), addMessage(), socket.` : ya(
        /*activeEntry*/
        l[3].type
      ) ? "Escreva as regras do sistema..." : "Escreva a hist√≥ria ou descri√ß√£o do NPC..."), s(e, "class", "svelte-1u7fvq2"), he(
        e,
        "code-editor",
        /*activeEntry*/
        l[3].type === "Script"
      );
    },
    m(o, c) {
      q(o, e, c), x(
        e,
        /*activeEntry*/
        l[3].description
      ), i || (n = R(
        e,
        "input",
        /*textarea_input_handler*/
        l[23]
      ), i = !0);
    },
    p(o, c) {
      c[0] & /*activeEntry, TYPES*/
      136 && t !== (t = /*activeEntry*/
      o[3].type === "Script" ? `// JAVASCRIPT AQUI.
// Dispon√≠veis: actor, game, args, render(html), addMessage(), socket.` : ya(
        /*activeEntry*/
        o[3].type
      ) ? "Escreva as regras do sistema..." : "Escreva a hist√≥ria ou descri√ß√£o do NPC...") && s(e, "placeholder", t), c[0] & /*activeEntry, TYPES*/
      136 && x(
        e,
        /*activeEntry*/
        o[3].description
      ), c[0] & /*activeEntry*/
      8 && he(
        e,
        "code-editor",
        /*activeEntry*/
        o[3].type === "Script"
      );
    },
    d(o) {
      o && P(e), i = !1, n();
    }
  };
}
function Pg(l) {
  let e, t = (
    /*activeEntry*/
    l[3].description.replace(/\n/g, "<br>") + ""
  );
  return {
    c() {
      e = r("p");
    },
    m(i, n) {
      q(i, e, n), e.innerHTML = t;
    },
    p(i, n) {
      n[0] & /*activeEntry*/
      8 && t !== (t = /*activeEntry*/
      i[3].description.replace(/\n/g, "<br>") + "") && (e.innerHTML = t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function qg(l) {
  let e, t, i, n = (
    /*activeEntry*/
    l[3].description.replace(/\n/g, "<br>") + ""
  );
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-book"></i> DADOS DE SISTEMA', t = g(), i = r("p"), s(e, "class", "system-alert svelte-1u7fvq2");
    },
    m(o, c) {
      q(o, e, c), q(o, t, c), q(o, i, c), i.innerHTML = n;
    },
    p(o, c) {
      c[0] & /*activeEntry*/
      8 && n !== (n = /*activeEntry*/
      o[3].description.replace(/\n/g, "<br>") + "") && (i.innerHTML = n);
    },
    d(o) {
      o && (P(e), P(t), P(i));
    }
  };
}
function Ug(l) {
  let e, t, i, n = (
    /*activeEntry*/
    l[3].description + ""
  ), o;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-terminal"></i> SCRIPT ATIVO', t = g(), i = r("pre"), o = B(n), s(e, "class", "system-alert script-alert svelte-1u7fvq2"), s(i, "class", "code-block svelte-1u7fvq2");
    },
    m(c, f) {
      q(c, e, f), q(c, t, f), q(c, i, f), a(i, o);
    },
    p(c, f) {
      f[0] & /*activeEntry*/
      8 && n !== (n = /*activeEntry*/
      c[3].description + "") && te(o, n);
    },
    d(c) {
      c && (P(e), P(t), P(i));
    }
  };
}
function Gg(l) {
  let e, t, i = (
    /*activeEntry*/
    l[3].id + ""
  ), n, o, c, f, u;
  return {
    c() {
      e = r("div"), t = B("ID: "), n = B(i), o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-edit"></i> EDITAR', s(e, "class", "footer-info svelte-1u7fvq2"), s(c, "class", "btn edit svelte-1u7fvq2");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, n), q(d, o, p), q(d, c, p), f || (u = R(
        c,
        "click",
        /*click_handler_2*/
        l[25]
      ), f = !0);
    },
    p(d, p) {
      p[0] & /*activeEntry*/
      8 && i !== (i = /*activeEntry*/
      d[3].id + "") && te(n, i);
    },
    d(d) {
      d && (P(e), P(o), P(c)), f = !1, u();
    }
  };
}
function Hg(l) {
  let e, t, i, n, o, c, f;
  return {
    c() {
      e = r("button"), e.textContent = "CANCELAR", t = g(), i = r("button"), i.textContent = "EXCLUIR", n = g(), o = r("button"), o.textContent = "SALVAR", s(e, "class", "btn cancel svelte-1u7fvq2"), s(i, "class", "btn delete svelte-1u7fvq2"), s(o, "class", "btn save svelte-1u7fvq2");
    },
    m(u, d) {
      q(u, e, d), q(u, t, d), q(u, i, d), q(u, n, d), q(u, o, d), c || (f = [
        R(
          e,
          "click",
          /*click_handler_1*/
          l[24]
        ),
        R(
          i,
          "click",
          /*del*/
          l[11]
        ),
        R(
          o,
          "click",
          /*save*/
          l[10]
        )
      ], c = !0);
    },
    p: ge,
    d(u) {
      u && (P(e), P(t), P(i), P(n), P(o)), c = !1, Te(f);
    }
  };
}
function zg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G = ce(
    /*TYPES*/
    l[7]
  ), L = [];
  for (let X = 0; X < G.length; X += 1)
    L[X] = Kf(Qf(l, G, X));
  let U = ce(
    /*allTags*/
    l[6]
  ), z = [];
  for (let X = 0; X < U.length; X += 1)
    z[X] = Zf(Yf(l, U, X));
  let F = ce(
    /*filtered*/
    l[5]
  ), W = [];
  for (let X = 0; X < F.length; X += 1)
    W[X] = $f(Jf(l, F, X));
  let H = (
    /*filtered*/
    l[5].length === 0 && ed()
  );
  function V(X, K) {
    return (
      /*activeEntry*/
      X[3] ? Dg : Tg
    );
  }
  let J = V(l), j = J(l);
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), n = r("button"), n.innerHTML = '<i class="fas fa-download"></i> EXPORTAR', o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-upload"></i> IMPORTAR', f = g(), u = r("div"), d = r("div"), p = r("i"), m = g(), b = r("input"), v = g(), h = r("div"), _ = r("select"), w = r("option"), w.textContent = "Todos os Tipos";
      for (let X = 0; X < L.length; X += 1)
        L[X].c();
      k = g(), A = r("div"), y = r("select");
      for (let X = 0; X < z.length; X += 1)
        z[X].c();
      E = g(), S = r("div"), O = r("button"), O.innerHTML = '<i class="fas fa-plus"></i> CRIAR NOVO', C = g();
      for (let X = 0; X < W.length; X += 1)
        W[X].c();
      T = g(), H && H.c(), N = g(), I = r("main"), j.c(), s(n, "class", "backup-btn svelte-1u7fvq2"), s(n, "title", "Baixar Backup (Exportar)"), s(c, "class", "backup-btn import svelte-1u7fvq2"), s(c, "title", "Carregar Backup (Importar)"), s(i, "class", "backup-tools svelte-1u7fvq2"), s(p, "class", "fas fa-search"), s(b, "placeholder", "Pesquisar..."), s(b, "class", "svelte-1u7fvq2"), s(d, "class", "search-row svelte-1u7fvq2"), w.__value = "TODOS", x(w, w.__value), s(_, "class", "svelte-1u7fvq2"), /*selectedType*/
      l[1] === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[17].call(_)
      )), s(h, "class", "filter-row svelte-1u7fvq2"), s(y, "class", "svelte-1u7fvq2"), /*selectedTag*/
      l[2] === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[18].call(y)
      )), s(A, "class", "filter-row svelte-1u7fvq2"), s(u, "class", "header-tools svelte-1u7fvq2"), s(O, "class", "add-btn svelte-1u7fvq2"), s(S, "class", "list-area svelte-1u7fvq2"), s(t, "class", "sidebar svelte-1u7fvq2"), s(I, "class", "content svelte-1u7fvq2"), s(e, "class", "nexus-shell svelte-1u7fvq2");
    },
    m(X, K) {
      q(X, e, K), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(t, f), a(t, u), a(u, d), a(d, p), a(d, m), a(d, b), x(
        b,
        /*searchQuery*/
        l[0]
      ), a(u, v), a(u, h), a(h, _), a(_, w);
      for (let Z = 0; Z < L.length; Z += 1)
        L[Z] && L[Z].m(_, null);
      ot(
        _,
        /*selectedType*/
        l[1],
        !0
      ), a(u, k), a(u, A), a(A, y);
      for (let Z = 0; Z < z.length; Z += 1)
        z[Z] && z[Z].m(y, null);
      ot(
        y,
        /*selectedTag*/
        l[2],
        !0
      ), a(t, E), a(t, S), a(S, O), a(S, C);
      for (let Z = 0; Z < W.length; Z += 1)
        W[Z] && W[Z].m(S, null);
      a(S, T), H && H.m(S, null), a(e, N), a(e, I), j.m(I, null), D || (M = [
        R(
          n,
          "click",
          /*exportDB*/
          l[13]
        ),
        R(
          c,
          "click",
          /*importDB*/
          l[14]
        ),
        R(
          b,
          "input",
          /*input_input_handler*/
          l[16]
        ),
        R(
          _,
          "change",
          /*select0_change_handler*/
          l[17]
        ),
        R(
          y,
          "change",
          /*select1_change_handler*/
          l[18]
        ),
        R(
          O,
          "click",
          /*createNew*/
          l[9]
        )
      ], D = !0);
    },
    p(X, K) {
      if (K[0] & /*searchQuery*/
      1 && b.value !== /*searchQuery*/
      X[0] && x(
        b,
        /*searchQuery*/
        X[0]
      ), K[0] & /*TYPES*/
      128) {
        G = ce(
          /*TYPES*/
          X[7]
        );
        let Z;
        for (Z = 0; Z < G.length; Z += 1) {
          const le = Qf(X, G, Z);
          L[Z] ? L[Z].p(le, K) : (L[Z] = Kf(le), L[Z].c(), L[Z].m(_, null));
        }
        for (; Z < L.length; Z += 1)
          L[Z].d(1);
        L.length = G.length;
      }
      if (K[0] & /*selectedType, TYPES*/
      130 && ot(
        _,
        /*selectedType*/
        X[1]
      ), K[0] & /*allTags*/
      64) {
        U = ce(
          /*allTags*/
          X[6]
        );
        let Z;
        for (Z = 0; Z < U.length; Z += 1) {
          const le = Yf(X, U, Z);
          z[Z] ? z[Z].p(le, K) : (z[Z] = Zf(le), z[Z].c(), z[Z].m(y, null));
        }
        for (; Z < z.length; Z += 1)
          z[Z].d(1);
        z.length = U.length;
      }
      if (K[0] & /*selectedTag, allTags*/
      68 && ot(
        y,
        /*selectedTag*/
        X[2]
      ), K[0] & /*activeEntry, filtered, isEditing*/
      56) {
        F = ce(
          /*filtered*/
          X[5]
        );
        let Z;
        for (Z = 0; Z < F.length; Z += 1) {
          const le = Jf(X, F, Z);
          W[Z] ? W[Z].p(le, K) : (W[Z] = $f(le), W[Z].c(), W[Z].m(S, T));
        }
        for (; Z < W.length; Z += 1)
          W[Z].d(1);
        W.length = F.length;
      }
      /*filtered*/
      X[5].length === 0 ? H || (H = ed(), H.c(), H.m(S, null)) : H && (H.d(1), H = null), J === (J = V(X)) && j ? j.p(X, K) : (j.d(1), j = J(X), j && (j.c(), ne(j, 1), j.m(I, null)));
    },
    i(X) {
      ne(j);
    },
    o: ge,
    d(X) {
      X && P(e), Fe(L, X), Fe(z, X), Fe(W, X), H && H.d(), j.d(), D = !1, Te(M);
    }
  };
}
function ya(l) {
  return ["Sistema", "Instru√ß√µes", "Anota√ß√µes", "Script"].includes(l);
}
function Bg(l, e, t) {
  let i, n, o = [], c = "", f = "TODOS", u = "TODOS", d = null, p = !1;
  const m = [
    "Jogador",
    "NPC",
    "Local",
    "Fac√ß√£o",
    "Hist√≥ria Macro",
    "Hist√≥ria Micro",
    "Quest",
    "Sistema",
    "Instru√ß√µes",
    "Anota√ß√µes",
    "Script"
  ], b = {
    id: null,
    name: "Nova Entrada",
    type: "Script",
    tags: "",
    img: "icons/svg/mystery-man.svg",
    description: ""
  };
  qt(() => {
    try {
      al.init();
    } catch {
    }
    v(), Hooks.on("nexusUpdate", v);
  });
  function v() {
    try {
      if (t(15, o = al.getAll()), d) {
        const L = o.find((U) => U.id === d.id);
        L && !p && t(3, d = L);
      }
    } catch (L) {
      console.error("Erro ao carregar Nexus:", L), t(15, o = []);
    }
  }
  function h() {
    t(3, d = {
      ...b,
      id: foundry.utils.randomID()
    }), t(4, p = !0), t(1, f = "TODOS"), t(0, c = "");
  }
  async function _() {
    await al.saveEntry(d), t(4, p = !1), ui.notifications.info(`Nexus: "${d.name}" salvo.`), v();
  }
  async function w() {
    new Dialog({
      title: "Excluir?",
      content: `Apagar <b>${d.name}</b> permanentemente?`,
      buttons: {
        yes: {
          label: "Apagar",
          icon: "<i class='fas fa-trash'></i>",
          callback: async () => {
            await al.deleteEntry(d.id), t(3, d = null), t(4, p = !1), v();
          }
        },
        no: { label: "Cancelar" }
      },
      default: "no"
    }).render(!0);
  }
  function k() {
    new FilePicker({
      type: "image",
      callback: (L) => t(3, d.img = L, d)
    }).render(!0);
  }
  function A() {
    try {
      const L = al.getAll(), U = JSON.stringify(L, null, 2);
      saveDataToFile(U, "json", "nexus_backup.json");
    } catch (L) {
      ui.notifications.error("Erro ao exportar: " + L.message);
    }
  }
  function y() {
    new Dialog(
      {
        title: "Importar Backup do Nexus",
        content: `
                <div style="margin-bottom:10px;">
                    <p>Abra o arquivo <b>.json</b> que voc√™ baixou, copie todo o texto e cole abaixo:</p>
                </div>
                <textarea id="nexus-import-textarea" 
                    style="width:100%; height:300px; font-family:monospace; font-size:11px; background:#222; color:#0f0; border:1px solid #444; padding:10px;"
                    placeholder='Cole o c√≥digo JSON aqui... Ex: [{"id": "...", "name": "..."}]'></textarea>
            `,
        buttons: {
          import: {
            label: "SUBSTITUIR DADOS ATUAIS",
            icon: "<i class='fas fa-file-import'></i>",
            callback: async (L) => {
              const U = L.find("#nexus-import-textarea").val();
              if (!U || U.trim() === "")
                return ui.notifications.warn("A caixa de texto est√° vazia!");
              try {
                const z = JSON.parse(U);
                if (!Array.isArray(z)) throw new Error("Formato inv√°lido.");
                await game.settings.set("multiversus-rpg", "nexus_lore_data", z), ui.notifications.info(`Sucesso! ${z.length} registros importados.`), v();
              } catch (z) {
                ui.notifications.error("Erro Cr√≠tico: JSON Inv√°lido. " + z.message);
              }
            }
          },
          cancel: { label: "Cancelar" }
        },
        default: "cancel"
      },
      { width: 500 }
    ).render(!0);
  }
  function E() {
    c = this.value, t(0, c);
  }
  function S() {
    f = Gt(this), t(1, f), t(7, m);
  }
  function O() {
    u = Gt(this), t(2, u), t(6, i), t(15, o);
  }
  const C = (L) => {
    t(3, d = JSON.parse(JSON.stringify(L))), t(4, p = !1);
  };
  function T() {
    d.name = this.value, t(3, d), t(7, m);
  }
  function N() {
    d.type = Gt(this), t(3, d), t(7, m);
  }
  function I() {
    d.tags = this.value, t(3, d), t(7, m);
  }
  function D() {
    d.description = this.value, t(3, d), t(7, m);
  }
  const M = () => {
    t(4, p = !1), v();
  }, G = () => t(4, p = !0);
  return l.$$.update = () => {
    l.$$.dirty[0] & /*entries*/
    32768 && t(6, i = [
      "TODOS",
      ...new Set(o.flatMap((L) => L.tags.split(",").map((U) => U.trim()).filter((U) => U !== "")))
    ].sort()), l.$$.dirty[0] & /*entries, searchQuery, selectedType, selectedTag*/
    32775 && t(5, n = o.filter((L) => {
      const U = c.toLowerCase(), z = L.name.toLowerCase().includes(U) || L.description.toLowerCase().includes(U), F = f === "TODOS" || L.type === f, W = u === "TODOS" || L.tags.includes(u);
      return z && F && W;
    }));
  }, [
    c,
    f,
    u,
    d,
    p,
    n,
    i,
    m,
    v,
    h,
    _,
    w,
    k,
    A,
    y,
    o,
    E,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G
  ];
}
class Fg extends mt {
  constructor(e) {
    super(), pt(this, e, Bg, zg, dt, {}, null, [-1, -1]);
  }
}
function id(l, e, t) {
  const i = l.slice();
  return i[35] = e[t], i;
}
function sd(l, e, t) {
  const i = l.slice();
  i[38] = e[t];
  const n = (
    /*getGroup*/
    i[17](
      /*grpId*/
      i[38]
    )
  );
  return i[35] = n, i;
}
function nd(l, e, t) {
  const i = l.slice();
  return i[41] = e[t], i;
}
function od(l, e, t) {
  const i = l.slice();
  return i[44] = e[t], i;
}
function jg(l) {
  var c, f;
  const e = l.slice(), t = `${/*viewDate*/
  e[0].year}-${/*viewDate*/
  e[0].month}-${/*day*/
  e[44]}`;
  e[47] = t;
  const i = (
    /*calendarData*/
    e[1].currentDate.day === /*day*/
    e[44] && /*calendarData*/
    e[1].currentDate.month === /*viewDate*/
    e[0].month && /*calendarData*/
    e[1].currentDate.year === /*viewDate*/
    e[0].year
  );
  e[48] = i;
  const n = (
    /*calendarData*/
    ((c = e[1].notes[
      /*key*/
      e[47]
    ]) == null ? void 0 : c.length) > 0
  );
  e[49] = n;
  const o = (
    /*calendarData*/
    ((f = e[1].events[
      /*key*/
      e[47]
    ]) == null ? void 0 : f.length) > 0
  );
  return e[50] = o, e;
}
function rd(l, e, t) {
  const i = l.slice();
  return i[51] = e[t], i;
}
function cd(l) {
  let e;
  return {
    c() {
      e = r("span"), e.textContent = `${/*d*/
      l[51]}`;
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function fd(l) {
  let e, t, i = (
    /*day*/
    l[44] + ""
  ), n, o, c, f, u, d, p, m, b, v = (
    /*hasNotes*/
    l[49] && dd()
  ), h = (
    /*hasEvents*/
    l[50] && ud()
  ), _ = (
    /*isToday*/
    l[48] && pd()
  );
  function w() {
    return (
      /*click_handler_2*/
      l[23](
        /*day*/
        l[44]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("span"), n = B(i), o = g(), c = r("div"), v && v.c(), f = g(), h && h.c(), u = g(), _ && _.c(), d = g(), s(t, "class", "day-num svelte-9k0ksk"), s(c, "class", "indicators svelte-9k0ksk"), s(e, "class", p = "day " + /*isToday*/
      (l[48] ? "today" : "") + " " + /*selectedDay*/
      (l[2] === /*day*/
      l[44] ? "selected" : "") + " svelte-9k0ksk");
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, n), a(e, o), a(e, c), v && v.m(c, null), a(c, f), h && h.m(c, null), a(e, u), _ && _.m(e, null), a(e, d), m || (b = R(e, "click", w), m = !0);
    },
    p(k, A) {
      l = k, A[0] & /*calendarGrid*/
      64 && i !== (i = /*day*/
      l[44] + "") && te(n, i), /*hasNotes*/
      l[49] ? v || (v = dd(), v.c(), v.m(c, f)) : v && (v.d(1), v = null), /*hasEvents*/
      l[50] ? h || (h = ud(), h.c(), h.m(c, null)) : h && (h.d(1), h = null), /*isToday*/
      l[48] ? _ || (_ = pd(), _.c(), _.m(e, d)) : _ && (_.d(1), _ = null), A[0] & /*calendarData, calendarGrid, viewDate, selectedDay*/
      71 && p !== (p = "day " + /*isToday*/
      (l[48] ? "today" : "") + " " + /*selectedDay*/
      (l[2] === /*day*/
      l[44] ? "selected" : "") + " svelte-9k0ksk") && s(e, "class", p);
    },
    d(k) {
      k && P(e), v && v.d(), h && h.d(), _ && _.d(), m = !1, b();
    }
  };
}
function Vg(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "day empty svelte-9k0ksk");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function dd(l) {
  let e;
  return {
    c() {
      e = r("span"), s(e, "class", "dot note svelte-9k0ksk");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function ud(l) {
  let e;
  return {
    c() {
      e = r("span"), s(e, "class", "dot event svelte-9k0ksk");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function pd(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "HOJE", s(e, "class", "today-marker svelte-9k0ksk");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function md(l) {
  let e;
  function t(c, f) {
    return (
      /*day*/
      c[44] === null ? Vg : fd
    );
  }
  function i(c, f) {
    return f === fd ? jg(c) : c;
  }
  let n = t(l), o = n(i(l, n));
  return {
    c() {
      o.c(), e = Pt();
    },
    m(c, f) {
      o.m(c, f), q(c, e, f);
    },
    p(c, f) {
      n === (n = t(c)) && o ? o.p(i(c, n), f) : (o.d(1), o = n(i(c, n)), o && (o.c(), o.m(e.parentNode, e)));
    },
    d(c) {
      c && P(e), o.d(c);
    }
  };
}
function Wg(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-calendar-alt svelte-9k0ksk"></i> <p>Selecione um dia.</p>', s(e, "class", "empty-state svelte-9k0ksk");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Xg(l) {
  var $, se;
  let e, t, i, n, o = (
    /*MONTHS*/
    l[7][
      /*viewDate*/
      l[0].month
    ] + ""
  ), c, f, u, d, p, m, b, v, h, _, w, k = !/*calendarData*/
  (($ = l[1].notes[
    /*getKey*/
    l[11](
      /*selectedDay*/
      l[2]
    )
  ]) != null && $.length), A, y, E, S, O, C, T = !/*calendarData*/
  ((se = l[1].events[
    /*getKey*/
    l[11](
      /*selectedDay*/
      l[2]
    )
  ]) != null && se.length), N, I, D, M, G, L, U, z, F, W = !/*calendarData*/
  (l[1].currentDate.day === /*selectedDay*/
  l[2] && /*calendarData*/
  l[1].currentDate.month === /*viewDate*/
  l[0].month) && bd(l), H = ce(
    /*calendarData*/
    l[1].notes[
      /*getKey*/
      l[11](
        /*selectedDay*/
        l[2]
      )
    ] || []
  ), V = [];
  for (let Y = 0; Y < H.length; Y += 1)
    V[Y] = vd(nd(l, H, Y));
  let J = k && hd(), j = ce(
    /*calendarData*/
    l[1].events[
      /*getKey*/
      l[11](
        /*selectedDay*/
        l[2]
      )
    ] || []
  ), X = [];
  for (let Y = 0; Y < j.length; Y += 1)
    X[Y] = gd(sd(l, j, Y));
  let K = T && _d(), Z = ce(
    /*allGroups*/
    l[3]
  ), le = [];
  for (let Y = 0; Y < Z.length; Y += 1)
    le[Y] = wd(id(l, Z, Y));
  return {
    c() {
      e = r("div"), t = r("h3"), i = B(
        /*selectedDay*/
        l[2]
      ), n = B(" DE "), c = B(o), f = g(), W && W.c(), u = g(), d = r("div"), p = r("div"), m = r("h4"), m.innerHTML = '<i class="fas fa-sticky-note"></i> REGISTROS', b = g(), v = r("button"), v.textContent = "+", h = g(), _ = r("div");
      for (let Y = 0; Y < V.length; Y += 1)
        V[Y].c();
      w = g(), J && J.c(), A = g(), y = r("div"), E = r("h4"), E.innerHTML = '<i class="fas fa-map-marker-alt"></i> POSI√á√ÉO DE GRUPOS', S = g(), O = r("div");
      for (let Y = 0; Y < X.length; Y += 1)
        X[Y].c();
      C = g(), K && K.c(), N = g(), I = r("hr"), D = g(), M = r("div"), G = r("small"), G.textContent = "Mover grupo para c√°:", L = g(), U = r("div");
      for (let Y = 0; Y < le.length; Y += 1)
        le[Y].c();
      s(t, "class", "svelte-9k0ksk"), s(e, "class", "day-header svelte-9k0ksk"), s(m, "class", "svelte-9k0ksk"), s(v, "class", "add-btn svelte-9k0ksk"), s(p, "class", "sec-head svelte-9k0ksk"), s(_, "class", "notes-list custom-scroll svelte-9k0ksk"), s(d, "class", "section svelte-9k0ksk"), s(E, "class", "svelte-9k0ksk"), s(O, "class", "events-list"), ae(I, "border-color", "#333"), ae(I, "margin", "10px 0"), s(U, "class", "group-select custom-scroll svelte-9k0ksk"), s(M, "class", "assign-group"), s(y, "class", "section svelte-9k0ksk");
    },
    m(Y, Q) {
      q(Y, e, Q), a(e, t), a(t, i), a(t, n), a(t, c), a(e, f), W && W.m(e, null), q(Y, u, Q), q(Y, d, Q), a(d, p), a(p, m), a(p, b), a(p, v), a(d, h), a(d, _);
      for (let ie = 0; ie < V.length; ie += 1)
        V[ie] && V[ie].m(_, null);
      a(_, w), J && J.m(_, null), q(Y, A, Q), q(Y, y, Q), a(y, E), a(y, S), a(y, O);
      for (let ie = 0; ie < X.length; ie += 1)
        X[ie] && X[ie].m(O, null);
      a(O, C), K && K.m(O, null), a(y, N), a(y, I), a(y, D), a(y, M), a(M, G), a(M, L), a(M, U);
      for (let ie = 0; ie < le.length; ie += 1)
        le[ie] && le[ie].m(U, null);
      z || (F = R(
        v,
        "click",
        /*click_handler_3*/
        l[24]
      ), z = !0);
    },
    p(Y, Q) {
      var ie, ee;
      if (Q[0] & /*selectedDay*/
      4 && te(
        i,
        /*selectedDay*/
        Y[2]
      ), Q[0] & /*viewDate*/
      1 && o !== (o = /*MONTHS*/
      Y[7][
        /*viewDate*/
        Y[0].month
      ] + "") && te(c, o), /*calendarData*/
      Y[1].currentDate.day === /*selectedDay*/
      Y[2] && /*calendarData*/
      Y[1].currentDate.month === /*viewDate*/
      Y[0].month ? W && (W.d(1), W = null) : W ? W.p(Y, Q) : (W = bd(Y), W.c(), W.m(e, null)), Q[0] & /*openNoteModal, calendarData, getKey, selectedDay, deleteNote*/
      22534) {
        H = ce(
          /*calendarData*/
          Y[1].notes[
            /*getKey*/
            Y[11](
              /*selectedDay*/
              Y[2]
            )
          ] || []
        );
        let pe;
        for (pe = 0; pe < H.length; pe += 1) {
          const Ee = nd(Y, H, pe);
          V[pe] ? V[pe].p(Ee, Q) : (V[pe] = vd(Ee), V[pe].c(), V[pe].m(_, w));
        }
        for (; pe < V.length; pe += 1)
          V[pe].d(1);
        V.length = H.length;
      }
      if (Q[0] & /*calendarData, selectedDay*/
      6 && (k = !/*calendarData*/
      ((ie = Y[1].notes[
        /*getKey*/
        Y[11](
          /*selectedDay*/
          Y[2]
        )
      ]) != null && ie.length)), k ? J || (J = hd(), J.c(), J.m(_, null)) : J && (J.d(1), J = null), Q[0] & /*removeGroupFromDate, calendarData, getKey, selectedDay, getGroup*/
      198662) {
        j = ce(
          /*calendarData*/
          Y[1].events[
            /*getKey*/
            Y[11](
              /*selectedDay*/
              Y[2]
            )
          ] || []
        );
        let pe;
        for (pe = 0; pe < j.length; pe += 1) {
          const Ee = sd(Y, j, pe);
          X[pe] ? X[pe].p(Ee, Q) : (X[pe] = gd(Ee), X[pe].c(), X[pe].m(O, C));
        }
        for (; pe < X.length; pe += 1)
          X[pe].d(1);
        X.length = j.length;
      }
      if (Q[0] & /*calendarData, selectedDay*/
      6 && (T = !/*calendarData*/
      ((ee = Y[1].events[
        /*getKey*/
        Y[11](
          /*selectedDay*/
          Y[2]
        )
      ]) != null && ee.length)), T ? K || (K = _d(), K.c(), K.m(O, null)) : K && (K.d(1), K = null), Q[0] & /*assignGroupToDate, allGroups*/
      32776) {
        Z = ce(
          /*allGroups*/
          Y[3]
        );
        let pe;
        for (pe = 0; pe < Z.length; pe += 1) {
          const Ee = id(Y, Z, pe);
          le[pe] ? le[pe].p(Ee, Q) : (le[pe] = wd(Ee), le[pe].c(), le[pe].m(U, null));
        }
        for (; pe < le.length; pe += 1)
          le[pe].d(1);
        le.length = Z.length;
      }
    },
    d(Y) {
      Y && (P(e), P(u), P(d), P(A), P(y)), W && W.d(), Fe(V, Y), J && J.d(), Fe(X, Y), K && K.d(), Fe(le, Y), z = !1, F();
    }
  };
}
function bd(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "DEFINIR COMO HOJE", s(e, "class", "set-today-btn svelte-9k0ksk");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*setToday*/
        l[10]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function vd(l) {
  let e, t, i, n = (
    /*note*/
    (l[41].title || /*note*/
    l[41].text) + ""
  ), o, c, f, u = (
    /*note*/
    l[41].desc ? (
      /*note*/
      l[41].desc.substring(0, 30) + "..."
    ) : ""
  ), d, p, m, b, v;
  function h() {
    return (
      /*click_handler_4*/
      l[25](
        /*note*/
        l[41]
      )
    );
  }
  function _() {
    return (
      /*click_handler_5*/
      l[26](
        /*note*/
        l[41]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("strong"), o = B(n), c = g(), f = r("span"), d = B(u), p = g(), m = r("button"), m.innerHTML = '<i class="fas fa-trash"></i>', s(i, "class", "svelte-9k0ksk"), s(f, "class", "preview svelte-9k0ksk"), s(t, "class", "note-content svelte-9k0ksk"), s(m, "class", "del-btn svelte-9k0ksk"), s(e, "class", "note-item svelte-9k0ksk");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, d), a(e, p), a(e, m), b || (v = [
        R(m, "click", Lt(h)),
        R(e, "click", _)
      ], b = !0);
    },
    p(w, k) {
      l = w, k[0] & /*calendarData, selectedDay*/
      6 && n !== (n = /*note*/
      (l[41].title || /*note*/
      l[41].text) + "") && te(o, n), k[0] & /*calendarData, selectedDay*/
      6 && u !== (u = /*note*/
      l[41].desc ? (
        /*note*/
        l[41].desc.substring(0, 30) + "..."
      ) : "") && te(d, u);
    },
    d(w) {
      w && P(e), b = !1, Te(v);
    }
  };
}
function hd(l) {
  let e;
  return {
    c() {
      e = r("small"), e.textContent = "Sem registros.", ae(e, "color", "#666"), ae(e, "font-style", "italic");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function gd(l) {
  let e, t, i, n, o, c = (
    /*grp*/
    l[35].name + ""
  ), f, u, d, p, m;
  function b() {
    return (
      /*click_handler_6*/
      l[27](
        /*grpId*/
        l[38]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), f = B(c), u = g(), d = r("button"), d.textContent = "‚úï", s(i, "class", n = "fas " + /*grp*/
      (l[35].isNomad ? "fa-user-secret" : "fa-warehouse")), s(t, "class", "grp-label svelte-9k0ksk"), s(d, "class", "svelte-9k0ksk"), s(e, "class", "group-tag svelte-9k0ksk");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, i), a(t, o), a(t, f), a(e, u), a(e, d), p || (m = R(d, "click", b), p = !0);
    },
    p(v, h) {
      l = v, h[0] & /*calendarData, selectedDay*/
      6 && n !== (n = "fas " + /*grp*/
      (l[35].isNomad ? "fa-user-secret" : "fa-warehouse")) && s(i, "class", n), h[0] & /*calendarData, selectedDay*/
      6 && c !== (c = /*grp*/
      l[35].name + "") && te(f, c);
    },
    d(v) {
      v && P(e), p = !1, m();
    }
  };
}
function _d(l) {
  let e;
  return {
    c() {
      e = r("small"), e.textContent = "Nenhum grupo nesta data.", ae(e, "color", "#666");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function kd(l) {
  let e;
  return {
    c() {
      e = r("i"), s(e, "class", "fas fa-user-secret"), s(e, "title", "N√¥made");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function wd(l) {
  let e, t, i = (
    /*grp*/
    l[35].name + ""
  ), n, o, c, f, u, d = (
    /*grp*/
    l[35].isNomad && kd()
  );
  function p() {
    return (
      /*click_handler_7*/
      l[28](
        /*grp*/
        l[35]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("span"), n = B(i), o = g(), d && d.c(), c = g(), s(e, "class", "grp-option svelte-9k0ksk");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(t, n), a(e, o), d && d.m(e, null), a(e, c), f || (u = R(e, "click", p), f = !0);
    },
    p(m, b) {
      l = m, b[0] & /*allGroups*/
      8 && i !== (i = /*grp*/
      l[35].name + "") && te(n, i), /*grp*/
      l[35].isNomad ? d || (d = kd(), d.c(), d.m(e, c)) : d && (d.d(1), d = null);
    },
    d(m) {
      m && P(e), d && d.d(), f = !1, u();
    }
  };
}
function yd(l) {
  var U;
  let e, t, i, n, o = (
    /*editingNote*/
    l[5].id ? "EDITAR REGISTRO" : "NOVO REGISTRO"
  ), c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = (
    /*editingNote*/
    l[5].id && /*calendarData*/
    ((U = l[1].notes[
      /*getKey*/
      l[11](
        /*selectedDay*/
        l[2]
      )
    ]) == null ? void 0 : U.find(
      /*func*/
      l[20]
    ))
  ), S, O, C, T, N, I, D, M, G, L = E && Ad(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), c = B(o), f = g(), u = r("button"), u.textContent = "‚úï", d = g(), p = r("div"), m = r("label"), m.textContent = "T√çTULO", b = g(), v = r("input"), h = g(), _ = r("label"), _.textContent = "DETALHES / DESCRI√á√ÉO", w = g(), k = r("textarea"), A = g(), y = r("div"), L && L.c(), S = g(), O = r("div"), C = g(), T = r("button"), T.textContent = "SALVAR", s(u, "class", "close-modal svelte-9k0ksk"), s(i, "class", "modal-header svelte-9k0ksk"), s(m, "class", "svelte-9k0ksk"), s(v, "type", "text"), s(v, "placeholder", "Assunto..."), v.autofocus = !0, s(v, "class", "svelte-9k0ksk"), s(_, "class", "svelte-9k0ksk"), s(k, "placeholder", "Escreva os detalhes do evento..."), s(k, "class", "svelte-9k0ksk"), s(p, "class", "modal-body svelte-9k0ksk"), s(O, "class", "spacer svelte-9k0ksk"), s(T, "class", "btn-save svelte-9k0ksk"), s(y, "class", "modal-footer svelte-9k0ksk"), s(t, "class", "modal-box svelte-9k0ksk"), s(e, "class", "modal-backdrop svelte-9k0ksk");
    },
    m(z, F) {
      q(z, e, F), a(e, t), a(t, i), a(i, n), a(n, c), a(i, f), a(i, u), a(t, d), a(t, p), a(p, m), a(p, b), a(p, v), x(
        v,
        /*editingNote*/
        l[5].title
      ), a(p, h), a(p, _), a(p, w), a(p, k), x(
        k,
        /*editingNote*/
        l[5].desc
      ), a(t, A), a(t, y), L && L.m(y, null), a(y, S), a(y, O), a(y, C), a(y, T), D = !0, v.focus(), M || (G = [
        R(
          u,
          "click",
          /*click_handler_8*/
          l[29]
        ),
        R(
          v,
          "input",
          /*input_input_handler*/
          l[30]
        ),
        R(
          k,
          "input",
          /*textarea_input_handler*/
          l[31]
        ),
        R(
          T,
          "click",
          /*saveNote*/
          l[13]
        )
      ], M = !0);
    },
    p(z, F) {
      var W;
      (!D || F[0] & /*editingNote*/
      32) && o !== (o = /*editingNote*/
      z[5].id ? "EDITAR REGISTRO" : "NOVO REGISTRO") && te(c, o), F[0] & /*editingNote*/
      32 && v.value !== /*editingNote*/
      z[5].title && x(
        v,
        /*editingNote*/
        z[5].title
      ), F[0] & /*editingNote*/
      32 && x(
        k,
        /*editingNote*/
        z[5].desc
      ), F[0] & /*editingNote, calendarData, selectedDay*/
      38 && (E = /*editingNote*/
      z[5].id && /*calendarData*/
      ((W = z[1].notes[
        /*getKey*/
        z[11](
          /*selectedDay*/
          z[2]
        )
      ]) == null ? void 0 : W.find(
        /*func*/
        z[20]
      ))), E ? L ? L.p(z, F) : (L = Ad(z), L.c(), L.m(y, S)) : L && (L.d(1), L = null);
    },
    i(z) {
      D || (z && (N || Ne(() => {
        N = st(t, Mt, {}), N.start();
      })), z && Ne(() => {
        D && (I || (I = We(e, Qe, {}, !0)), I.run(1));
      }), D = !0);
    },
    o(z) {
      z && (I || (I = We(e, Qe, {}, !1)), I.run(0)), D = !1;
    },
    d(z) {
      z && P(e), L && L.d(), z && I && I.end(), M = !1, Te(G);
    }
  };
}
function Ad(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "DELETAR", s(e, "class", "btn-del-modal svelte-9k0ksk");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_9*/
        l[32]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function Jg(l) {
  let e, t, i, n, o, c, f, u = (
    /*MONTHS*/
    l[7][
      /*viewDate*/
      l[0].month
    ] + ""
  ), d, p, m, b, v = (
    /*viewDate*/
    l[0].year + ""
  ), h, _, w, k, A, y, E, S, O, C, T, N, I, D = ce(
    /*WEEKDAYS*/
    l[8]
  ), M = [];
  for (let H = 0; H < D.length; H += 1)
    M[H] = cd(rd(l, D, H));
  let G = ce(
    /*calendarGrid*/
    l[6]
  ), L = [];
  for (let H = 0; H < G.length; H += 1)
    L[H] = md(od(l, G, H));
  function U(H, V) {
    return (
      /*selectedDay*/
      H[2] ? Xg : Wg
    );
  }
  let z = U(l), F = z(l), W = (
    /*showNoteModal*/
    l[4] && yd(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), n = r("button"), n.innerHTML = '<i class="fas fa-chevron-left"></i>', o = g(), c = r("div"), f = r("span"), d = B(u), p = g(), m = r("span"), b = B("ANO "), h = B(v), _ = g(), w = r("button"), w.innerHTML = '<i class="fas fa-chevron-right"></i>', k = g(), A = r("div");
      for (let H = 0; H < M.length; H += 1)
        M[H].c();
      y = g(), E = r("div");
      for (let H = 0; H < L.length; H += 1)
        L[H].c();
      S = g(), O = r("div"), F.c(), C = g(), W && W.c(), s(n, "class", "svelte-9k0ksk"), s(f, "class", "month"), s(m, "class", "year svelte-9k0ksk"), s(c, "class", "date-display svelte-9k0ksk"), s(w, "class", "svelte-9k0ksk"), s(i, "class", "cal-header svelte-9k0ksk"), s(A, "class", "weekdays svelte-9k0ksk"), s(E, "class", "days-grid svelte-9k0ksk"), s(t, "class", "cal-main svelte-9k0ksk"), s(O, "class", "cal-sidebar svelte-9k0ksk"), s(e, "class", "calendar-app svelte-9k0ksk");
    },
    m(H, V) {
      q(H, e, V), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(f, d), a(c, p), a(c, m), a(m, b), a(m, h), a(i, _), a(i, w), a(t, k), a(t, A);
      for (let J = 0; J < M.length; J += 1)
        M[J] && M[J].m(A, null);
      a(t, y), a(t, E);
      for (let J = 0; J < L.length; J += 1)
        L[J] && L[J].m(E, null);
      a(e, S), a(e, O), F.m(O, null), a(e, C), W && W.m(e, null), N || (I = [
        R(
          n,
          "click",
          /*click_handler*/
          l[21]
        ),
        R(
          w,
          "click",
          /*click_handler_1*/
          l[22]
        )
      ], N = !0);
    },
    p(H, V) {
      if (V[0] & /*viewDate*/
      1 && u !== (u = /*MONTHS*/
      H[7][
        /*viewDate*/
        H[0].month
      ] + "") && te(d, u), V[0] & /*viewDate*/
      1 && v !== (v = /*viewDate*/
      H[0].year + "") && te(h, v), V[0] & /*WEEKDAYS*/
      256) {
        D = ce(
          /*WEEKDAYS*/
          H[8]
        );
        let J;
        for (J = 0; J < D.length; J += 1) {
          const j = rd(H, D, J);
          M[J] ? M[J].p(j, V) : (M[J] = cd(j), M[J].c(), M[J].m(A, null));
        }
        for (; J < M.length; J += 1)
          M[J].d(1);
        M.length = D.length;
      }
      if (V[0] & /*calendarGrid, calendarData, viewDate, selectedDay*/
      71) {
        G = ce(
          /*calendarGrid*/
          H[6]
        );
        let J;
        for (J = 0; J < G.length; J += 1) {
          const j = od(H, G, J);
          L[J] ? L[J].p(j, V) : (L[J] = md(j), L[J].c(), L[J].m(E, null));
        }
        for (; J < L.length; J += 1)
          L[J].d(1);
        L.length = G.length;
      }
      z === (z = U(H)) && F ? F.p(H, V) : (F.d(1), F = z(H), F && (F.c(), F.m(O, null))), /*showNoteModal*/
      H[4] ? W ? (W.p(H, V), V[0] & /*showNoteModal*/
      16 && ne(W, 1)) : (W = yd(H), W.c(), ne(W, 1), W.m(e, null)) : W && ($e(), Ae(W, 1, 1, () => {
        W = null;
      }), et());
    },
    i(H) {
      ne(W), H && (T || Ne(() => {
        T = st(e, Qe, {}), T.start();
      }));
    },
    o(H) {
      Ae(W);
    },
    d(H) {
      H && P(e), Fe(M, H), Fe(L, H), F.d(), W && W.d(), N = !1, Te(I);
    }
  };
}
const Ed = "multiversus-rpg";
function Yg(l, e) {
  let t = [];
  for (let i = 0; i < e; i++) t.push(null);
  for (let i = 1; i <= l; i++) t.push(i);
  return t;
}
function Qg(l, e, t) {
  let i, n, o, c = game.settings.get(Ed, "calendarData") || {
    currentDate: { day: 1, month: 0, year: 1 },
    events: {},
    notes: {}
  }, f = { ...c.currentDate }, u = null, d = [], p = !1, m = {
    id: null,
    title: "",
    desc: "",
    color: "#f59e0b"
  };
  const b = [
    "JANEIRO",
    "FEVEREIRO",
    "MAR√áO",
    "ABRIL",
    "MAIO",
    "JUNHO",
    "JULHO",
    "AGOSTO",
    "SETEMBRO",
    "OUTUBRO",
    "NOVEMBRO",
    "DEZEMBRO"
  ], v = ["DOM", "SEG", "TER", "QUA", "QUI", "SEX", "S√ÅB"];
  qt(async () => {
    h(), Hooks.on("groupSystemUpdate", h);
  });
  function h() {
    try {
      t(3, d = Ut.getGroups() || []);
    } catch (j) {
      console.warn("Erro ao carregar grupos no calend√°rio:", j);
    }
  }
  function _(j) {
    t(0, f.month += j, f), f.month > 11 && (t(0, f.month = 0, f), t(0, f.year++, f)), f.month < 0 && (t(0, f.month = 11, f), t(0, f.year--, f));
  }
  function w() {
    t(1, c.currentDate = { ...f, day: u }, c), C();
  }
  function k(j) {
    return `${f.year}-${f.month}-${j}`;
  }
  function A(j = null) {
    j ? t(5, m = { ...j }) : t(5, m = {
      id: foundry.utils.randomID(),
      title: "",
      desc: "",
      color: "#f59e0b"
      // Amarelo padr√£o
    }), t(4, p = !0);
  }
  function y() {
    if (!u || !m.title) return ui.notifications.warn("A nota precisa de um t√≠tulo.");
    const j = k(u);
    c.notes[j] || t(1, c.notes[j] = [], c);
    const X = c.notes[j].findIndex((K) => K.id === m.id);
    X > -1 ? t(1, c.notes[j][X] = m, c) : c.notes[j].push(m), C(), t(4, p = !1);
  }
  function E(j) {
    const X = k(u);
    c.notes[X] && (t(1, c.notes[X] = c.notes[X].filter((K) => K.id !== j), c), c.notes[X].length === 0 && delete c.notes[X], p && m.id === j && t(4, p = !1), C());
  }
  function S(j) {
    if (!u) return;
    const X = k(u);
    for (const K in c.events)
      t(1, c.events[K] = c.events[K].filter((Z) => Z !== j), c), c.events[K].length === 0 && delete c.events[K];
    c.events[X] || t(1, c.events[X] = [], c), c.events[X].includes(j) || c.events[X].push(j), C();
  }
  function O(j) {
    const X = k(u);
    c.events[X] && (t(1, c.events[X] = c.events[X].filter((K) => K !== j), c), c.events[X].length === 0 && delete c.events[X], C());
  }
  async function C() {
    t(1, c), await game.settings.set(Ed, "calendarData", c);
  }
  function T(j) {
    return d.find((X) => X.id === j) || {
      name: "Desconhecido/Deletado",
      icon: "fa-question",
      isNomad: !1
    };
  }
  const N = (j) => j.id === m.id, I = () => _(-1), D = () => _(1), M = (j) => t(2, u = j), G = () => A(), L = (j) => E(j.id), U = (j) => A(j), z = (j) => O(j), F = (j) => S(j.id), W = () => t(4, p = !1);
  function H() {
    m.title = this.value, t(5, m);
  }
  function V() {
    m.desc = this.value, t(5, m);
  }
  const J = () => E(m.id);
  return l.$$.update = () => {
    l.$$.dirty[0] & /*viewDate*/
    1 && t(19, i = new Date(f.year, f.month + 1, 0).getDate()), l.$$.dirty[0] & /*viewDate*/
    1 && t(18, n = new Date(f.year, f.month, 1).getDay()), l.$$.dirty[0] & /*daysInMonth, startDayOfWeek*/
    786432 && t(6, o = Yg(i, n));
  }, [
    f,
    c,
    u,
    d,
    p,
    m,
    o,
    b,
    v,
    _,
    w,
    k,
    A,
    y,
    E,
    S,
    O,
    T,
    n,
    i,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J
  ];
}
class Kg extends mt {
  constructor(e) {
    super(), pt(this, e, Qg, Jg, dt, {}, null, [-1, -1]);
  }
}
const { window: Od } = Fi;
function Sd(l, e, t) {
  const i = l.slice();
  return i[31] = e[t], i;
}
function Zg(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I = (
    /*currentApp*/
    l[2] !== "desktop" && Cd(l)
  );
  const D = [
    n_,
    s_,
    i_,
    a_,
    l_,
    t_,
    e_,
    $g
  ], M = [];
  function G(L, U) {
    return (
      /*currentApp*/
      L[2] === "desktop" ? 0 : (
        /*currentApp*/
        L[2] === "config" ? 1 : (
          /*currentApp*/
          L[2] === "oracle" ? 2 : (
            /*currentApp*/
            L[2] === "origin" ? 3 : (
              /*currentApp*/
              L[2] === "xp" ? 4 : (
                /*currentApp*/
                L[2] === "calendar" ? 5 : (
                  /*currentApp*/
                  L[2] === "nexus" ? 6 : (
                    /*currentApp*/
                    L[2] === "pass" ? 7 : -1
                  )
                )
              )
            )
          )
        )
      )
    );
  }
  return ~(k = G(l)) && (A = M[k] = D[k](l)), {
    c() {
      e = r("header"), t = r("div"), i = r("div"), n = r("i"), o = g(), c = r("div"), f = r("span"), f.textContent = "ADMIN_KERNEL_OS v.5.4", u = g(), d = r("span"), d.textContent = `SESSION: ${/*selectedAdmin*/
      l[7].name}`, p = g(), m = r("div"), I && I.c(), b = g(), v = r("button"), v.textContent = "[ ENCERRAR ]", _ = g(), w = r("main"), A && A.c(), E = g(), S = r("footer"), S.innerHTML = '<div class="f-left"><span class="blink" style="color: var(--c-primary)">‚óè</span> SYSTEM_STATUS: SECURE</div> <div class="f-right"><i class="fas fa-expand-alt"></i> RESIZE_READY</div>', s(n, "class", "fas " + /*selectedAdmin*/
      l[7].icon + " svelte-1eocpe5"), s(i, "class", "admin-avatar glowing svelte-1eocpe5"), s(f, "class", "sys-name svelte-1eocpe5"), s(d, "class", "user-id svelte-1eocpe5"), s(c, "class", "header-info"), s(t, "class", "header-left svelte-1eocpe5"), s(v, "class", "ctrl-btn terminate svelte-1eocpe5"), s(m, "class", "header-controls"), s(e, "class", "svelte-1eocpe5"), s(w, "class", "svelte-1eocpe5"), s(S, "class", "svelte-1eocpe5");
    },
    m(L, U) {
      q(L, e, U), a(e, t), a(t, i), a(i, n), a(t, o), a(t, c), a(c, f), a(c, u), a(c, d), a(e, p), a(e, m), I && I.m(m, null), a(m, b), a(m, v), q(L, _, U), q(L, w, U), ~k && M[k].m(w, null), q(L, E, U), q(L, S, U), C = !0, T || (N = [
        R(
          v,
          "click",
          /*closeSystem*/
          l[14]
        ),
        R(
          e,
          "mousedown",
          /*startDrag*/
          l[8]
        )
      ], T = !0);
    },
    p(L, U) {
      /*currentApp*/
      L[2] !== "desktop" ? I ? I.p(L, U) : (I = Cd(L), I.c(), I.m(m, b)) : I && (I.d(1), I = null);
      let z = k;
      k = G(L), k === z ? ~k && M[k].p(L, U) : (A && ($e(), Ae(M[z], 1, 1, () => {
        M[z] = null;
      }), et()), ~k ? (A = M[k], A ? A.p(L, U) : (A = M[k] = D[k](L), A.c()), ne(A, 1), A.m(w, null)) : A = null);
    },
    i(L) {
      C || (L && (h || Ne(() => {
        h = st(e, Qe, { delay: 200 }), h.start();
      })), ne(A), L && (y || Ne(() => {
        y = st(w, Qe, { delay: 300 }), y.start();
      })), L && (O || Ne(() => {
        O = st(S, Qe, { delay: 400 }), O.start();
      })), C = !0);
    },
    o(L) {
      Ae(A), C = !1;
    },
    d(L) {
      L && (P(e), P(_), P(w), P(E), P(S)), I && I.d(), ~k && M[k].d(), T = !1, Te(N);
    }
  };
}
function xg(l) {
  let e, t, i, n, o, c, f, u, d = ce(
    /*bootLines*/
    l[1]
  ), p = [];
  for (let m = 0; m < d.length; m += 1)
    p[m] = Id(Sd(l, d, m));
  return {
    c() {
      e = r("div"), t = r("div");
      for (let m = 0; m < p.length; m += 1)
        p[m].c();
      i = g(), n = r("span"), n.textContent = "_", o = g(), c = r("div"), c.innerHTML = '<div class="spinner svelte-1eocpe5"></div> <span>SYSTEM INITIALIZING</span>', s(n, "class", "blinking-cursor svelte-1eocpe5"), s(t, "class", "boot-terminal svelte-1eocpe5"), s(c, "class", "boot-loader svelte-1eocpe5"), s(e, "class", "boot-screen svelte-1eocpe5");
    },
    m(m, b) {
      q(m, e, b), a(e, t);
      for (let v = 0; v < p.length; v += 1)
        p[v] && p[v].m(t, null);
      a(t, i), a(t, n), a(e, o), a(e, c), u = !0;
    },
    p(m, b) {
      if (b[0] & /*bootLines*/
      2) {
        d = ce(
          /*bootLines*/
          m[1]
        );
        let v;
        for (v = 0; v < d.length; v += 1) {
          const h = Sd(m, d, v);
          p[v] ? (p[v].p(h, b), ne(p[v], 1)) : (p[v] = Id(h), p[v].c(), ne(p[v], 1), p[v].m(t, i));
        }
        for (; v < p.length; v += 1)
          p[v].d(1);
        p.length = d.length;
      }
    },
    i(m) {
      if (!u) {
        for (let b = 0; b < d.length; b += 1)
          ne(p[b]);
        f && f.end(1), u = !0;
      }
    },
    o(m) {
      m && (f = vi(e, Qe, { duration: 500 })), u = !1;
    },
    d(m) {
      m && P(e), Fe(p, m), m && f && f.end();
    }
  };
}
function Cd(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "[ RETORNAR ]", s(e, "class", "ctrl-btn svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*goHome*/
        l[13]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function $g(l) {
  let e, t, i;
  return t = new Kh({}), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function e_(l) {
  let e, t, i;
  return t = new Fg({}), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function t_(l) {
  let e, t, i;
  return t = new Kg({}), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function l_(l) {
  let e, t, i;
  return t = new Vh({}), t.$on(
    "back",
    /*goHome*/
    l[13]
  ), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function a_(l) {
  let e, t, i;
  return t = new Ag({}), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function i_(l) {
  let e, t, i;
  return t = new Sg({
    props: {
      actor: game.user.character || game.actors.contents[0]
    }
  }), {
    c() {
      e = r("div"), kt(t.$$.fragment), s(e, "class", "full-app-wrapper svelte-1eocpe5");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p: ge,
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function s_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C;
  return {
    c() {
      e = r("div"), t = r("h2"), t.innerHTML = '<i class="fas fa-cogs"></i> CONFIGURA√á√ïES DE N√öCLEO', i = g(), n = r("div"), o = r("div"), c = r("label"), c.textContent = "TEMA GLOBAL (COR)", f = g(), u = r("div"), d = r("input"), p = g(), m = r("span"), b = B(
        /*globalTheme*/
        l[3]
      ), v = g(), h = r("div"), _ = r("label"), _.textContent = "PLANO DE FUNDO (URL)", w = g(), k = r("input"), A = g(), y = r("div"), E = r("span"), E.innerHTML = '<i class="fas fa-sync"></i> SINCRONIZA√á√ÉO: AUTOM√ÅTICA', s(d, "type", "color"), s(m, "class", "hex-value"), ae(
        m,
        "color",
        /*globalTheme*/
        l[3]
      ), s(u, "class", "input-wrapper"), s(o, "class", "config-item"), s(k, "type", "text"), s(k, "class", "text-input"), s(h, "class", "config-item"), s(n, "class", "config-grid"), s(y, "class", "status-footer"), ae(
        y,
        "border-color",
        /*globalTheme*/
        l[3]
      ), s(e, "class", "config-panel svelte-1eocpe5");
    },
    m(T, N) {
      q(T, e, N), a(e, t), a(e, i), a(e, n), a(n, o), a(o, c), a(o, f), a(o, u), a(u, d), x(
        d,
        /*globalTheme*/
        l[3]
      ), a(u, p), a(u, m), a(m, b), a(n, v), a(n, h), a(h, _), a(h, w), a(h, k), x(
        k,
        /*globalWallpaper*/
        l[4]
      ), a(e, A), a(e, y), a(y, E), O || (C = [
        R(
          d,
          "input",
          /*input0_input_handler*/
          l[24]
        ),
        R(
          d,
          "change",
          /*updateGlobalConfig*/
          l[15]
        ),
        R(
          k,
          "input",
          /*input1_input_handler*/
          l[25]
        ),
        R(
          k,
          "change",
          /*updateGlobalConfig*/
          l[15]
        )
      ], O = !0);
    },
    p(T, N) {
      N[0] & /*globalTheme*/
      8 && x(
        d,
        /*globalTheme*/
        T[3]
      ), N[0] & /*globalTheme*/
      8 && te(
        b,
        /*globalTheme*/
        T[3]
      ), N[0] & /*globalTheme*/
      8 && ae(
        m,
        "color",
        /*globalTheme*/
        T[3]
      ), N[0] & /*globalWallpaper*/
      16 && k.value !== /*globalWallpaper*/
      T[4] && x(
        k,
        /*globalWallpaper*/
        T[4]
      ), N[0] & /*globalTheme*/
      8 && ae(
        y,
        "border-color",
        /*globalTheme*/
        T[3]
      );
    },
    i(T) {
      T && (S || Ne(() => {
        S = st(e, Sl, { y: 20 }), S.start();
      }));
    },
    o: ge,
    d(T) {
      T && P(e), O = !1, Te(C);
    }
  };
}
function n_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A;
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-microchip"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">GESTOR_XP</span> <span class="desc svelte-1eocpe5">Controle de fluxo de experi√™ncia</span></div>', i = g(), n = r("button"), n.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-calendar-alt"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">CRONO_SYS</span> <span class="desc svelte-1eocpe5">Calend√°rio T√°tico &amp; Eventos</span></div>', o = g(), c = r("button"), c.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-database"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">LOJA_DB</span> <span class="desc svelte-1eocpe5">Acesso mestre ao servidor de itens</span></div>', f = g(), u = r("button"), u.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-dna"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">GEN√âTICA</span> <span class="desc svelte-1eocpe5">Gerenciador de Origens &amp; Ra√ßas</span></div>', d = g(), p = r("button"), p.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-ticket-alt"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">PASS_SYS</span> <span class="desc svelte-1eocpe5">Gerenciador de Temporadas e Tiers</span></div>', m = g(), b = r("button"), b.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-sliders-h"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">ENGINE</span> <span class="desc svelte-1eocpe5">Configura√ß√µes visuais do n√∫cleo</span></div>', v = g(), h = r("button"), h.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-brain"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">O GUIA</span> <span class="desc svelte-1eocpe5">Assistente Inteligente</span></div>', _ = g(), w = r("button"), w.innerHTML = '<div class="icon-box svelte-1eocpe5"><i class="fas fa-database"></i></div> <div class="app-meta svelte-1eocpe5"><span class="name svelte-1eocpe5">NEXUS_DB</span> <span class="desc svelte-1eocpe5">Database &amp; Lore Manager</span></div>', s(t, "class", "modern-app xp-theme svelte-1eocpe5"), s(n, "class", "modern-app cal-theme svelte-1eocpe5"), s(c, "class", "modern-app store-theme svelte-1eocpe5"), s(u, "class", "modern-app origin-theme svelte-1eocpe5"), s(p, "class", "modern-app pass-theme svelte-1eocpe5"), s(b, "class", "modern-app config-theme svelte-1eocpe5"), s(h, "class", "modern-app ai-theme svelte-1eocpe5"), s(w, "class", "modern-app ai-theme svelte-1eocpe5"), s(e, "class", "app-grid svelte-1eocpe5");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(e, m), a(e, b), a(e, v), a(e, h), a(e, _), a(e, w), k || (A = [
        R(
          t,
          "click",
          /*click_handler*/
          l[16]
        ),
        R(
          n,
          "click",
          /*click_handler_1*/
          l[17]
        ),
        R(
          c,
          "click",
          /*click_handler_2*/
          l[18]
        ),
        R(
          u,
          "click",
          /*click_handler_3*/
          l[19]
        ),
        R(
          p,
          "click",
          /*click_handler_4*/
          l[20]
        ),
        R(
          b,
          "click",
          /*click_handler_5*/
          l[21]
        ),
        R(
          h,
          "click",
          /*click_handler_6*/
          l[22]
        ),
        R(
          w,
          "click",
          /*click_handler_7*/
          l[23]
        )
      ], k = !0);
    },
    p: ge,
    i: ge,
    o: ge,
    d(y) {
      y && P(e), k = !1, Te(A);
    }
  };
}
function Id(l) {
  let e, t = (
    /*line*/
    l[31] + ""
  ), i, n;
  return {
    c() {
      e = r("p"), i = B(t), s(e, "class", "boot-line svelte-1eocpe5");
    },
    m(o, c) {
      q(o, e, c), a(e, i);
    },
    p(o, c) {
      c[0] & /*bootLines*/
      2 && t !== (t = /*line*/
      o[31] + "") && te(i, t);
    },
    i(o) {
      o && (n || Ne(() => {
        n = st(e, yt, { axis: "y", duration: 200 }), n.start();
      }));
    },
    o: ge,
    d(o) {
      o && P(e);
    }
  };
}
function o_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T;
  const N = [xg, Zg], I = [];
  function D(M, G) {
    return (
      /*isLoading*/
      M[0] ? 0 : 1
    );
  }
  return k = D(l), A = I[k] = N[k](l), {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = g(), c = r("div"), f = g(), u = r("div"), d = g(), p = r("div"), m = r("div"), b = g(), v = r("div"), h = g(), _ = r("div"), w = g(), A.c(), y = g(), E = r("div"), s(t, "class", "code-border border-t svelte-1eocpe5"), s(n, "class", "code-border border-b svelte-1eocpe5"), s(c, "class", "code-border border-l svelte-1eocpe5"), s(u, "class", "code-border border-r svelte-1eocpe5"), s(m, "class", "wallpaper-fx svelte-1eocpe5"), ae(m, "background-image", "url('" + /*globalWallpaper*/
      l[4] + "')"), s(v, "class", "crt-overlay svelte-1eocpe5"), s(_, "class", "vignette svelte-1eocpe5"), s(p, "class", "terminal-core svelte-1eocpe5"), s(E, "class", "resize-handle svelte-1eocpe5"), s(e, "class", "admin-master-frame svelte-1eocpe5"), ae(
        e,
        "top",
        /*pos*/
        l[5].y + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[5].x + "px"
      ), ae(
        e,
        "width",
        /*size*/
        l[6].w + "px"
      ), ae(
        e,
        "height",
        /*size*/
        l[6].h + "px"
      ), ae(
        e,
        "--c-primary",
        /*globalTheme*/
        l[3]
      );
    },
    m(M, G) {
      q(M, e, G), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(p, m), a(p, b), a(p, v), a(p, h), a(p, _), a(p, w), I[k].m(p, null), a(e, y), a(e, E), O = !0, C || (T = [
        R(
          Od,
          "mousemove",
          /*onMove*/
          l[11]
        ),
        R(
          Od,
          "mouseup",
          /*stopInteraction*/
          l[10]
        ),
        R(
          E,
          "mousedown",
          /*startResize*/
          l[9]
        )
      ], C = !0);
    },
    p(M, G) {
      (!O || G[0] & /*globalWallpaper*/
      16) && ae(m, "background-image", "url('" + /*globalWallpaper*/
      M[4] + "')");
      let L = k;
      k = D(M), k === L ? I[k].p(M, G) : ($e(), Ae(I[L], 1, 1, () => {
        I[L] = null;
      }), et(), A = I[k], A ? A.p(M, G) : (A = I[k] = N[k](M), A.c()), ne(A, 1), A.m(p, null)), (!O || G[0] & /*pos*/
      32) && ae(
        e,
        "top",
        /*pos*/
        M[5].y + "px"
      ), (!O || G[0] & /*pos*/
      32) && ae(
        e,
        "left",
        /*pos*/
        M[5].x + "px"
      ), (!O || G[0] & /*size*/
      64) && ae(
        e,
        "width",
        /*size*/
        M[6].w + "px"
      ), (!O || G[0] & /*size*/
      64) && ae(
        e,
        "height",
        /*size*/
        M[6].h + "px"
      ), (!O || G[0] & /*globalTheme*/
      8) && ae(
        e,
        "--c-primary",
        /*globalTheme*/
        M[3]
      );
    },
    i(M) {
      O || (ne(A), M && Ne(() => {
        O && (S || (S = We(
          e,
          Mt,
          {
            duration: 300,
            start: 0.9,
            easing: Dl
          },
          !0
        )), S.run(1));
      }), O = !0);
    },
    o(M) {
      Ae(A), M && (S || (S = We(
        e,
        Mt,
        {
          duration: 300,
          start: 0.9,
          easing: Dl
        },
        !1
      )), S.run(0)), O = !1;
    },
    d(M) {
      M && P(e), I[k].d(), M && S && S.end(), C = !1, Te(T);
    }
  };
}
function r_(l, e, t) {
  const i = ml();
  let n = !0, o = [], c = "desktop", f = {
    name: "SYSTEM_ROOT",
    icon: "fa-network-wired"
  }, u = "#00ff41", d = "https://mir-s3-cdn-cf.behance.net/project_modules/hd/e4316a93890387.5e70ade47b737.gif", p = {
    x: window.innerWidth / 2 - 550,
    y: window.innerHeight / 2 - 375
  }, m = { w: 1100, h: 750 }, b = !1, v = !1;
  function h() {
    v || (b = !0);
  }
  function _(W) {
    W.preventDefault(), W.stopPropagation(), v = !0;
  }
  function w() {
    b = !1, v = !1;
  }
  function k(W) {
    b ? (t(5, p.x += W.movementX, p), t(5, p.y += W.movementY, p)) : v && (t(6, m.w = Math.max(600, m.w + W.movementX), m), t(6, m.h = Math.max(400, m.h + W.movementY), m));
  }
  qt(() => {
    A();
  });
  async function A() {
    const W = [
      "> KERNEL PROTOCOL INITIATED...",
      "> ESTABLISHING SECURE CONNECTION TO VTT SERVER...",
      "> CONNECTION SUCCESSFUL. PING: 1ms",
      "> VERIFYING GM CREDENTIALS...",
      "> ACCESS GRANTED: LEVEL 10 (ROOT)",
      "> MOUNTING DATABASES (XP, STORE, ORIGINS, PASS)...",
      "> LOADING MODULES... DONE.",
      "> WELCOME, OPERATOR."
    ];
    for (const H of W)
      t(1, o = [...o, H]), await new Promise((V) => setTimeout(V, Math.random() * 200 + 50));
    setTimeout(
      () => {
        t(0, n = !1);
      },
      500
    );
  }
  function y(W) {
    W === "store" ? C() : t(2, c = W);
  }
  function E() {
    t(2, c = "desktop");
  }
  function S() {
    i("close");
  }
  async function O() {
    await game.user.setFlag("multiversus-rpg", "globalTheme", u), await game.user.setFlag("multiversus-rpg", "globalWallpaper", d), ui.notifications.info("SISTEMA SINCRONIZADO: CONFIGURA√á√ïES DE N√öCLEO ATUALIZADAS.");
  }
  function C() {
    const W = document.createElement("div");
    W.id = "multiversus-store-admin-root", document.body.appendChild(W);
    const H = new P0({
      target: W,
      props: {
        actor: game.user.character || game.actors.contents[0],
        activeTab: "admin"
      }
    });
    H.$on("close", () => {
      H.$destroy(), W.remove();
    });
  }
  const T = () => y("xp"), N = () => y("calendar"), I = () => y("store"), D = () => y("origin"), M = () => y("pass"), G = () => y("config"), L = () => y("oracle"), U = () => y("nexus");
  function z() {
    u = this.value, t(3, u);
  }
  function F() {
    d = this.value, t(4, d);
  }
  return [
    n,
    o,
    c,
    u,
    d,
    p,
    m,
    f,
    h,
    _,
    w,
    k,
    y,
    E,
    S,
    O,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F
  ];
}
class c_ extends mt {
  constructor(e) {
    super(), pt(this, e, r_, o_, dt, {}, null, [-1, -1]);
  }
}
function f_(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.innerHTML = '<span class="gm-label svelte-f1qcgv">GM</span> <div class="scanline svelte-f1qcgv"></div>', n = g(), o = r("div"), c = g(), f = r("div"), s(i, "class", "pc-screen svelte-f1qcgv"), s(o, "class", "pc-base svelte-f1qcgv"), s(f, "class", "status-indicator svelte-f1qcgv"), he(
        f,
        "active",
        /*hubInstance*/
        l[1]
      ), s(t, "class", "pc-case svelte-f1qcgv"), s(e, "class", "admin-pc-floater svelte-f1qcgv"), ae(
        e,
        "top",
        /*pos*/
        l[0].y + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[0].x + "px"
      ), ae(
        e,
        "--c-theme",
        /*themeColor*/
        l[2]
      );
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(t, n), a(t, o), a(t, c), a(t, f), u || (d = [
        R(
          window,
          "mousemove",
          /*onWindowMove*/
          l[4]
        ),
        R(
          window,
          "mouseup",
          /*onWindowUp*/
          l[5]
        ),
        R(
          t,
          "mousedown",
          /*onMouseDown*/
          l[3]
        ),
        R(
          t,
          "click",
          /*handleClick*/
          l[6]
        )
      ], u = !0);
    },
    p(p, [m]) {
      m & /*hubInstance*/
      2 && he(
        f,
        "active",
        /*hubInstance*/
        p[1]
      ), m & /*pos*/
      1 && ae(
        e,
        "top",
        /*pos*/
        p[0].y + "px"
      ), m & /*pos*/
      1 && ae(
        e,
        "left",
        /*pos*/
        p[0].x + "px"
      ), m & /*themeColor*/
      4 && ae(
        e,
        "--c-theme",
        /*themeColor*/
        p[2]
      );
    },
    i: ge,
    o: ge,
    d(p) {
      p && P(e), u = !1, Te(d);
    }
  };
}
function d_(l, e, t) {
  let i, n = { x: 50, y: 50 }, o = !1, c = { x: 0, y: 0 }, f = !1, u = null;
  function d(_) {
    _.stopPropagation(), o = !0, f = !1, c = {
      x: _.clientX - n.x,
      y: _.clientY - n.y
    };
  }
  function p(_) {
    o && (f = !0, t(0, n.x = _.clientX - c.x, n), t(0, n.y = _.clientY - c.y, n));
  }
  function m() {
    o = !1;
  }
  function b(_) {
    _.stopPropagation(), !f && v();
  }
  function v() {
    u ? h() : (t(1, u = new c_({ target: document.body })), u.$on("close", h));
  }
  function h() {
    u && (u.$destroy(), t(1, u = null));
  }
  return ra(() => {
    u && u.$destroy();
  }), t(2, i = game.user.getFlag("multiversus-rpg", "globalTheme") || "#00ff41"), [
    n,
    u,
    i,
    d,
    p,
    m,
    b
  ];
}
class u_ extends mt {
  constructor(e) {
    super(), pt(this, e, d_, f_, dt, {});
  }
}
function p_(l, { from: e, to: t }, i = {}) {
  const n = getComputedStyle(l), o = n.transform === "none" ? "" : n.transform, [c, f] = n.transformOrigin.split(" ").map(parseFloat), u = e.left + e.width * c / t.width - (t.left + c), d = e.top + e.height * f / t.height - (t.top + f), { delay: p = 0, duration: m = (v) => Math.sqrt(v) * 120, easing: b = Dl } = i;
  return {
    delay: p,
    duration: oa(m) ? m(Math.sqrt(u * u + d * d)) : m,
    easing: b,
    css: (v, h) => {
      const _ = h * u, w = h * d, k = v + h * e.width / t.width, A = v + h * e.height / t.height;
      return `transform: ${o} translate(${_}px, ${w}px) scale(${k}, ${A});`;
    }
  };
}
function Td(l, e, t) {
  const i = l.slice();
  return i[29] = e[t], i[31] = t, i;
}
function Dd(l, e, t) {
  const i = l.slice();
  return i[32] = e[t], i[31] = t, i;
}
function m_(l, e, t) {
  const i = l.slice();
  return i[34] = e[t], i;
}
function es(l) {
  const e = l.slice(), t = (
    /*combatants*/
    e[3].find((i) => i.id === /*activeUnitId*/
    e[4])
  );
  return e[28] = t, e;
}
function Rd(l, e, t) {
  const i = l.slice();
  return i[37] = e[t], i;
}
function Md(l) {
  var o;
  let e, t, i = (
    /*item*/
    ((o = l[37].action.params) == null ? void 0 : o.damage) + ""
  ), n;
  return {
    c() {
      e = r("span"), t = B("+"), n = B(i), s(e, "class", "dmg svelte-qvcwmb");
    },
    m(c, f) {
      q(c, e, f), a(e, t), a(e, n);
    },
    p(c, f) {
      var u;
      f[0] & /*timeline*/
      32 && i !== (i = /*item*/
      ((u = c[37].action.params) == null ? void 0 : u.damage) + "") && te(n, i);
    },
    d(c) {
      c && P(e);
    }
  };
}
function Nd(l, e) {
  let t, i, n, o = (
    /*item*/
    e[37].width + ""
  ), c, f, u, d, p, m = (
    /*item*/
    e[37].height + ""
  ), b, v, h, _, w, k, A, y = (
    /*item*/
    e[37].name + ""
  ), E, S, O, C = (
    /*item*/
    e[37].action.type.toUpperCase() + ""
  ), T, N, I, D = ge, M, G, L = (
    /*item*/
    e[37].action.type === "ataque" && Md(e)
  );
  function U() {
    return (
      /*click_handler*/
      e[18](
        /*item*/
        e[37]
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), n = r("div"), c = B(o), f = g(), u = r("div"), u.textContent = "x", d = g(), p = r("div"), b = B(m), v = g(), h = r("img"), w = g(), k = r("div"), A = r("div"), E = B(y), S = g(), O = r("div"), T = B(C), N = g(), L && L.c(), s(n, "class", "w"), s(u, "class", "sep svelte-qvcwmb"), s(p, "class", "h svelte-qvcwmb"), s(i, "class", "speed-badge svelte-qvcwmb"), at(h.src, _ = /*item*/
      e[37].img) || s(h, "src", _), s(h, "alt", "img"), s(h, "class", "svelte-qvcwmb"), s(A, "class", "name svelte-qvcwmb"), s(O, "class", "desc svelte-qvcwmb"), s(k, "class", "t-data svelte-qvcwmb"), s(t, "class", "t-row svelte-qvcwmb"), he(
        t,
        "atk",
        /*item*/
        e[37].action.type === "ataque"
      ), he(
        t,
        "def",
        /*item*/
        e[37].action.type === "defesa"
      ), he(
        t,
        "active",
        /*activeUnitId*/
        e[4] === /*item*/
        e[37].actorId
      ), this.first = t;
    },
    m(z, F) {
      q(z, t, F), a(t, i), a(i, n), a(n, c), a(i, f), a(i, u), a(i, d), a(i, p), a(p, b), a(t, v), a(t, h), a(t, w), a(t, k), a(k, A), a(A, E), a(k, S), a(k, O), a(O, T), a(O, N), L && L.m(O, null), M || (G = R(t, "click", U), M = !0);
    },
    p(z, F) {
      e = z, F[0] & /*timeline*/
      32 && o !== (o = /*item*/
      e[37].width + "") && te(c, o), F[0] & /*timeline*/
      32 && m !== (m = /*item*/
      e[37].height + "") && te(b, m), F[0] & /*timeline*/
      32 && !at(h.src, _ = /*item*/
      e[37].img) && s(h, "src", _), F[0] & /*timeline*/
      32 && y !== (y = /*item*/
      e[37].name + "") && te(E, y), F[0] & /*timeline*/
      32 && C !== (C = /*item*/
      e[37].action.type.toUpperCase() + "") && te(T, C), /*item*/
      e[37].action.type === "ataque" ? L ? L.p(e, F) : (L = Md(e), L.c(), L.m(O, null)) : L && (L.d(1), L = null), F[0] & /*timeline*/
      32 && he(
        t,
        "atk",
        /*item*/
        e[37].action.type === "ataque"
      ), F[0] & /*timeline*/
      32 && he(
        t,
        "def",
        /*item*/
        e[37].action.type === "defesa"
      ), F[0] & /*activeUnitId, timeline*/
      48 && he(
        t,
        "active",
        /*activeUnitId*/
        e[4] === /*item*/
        e[37].actorId
      );
    },
    r() {
      I = t.getBoundingClientRect();
    },
    f() {
      am(t), D();
    },
    a() {
      D(), D = lm(t, I, p_, { duration: 400, easing: S0 });
    },
    d(z) {
      z && P(t), L && L.d(), M = !1, G();
    }
  };
}
function Ld(l) {
  let e;
  return {
    c() {
      e = r("div"), e.textContent = "AGUARDANDO...", s(e, "class", "empty");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Pd(l) {
  let e, t, i, n, o = (
    /*unit*/
    l[28].name + ""
  ), c, f, u, d, p, m, b, v, h, _ = !/*unit*/
  l[28].reactionUsed && /*unit*/
  l[28].reactionPool.d > 0 && qd(l), w = ce(
    /*unit*/
    l[28].pool
  ), k = [];
  for (let E = 0; E < w.length; E += 1)
    k[E] = Ud(Dd(l, w, E));
  let A = ce(
    /*unit*/
    l[28].currentSets
  ), y = [];
  for (let E = 0; E < A.length; E += 1)
    y[E] = Gd(Td(l, A, E));
  return {
    c() {
      e = r("div"), t = r("header"), i = r("span"), n = B(">> "), c = B(o), f = g(), _ && _.c(), u = g(), d = r("div"), p = r("div");
      for (let E = 0; E < k.length; E += 1)
        k[E].c();
      m = g(), b = r("div");
      for (let E = 0; E < y.length; E += 1)
        y[E].c();
      s(t, "class", "drag-header svelte-qvcwmb"), s(p, "class", "pool-grid svelte-qvcwmb"), s(b, "class", "sets-list"), s(d, "class", "widget-content svelte-qvcwmb"), s(e, "class", "widget hud-widget svelte-qvcwmb"), ae(
        e,
        "top",
        /*pos*/
        l[1].y + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[1].x + 230 + "px"
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(i, n), a(i, c), a(t, f), _ && _.m(t, null), a(e, u), a(e, d), a(d, p);
      for (let O = 0; O < k.length; O += 1)
        k[O] && k[O].m(p, null);
      a(d, m), a(d, b);
      for (let O = 0; O < y.length; O += 1)
        y[O] && y[O].m(b, null);
      h = !0;
    },
    p(E, S) {
      if ((!h || S[0] & /*combatants, activeUnitId*/
      24) && o !== (o = /*unit*/
      E[28].name + "") && te(c, o), !/*unit*/
      E[28].reactionUsed && /*unit*/
      E[28].reactionPool.d > 0 ? _ ? _.p(E, S) : (_ = qd(E), _.c(), _.m(t, null)) : _ && (_.d(1), _ = null), S[0] & /*combatants, activeUnitId, setWiggle*/
      4120) {
        w = ce(
          /*unit*/
          E[28].pool
        );
        let O;
        for (O = 0; O < w.length; O += 1) {
          const C = Dd(E, w, O);
          k[O] ? k[O].p(C, S) : (k[O] = Ud(C), k[O].c(), k[O].m(p, null));
        }
        for (; O < k.length; O += 1)
          k[O].d(1);
        k.length = w.length;
      }
      if (S[0] & /*activateSet, combatants, activeUnitId, toggleType*/
      10264) {
        A = ce(
          /*unit*/
          E[28].currentSets
        );
        let O;
        for (O = 0; O < A.length; O += 1) {
          const C = Td(E, A, O);
          y[O] ? y[O].p(C, S) : (y[O] = Gd(C), y[O].c(), y[O].m(b, null));
        }
        for (; O < y.length; O += 1)
          y[O].d(1);
        y.length = A.length;
      }
      (!h || S[0] & /*pos*/
      2) && ae(
        e,
        "top",
        /*pos*/
        E[1].y + "px"
      ), (!h || S[0] & /*pos*/
      2) && ae(
        e,
        "left",
        /*pos*/
        E[1].x + 230 + "px"
      );
    },
    i(E) {
      h || (E && Ne(() => {
        h && (v || (v = We(e, Sl, { x: -20, duration: 300 }, !0)), v.run(1));
      }), h = !0);
    },
    o(E) {
      E && (v || (v = We(e, Sl, { x: -20, duration: 300 }, !1)), v.run(0)), h = !1;
    },
    d(E) {
      E && P(e), _ && _.d(), Fe(k, E), Fe(y, E), E && v && v.end();
    }
  };
}
function qd(l) {
  let e, t, i = (
    /*unit*/
    l[28].reactionPool.d + ""
  ), n, o, c, f;
  function u() {
    return (
      /*click_handler_1*/
      l[19](
        /*unit*/
        l[28]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = B("‚ö° REAGIR ("), n = B(i), o = B(")"), s(e, "class", "react-btn svelte-qvcwmb");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, n), a(e, o), c || (f = R(e, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*combatants, activeUnitId*/
      24 && i !== (i = /*unit*/
      l[28].reactionPool.d + "") && te(n, i);
    },
    d(d) {
      d && P(e), c = !1, f();
    }
  };
}
function b_(l) {
  let e = (
    /*die*/
    l[32].val + ""
  ), t;
  return {
    c() {
      t = B(e);
    },
    m(i, n) {
      q(i, t, n);
    },
    p(i, n) {
      n[0] & /*combatants, activeUnitId*/
      24 && e !== (e = /*die*/
      i[32].val + "") && te(t, e);
    },
    d(i) {
      i && P(t);
    }
  };
}
function v_(l) {
  let e, t, i, n, o = ce([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]), c = [];
  for (let u = 0; u < 10; u += 1)
    c[u] = h_(m_(l, o, u));
  function f(...u) {
    return (
      /*change_handler*/
      l[20](
        /*unit*/
        l[28],
        /*i*/
        l[31],
        ...u
      )
    );
  }
  return {
    c() {
      e = r("select"), t = r("option"), t.textContent = "?";
      for (let u = 0; u < 10; u += 1)
        c[u].c();
      t.__value = "0", x(t, t.__value), s(e, "class", "svelte-qvcwmb");
    },
    m(u, d) {
      q(u, e, d), a(e, t);
      for (let p = 0; p < 10; p += 1)
        c[p] && c[p].m(e, null);
      i || (n = R(e, "change", f), i = !0);
    },
    p(u, d) {
      l = u;
    },
    d(u) {
      u && P(e), Fe(c, u), i = !1, n();
    }
  };
}
function h_(l) {
  let e;
  return {
    c() {
      e = r("option"), e.textContent = `${/*n*/
      l[34]}`, e.__value = /*n*/
      l[34], x(e, e.__value);
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function Ud(l) {
  let e, t, i;
  function n(f, u) {
    return (
      /*die*/
      f[32].val === 0 ? v_ : b_
    );
  }
  let o = n(l), c = o(l);
  return {
    c() {
      e = r("div"), c.c(), t = g(), s(e, "class", i = "die " + /*die*/
      l[32].type + " svelte-qvcwmb"), he(
        e,
        "wiggle",
        /*die*/
        l[32].val === 0
      );
    },
    m(f, u) {
      q(f, e, u), c.m(e, null), a(e, t);
    },
    p(f, u) {
      o === (o = n(f)) && c ? c.p(f, u) : (c.d(1), c = o(f), c && (c.c(), c.m(e, t))), u[0] & /*combatants, activeUnitId*/
      24 && i !== (i = "die " + /*die*/
      f[32].type + " svelte-qvcwmb") && s(e, "class", i), u[0] & /*combatants, activeUnitId, combatants, activeUnitId*/
      24 && he(
        e,
        "wiggle",
        /*die*/
        f[32].val === 0
      );
    },
    d(f) {
      f && P(e), c.d();
    }
  };
}
function Gd(l) {
  let e, t, i = (
    /*s*/
    l[29].width + ""
  ), n, o, c = (
    /*s*/
    l[29].height + ""
  ), f, u, d, p, m, b, v, h, _, w, k;
  function A() {
    return (
      /*click_handler_2*/
      l[21](
        /*unit*/
        l[28],
        /*i*/
        l[31]
      )
    );
  }
  function y() {
    return (
      /*click_handler_3*/
      l[22](
        /*unit*/
        l[28],
        /*i*/
        l[31]
      )
    );
  }
  function E() {
    return (
      /*click_handler_4*/
      l[23](
        /*unit*/
        l[28],
        /*i*/
        l[31],
        /*s*/
        l[29]
      )
    );
  }
  return {
    c() {
      var S, O;
      e = r("div"), t = r("span"), n = B(i), o = B("x"), f = B(c), u = g(), d = r("div"), p = r("button"), p.textContent = "‚öîÔ∏è", m = g(), b = r("button"), b.textContent = "üõ°Ô∏è", v = g(), h = r("button"), h.textContent = "GO", _ = g(), s(t, "class", "badge svelte-qvcwmb"), s(p, "class", "tb atk svelte-qvcwmb"), he(
        p,
        "on",
        /*unit*/
        ((S = l[28].actions[
          /*i*/
          l[31]
        ]) == null ? void 0 : S.type) === "ataque"
      ), s(b, "class", "tb def svelte-qvcwmb"), he(
        b,
        "on",
        /*unit*/
        ((O = l[28].actions[
          /*i*/
          l[31]
        ]) == null ? void 0 : O.type) === "defesa"
      ), s(d, "class", "toggles svelte-qvcwmb"), s(h, "class", "go-btn svelte-qvcwmb"), s(e, "class", "set-row svelte-qvcwmb");
    },
    m(S, O) {
      q(S, e, O), a(e, t), a(t, n), a(t, o), a(t, f), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), a(e, v), a(e, h), a(e, _), w || (k = [
        R(p, "click", A),
        R(b, "click", y),
        R(h, "click", E)
      ], w = !0);
    },
    p(S, O) {
      var C, T;
      l = S, O[0] & /*combatants, activeUnitId*/
      24 && i !== (i = /*s*/
      l[29].width + "") && te(n, i), O[0] & /*combatants, activeUnitId*/
      24 && c !== (c = /*s*/
      l[29].height + "") && te(f, c), O[0] & /*combatants, activeUnitId*/
      24 && he(
        p,
        "on",
        /*unit*/
        ((C = l[28].actions[
          /*i*/
          l[31]
        ]) == null ? void 0 : C.type) === "ataque"
      ), O[0] & /*combatants, activeUnitId*/
      24 && he(
        b,
        "on",
        /*unit*/
        ((T = l[28].actions[
          /*i*/
          l[31]
        ]) == null ? void 0 : T.type) === "defesa"
      );
    },
    d(S) {
      S && P(e), w = !1, Te(k);
    }
  };
}
function g_(l) {
  let e, t, i, n;
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "ENCERRAR RODADA", s(t, "class", "end-round-btn svelte-qvcwmb"), s(e, "class", "gm-controls svelte-qvcwmb"), ae(
        e,
        "top",
        /*pos*/
        l[1].y + 400 + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[1].x + "px"
      );
    },
    m(o, c) {
      q(o, e, c), a(e, t), i || (n = R(
        t,
        "click",
        /*endRound*/
        l[8]
      ), i = !0);
    },
    p(o, c) {
      c[0] & /*pos*/
      2 && ae(
        e,
        "top",
        /*pos*/
        o[1].y + 400 + "px"
      ), c[0] & /*pos*/
      2 && ae(
        e,
        "left",
        /*pos*/
        o[1].x + "px"
      );
    },
    d(o) {
      o && P(e), i = !1, n();
    }
  };
}
function Hd(l) {
  let e, t, i, n = (
    /*targeting*/
    l[6].setType + ""
  ), o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("span"), i = B("SELECIONE ALVO: "), o = B(n), c = g(), f = r("button"), f.textContent = "X", s(t, "class", "blink svelte-qvcwmb"), s(f, "class", "svelte-qvcwmb"), s(e, "class", "target-float svelte-qvcwmb"), ae(
        e,
        "top",
        /*pos*/
        l[1].y - 40 + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[1].x + "px"
      );
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(t, o), a(e, c), a(e, f), u || (d = R(
        f,
        "click",
        /*click_handler_5*/
        l[24]
      ), u = !0);
    },
    p(p, m) {
      m[0] & /*targeting*/
      64 && n !== (n = /*targeting*/
      p[6].setType + "") && te(o, n), m[0] & /*pos*/
      2 && ae(
        e,
        "top",
        /*pos*/
        p[1].y - 40 + "px"
      ), m[0] & /*pos*/
      2 && ae(
        e,
        "left",
        /*pos*/
        p[1].x + "px"
      );
    },
    d(p) {
      p && P(e), u = !1, d();
    }
  };
}
function __(l) {
  let e, t, i, n, o, c = [], f = /* @__PURE__ */ new Map(), u, d, p, m, b, v, h = ce(
    /*timeline*/
    l[5]
  );
  const _ = (E) => (
    /*item*/
    E[37].uniqueId
  );
  for (let E = 0; E < h.length; E += 1) {
    let S = Rd(l, h, E), O = _(S);
    f.set(O, c[E] = Nd(O, S));
  }
  let w = (
    /*timeline*/
    l[5].length === 0 && Ld()
  ), k = (
    /*activeUnitId*/
    l[4] && Pd(es(l))
  ), A = (
    /*isGM*/
    l[7] && g_(l)
  ), y = (
    /*targeting*/
    l[6].active && Hd(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), i.innerHTML = '<i class="fas fa-list-ol"></i> <span>INICIATIVA</span>', n = g(), o = r("div");
      for (let E = 0; E < c.length; E += 1)
        c[E].c();
      u = g(), w && w.c(), d = g(), k && k.c(), p = g(), A && A.c(), m = g(), y && y.c(), s(i, "class", "drag-header svelte-qvcwmb"), s(o, "class", "widget-content scrollable svelte-qvcwmb"), he(
        o,
        "targeting",
        /*targeting*/
        l[6].active
      ), s(t, "class", "widget timeline-widget svelte-qvcwmb"), ae(
        t,
        "top",
        /*pos*/
        l[1].y + "px"
      ), ae(
        t,
        "left",
        /*pos*/
        l[1].x + "px"
      ), s(e, "class", "overlay-root svelte-qvcwmb"), ae(
        e,
        "--theme",
        /*themeColor*/
        l[0]
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let O = 0; O < c.length; O += 1)
        c[O] && c[O].m(o, null);
      a(o, u), w && w.m(o, null), a(e, d), k && k.m(e, null), a(e, p), A && A.m(e, null), a(e, m), y && y.m(e, null), b || (v = [
        R(
          window,
          "mousemove",
          /*mousemove_handler*/
          l[15]
        ),
        R(
          window,
          "mouseup",
          /*mouseup_handler*/
          l[16]
        ),
        R(
          i,
          "mousedown",
          /*mousedown_handler*/
          l[17]
        )
      ], b = !0);
    },
    p(E, S) {
      if (S[0] & /*timeline, activeUnitId, handleTimelineClick*/
      1072) {
        h = ce(
          /*timeline*/
          E[5]
        );
        for (let O = 0; O < c.length; O += 1) c[O].r();
        c = Tl(c, S, _, 1, E, h, f, o, cm, Nd, u, Rd);
        for (let O = 0; O < c.length; O += 1) c[O].a();
      }
      /*timeline*/
      E[5].length === 0 ? w || (w = Ld(), w.c(), w.m(o, null)) : w && (w.d(1), w = null), S[0] & /*targeting*/
      64 && he(
        o,
        "targeting",
        /*targeting*/
        E[6].active
      ), S[0] & /*pos*/
      2 && ae(
        t,
        "top",
        /*pos*/
        E[1].y + "px"
      ), S[0] & /*pos*/
      2 && ae(
        t,
        "left",
        /*pos*/
        E[1].x + "px"
      ), /*activeUnitId*/
      E[4] ? k ? (k.p(es(E), S), S[0] & /*activeUnitId*/
      16 && ne(k, 1)) : (k = Pd(es(E)), k.c(), ne(k, 1), k.m(e, p)) : k && ($e(), Ae(k, 1, 1, () => {
        k = null;
      }), et()), /*isGM*/
      E[7] && A.p(E, S), /*targeting*/
      E[6].active ? y ? y.p(E, S) : (y = Hd(E), y.c(), y.m(e, null)) : y && (y.d(1), y = null), S[0] & /*themeColor*/
      1 && ae(
        e,
        "--theme",
        /*themeColor*/
        E[0]
      );
    },
    i(E) {
      ne(k);
    },
    o(E) {
      Ae(k);
    },
    d(E) {
      E && P(e);
      for (let S = 0; S < c.length; S += 1)
        c[S].d();
      w && w.d(), k && k.d(), A && A.d(), y && y.d(), b = !1, Te(v);
    }
  };
}
const k_ = "multiversus-rpg";
function w_(l) {
  return !l || l.length === 0 ? [{ type: "geral", text: "A√ß√£o Improvisada" }] : l;
}
function y_(l) {
  let e = [];
  for (let i = 0; i < (l.dice.hd || 0); i++) e.push({ val: 10, type: "hd", locked: !0 });
  let t = Math.max(0, l.dice.d || 0);
  for (let i = 0; i < t; i++) e.push({ val: q0(), type: "d", locked: !0 });
  for (let i = 0; i < (l.dice.wd || 0); i++) e.push({ val: 0, type: "wd", locked: !1 });
  return e;
}
function q0() {
  return Math.floor(Math.random() * 10) + 1;
}
function A_(l, e, t) {
  let { data: i } = e, { themeColor: n = "#00ff41" } = e;
  const o = ml(), c = game.user.isGM;
  let f = { x: 20, y: 100 }, u = !1, d = [], p = null, m = [], b = {
    active: !1,
    sourceId: null,
    setType: null,
    setIndex: null,
    setStats: { w: 0, h: 0 },
    isInterference: !1
  };
  qt(() => {
    const U = [...i.players, ...i.npcs];
    t(3, d = U.map((z) => {
      var H;
      const F = z.actorId || foundry.utils.randomID();
      return !c && (z.name === game.user.name || z.name === ((H = game.user.character) == null ? void 0 : H.name)) && t(4, p = F), {
        ...z,
        id: F,
        pool: y_(z),
        // Gera pool SEM rea√ß√£o
        reactionUsed: !1,
        reactionPool: { d: z.dice.reactD || 0 },
        // Guarda dados de rea√ß√£o
        currentSets: [],
        actions: w_(z.actions)
      };
    })), c && d.length > 0 && t(4, p = d[0].id), v();
  });
  function v() {
    let U = [];
    d.forEach((z) => {
      const F = {};
      z.pool.filter((H) => H.val > 0).forEach((H) => F[H.val] = (F[H.val] || 0) + 1);
      const W = Object.entries(F).filter(([H, V]) => V >= 2).map(([H, V]) => ({ width: V, height: parseInt(H) })).sort((H, V) => V.width - H.width || V.height - H.height);
      z.currentSets = W, W.forEach((H, V) => {
        let J = z.actions[V] || { type: "utilidade", text: "A√ß√£o Extra" };
        U.push({
          uniqueId: `${z.id}-${H.height}-${H.width}`,
          // ID para anima√ß√£o
          actorId: z.id,
          name: z.name,
          img: z.img,
          width: H.width,
          height: H.height,
          action: J,
          setIndex: V
        });
      });
    }), t(5, m = U.sort((z, F) => F.width - z.width || F.height - z.height));
  }
  async function h() {
    if (c) {
      for (let U of game.users)
        U.isGM || await U.unsetFlag(k_, "combatDeclaration");
      ChatMessage.create({
        content: `<div style="border:1px solid ${n}; background:#000; color:${n}; padding:5px; text-align:center; font-family:monospace;">>> FIM DA RODADA T√ÅTICA <<</div>`
      }), o("close");
    }
  }
  function _(U) {
    const z = d.findIndex((W) => W.id === U), F = d[z];
    if (!(F.reactionUsed || F.reactionPool.d <= 0)) {
      for (let W = 0; W < F.reactionPool.d; W++)
        F.pool.push({ val: q0(), type: "d", locked: !0 });
      F.reactionUsed = !0, t(3, d[z] = F, d), v(), ui.notifications.warn(`${F.name}: Rea√ß√£o Ativada! Iniciativa Recalculada.`);
    }
  }
  function w(U) {
    if (b.active) {
      A(U);
      return;
    }
    c && t(4, p = U.actorId);
  }
  function k(U, z, F) {
    var V;
    const W = d.find((J) => J.id === U), H = W.actions[z];
    H.type === "ataque" || H.type === "defesa" ? (t(6, b = {
      active: !0,
      sourceId: U,
      setType: H.type === "ataque" ? "ATAQUE" : "DEFESA",
      setIndex: z,
      setStats: F,
      isInterference: ((V = H.params) == null ? void 0 : V.defType) === "interferencia",
      actionData: H
    }), ui.notifications.info("CLIQUE NO ALVO NA LISTA DE INICIATIVA")) : ChatMessage.create({
      content: `<b>${W.name}</b> executa: ${H.text}`
    });
  }
  function A(U) {
    if (U.actorId === b.sourceId) return ui.notifications.warn("Alvo inv√°lido.");
    const z = d.find((F) => F.id === b.sourceId).name;
    if (b.setType === "ATAQUE") {
      const F = b.actionData.params;
      ChatMessage.create({
        content: `
                <div style="background:#220000; color:#ffaaaa; border:1px solid #f00; padding:5px; font-family:monospace; font-size:11px;">
                    <div style="border-bottom:1px solid #f00; font-weight:bold; margin-bottom:4px;">${z} >> ATAQUE >> ${U.name}</div>
                    VEL: ${b.setStats.width} | LOC: ${F.location || b.setStats.height}<br>
                    DMG: ${F.damage} | PEN: ${F.penetration}
                    ${F.isSpray ? `<br><span style="color:#fc0">‚ö† SPRAY (${F.sprayDice}D)</span>` : ""}
                </div>`
      });
    } else {
      const F = b.setStats.width, W = U.width;
      if (!b.isInterference && W > F) {
        ui.notifications.error("DEFESA FALHOU: Ataque mais r√°pido que a defesa. Necess√°rio 'Interfer√™ncia'."), t(6, b = { active: !1 });
        return;
      }
      const H = d.findIndex((X) => X.id === U.actorId);
      let V = 0;
      t(
        3,
        d[H].pool = d[H].pool.filter((X) => V < F && X.val === U.height ? (V++, !1) : !0),
        d
      );
      const J = d.findIndex((X) => X.id === b.sourceId);
      let j = 0;
      t(
        3,
        d[J].pool = d[J].pool.filter((X) => j < F && X.val === b.setStats.height ? (j++, !1) : !0),
        d
      ), v(), ChatMessage.create({
        content: `<div style="background:#001122; color:#aaf; border:1px solid #00f; padding:5px; font-family:monospace; font-size:11px;">
                    <b>${z} >> DEFESA</b><br>
                    Quebrou ${V} dados de ${U.name}.
                </div>`
      });
    }
    t(6, b = { active: !1 });
  }
  function y(U, z, F) {
    const W = d.findIndex((H) => H.id === U);
    t(3, d[W].pool[z].val = F, d), v();
  }
  function E(U, z, F) {
    const W = d.findIndex((H) => H.id === U);
    t(3, d[W].actions[z].type = F, d), v();
  }
  const S = (U) => {
    u && (t(1, f.x += U.movementX, f), t(1, f.y += U.movementY, f));
  }, O = () => t(2, u = !1), C = () => t(2, u = !0), T = (U) => w(U), N = (U) => _(U.id), I = (U, z, F) => y(U.id, z, parseInt(F.target.value)), D = (U, z) => E(U.id, z, "ataque"), M = (U, z) => E(U.id, z, "defesa"), G = (U, z, F) => k(U.id, z, F), L = () => t(6, b = { active: !1 });
  return l.$$set = (U) => {
    "data" in U && t(14, i = U.data), "themeColor" in U && t(0, n = U.themeColor);
  }, [
    n,
    f,
    u,
    d,
    p,
    m,
    b,
    c,
    h,
    _,
    w,
    k,
    y,
    E,
    i,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L
  ];
}
class U0 extends mt {
  constructor(e) {
    super(), pt(this, e, A_, __, dt, { data: 14, themeColor: 0 }, null, [-1, -1]);
  }
}
function zd(l, e, t) {
  const i = l.slice();
  return i[54] = e[t], i[55] = e, i[56] = t, i;
}
function Bd(l, e, t) {
  const i = l.slice();
  return i[57] = e[t], i;
}
function Fd(l, e, t) {
  const i = l.slice();
  return i[60] = e[t], i;
}
function E_(l) {
  let e, t, i, n, o, c = (
    /*isGM*/
    l[11] ? "GM_CORE" : "UNIT_LINK"
  ), f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe = (
    /*totalPool*/
    l[9].d + ""
  ), Ee, De, we = (
    /*totalPool*/
    l[9].hd + ""
  ), ke, me, re = (
    /*totalPool*/
    l[9].wd + ""
  ), ye, oe, be, de, Oe, _e, ue;
  function Re(ve, Ue) {
    return (
      /*isGM*/
      ve[11] ? C_ : S_
    );
  }
  let He = Re(l)(l);
  function Ge(ve, Ue) {
    return (
      /*isGM*/
      ve[11] ? T_ : I_
    );
  }
  let fe = Ge(l)(l), Le = ce(
    /*activeEntity*/
    l[4].actions
  ), qe = [];
  for (let ve = 0; ve < Le.length; ve += 1)
    qe[ve] = Qd(zd(l, Le, ve));
  const Me = (ve) => Ae(qe[ve], 1, 1, () => {
    qe[ve] = null;
  });
  let Se = !/*isGM*/
  l[11] && M_(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("i"), o = B(" VETOR_STRATEGY // "), f = B(c), u = g(), d = r("button"), d.textContent = "√ó", p = g(), m = r("div"), b = r("aside"), He.c(), v = g(), h = r("main"), _ = r("header"), fe.c(), w = g(), k = r("div");
      for (let ve = 0; ve < qe.length; ve += 1)
        qe[ve].c();
      A = g(), y = r("button"), y.textContent = "+ VETOR", E = g(), S = r("footer"), O = r("div"), C = r("div"), T = r("label"), T.textContent = "D", N = r("input"), I = g(), D = r("div"), M = r("label"), M.textContent = "HD", G = r("input"), L = g(), U = r("div"), z = r("label"), z.textContent = "WD", F = r("input"), W = g(), H = r("div"), H.textContent = "|", V = g(), J = r("div"), j = r("label"), j.textContent = "BUF", X = r("input"), K = g(), Z = r("div"), le = r("label"), le.textContent = "DBF", $ = r("input"), se = g(), Y = r("div"), Q = r("div"), ie = B("POOL: "), ee = r("b"), Ee = B(pe), De = B("d | "), ke = B(we), me = B("h | "), ye = B(re), oe = B("w"), be = g(), Se && Se.c(), s(n, "class", "fas fa-terminal"), s(i, "class", "grip-title"), s(d, "class", "win-close svelte-30lhtb"), s(t, "class", "window-grip svelte-30lhtb"), s(b, "class", "sidebar svelte-30lhtb"), s(_, "class", "entity-header svelte-30lhtb"), s(y, "class", "btn-add-action svelte-30lhtb"), s(k, "class", "actions-scroll-area svelte-30lhtb"), s(T, "class", "svelte-30lhtb"), s(N, "type", "number"), s(N, "class", "svelte-30lhtb"), s(C, "class", "input-col svelte-30lhtb"), s(M, "class", "hd svelte-30lhtb"), s(G, "type", "number"), s(G, "class", "hd-input svelte-30lhtb"), s(D, "class", "input-col svelte-30lhtb"), s(z, "class", "wd svelte-30lhtb"), s(F, "type", "number"), s(F, "class", "wd-input svelte-30lhtb"), s(U, "class", "input-col svelte-30lhtb"), s(H, "class", "sep svelte-30lhtb"), s(j, "class", "buff svelte-30lhtb"), s(X, "type", "number"), s(X, "class", "buff-input svelte-30lhtb"), s(J, "class", "input-col svelte-30lhtb"), s(le, "class", "debuff svelte-30lhtb"), s($, "type", "number"), s($, "class", "debuff-input svelte-30lhtb"), s(Z, "class", "input-col svelte-30lhtb"), s(O, "class", "pool-setup svelte-30lhtb"), s(Q, "class", "pool-preview svelte-30lhtb"), s(Y, "class", "transmit-section svelte-30lhtb"), s(S, "class", "pool-footer svelte-30lhtb"), s(h, "class", "main-panel svelte-30lhtb"), s(m, "class", "hacker-layout svelte-30lhtb"), s(e, "class", "terminal-window svelte-30lhtb"), ae(
        e,
        "left",
        /*winPos*/
        l[5].x + "px"
      ), ae(
        e,
        "top",
        /*winPos*/
        l[5].y + "px"
      );
    },
    m(ve, Ue) {
      q(ve, e, Ue), a(e, t), a(t, i), a(i, n), a(i, o), a(i, f), a(t, u), a(t, d), a(e, p), a(e, m), a(m, b), He.m(b, null), a(m, v), a(m, h), a(h, _), fe.m(_, null), a(h, w), a(h, k);
      for (let Ve = 0; Ve < qe.length; Ve += 1)
        qe[Ve] && qe[Ve].m(k, null);
      a(k, A), a(k, y), a(h, E), a(h, S), a(S, O), a(O, C), a(C, T), a(C, N), x(
        N,
        /*activeEntity*/
        l[4].dice.d
      ), a(O, I), a(O, D), a(D, M), a(D, G), x(
        G,
        /*activeEntity*/
        l[4].dice.hd
      ), a(O, L), a(O, U), a(U, z), a(U, F), x(
        F,
        /*activeEntity*/
        l[4].dice.wd
      ), a(O, W), a(O, H), a(O, V), a(O, J), a(J, j), a(J, X), x(
        X,
        /*activeEntity*/
        l[4].mods.buffers
      ), a(O, K), a(O, Z), a(Z, le), a(Z, $), x(
        $,
        /*activeEntity*/
        l[4].mods.debuffs
      ), a(S, se), a(S, Y), a(Y, Q), a(Q, ie), a(Q, ee), a(ee, Ee), a(ee, De), a(ee, ke), a(ee, me), a(ee, ye), a(ee, oe), a(Y, be), Se && Se.m(Y, null), Oe = !0, _e || (ue = [
        R(
          d,
          "click",
          /*click_handler*/
          l[25]
        ),
        R(
          t,
          "mousedown",
          /*handleMouseDown*/
          l[12]
        ),
        R(
          y,
          "click",
          /*addManeuver*/
          l[15]
        ),
        R(
          N,
          "input",
          /*input0_input_handler_2*/
          l[44]
        ),
        R(
          G,
          "input",
          /*input1_input_handler_2*/
          l[45]
        ),
        R(
          F,
          "input",
          /*input2_input_handler*/
          l[46]
        ),
        R(
          X,
          "input",
          /*input3_input_handler*/
          l[47]
        ),
        R(
          $,
          "input",
          /*input4_input_handler*/
          l[48]
        )
      ], _e = !0);
    },
    p(ve, Ue) {
      if (He.p(ve, Ue), fe.p(ve, Ue), Ue[0] & /*activeEntity, removeManeuver, toggleCollapse*/
      196624) {
        Le = ce(
          /*activeEntity*/
          ve[4].actions
        );
        let Ve;
        for (Ve = 0; Ve < Le.length; Ve += 1) {
          const rt = zd(ve, Le, Ve);
          qe[Ve] ? (qe[Ve].p(rt, Ue), ne(qe[Ve], 1)) : (qe[Ve] = Qd(rt), qe[Ve].c(), ne(qe[Ve], 1), qe[Ve].m(k, A));
        }
        for ($e(), Ve = Le.length; Ve < qe.length; Ve += 1)
          Me(Ve);
        et();
      }
      Ue[0] & /*activeEntity*/
      16 && Je(N.value) !== /*activeEntity*/
      ve[4].dice.d && x(
        N,
        /*activeEntity*/
        ve[4].dice.d
      ), Ue[0] & /*activeEntity*/
      16 && Je(G.value) !== /*activeEntity*/
      ve[4].dice.hd && x(
        G,
        /*activeEntity*/
        ve[4].dice.hd
      ), Ue[0] & /*activeEntity*/
      16 && Je(F.value) !== /*activeEntity*/
      ve[4].dice.wd && x(
        F,
        /*activeEntity*/
        ve[4].dice.wd
      ), Ue[0] & /*activeEntity*/
      16 && Je(X.value) !== /*activeEntity*/
      ve[4].mods.buffers && x(
        X,
        /*activeEntity*/
        ve[4].mods.buffers
      ), Ue[0] & /*activeEntity*/
      16 && Je($.value) !== /*activeEntity*/
      ve[4].mods.debuffs && x(
        $,
        /*activeEntity*/
        ve[4].mods.debuffs
      ), (!Oe || Ue[0] & /*totalPool*/
      512) && pe !== (pe = /*totalPool*/
      ve[9].d + "") && te(Ee, pe), (!Oe || Ue[0] & /*totalPool*/
      512) && we !== (we = /*totalPool*/
      ve[9].hd + "") && te(ke, we), (!Oe || Ue[0] & /*totalPool*/
      512) && re !== (re = /*totalPool*/
      ve[9].wd + "") && te(ye, re), /*isGM*/
      ve[11] || Se.p(ve, Ue), (!Oe || Ue[0] & /*winPos*/
      32) && ae(
        e,
        "left",
        /*winPos*/
        ve[5].x + "px"
      ), (!Oe || Ue[0] & /*winPos*/
      32) && ae(
        e,
        "top",
        /*winPos*/
        ve[5].y + "px"
      );
    },
    i(ve) {
      if (!Oe) {
        for (let Ue = 0; Ue < Le.length; Ue += 1)
          ne(qe[Ue]);
        ve && Ne(() => {
          Oe && (de || (de = We(e, Qe, {}, !0)), de.run(1));
        }), Oe = !0;
      }
    },
    o(ve) {
      qe = qe.filter(Boolean);
      for (let Ue = 0; Ue < qe.length; Ue += 1)
        Ae(qe[Ue]);
      ve && (de || (de = We(e, Qe, {}, !1)), de.run(0)), Oe = !1;
    },
    d(ve) {
      ve && P(e), He.d(), fe.d(), Fe(qe, ve), Se && Se.d(), ve && de && de.end(), _e = !1, Te(ue);
    }
  };
}
function O_(l) {
  let e, t;
  return e = new U0({
    props: {
      data: (
        /*resolutionData*/
        l[7]
      ),
      themeColor: (
        /*themeColor*/
        l[1]
      )
    }
  }), e.$on(
    "close",
    /*close_handler*/
    l[24]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*resolutionData*/
      128 && (o.data = /*resolutionData*/
      i[7]), n[0] & /*themeColor*/
      2 && (o.themeColor = /*themeColor*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function S_(l) {
  var p;
  let e, t, i, n, o, c = (
    /*actor*/
    ((p = l[0]) == null ? void 0 : p.name) + ""
  ), f, u, d;
  return {
    c() {
      var m;
      e = r("div"), t = r("img"), n = g(), o = r("span"), f = B(c), u = g(), d = r("span"), d.textContent = "ONLINE", at(t.src, i = /*actor*/
      (m = l[0]) == null ? void 0 : m.img) || s(t, "src", i), s(t, "class", "p-img svelte-30lhtb"), s(t, "alt", "Actor"), s(o, "class", "p-name svelte-30lhtb"), s(d, "class", "p-status svelte-30lhtb"), s(e, "class", "player-profile svelte-30lhtb");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(e, n), a(e, o), a(o, f), a(e, u), a(e, d);
    },
    p(m, b) {
      var v, h;
      b[0] & /*actor*/
      1 && !at(t.src, i = /*actor*/
      (v = m[0]) == null ? void 0 : v.img) && s(t, "src", i), b[0] & /*actor*/
      1 && c !== (c = /*actor*/
      ((h = m[0]) == null ? void 0 : h.name) + "") && te(f, c);
    },
    d(m) {
      m && P(e);
    }
  };
}
function C_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y = ce(
    /*npcs*/
    l[2]
  ), E = [];
  for (let C = 0; C < y.length; C += 1)
    E[C] = jd(Fd(l, y, C));
  let S = ce(
    /*playersStatus*/
    l[8]
  ), O = [];
  for (let C = 0; C < S.length; C += 1)
    O[C] = Vd(Bd(l, S, C));
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = ">> HOSTILES", i = g(), n = r("div");
      for (let C = 0; C < E.length; C += 1)
        E[C].c();
      o = g(), c = r("button"), c.textContent = "+ UNIT", f = g(), u = r("div"), d = r("label"), d.textContent = ">> SQUAD SIGNAL", p = g(), m = r("div");
      for (let C = 0; C < O.length; C += 1)
        O[C].c();
      b = g(), v = r("div"), h = r("button"), h.textContent = "SAVE STATE", _ = g(), w = r("button"), w.innerHTML = '<i class="fas fa-biohazard"></i> INICIAR', s(t, "class", "svelte-30lhtb"), s(n, "class", "scroll-list svelte-30lhtb"), s(c, "class", "btn-add-unit svelte-30lhtb"), s(e, "class", "npc-list-container svelte-30lhtb"), s(m, "class", "monitor-grid svelte-30lhtb"), s(u, "class", "player-monitor svelte-30lhtb"), s(h, "class", "btn-save-all svelte-30lhtb"), s(w, "class", "btn-init-confrontation svelte-30lhtb"), s(v, "class", "gm-footer-actions svelte-30lhtb");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(e, i), a(e, n);
      for (let N = 0; N < E.length; N += 1)
        E[N] && E[N].m(n, null);
      a(e, o), a(e, c), q(C, f, T), q(C, u, T), a(u, d), a(u, p), a(u, m);
      for (let N = 0; N < O.length; N += 1)
        O[N] && O[N].m(m, null);
      q(C, b, T), q(C, v, T), a(v, h), a(v, _), a(v, w), k || (A = [
        R(
          c,
          "click",
          /*addNewNPC*/
          l[18]
        ),
        R(
          h,
          "click",
          /*saveNPCsToFlag*/
          l[20]
        ),
        R(
          w,
          "click",
          /*startConfrontation*/
          l[21]
        )
      ], k = !0);
    },
    p(C, T) {
      if (T[0] & /*selectedNpcId, npcs, deleteNPC*/
      524300) {
        y = ce(
          /*npcs*/
          C[2]
        );
        let N;
        for (N = 0; N < y.length; N += 1) {
          const I = Fd(C, y, N);
          E[N] ? E[N].p(I, T) : (E[N] = jd(I), E[N].c(), E[N].m(n, null));
        }
        for (; N < E.length; N += 1)
          E[N].d(1);
        E.length = y.length;
      }
      if (T[0] & /*playersStatus*/
      256) {
        S = ce(
          /*playersStatus*/
          C[8]
        );
        let N;
        for (N = 0; N < S.length; N += 1) {
          const I = Bd(C, S, N);
          O[N] ? O[N].p(I, T) : (O[N] = Vd(I), O[N].c(), O[N].m(m, null));
        }
        for (; N < O.length; N += 1)
          O[N].d(1);
        O.length = S.length;
      }
    },
    d(C) {
      C && (P(e), P(f), P(u), P(b), P(v)), Fe(E, C), Fe(O, C), k = !1, Te(A);
    }
  };
}
function jd(l) {
  let e, t, i, n, o, c, f = (
    /*npc*/
    l[60].name + ""
  ), u, d, p, m, b, v;
  function h() {
    return (
      /*click_handler_1*/
      l[26](
        /*npc*/
        l[60]
      )
    );
  }
  function _() {
    return (
      /*click_handler_2*/
      l[27](
        /*npc*/
        l[60]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("span"), u = B(f), d = g(), p = r("button"), p.textContent = "√ó", m = g(), at(t.src, i = /*npc*/
      l[60].img) || s(t, "src", i), s(t, "class", "npc-thumb svelte-30lhtb"), s(t, "alt", "npc"), s(c, "class", "npc-name"), s(o, "class", "npc-info svelte-30lhtb"), s(p, "class", "btn-trash svelte-30lhtb"), s(e, "class", "npc-card svelte-30lhtb"), he(
        e,
        "selected",
        /*selectedNpcId*/
        l[3] === /*npc*/
        l[60].id
      );
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(e, d), a(e, p), a(e, m), b || (v = [
        R(p, "click", Lt(h)),
        R(e, "click", _)
      ], b = !0);
    },
    p(w, k) {
      l = w, k[0] & /*npcs*/
      4 && !at(t.src, i = /*npc*/
      l[60].img) && s(t, "src", i), k[0] & /*npcs*/
      4 && f !== (f = /*npc*/
      l[60].name + "") && te(u, f), k[0] & /*selectedNpcId, npcs*/
      12 && he(
        e,
        "selected",
        /*selectedNpcId*/
        l[3] === /*npc*/
        l[60].id
      );
    },
    d(w) {
      w && P(e), b = !1, Te(v);
    }
  };
}
function Vd(l) {
  let e, t = (
    /*p*/
    l[57].name.substring(0, 2).toUpperCase() + ""
  ), i, n, o;
  return {
    c() {
      e = r("div"), i = B(t), n = g(), s(e, "class", "monitor-dot svelte-30lhtb"), s(e, "title", o = /*p*/
      l[57].name), he(
        e,
        "ready",
        /*p*/
        l[57].ready
      );
    },
    m(c, f) {
      q(c, e, f), a(e, i), a(e, n);
    },
    p(c, f) {
      f[0] & /*playersStatus*/
      256 && t !== (t = /*p*/
      c[57].name.substring(0, 2).toUpperCase() + "") && te(i, t), f[0] & /*playersStatus*/
      256 && o !== (o = /*p*/
      c[57].name) && s(e, "title", o), f[0] & /*playersStatus*/
      256 && he(
        e,
        "ready",
        /*p*/
        c[57].ready
      );
    },
    d(c) {
      c && P(e);
    }
  };
}
function I_(l) {
  let e;
  return {
    c() {
      e = r("h2"), e.textContent = "DECLARA√á√ÉO DE VETORES", s(e, "class", "hacker-title svelte-30lhtb");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function T_(l) {
  let e, t, i, n, o, c;
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("input"), s(t, "type", "text"), s(t, "class", "hacker-input name svelte-30lhtb"), s(t, "placeholder", "NOME"), s(n, "type", "text"), s(n, "class", "hacker-input img svelte-30lhtb"), s(n, "placeholder", "IMG URL"), s(e, "class", "gm-edit-row svelte-30lhtb");
    },
    m(f, u) {
      q(f, e, u), a(e, t), x(
        t,
        /*activeEntity*/
        l[4].name
      ), a(e, i), a(e, n), x(
        n,
        /*activeEntity*/
        l[4].img
      ), o || (c = [
        R(
          t,
          "input",
          /*input0_input_handler*/
          l[28]
        ),
        R(
          n,
          "input",
          /*input1_input_handler*/
          l[29]
        )
      ], o = !0);
    },
    p(f, u) {
      u[0] & /*activeEntity*/
      16 && t.value !== /*activeEntity*/
      f[4].name && x(
        t,
        /*activeEntity*/
        f[4].name
      ), u[0] & /*activeEntity*/
      16 && n.value !== /*activeEntity*/
      f[4].img && x(
        n,
        /*activeEntity*/
        f[4].img
      );
    },
    d(f) {
      f && P(e), o = !1, Te(c);
    }
  };
}
function Wd(l) {
  let e, t = (
    /*action*/
    (l[54].description || "...") + ""
  ), i;
  return {
    c() {
      e = r("span"), i = B(t), s(e, "class", "collapsed-preview svelte-30lhtb");
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p(n, o) {
      o[0] & /*activeEntity*/
      16 && t !== (t = /*action*/
      (n[54].description || "...") + "") && te(i, t);
    },
    d(n) {
      n && P(e);
    }
  };
}
function Xd(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h;
  function _() {
    l[33].call(
      t,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  function w(S, O) {
    if (
      /*action*/
      S[54].type === "ataque"
    ) return R_;
    if (
      /*action*/
      S[54].type === "defesa"
    ) return D_;
  }
  let k = w(l), A = k && k(l);
  function y() {
    l[42].call(
      u,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  let E = (
    /*action*/
    l[54].params.isReaction && Yd(l)
  );
  return {
    c() {
      e = r("div"), t = r("textarea"), i = g(), n = r("div"), A && A.c(), o = g(), c = r("div"), f = r("label"), u = r("input"), d = B(" REA√á√ÉO?"), p = g(), E && E.c(), s(t, "class", "desc-area svelte-30lhtb"), s(t, "placeholder", "Inten√ß√£o..."), s(u, "type", "checkbox"), s(f, "class", "reaction-check svelte-30lhtb"), s(c, "class", "reaction-section svelte-30lhtb"), s(n, "class", "params-grid svelte-30lhtb"), s(e, "class", "card-body svelte-30lhtb");
    },
    m(S, O) {
      q(S, e, O), a(e, t), x(
        t,
        /*action*/
        l[54].description
      ), a(e, i), a(e, n), A && A.m(n, null), a(n, o), a(n, c), a(c, f), a(f, u), u.checked = /*action*/
      l[54].params.isReaction, a(f, d), a(c, p), E && E.m(c, null), b = !0, v || (h = [
        R(t, "input", _),
        R(u, "change", y)
      ], v = !0);
    },
    p(S, O) {
      l = S, O[0] & /*activeEntity*/
      16 && x(
        t,
        /*action*/
        l[54].description
      ), k === (k = w(l)) && A ? A.p(l, O) : (A && A.d(1), A = k && k(l), A && (A.c(), A.m(n, o))), O[0] & /*activeEntity*/
      16 && (u.checked = /*action*/
      l[54].params.isReaction), /*action*/
      l[54].params.isReaction ? E ? E.p(l, O) : (E = Yd(l), E.c(), E.m(c, null)) : E && (E.d(1), E = null);
    },
    i(S) {
      b || (S && Ne(() => {
        b && (m || (m = We(e, yt, {}, !0)), m.run(1));
      }), b = !0);
    },
    o(S) {
      S && (m || (m = We(e, yt, {}, !1)), m.run(0)), b = !1;
    },
    d(S) {
      S && P(e), A && A.d(), E && E.d(), S && m && m.end(), v = !1, Te(h);
    }
  };
}
function D_(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  function b() {
    l[39].call(
      i,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  function v() {
    l[41].call(
      f,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return d = Z0(
    /*$$binding_groups*/
    l[40][0],
    [
      /*i*/
      l[56]
    ]
  ), {
    c() {
      e = r("div"), t = r("label"), i = r("input"), n = B(" GOBBLE"), o = g(), c = r("label"), f = r("input"), u = B(" INTERF."), s(i, "type", "radio"), i.__value = "normal", x(i, i.__value), s(f, "type", "radio"), f.__value = "interferencia", x(f, f.__value), s(e, "class", "radio-group svelte-30lhtb"), d.p(i, f);
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(t, i), i.checked = i.__value === /*action*/
      l[54].params.defType, a(t, n), a(e, o), a(e, c), a(c, f), f.checked = f.__value === /*action*/
      l[54].params.defType, a(c, u), p || (m = [
        R(i, "change", b),
        R(f, "change", v)
      ], p = !0);
    },
    p(h, _) {
      l = h, _[0] & /*activeEntity*/
      16 && (i.checked = i.__value === /*action*/
      l[54].params.defType), _[0] & /*activeEntity*/
      16 && (f.checked = f.__value === /*action*/
      l[54].params.defType), _[0] & /*activeEntity*/
      16 && d.u([
        /*i*/
        l[56]
      ]);
    },
    d(h) {
      h && P(e), d.r(), p = !1, Te(m);
    }
  };
}
function R_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E;
  function S() {
    l[34].call(
      i,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  function O() {
    l[35].call(
      f,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  function C() {
    l[36].call(
      m,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  function T() {
    l[37].call(
      _,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  let N = (
    /*action*/
    l[54].params.isSpray && Jd(l)
  );
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "DMG", i = r("input"), n = g(), o = r("div"), c = r("label"), c.textContent = "PEN", f = r("input"), u = g(), d = r("div"), p = r("label"), m = r("input"), b = B(" GHOST"), v = g(), h = r("label"), _ = r("input"), w = B(" SPRAY"), k = g(), N && N.c(), A = Pt(), s(t, "class", "svelte-30lhtb"), s(i, "type", "number"), s(i, "class", "svelte-30lhtb"), s(e, "class", "param-box svelte-30lhtb"), s(c, "class", "svelte-30lhtb"), s(f, "type", "number"), s(f, "class", "svelte-30lhtb"), s(o, "class", "param-box svelte-30lhtb"), s(m, "type", "checkbox"), s(_, "type", "checkbox"), s(d, "class", "toggle-box svelte-30lhtb");
    },
    m(I, D) {
      q(I, e, D), a(e, t), a(e, i), x(
        i,
        /*action*/
        l[54].params.damage
      ), q(I, n, D), q(I, o, D), a(o, c), a(o, f), x(
        f,
        /*action*/
        l[54].params.penetration
      ), q(I, u, D), q(I, d, D), a(d, p), a(p, m), m.checked = /*action*/
      l[54].params.isGhost, a(p, b), a(d, v), a(d, h), a(h, _), _.checked = /*action*/
      l[54].params.isSpray, a(h, w), q(I, k, D), N && N.m(I, D), q(I, A, D), y || (E = [
        R(i, "input", S),
        R(f, "input", O),
        R(m, "change", C),
        R(_, "change", T)
      ], y = !0);
    },
    p(I, D) {
      l = I, D[0] & /*activeEntity*/
      16 && Je(i.value) !== /*action*/
      l[54].params.damage && x(
        i,
        /*action*/
        l[54].params.damage
      ), D[0] & /*activeEntity*/
      16 && Je(f.value) !== /*action*/
      l[54].params.penetration && x(
        f,
        /*action*/
        l[54].params.penetration
      ), D[0] & /*activeEntity*/
      16 && (m.checked = /*action*/
      l[54].params.isGhost), D[0] & /*activeEntity*/
      16 && (_.checked = /*action*/
      l[54].params.isSpray), /*action*/
      l[54].params.isSpray ? N ? N.p(l, D) : (N = Jd(l), N.c(), N.m(A.parentNode, A)) : N && (N.d(1), N = null);
    },
    d(I) {
      I && (P(e), P(n), P(o), P(u), P(d), P(k), P(A)), N && N.d(I), y = !1, Te(E);
    }
  };
}
function Jd(l) {
  let e, t, i, n, o;
  function c() {
    l[38].call(
      i,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "D.SPRAY", i = r("input"), s(t, "class", "svelte-30lhtb"), s(i, "type", "number"), s(i, "class", "svelte-30lhtb"), s(e, "class", "param-box svelte-30lhtb");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), x(
        i,
        /*action*/
        l[54].params.sprayDice
      ), n || (o = R(i, "input", c), n = !0);
    },
    p(f, u) {
      l = f, u[0] & /*activeEntity*/
      16 && Je(i.value) !== /*action*/
      l[54].params.sprayDice && x(
        i,
        /*action*/
        l[54].params.sprayDice
      );
    },
    d(f) {
      f && P(e), n = !1, o();
    }
  };
}
function Yd(l) {
  let e, t, i, n, o;
  function c() {
    l[43].call(
      i,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  return {
    c() {
      e = r("div"), t = r("label"), t.textContent = "+D", i = r("input"), s(t, "class", "svelte-30lhtb"), s(i, "type", "number"), s(i, "max", "10"), s(i, "class", "svelte-30lhtb"), s(e, "class", "param-box small svelte-30lhtb");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), x(
        i,
        /*action*/
        l[54].params.reactionBonus
      ), n || (o = R(i, "input", c), n = !0);
    },
    p(f, u) {
      l = f, u[0] & /*activeEntity*/
      16 && Je(i.value) !== /*action*/
      l[54].params.reactionBonus && x(
        i,
        /*action*/
        l[54].params.reactionBonus
      );
    },
    d(f) {
      f && P(e), n = !1, o();
    }
  };
}
function Qd(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h = (
    /*action*/
    l[54].isCollapsed ? "‚ñº" : "‚ñ≤"
  ), _, w, k, A, y, E, S, O;
  function C() {
    l[30].call(
      o,
      /*each_value*/
      l[55],
      /*i*/
      l[56]
    );
  }
  let T = (
    /*action*/
    l[54].isCollapsed && Wd(l)
  );
  function N() {
    return (
      /*click_handler_3*/
      l[31](
        /*i*/
        l[56]
      )
    );
  }
  function I() {
    return (
      /*click_handler_4*/
      l[32](
        /*i*/
        l[56]
      )
    );
  }
  let D = !/*action*/
  l[54].isCollapsed && Xd(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), i.textContent = `0${/*i*/
      l[56] + 1}`, n = g(), o = r("select"), c = r("option"), c.textContent = "ATK", f = r("option"), f.textContent = "DEF", u = r("option"), u.textContent = "UTIL", p = g(), T && T.c(), m = g(), b = r("div"), v = r("button"), _ = B(h), w = g(), k = r("button"), k.textContent = "√ó", A = g(), D && D.c(), s(i, "class", "idx svelte-30lhtb"), c.__value = "ataque", x(c, c.__value), f.__value = "defesa", x(f, f.__value), u.__value = "utilidade", x(u, u.__value), s(o, "class", d = "type-select " + /*action*/
      l[54].type + " svelte-30lhtb"), /*action*/
      l[54].type === void 0 && Ne(C), s(v, "class", "btn-mini svelte-30lhtb"), s(k, "class", "btn-mini danger svelte-30lhtb"), s(b, "class", "card-controls svelte-30lhtb"), s(t, "class", "card-header svelte-30lhtb"), s(e, "class", "maneuver-card svelte-30lhtb");
    },
    m(M, G) {
      q(M, e, G), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), ot(
        o,
        /*action*/
        l[54].type,
        !0
      ), a(t, p), T && T.m(t, null), a(t, m), a(t, b), a(b, v), a(v, _), a(b, w), a(b, k), a(e, A), D && D.m(e, null), E = !0, S || (O = [
        R(o, "change", C),
        R(v, "click", N),
        R(k, "click", I)
      ], S = !0);
    },
    p(M, G) {
      l = M, (!E || G[0] & /*activeEntity*/
      16 && d !== (d = "type-select " + /*action*/
      l[54].type + " svelte-30lhtb")) && s(o, "class", d), G[0] & /*activeEntity*/
      16 && ot(
        o,
        /*action*/
        l[54].type
      ), /*action*/
      l[54].isCollapsed ? T ? T.p(l, G) : (T = Wd(l), T.c(), T.m(t, m)) : T && (T.d(1), T = null), (!E || G[0] & /*activeEntity*/
      16) && h !== (h = /*action*/
      l[54].isCollapsed ? "‚ñº" : "‚ñ≤") && te(_, h), /*action*/
      l[54].isCollapsed ? D && ($e(), Ae(D, 1, 1, () => {
        D = null;
      }), et()) : D ? (D.p(l, G), G[0] & /*activeEntity*/
      16 && ne(D, 1)) : (D = Xd(l), D.c(), ne(D, 1), D.m(e, null));
    },
    i(M) {
      E || (ne(D), M && Ne(() => {
        E && (y || (y = We(e, yt, {}, !0)), y.run(1));
      }), E = !0);
    },
    o(M) {
      Ae(D), M && (y || (y = We(e, yt, {}, !1)), y.run(0)), E = !1;
    },
    d(M) {
      M && P(e), T && T.d(), D && D.d(), M && y && y.end(), S = !1, Te(O);
    }
  };
}
function M_(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "ENVIAR >>", s(e, "class", "btn-transmit svelte-30lhtb");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*transmitDeclaration*/
        l[22]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function N_(l) {
  let e, t, i, n, o, c;
  const f = [O_, E_], u = [];
  function d(p, m) {
    return (
      /*resolutionMode*/
      p[6] ? 0 : 1
    );
  }
  return t = d(l), i = u[t] = f[t](l), {
    c() {
      e = r("div"), i.c(), s(e, "class", "combat-terminal-root svelte-30lhtb"), ae(
        e,
        "--c-primary",
        /*themeColor*/
        l[1]
      );
    },
    m(p, m) {
      q(p, e, m), u[t].m(e, null), n = !0, o || (c = [
        R(
          window,
          "mouseup",
          /*handleMouseUp*/
          l[13]
        ),
        R(
          window,
          "mousemove",
          /*handleMouseMove*/
          l[14]
        )
      ], o = !0);
    },
    p(p, m) {
      let b = t;
      t = d(p), t === b ? u[t].p(p, m) : ($e(), Ae(u[b], 1, 1, () => {
        u[b] = null;
      }), et(), i = u[t], i ? i.p(p, m) : (i = u[t] = f[t](p), i.c()), ne(i, 1), i.m(e, null)), (!n || m[0] & /*themeColor*/
      2) && ae(
        e,
        "--c-primary",
        /*themeColor*/
        p[1]
      );
    },
    i(p) {
      n || (ne(i), n = !0);
    },
    o(p) {
      Ae(i), n = !1;
    },
    d(p) {
      p && P(e), u[t].d(), o = !1, Te(c);
    }
  };
}
const Di = "multiversus-rpg";
function L_(l) {
  if (!l) return { d: 0, hd: 0, wd: 0 };
  const e = l.actions.reduce(
    (i, n) => i + (n.params.isReaction && n.params.reactionBonus || 0),
    0
  );
  let t = (l.dice.d || 0) + (l.mods.buffers || 0) - (l.mods.debuffs || 0) + e;
  return {
    d: Math.max(0, t),
    hd: l.dice.hd || 0,
    wd: l.dice.wd || 0
  };
}
function P_(l, e, t) {
  let i, n;
  const o = ml(), c = game.user.isGM;
  let { actor: f = null } = e, { themeColor: u = "#00ff41" } = e, d = { x: 100, y: 60 }, p = !1, m = !1, b = null;
  const v = () => ({
    id: foundry.utils.randomID(),
    type: "utilidade",
    description: "",
    isCollapsed: !1,
    params: {
      damage: 0,
      penetration: 0,
      isGhost: !1,
      isSpray: !1,
      sprayDice: 0,
      defType: "normal",
      isReaction: !1,
      reactionBonus: 0
    }
  }), h = () => ({
    id: foundry.utils.randomID(),
    name: "HOSTIL_01",
    img: "icons/svg/mystery-man.svg",
    dice: { d: 4, hd: 0, wd: 0 },
    mods: { buffers: 0, debuffs: 0 },
    actions: [v()],
    submitted: !1
  });
  let _ = [v()], w = { d: 4, hd: 0, wd: 0 }, k = { buffers: 0, debuffs: 0 }, A = [h()], y = A[0].id, E = [];
  function S() {
    p = !0;
  }
  function O() {
    p = !1;
  }
  function C(oe) {
    p && (t(5, d.x += oe.movementX, d), t(5, d.y += oe.movementY, d));
  }
  function T() {
    if (c) {
      const oe = A.find((be) => be.id === y);
      oe.actions = [...oe.actions, v()], t(2, A = [...A]);
    } else
      t(23, _ = [..._, v()]);
  }
  function N(oe) {
    if (c) {
      const be = A.find((de) => de.id === y);
      be.actions = be.actions.filter((de, Oe) => Oe !== oe), t(2, A = [...A]);
    } else
      t(23, _ = _.filter((be, de) => de !== oe));
  }
  function I(oe) {
    if (c) {
      const be = A.find((de) => de.id === y);
      be.actions[oe].isCollapsed = !be.actions[oe].isCollapsed, t(2, A = [...A]);
    } else
      t(23, _[oe].isCollapsed = !_[oe].isCollapsed, _), t(23, _ = [..._]);
  }
  function D() {
    const oe = h();
    t(2, A = [...A, oe]), t(3, y = oe.id);
  }
  function M(oe) {
    A.length <= 1 || (t(2, A = A.filter((be) => be.id !== oe)), t(3, y = A[0].id));
  }
  function G() {
    game.user.setFlag(Di, "gm_npc_declarations", A), ui.notifications.info(`KERNEL: ${A.length} Vetores Hostis Registrados.`);
  }
  async function L() {
    const oe = game.users.filter((de) => !de.isGM).map((de) => {
      var _e;
      const Oe = de.getFlag(Di, "combatDeclaration");
      return Oe ? {
        ...Oe,
        name: de.name,
        actorId: Oe.actorId || de.id,
        img: ((_e = de.character) == null ? void 0 : _e.img) || "icons/svg/mystery-man.svg",
        isPlayer: !0
      } : null;
    }).filter((de) => de), be = A.map((de) => ({ ...de, actorId: de.id, isPlayer: !1 }));
    t(7, b = { players: oe, npcs: be }), t(6, m = !0);
  }
  async function U() {
    const oe = {
      actorId: f.id,
      dice: w,
      mods: k,
      actions: _,
      timestamp: Date.now()
    };
    await game.user.setFlag(Di, "combatDeclaration", oe), ui.notifications.info("UPLINK: Vetores Transmitidos."), o("close");
  }
  const z = [[]], F = () => o("close"), W = () => o("close"), H = (oe) => M(oe.id), V = (oe) => t(3, y = oe.id);
  function J() {
    i.name = this.value, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function j() {
    i.img = this.value, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function X(oe, be) {
    oe[be].type = Gt(this), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  const K = (oe) => I(oe), Z = (oe) => N(oe);
  function le(oe, be) {
    oe[be].description = this.value, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function $(oe, be) {
    oe[be].params.damage = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function se(oe, be) {
    oe[be].params.penetration = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function Y(oe, be) {
    oe[be].params.isGhost = this.checked, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function Q(oe, be) {
    oe[be].params.isSpray = this.checked, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function ie(oe, be) {
    oe[be].params.sprayDice = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function ee(oe, be) {
    oe[be].params.defType = this.__value, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function pe(oe, be) {
    oe[be].params.defType = this.__value, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function Ee(oe, be) {
    oe[be].params.isReaction = this.checked, t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function De(oe, be) {
    oe[be].params.reactionBonus = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function we() {
    i.dice.d = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function ke() {
    i.dice.hd = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function me() {
    i.dice.wd = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function re() {
    i.mods.buffers = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  function ye() {
    i.mods.debuffs = Je(this.value), t(4, i), t(2, A), t(3, y), t(0, f), t(52, w), t(53, k), t(23, _);
  }
  return l.$$set = (oe) => {
    "actor" in oe && t(0, f = oe.actor), "themeColor" in oe && t(1, u = oe.themeColor);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*npcs, selectedNpcId, actor, playerActions*/
    8388621 && t(4, i = c ? A.find((oe) => oe.id === y) : {
      name: f == null ? void 0 : f.name,
      img: f == null ? void 0 : f.img,
      dice: w,
      mods: k,
      actions: _
    }), l.$$.dirty[0] & /*activeEntity*/
    16 && t(9, n = L_(i));
  }, c && t(8, E = game.users.filter((oe) => !oe.isGM).map((oe) => {
    const be = oe.getFlag(Di, "combatDeclaration");
    return { name: oe.name, id: oe.id, ready: !!be };
  })), [
    f,
    u,
    A,
    y,
    i,
    d,
    m,
    b,
    E,
    n,
    o,
    c,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    _,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    z,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye
  ];
}
class q_ extends mt {
  constructor(e) {
    super(), pt(this, e, P_, N_, dt, { actor: 0, themeColor: 1 }, null, [-1, -1, -1]);
  }
}
function Kd(l, e, t) {
  const i = l.slice();
  return i[28] = e[t], i;
}
function Zd(l, e, t) {
  const i = l.slice();
  return i[31] = e[t], i[33] = t, i;
}
function xd(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "√ó", s(e, "class", "x-btn svelte-16b0p2q");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler*/
        l[14]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function U_(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*rolledDice*/
    l[3]
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = $d(Zd(l, u, p));
  return {
    c() {
      e = r("div"), t = r("div"), t.textContent = "ALOCA√á√ÉO DE VARI√ÅVEIS NECESS√ÅRIA", i = g(), n = r("div");
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      o = g(), c = r("div"), c.textContent = "SELECIONE OS VALORES (?) PARA TRANSMITIR AUTOMATICAMENTE", s(t, "class", "warning-box svelte-16b0p2q"), s(n, "class", "dice-display svelte-16b0p2q"), ae(c, "text-align", "center"), ae(c, "font-size", "10px"), ae(c, "color", "#ffcc00"), ae(c, "margin-top", "10px"), s(e, "class", "results-layout");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, n);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(n, null);
      a(e, o), a(e, c);
    },
    p(p, m) {
      if (m[0] & /*rolledDice, wiggleSelector*/
      72) {
        u = ce(
          /*rolledDice*/
          p[3]
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = Zd(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = $d(v), d[b].c(), d[b].m(n, null));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
    },
    i(p) {
      p && (f || Ne(() => {
        f = st(e, Sl, { y: 10, duration: 400 }), f.start();
      }));
    },
    o: ge,
    d(p) {
      p && P(e), Fe(d, p);
    }
  };
}
function G_(l) {
  let e, t;
  return {
    c() {
      e = r("div"), e.innerHTML = '<p class="blink">&gt; GERANDO ENTROPIA...</p> <div class="progress-bar svelte-16b0p2q"><div class="fill svelte-16b0p2q"></div></div>', s(e, "class", "rolling-anim");
    },
    m(i, n) {
      q(i, e, n);
    },
    p: ge,
    i(i) {
      i && (t || Ne(() => {
        t = st(e, Qe, {}), t.start();
      }));
    },
    o: ge,
    d(i) {
      i && P(e);
    }
  };
}
function H_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H;
  return {
    c() {
      e = r("div"), t = r("section"), i = r("label"), i.textContent = "ID_A√á√ÉO", n = g(), o = r("input"), c = g(), f = r("label"), f.textContent = "SINAL_VISUAL (URL)", u = g(), d = r("input"), p = g(), m = r("section"), b = r("div"), v = r("label"), v.textContent = "DADOS (D | HD | WD)", h = g(), _ = r("div"), w = r("input"), k = g(), A = r("input"), y = g(), E = r("input"), S = g(), O = r("div"), C = r("label"), C.textContent = "MODIFICADORES (DBF | BUF)", T = g(), N = r("div"), I = r("input"), D = g(), M = r("input"), G = g(), L = r("button"), L.textContent = ">> INICIAR_SEQU√äNCIA_IRREVERS√çVEL", U = g(), z = r("div"), z.textContent = "‚ö†Ô∏è A√á√ÉO N√ÉO PODE SER CANCELADA AP√ìS O IN√çCIO", s(i, "class", "svelte-16b0p2q"), s(o, "type", "text"), s(o, "class", "svelte-16b0p2q"), s(f, "class", "svelte-16b0p2q"), s(d, "type", "text"), s(d, "placeholder", "Opcional..."), s(d, "class", "svelte-16b0p2q"), s(t, "class", "meta-inputs"), s(v, "class", "svelte-16b0p2q"), s(w, "type", "number"), s(w, "class", "svelte-16b0p2q"), s(A, "type", "number"), s(A, "class", "hd svelte-16b0p2q"), s(E, "type", "number"), s(E, "class", "wd svelte-16b0p2q"), s(_, "class", "row svelte-16b0p2q"), s(b, "class", "input-group"), s(C, "class", "svelte-16b0p2q"), s(I, "type", "number"), s(I, "class", "dbf svelte-16b0p2q"), s(M, "type", "number"), s(M, "class", "buf svelte-16b0p2q"), s(N, "class", "row svelte-16b0p2q"), s(O, "class", "input-group"), s(m, "class", "pool-inputs"), s(L, "class", "roll-trigger svelte-16b0p2q"), ae(z, "font-size", "9px"), ae(z, "color", "#555"), ae(z, "text-align", "center"), ae(z, "margin-top", "5px"), s(e, "class", "setup-layout");
    },
    m(V, J) {
      q(V, e, J), a(e, t), a(t, i), a(t, n), a(t, o), x(
        o,
        /*actionName*/
        l[1]
      ), a(t, c), a(t, f), a(t, u), a(t, d), x(
        d,
        /*imageUrl*/
        l[5]
      ), a(e, p), a(e, m), a(m, b), a(b, v), a(b, h), a(b, _), a(_, w), x(
        w,
        /*pool*/
        l[0].d
      ), a(_, k), a(_, A), x(
        A,
        /*pool*/
        l[0].hd
      ), a(_, y), a(_, E), x(
        E,
        /*pool*/
        l[0].wd
      ), a(m, S), a(m, O), a(O, C), a(O, T), a(O, N), a(N, I), x(
        I,
        /*mods*/
        l[2].debuffs
      ), a(N, D), a(N, M), x(
        M,
        /*mods*/
        l[2].buffers
      ), a(e, G), a(e, L), a(e, U), a(e, z), W || (H = [
        R(
          o,
          "input",
          /*input0_input_handler*/
          l[15]
        ),
        R(
          d,
          "input",
          /*input1_input_handler*/
          l[16]
        ),
        R(
          w,
          "input",
          /*input2_input_handler*/
          l[17]
        ),
        R(
          A,
          "input",
          /*input3_input_handler*/
          l[18]
        ),
        R(
          E,
          "input",
          /*input4_input_handler*/
          l[19]
        ),
        R(
          I,
          "input",
          /*input5_input_handler*/
          l[20]
        ),
        R(
          M,
          "input",
          /*input6_input_handler*/
          l[21]
        ),
        R(
          L,
          "click",
          /*executeRoll*/
          l[9]
        )
      ], W = !0);
    },
    p(V, J) {
      J[0] & /*actionName*/
      2 && o.value !== /*actionName*/
      V[1] && x(
        o,
        /*actionName*/
        V[1]
      ), J[0] & /*imageUrl*/
      32 && d.value !== /*imageUrl*/
      V[5] && x(
        d,
        /*imageUrl*/
        V[5]
      ), J[0] & /*pool*/
      1 && Je(w.value) !== /*pool*/
      V[0].d && x(
        w,
        /*pool*/
        V[0].d
      ), J[0] & /*pool*/
      1 && Je(A.value) !== /*pool*/
      V[0].hd && x(
        A,
        /*pool*/
        V[0].hd
      ), J[0] & /*pool*/
      1 && Je(E.value) !== /*pool*/
      V[0].wd && x(
        E,
        /*pool*/
        V[0].wd
      ), J[0] & /*mods*/
      4 && Je(I.value) !== /*mods*/
      V[2].debuffs && x(
        I,
        /*mods*/
        V[2].debuffs
      ), J[0] & /*mods*/
      4 && Je(M.value) !== /*mods*/
      V[2].buffers && x(
        M,
        /*mods*/
        V[2].buffers
      );
    },
    i(V) {
      V && (F || Ne(() => {
        F = st(e, Sl, { y: 10, duration: 400 }), F.start();
      }));
    },
    o: ge,
    d(V) {
      V && P(e), W = !1, Te(H);
    }
  };
}
function $d(l) {
  let e, t = (
    /*d*/
    (l[31].val === 0 ? "?" : (
      /*d*/
      l[31].val
    )) + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler_1*/
      l[22](
        /*d*/
        l[31],
        /*i*/
        l[33]
      )
    );
  }
  return {
    c() {
      e = r("div"), i = B(t), n = g(), s(e, "class", o = "die-node " + /*d*/
      l[31].type + " svelte-16b0p2q"), he(
        e,
        "is-wiggle",
        /*d*/
        l[31].val === 0
      ), he(
        e,
        "assigned-wiggle",
        /*d*/
        l[31].type === "wd" && /*d*/
        l[31].val !== 0
      );
    },
    m(d, p) {
      q(d, e, p), a(e, i), a(e, n), c || (f = R(e, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*rolledDice*/
      8 && t !== (t = /*d*/
      (l[31].val === 0 ? "?" : (
        /*d*/
        l[31].val
      )) + "") && te(i, t), p[0] & /*rolledDice*/
      8 && o !== (o = "die-node " + /*d*/
      l[31].type + " svelte-16b0p2q") && s(e, "class", o), p[0] & /*rolledDice, rolledDice*/
      8 && he(
        e,
        "is-wiggle",
        /*d*/
        l[31].val === 0
      ), p[0] & /*rolledDice, rolledDice*/
      8 && he(
        e,
        "assigned-wiggle",
        /*d*/
        l[31].type === "wd" && /*d*/
        l[31].val !== 0
      );
    },
    d(d) {
      d && P(e), c = !1, f();
    }
  };
}
function eu(l) {
  let e, t, i, n, o = ce([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]), c = [];
  for (let f = 0; f < 10; f += 1)
    c[f] = tu(Kd(l, o, f));
  return {
    c() {
      e = r("div"), t = r("div");
      for (let f = 0; f < 10; f += 1)
        c[f].c();
      s(t, "class", "num-grid svelte-16b0p2q"), s(e, "class", "wiggle-modal svelte-16b0p2q");
    },
    m(f, u) {
      q(f, e, u), a(e, t);
      for (let d = 0; d < 10; d += 1)
        c[d] && c[d].m(t, null);
      n = !0;
    },
    p(f, u) {
      if (u[0] & /*selectWiggle*/
      1024) {
        o = ce([1, 2, 3, 4, 5, 6, 7, 8, 9, 10]);
        let d;
        for (d = 0; d < 10; d += 1) {
          const p = Kd(f, o, d);
          c[d] ? c[d].p(p, u) : (c[d] = tu(p), c[d].c(), c[d].m(t, null));
        }
        for (; d < 10; d += 1)
          c[d].d(1);
      }
    },
    i(f) {
      n || (f && Ne(() => {
        n && (i || (i = We(e, Qe, { duration: 100 }, !0)), i.run(1));
      }), n = !0);
    },
    o(f) {
      f && (i || (i = We(e, Qe, { duration: 100 }, !1)), i.run(0)), n = !1;
    },
    d(f) {
      f && P(e), Fe(c, f), f && i && i.end();
    }
  };
}
function tu(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_2*/
      l[23](
        /*n*/
        l[28]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = `${/*n*/
      l[28]}`, s(e, "class", "svelte-16b0p2q");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function z_(l) {
  let e, t, i, n, o, c, f, u = (
    /*isLocked*/
    l[7] ? "LOCKED" : "READY"
  ), d, p, m, b, v, h, _, w, k, A = !/*isLocked*/
  l[7] && xd(l);
  function y(C, T) {
    if (
      /*step*/
      C[4] === "CONFIG"
    ) return H_;
    if (
      /*step*/
      C[4] === "ROLLING"
    ) return G_;
    if (
      /*step*/
      C[4] === "WIGGLE_PHASE"
    ) return U_;
  }
  let E = y(l), S = E && E(l), O = (
    /*wiggleSelector*/
    l[6].show && eu(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("header"), n = r("div"), o = g(), c = r("span"), f = B("VETOR_CALCULATION_UNIT // "), d = B(u), p = g(), A && A.c(), m = g(), b = r("main"), S && S.c(), _ = g(), O && O.c(), w = Pt(), s(n, "class", "status-dot svelte-16b0p2q"), he(
        n,
        "busy",
        /*isLocked*/
        l[7]
      ), s(i, "class", "svelte-16b0p2q"), s(b, "class", "window-body svelte-16b0p2q"), s(t, "class", "vector-window svelte-16b0p2q"), s(e, "class", "dice-logic-overlay svelte-16b0p2q");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(c, d), a(i, p), A && A.m(i, null), a(t, m), a(t, b), S && S.m(b, null), q(C, _, T), O && O.m(C, T), q(C, w, T), k = !0;
    },
    p(C, T) {
      (!k || T[0] & /*isLocked*/
      128) && he(
        n,
        "busy",
        /*isLocked*/
        C[7]
      ), (!k || T[0] & /*isLocked*/
      128) && u !== (u = /*isLocked*/
      C[7] ? "LOCKED" : "READY") && te(d, u), /*isLocked*/
      C[7] ? A && (A.d(1), A = null) : A ? A.p(C, T) : (A = xd(C), A.c(), A.m(i, null)), E === (E = y(C)) && S ? S.p(C, T) : (S && S.d(1), S = E && E(C), S && (S.c(), ne(S, 1), S.m(b, null))), /*wiggleSelector*/
      C[6].show ? O ? (O.p(C, T), T[0] & /*wiggleSelector*/
      64 && ne(O, 1)) : (O = eu(C), O.c(), ne(O, 1), O.m(w.parentNode, w)) : O && ($e(), Ae(O, 1, 1, () => {
        O = null;
      }), et());
    },
    i(C) {
      k || (ne(S), C && (v || Ne(() => {
        v = st(t, Mt, {
          start: 0.9,
          duration: 400,
          easing: Dl
        }), v.start();
      })), C && Ne(() => {
        k && (h || (h = We(e, Qe, { duration: 200 }, !0)), h.run(1));
      }), ne(O), k = !0);
    },
    o(C) {
      C && (h || (h = We(e, Qe, { duration: 200 }, !1)), h.run(0)), Ae(O), k = !1;
    },
    d(C) {
      C && (P(e), P(_), P(w)), A && A.d(), S && S.d(), C && h && h.end(), O && O.d(C);
    }
  };
}
function B_(l) {
  const e = {};
  return l.filter((t) => t.val > 0).forEach((t) => {
    e[t.val] = (e[t.val] || 0) + 1;
  }), Object.entries(e).filter(([t, i]) => i >= 2).map(([t, i]) => ({ w: i, h: parseInt(t) })).sort((t, i) => i.w - t.w || i.h - t.h);
}
function F_(l, e, t) {
  let i, n, o;
  const c = ml();
  let { actionName: f = "PROTOCOLO_VETOR_01" } = e, { pool: u = { d: 4, hd: 0, wd: 0 } } = e, { character: d = null } = e, { externalHandler: p = null } = e, m = "CONFIG", b = "", v = { debuffs: 0, buffers: 0 }, h = [], _ = { show: !1, index: null }, w = !1, k = !1;
  ra(() => {
    w && !k && typeof ChatMessage < "u" && ChatMessage.create({
      content: `
                    <div style="background: #000; border: 2px solid #ff0000; color: #ff0000; padding: 10px; font-family: 'Share Tech Mono';">
                        <h3 style="margin:0; border-bottom: 1px solid #ff0000">‚ö†Ô∏è VIOLA√á√ÉO DE PROTOCOLO</h3>
                        <p>O usu√°rio desconectou ou fechou o terminal durante o c√°lculo de <b>${f}</b>.</p>
                        <p style="font-size: 0.8em;">REGISTRO DE INCIDENTE: TENTATIVA DE EVAS√ÉO DETECTADA.</p>
                    </div>`,
      speaker: d ? ChatMessage.getSpeaker({ actor: d }) : {}
    });
  });
  async function A() {
    t(7, w = !0), t(4, m = "ROLLING"), t(3, h = []);
    let U = [];
    for (let z = 0; z < n.hd; z++) U.push({ val: 10, type: "hd" });
    for (let z = 0; z < n.d; z++) U.push({
      val: Math.floor(Math.random() * 10) + 1,
      type: "d"
    });
    for (let z = 0; z < n.wd; z++) U.push({ val: 0, type: "wd" });
    await new Promise((z) => setTimeout(z, 1200)), t(3, h = U), n.wd > 0 ? t(4, m = "WIGGLE_PHASE") : await E();
  }
  function y(U) {
    t(3, h[_.index].val = U, h), t(3, h = [...h]), t(6, _.show = !1, _), h.filter((F) => F.val === 0).length === 0 && E();
  }
  async function E() {
    k = !0;
    let U = `
            <div style="border: 1px solid #00ff41; background: #000; padding: 10px; font-family: 'Share Tech Mono', monospace; color: #00ff41;">
                ${b ? `<img src="${b}" style="width: 100%; border: 1px solid #222; margin-bottom: 8px;"/>` : ""}
                <div style="font-weight: bold; border-bottom: 1px dashed #00ff41; margin-bottom: 8px; text-transform: uppercase;">> ${f}</div>
                <div style="display: flex; gap: 5px; flex-wrap: wrap; margin-bottom: 8px;">
                    ${h.map((z) => `
                        <span style="border: 1px solid ${z.type === "hd" ? "#ff3333" : z.type === "wd" ? "#ffcc00" : "#00ff41"}; padding: 2px 8px; background: rgba(0,0,0,0.5); font-weight:bold; color: #fff;">
                            ${z.val}
                        </span>
                    `).join("")}
                </div>
                <div style="font-size: 13px;">SETS: ${o.length ? o.map((z) => `<b style="color:#fff; background:rgba(0,255,65,0.2); padding:0 4px;">[${z.w}x${z.h}]</b>`).join(" ") : '<span style="color:#ff3333">FALHA_SISTEMA</span>'}</div>
            </div>`;
    if (p)
      await p(U);
    else if (typeof ChatMessage < "u") {
      const z = d ? ChatMessage.getSpeaker({ actor: d }) : {};
      ChatMessage.create({ content: U, speaker: z });
    }
    c("close");
  }
  const S = () => c("close");
  function O() {
    f = this.value, t(1, f);
  }
  function C() {
    b = this.value, t(5, b);
  }
  function T() {
    u.d = Je(this.value), t(0, u);
  }
  function N() {
    u.hd = Je(this.value), t(0, u);
  }
  function I() {
    u.wd = Je(this.value), t(0, u);
  }
  function D() {
    v.debuffs = Je(this.value), t(2, v);
  }
  function M() {
    v.buffers = Je(this.value), t(2, v);
  }
  const G = (U, z) => U.val === 0 && t(6, _ = { show: !0, index: z }), L = (U) => y(U);
  return l.$$set = (U) => {
    "actionName" in U && t(1, f = U.actionName), "pool" in U && t(0, u = U.pool), "character" in U && t(11, d = U.character), "externalHandler" in U && t(12, p = U.externalHandler);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*pool, mods*/
    5 && t(13, i = Math.max(0, u.d + v.buffers - v.debuffs)), l.$$.dirty[0] & /*finalD, pool*/
    8193 && (n = { d: i, hd: u.hd, wd: u.wd }), l.$$.dirty[0] & /*rolledDice*/
    8 && (o = B_(h));
  }, [
    u,
    f,
    v,
    h,
    m,
    b,
    _,
    w,
    c,
    A,
    y,
    d,
    p,
    i,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L
  ];
}
class G0 extends mt {
  constructor(e) {
    super(), pt(
      this,
      e,
      F_,
      z_,
      dt,
      {
        actionName: 1,
        pool: 0,
        character: 11,
        externalHandler: 12
      },
      null,
      [-1, -1]
    );
  }
}
const ai = "multiversus-rpg", Gi = {
  ensureRegistered: () => {
    game.settings.settings.has(`${ai}.miro_url_players`) || (game.settings.register(ai, "miro_url_players", {
      scope: "world",
      config: !1,
      type: String,
      default: ""
    }), game.settings.register(ai, "miro_url_gm", {
      scope: "world",
      config: !1,
      type: String,
      default: ""
    }));
  },
  getURL: (l) => (Gi.ensureRegistered(), game.settings.get(ai, l === "gm" ? "miro_url_gm" : "miro_url_players")),
  setURL: async (l, e) => {
    Gi.ensureRegistered(), await game.settings.set(ai, l === "gm" ? "miro_url_gm" : "miro_url_players", e);
  }
};
function j_(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-cog"></i>', s(e, "class", "action-btn config svelte-phxha5");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler*/
        l[8]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function lu(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "CONFIGURA√á√ÉO DE LINK", n = g(), o = r("input"), c = g(), f = r("button"), f.textContent = "VINCULAR N√öCLEO", s(o, "type", "text"), s(o, "placeholder", "Cole o link do Miro aqui..."), s(o, "class", "svelte-phxha5"), s(f, "class", "save-btn svelte-phxha5"), s(t, "class", "setup-card svelte-phxha5"), s(e, "class", "setup-overlay svelte-phxha5");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(t, n), a(t, o), x(
        o,
        /*miroURL*/
        l[3]
      ), a(t, c), a(t, f), u || (d = [
        R(
          o,
          "input",
          /*input_input_handler*/
          l[9]
        ),
        R(
          f,
          "click",
          /*saveURL*/
          l[7]
        )
      ], u = !0);
    },
    p(p, m) {
      m & /*miroURL*/
      8 && o.value !== /*miroURL*/
      p[3] && x(
        o,
        /*miroURL*/
        p[3]
      );
    },
    d(p) {
      p && P(e), u = !1, Te(d);
    }
  };
}
function V_(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-exclamation-triangle"></i> <p>LINK_N√ÉO_CONFIGURADO</p>', s(e, "class", "error-state");
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    i: ge,
    o: ge,
    d(t) {
      t && P(e);
    }
  };
}
function W_(l) {
  let e, t;
  return {
    c() {
      e = r("iframe"), at(e.src, t = /*miroURL*/
      l[3]) || s(e, "src", t), s(e, "title", "Miro Board"), e.allowFullscreen = !0, s(e, "class", "svelte-phxha5");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n & /*miroURL*/
      8 && !at(e.src, t = /*miroURL*/
      i[3]) && s(e, "src", t);
    },
    i: ge,
    o: ge,
    d(i) {
      i && P(e);
    }
  };
}
function X_(l) {
  let e, t, i, n, o, c, f, u, d, p, m = (
    /*miroURL*/
    l[3].substring(0, 50) + ""
  ), b, v, h, _, w, k, A, y, E;
  return {
    c() {
      e = r("div"), t = r("div"), t.innerHTML = '<div class="scan-bar svelte-phxha5"></div>', i = g(), n = r("i"), o = g(), c = r("h2"), c.textContent = "CONEX√ÉO EXTERNA REQUERIDA", f = g(), u = r("p"), u.textContent = "O servidor Miro exige autentica√ß√£o via terminal externo para este link de colabora√ß√£o.", d = g(), p = r("div"), b = B(m), v = B("..."), h = g(), _ = r("button"), _.innerHTML = '<i class="fas fa-external-link-alt"></i> ESTABELECER CONEX√ÉO', w = g(), k = r("div"), k.innerHTML = `&gt; STATUS: AGUARDANDO_INTERA√á√ÉO_HUMANA...<br/>
                    &gt; SEGURAN√áA: ENCRIPTADO_SSL`, s(t, "class", "hacker-loader svelte-phxha5"), s(n, "class", "fas fa-shield-alt icon-big svelte-phxha5"), s(p, "class", "link-display svelte-phxha5"), s(_, "class", "launch-button svelte-phxha5"), s(k, "class", "status-log svelte-phxha5"), s(e, "class", "external-launcher svelte-phxha5");
    },
    m(S, O) {
      q(S, e, O), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(p, b), a(p, v), a(e, h), a(e, _), a(e, w), a(e, k), y || (E = R(
        _,
        "click",
        /*launchExternal*/
        l[6]
      ), y = !0);
    },
    p(S, O) {
      O & /*miroURL*/
      8 && m !== (m = /*miroURL*/
      S[3].substring(0, 50) + "") && te(b, m);
    },
    i(S) {
      S && (A || Ne(() => {
        A = st(e, Qe, {}), A.start();
      }));
    },
    o: ge,
    d(S) {
      S && P(e), y = !1, E();
    }
  };
}
function J_(l) {
  let e, t, i, n, o, c, f, u = (
    /*mode*/
    l[1].toUpperCase() + ""
  ), d, p, m, b, v, h, _, w, k, A, y, E, S, O = game.user.isGM && j_(l), C = (
    /*isEditing*/
    l[4] && lu(l)
  );
  function T(D, M) {
    return M & /*miroURL*/
    8 && (k = null), /*isExternalLink*/
    D[5] ? X_ : (k == null && (k = !!/*miroURL*/
    (D[3] && /*miroURL*/
    D[3].includes("live-embed"))), k ? W_ : V_);
  }
  let N = T(l, -1), I = N(l);
  return {
    c() {
      e = r("div"), t = r("header"), i = r("div"), n = r("span"), o = g(), c = r("span"), f = B("DETETIVE_HUB // "), d = B(u), p = g(), m = r("div"), O && O.c(), b = g(), v = r("button"), v.textContent = "[X]", h = g(), _ = r("div"), C && C.c(), w = g(), I.c(), s(n, "class", "led svelte-phxha5"), s(c, "class", "title svelte-phxha5"), s(i, "class", "header-left"), s(v, "class", "action-btn close svelte-phxha5"), s(m, "class", "header-actions"), s(t, "class", "miro-header svelte-phxha5"), s(_, "class", "miro-body svelte-phxha5"), s(e, "class", "miro-window-root svelte-phxha5"), ae(
        e,
        "--c-primary",
        /*themeColor*/
        l[0]
      );
    },
    m(D, M) {
      q(D, e, M), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(c, d), a(t, p), a(t, m), O && O.m(m, null), a(m, b), a(m, v), a(e, h), a(e, _), C && C.m(_, null), a(_, w), I.m(_, null), y = !0, E || (S = R(v, "click", function() {
        oa(
          /*onClose*/
          l[2]
        ) && l[2].apply(this, arguments);
      }), E = !0);
    },
    p(D, [M]) {
      l = D, (!y || M & /*mode*/
      2) && u !== (u = /*mode*/
      l[1].toUpperCase() + "") && te(d, u), game.user.isGM && O.p(l, M), /*isEditing*/
      l[4] ? C ? C.p(l, M) : (C = lu(l), C.c(), C.m(_, w)) : C && (C.d(1), C = null), N === (N = T(l, M)) && I ? I.p(l, M) : (I.d(1), I = N(l), I && (I.c(), ne(I, 1), I.m(_, null))), (!y || M & /*themeColor*/
      1) && ae(
        e,
        "--c-primary",
        /*themeColor*/
        l[0]
      );
    },
    i(D) {
      y || (ne(I), D && Ne(() => {
        y && (A || (A = We(e, Qe, {}, !0)), A.run(1));
      }), y = !0);
    },
    o(D) {
      D && (A || (A = We(e, Qe, {}, !1)), A.run(0)), y = !1;
    },
    d(D) {
      D && P(e), O && O.d(), C && C.d(), I.d(), D && A && A.end(), E = !1, S();
    }
  };
}
function Y_(l, e, t) {
  let { themeColor: i = "#00ff41" } = e, { mode: n = "players" } = e, { onClose: o } = e;
  const c = {
    gm: "https://miro.com/welcomeonboard/Y3ZjSklZbHY2NC9CeExwSW4vVjQwSmVBekxBdlhRNEZYWXVUZEJDc2JydERLeDlMWG12U2tHeW9Yamk2VjJYT0hIM0xtM0FYekI1Znd2eGR1WWZXcGE5d2EyS0ExWW83Z24xYllQRVROOUY3dWx6eGdva1g2KzdPUlJIZHlybStnbHpza3F6REdEcmNpNEFOMmJXWXBBPT0hdjE=?share_link_id=634191516972",
    // Link de visualiza√ß√£o r√°pida
    players: "https://miro.com/welcomeonboard/WG9lTnNFek13RTVKOXBrQ3JOR04rUk11UTBOeExkemplV0xJbTVhQnUzNE9PTG5uaWUxWno1Uks2ZXY0aUxpMFFlYnRWdG0yTFEyeWZOV0lZMzFlY3E5d2EyS0ExWW83Z24xYllQRVROOUdEVVJJVmpJbU05RmI2eHZhT1pRenR3VHhHVHd5UWtSM1BidUtUYmxycDRnPT0hdjE=?share_link_id=331100619246"
  };
  let f = "", u = !1, d = !1;
  qt(() => {
    const h = Gi.getURL(n);
    t(3, f = h || c[n]);
  });
  function p() {
    window.open(f, "_blank");
  }
  async function m() {
    await Gi.setURL(n, f), t(4, u = !1), ui.notifications.info("PROTOCOLO DE ACESSO ATUALIZADO.");
  }
  const b = () => t(4, u = !u);
  function v() {
    f = this.value, t(3, f);
  }
  return l.$$set = (h) => {
    "themeColor" in h && t(0, i = h.themeColor), "mode" in h && t(1, n = h.mode), "onClose" in h && t(2, o = h.onClose);
  }, l.$$.update = () => {
    l.$$.dirty & /*miroURL*/
    8 && t(5, d = f && !f.includes("live-embed"));
  }, [
    i,
    n,
    o,
    f,
    u,
    d,
    p,
    m,
    b,
    v
  ];
}
class Q_ extends mt {
  constructor(e) {
    super(), pt(this, e, Y_, J_, dt, { themeColor: 0, mode: 1, onClose: 2 });
  }
}
const { window: au } = Fi;
function iu(l) {
  let e, t;
  return e = new q_({
    props: { actor: (
      /*currentActor*/
      l[0]
    ) }
  }), e.$on(
    "close",
    /*close_handler*/
    l[18]
  ), e.$on(
    "officialize",
    /*officialize_handler*/
    l[19]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*currentActor*/
      1 && (o.actor = /*currentActor*/
      i[0]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function su(l) {
  let e, t;
  return e = new U0({
    props: {
      data: (
        /*combatData*/
        l[7]
      ),
      themeColor: (
        /*themeColor*/
        l[9]
      )
    }
  }), e.$on(
    "close",
    /*close_handler_1*/
    l[20]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*combatData*/
      128 && (o.data = /*combatData*/
      i[7]), n[0] & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function nu(l) {
  let e, t;
  return e = new P0({
    props: { actor: (
      /*currentActor*/
      l[0]
    ) }
  }), e.$on(
    "close",
    /*close_handler_2*/
    l[21]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*currentActor*/
      1 && (o.actor = /*currentActor*/
      i[0]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function ou(l) {
  let e, t;
  return e = new G0({}), e.$on(
    "close",
    /*close_handler_3*/
    l[22]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p: ge,
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function ru(l) {
  let e, t;
  return e = new Q_({
    props: {
      themeColor: (
        /*themeColor*/
        l[9]
      ),
      mode: (
        /*miroMode*/
        l[6]
      ),
      onClose: (
        /*func*/
        l[23]
      )
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*themeColor*/
      512 && (o.themeColor = /*themeColor*/
      i[9]), n[0] & /*miroMode*/
      64 && (o.mode = /*miroMode*/
      i[6]), n[0] & /*showMiro*/
      32 && (o.onClose = /*func*/
      i[23]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function cu(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y = (
    /*showBoardSelector*/
    l[8] && fu(l)
  );
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-id-card"></i>', i = g(), n = r("button"), n.innerHTML = '<i class="fas fa-hand-fist"></i>', o = g(), c = r("button"), c.innerHTML = '<i class="fas fa-shopping-cart"></i>', f = g(), u = r("button"), u.innerHTML = '<i class="fas fa-dice"></i>', d = g(), p = r("button"), p.innerHTML = '<i class="fas fa-search-plus"></i>', m = g(), b = r("div"), h = g(), y && y.c(), _ = Pt(), s(t, "class", "m-btn star-pt n1 svelte-wmtrh7"), s(t, "title", "PERFIL_BIOM√âTRICO"), s(n, "class", "m-btn star-pt n2 svelte-wmtrh7"), s(n, "title", "TERMINAL_ATAQUE"), s(c, "class", "m-btn star-pt n3 svelte-wmtrh7"), s(c, "title", "DATABASE_ITENS"), s(u, "class", "m-btn star-pt n4 svelte-wmtrh7"), s(u, "title", "L√ìGICA_DADOS"), s(p, "class", "m-btn star-pt n5 svelte-wmtrh7"), s(p, "title", "DETETIVE_HUB"), s(b, "class", "star-deco svelte-wmtrh7"), s(e, "class", "star-orbit svelte-wmtrh7");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(e, f), a(e, u), a(e, d), a(e, p), a(e, m), a(e, b), q(E, h, S), y && y.m(E, S), q(E, _, S), w = !0, k || (A = [
        R(
          t,
          "click",
          /*click_handler*/
          l[24]
        ),
        R(
          n,
          "click",
          /*click_handler_1*/
          l[25]
        ),
        R(
          c,
          "click",
          /*click_handler_2*/
          l[26]
        ),
        R(
          u,
          "click",
          /*click_handler_3*/
          l[27]
        ),
        R(
          p,
          "click",
          /*click_handler_4*/
          l[28]
        )
      ], k = !0);
    },
    p(E, S) {
      /*showBoardSelector*/
      E[8] ? y ? (y.p(E, S), S[0] & /*showBoardSelector*/
      256 && ne(y, 1)) : (y = fu(E), y.c(), ne(y, 1), y.m(_.parentNode, _)) : y && ($e(), Ae(y, 1, 1, () => {
        y = null;
      }), et());
    },
    i(E) {
      w || (E && Ne(() => {
        w && (v || (v = We(e, Mt, { duration: 400, easing: Dl }, !0)), v.run(1));
      }), ne(y), w = !0);
    },
    o(E) {
      E && (v || (v = We(e, Mt, { duration: 400, easing: Dl }, !1)), v.run(0)), Ae(y), w = !1;
    },
    d(E) {
      E && (P(e), P(h), P(_)), E && v && v.end(), y && y.d(E), k = !1, Te(A);
    }
  };
}
function fu(l) {
  let e, t, i, n, o, c, f, u, d = (
    /*user*/
    l[10].isGM ? "" : "(BLOQUEADO)"
  ), p, m, b, v, h;
  return {
    c() {
      e = r("div"), t = r("div"), t.textContent = "SELE√á√ÉO_DE_MURAL", i = g(), n = r("button"), n.innerHTML = '<i class="fas fa-users"></i> ARQUIVO_GRUPO', o = g(), c = r("button"), f = r("i"), u = B(` 
                        SALA_ESTRAT√âGICA `), p = B(d), s(t, "class", "selector-title svelte-wmtrh7"), s(n, "class", "sel-option svelte-wmtrh7"), s(f, "class", "fas " + /*user*/
      (l[10].isGM ? "fa-unlock" : "fa-lock")), s(c, "class", "sel-option gm-only svelte-wmtrh7"), he(c, "locked", !/*user*/
      l[10].isGM), s(e, "class", "board-selector-hud svelte-wmtrh7");
    },
    m(_, w) {
      q(_, e, w), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), a(c, f), a(c, u), a(c, p), b = !0, v || (h = [
        R(
          n,
          "click",
          /*click_handler_5*/
          l[29]
        ),
        R(
          c,
          "click",
          /*click_handler_6*/
          l[30]
        )
      ], v = !0);
    },
    p: ge,
    i(_) {
      b || (_ && Ne(() => {
        b && (m || (m = We(e, Sl, { x: 20, duration: 300 }, !0)), m.run(1));
      }), b = !0);
    },
    o(_) {
      _ && (m || (m = We(e, Sl, { x: 20, duration: 300 }, !1)), m.run(0)), b = !1;
    },
    d(_) {
      _ && P(e), _ && m && m.end(), v = !1, Te(h);
    }
  };
}
function K_(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = (
    /*activeApp*/
    l[4] === "combate" && iu(l)
  ), S = (
    /*activeApp*/
    l[4] === "resolucao" && su(l)
  ), O = (
    /*activeApp*/
    l[4] === "loja" && nu(l)
  ), C = (
    /*activeApp*/
    l[4] === "dados" && ou(l)
  ), T = (
    /*showMiro*/
    l[5] && ru(l)
  ), N = (
    /*isOpen*/
    l[3] && cu(l)
  );
  return {
    c() {
      e = r("div"), E && E.c(), t = g(), S && S.c(), i = g(), O && O.c(), n = g(), C && C.c(), o = g(), T && T.c(), c = g(), f = r("div"), u = r("div"), d = r("div"), p = r("div"), m = g(), b = r("i"), h = g(), _ = r("div"), w = g(), N && N.c(), s(e, "class", "apps-overlay svelte-wmtrh7"), s(p, "class", "core-glow svelte-wmtrh7"), s(b, "class", v = "fas " + /*isRegistered*/
      (l[2] ? "fa-microchip" : "fa-fingerprint")), s(_, "class", "scan-line svelte-wmtrh7"), s(d, "class", "finger-trigger svelte-wmtrh7"), he(
        d,
        "is-active",
        /*isOpen*/
        l[3]
      ), he(
        d,
        "is-registered",
        /*isRegistered*/
        l[2]
      ), s(u, "class", "scanner-unit svelte-wmtrh7"), s(f, "class", "macro-scanner-root svelte-wmtrh7"), ae(
        f,
        "left",
        /*pos*/
        l[1].x + "px"
      ), ae(
        f,
        "top",
        /*pos*/
        l[1].y + "px"
      ), ae(
        f,
        "--c-primary",
        /*themeColor*/
        l[9]
      );
    },
    m(I, D) {
      q(I, e, D), E && E.m(e, null), a(e, t), S && S.m(e, null), a(e, i), O && O.m(e, null), a(e, n), C && C.m(e, null), a(e, o), T && T.m(e, null), q(I, c, D), q(I, f, D), a(f, u), a(u, d), a(d, p), a(d, m), a(d, b), a(d, h), a(d, _), a(u, w), N && N.m(u, null), k = !0, A || (y = [
        R(
          au,
          "mousemove",
          /*handleMouseMove*/
          l[12]
        ),
        R(
          au,
          "mouseup",
          /*handleMouseUp*/
          l[13]
        ),
        R(
          d,
          "mousedown",
          /*handleMouseDown*/
          l[11]
        ),
        R(
          d,
          "click",
          /*toggleMainScanner*/
          l[14]
        )
      ], A = !0);
    },
    p(I, D) {
      /*activeApp*/
      I[4] === "combate" ? E ? (E.p(I, D), D[0] & /*activeApp*/
      16 && ne(E, 1)) : (E = iu(I), E.c(), ne(E, 1), E.m(e, t)) : E && ($e(), Ae(E, 1, 1, () => {
        E = null;
      }), et()), /*activeApp*/
      I[4] === "resolucao" ? S ? (S.p(I, D), D[0] & /*activeApp*/
      16 && ne(S, 1)) : (S = su(I), S.c(), ne(S, 1), S.m(e, i)) : S && ($e(), Ae(S, 1, 1, () => {
        S = null;
      }), et()), /*activeApp*/
      I[4] === "loja" ? O ? (O.p(I, D), D[0] & /*activeApp*/
      16 && ne(O, 1)) : (O = nu(I), O.c(), ne(O, 1), O.m(e, n)) : O && ($e(), Ae(O, 1, 1, () => {
        O = null;
      }), et()), /*activeApp*/
      I[4] === "dados" ? C ? (C.p(I, D), D[0] & /*activeApp*/
      16 && ne(C, 1)) : (C = ou(I), C.c(), ne(C, 1), C.m(e, o)) : C && ($e(), Ae(C, 1, 1, () => {
        C = null;
      }), et()), /*showMiro*/
      I[5] ? T ? (T.p(I, D), D[0] & /*showMiro*/
      32 && ne(T, 1)) : (T = ru(I), T.c(), ne(T, 1), T.m(e, null)) : T && ($e(), Ae(T, 1, 1, () => {
        T = null;
      }), et()), (!k || D[0] & /*isRegistered*/
      4 && v !== (v = "fas " + /*isRegistered*/
      (I[2] ? "fa-microchip" : "fa-fingerprint"))) && s(b, "class", v), (!k || D[0] & /*isOpen*/
      8) && he(
        d,
        "is-active",
        /*isOpen*/
        I[3]
      ), (!k || D[0] & /*isRegistered*/
      4) && he(
        d,
        "is-registered",
        /*isRegistered*/
        I[2]
      ), /*isOpen*/
      I[3] ? N ? (N.p(I, D), D[0] & /*isOpen*/
      8 && ne(N, 1)) : (N = cu(I), N.c(), ne(N, 1), N.m(u, null)) : N && ($e(), Ae(N, 1, 1, () => {
        N = null;
      }), et()), (!k || D[0] & /*pos*/
      2) && ae(
        f,
        "left",
        /*pos*/
        I[1].x + "px"
      ), (!k || D[0] & /*pos*/
      2) && ae(
        f,
        "top",
        /*pos*/
        I[1].y + "px"
      ), (!k || D[0] & /*themeColor*/
      512) && ae(
        f,
        "--c-primary",
        /*themeColor*/
        I[9]
      );
    },
    i(I) {
      k || (ne(E), ne(S), ne(O), ne(C), ne(T), ne(N), k = !0);
    },
    o(I) {
      Ae(E), Ae(S), Ae(O), Ae(C), Ae(T), Ae(N), k = !1;
    },
    d(I) {
      I && (P(e), P(c), P(f)), E && E.d(), S && S.d(), O && O.d(), C && C.d(), T && T.d(), N && N.d(), A = !1, Te(y);
    }
  };
}
const Fa = "multiversus-rpg";
function Z_(l, e, t) {
  let i, n;
  const o = game.user;
  ml();
  let { actor: c = null } = e, f = o.getFlag(Fa, "hubPos") || { x: 100, y: 100 }, u = o.getFlag(Fa, "isRegistered") || !1, d = !1, p = null, m = !1, b = "players", v = null, h = !1, _ = !1, w = !1, k = { x: 0, y: 0 }, A = { x: 0, y: 0 };
  function y(j) {
    j.preventDefault(), j.stopPropagation(), _ = !0, w = !1, k = { x: j.clientX, y: j.clientY }, A = { x: f.x, y: f.y }, window.addEventListener("mousemove", E), window.addEventListener("mouseup", S);
  }
  function E(j) {
    if (!_) return;
    const X = j.clientX - k.x, K = j.clientY - k.y;
    (Math.abs(X) > 5 || Math.abs(K) > 5) && (w = !0, t(1, f.x = A.x + X, f), t(1, f.y = A.y + K, f));
  }
  async function S() {
    _ && (_ = !1, window.removeEventListener("mousemove", E), window.removeEventListener("mouseup", S), w && await o.setFlag(Fa, "hubPos", f));
  }
  async function O(j) {
    j.stopPropagation(), !w && (u || (t(2, u = !0), await o.setFlag(Fa, "isRegistered", !0), ui.notifications.info("BIOMETRIA_VINCULADA")), t(3, d = !d), d || t(8, h = !1));
  }
  function C(j, X) {
    if (X && X.stopPropagation(), j === "ficha") {
      i ? i.sheet.render(!0) : ui.notifications.warn("PERSONAGEM_N√ÉO_ENCONTRADO"), t(3, d = !1);
      return;
    }
    if (j === "detetive") {
      t(8, h = !h);
      return;
    }
    t(4, p = p === j ? null : j), t(3, d = !1);
  }
  function T(j) {
    if (j === "gm" && !o.isGM) return ui.notifications.error("ACESSO_NEGADO: PROTOCOLO_MESTRE");
    t(6, b = j), t(5, m = !0), t(3, d = !1), t(8, h = !1);
  }
  const N = () => t(4, p = null), I = (j) => {
    t(7, v = j.detail), t(4, p = "resolucao");
  }, D = () => t(4, p = null), M = () => t(4, p = null), G = () => t(4, p = null), L = () => t(5, m = !1), U = (j) => C("ficha", j), z = (j) => C("combate", j), F = (j) => C("loja", j), W = (j) => C("dados", j), H = (j) => C("detetive", j), V = () => T("players"), J = () => T("gm");
  return l.$$set = (j) => {
    "actor" in j && t(17, c = j.actor);
  }, l.$$.update = () => {
    var j, X, K, Z;
    l.$$.dirty[0] & /*actor*/
    131072 && t(0, i = c || o.character || ((j = canvas.tokens.controlled[0]) == null ? void 0 : j.actor) || null), l.$$.dirty[0] & /*currentActor*/
    1 && t(9, n = o.getFlag(Fa, "globalTheme") || ((Z = (K = (X = i == null ? void 0 : i.flags) == null ? void 0 : X[Fa]) == null ? void 0 : K.sheetConfig) == null ? void 0 : Z.themeColor) || "#00ff41");
  }, [
    i,
    f,
    u,
    d,
    p,
    m,
    b,
    v,
    h,
    n,
    o,
    y,
    E,
    S,
    O,
    C,
    T,
    c,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J
  ];
}
class x_ extends mt {
  constructor(e) {
    super(), pt(this, e, Z_, K_, dt, { actor: 17 }, null, [-1, -1]);
  }
}
const ga = "multiversus-rpg", ts = "auxiliar_access_list", Fl = {
  init: () => {
    game.settings.register(ga, ts, {
      name: "Lista de Auxiliares",
      scope: "world",
      config: !1,
      type: Object,
      default: [],
      onChange: () => Hooks.callAll("auxiliarUpdate")
    });
  },
  getAuthorizedUsers: () => game.settings.get(ga, ts) || [],
  toggleUserAccess: async (l) => {
    if (!game.user.isGM) return;
    let e = Fl.getAuthorizedUsers();
    e.includes(l) ? e = e.filter((t) => t !== l) : e.push(l), await game.settings.set(ga, ts, e), game.socket.emit(`module.${ga}`, { type: "AUXILIAR_REFRESH" });
  },
  isAuxiliar: (l = game.user) => l.isGM ? !0 : Fl.getAuthorizedUsers().includes(l.id),
  // --- A√á√ïES (PODERES) ---
  actions: {
    createSheet: async (l, e) => {
      if (!l) return ui.notifications.warn("Defina um nome para a ficha.");
      game.socket.emit(`module.${ga}`, {
        type: "AUX_ACTION_CREATE_SHEET",
        name: l,
        ownerId: e
      }), ui.notifications.info(`[AUX] Pedido de cria√ß√£o enviado: ${l}`);
    },
    giveCoinsToAll: async (l) => {
      game.socket.emit(`module.${ga}`, { type: "AUX_ACTION_COINS", amount: l }), ui.notifications.info(`Solicita√ß√£o enviada: Dar ${l} moedas.`);
    },
    healTarget: async () => {
      const l = [...game.user.targets];
      if (!l.length) return ui.notifications.warn("Selecione um token.");
      game.socket.emit(`module.${ga}`, { type: "AUX_ACTION_HEAL", ids: l.map((e) => e.id) }), ui.notifications.info("Solicita√ß√£o de Suporte M√©dico enviada.");
    }
  }
};
function du(l, e, t) {
  const i = l.slice();
  return i[14] = e[t], i;
}
function uu(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function pu(l) {
  let e, t, i = (
    /*f*/
    l[17].name + ""
  ), n;
  return {
    c() {
      e = r("option"), t = B("üìÇ "), n = B(i), e.__value = /*f*/
      l[17].id, x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, n);
    },
    p: ge,
    d(o) {
      o && P(e);
    }
  };
}
function mu(l) {
  let e, t, i = (
    /*p*/
    l[14].name.toUpperCase() + ""
  ), n;
  return {
    c() {
      e = r("option"), t = B("üë§ "), n = B(i), e.__value = /*p*/
      l[14].id, x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, n);
    },
    p: ge,
    d(o) {
      o && P(e);
    }
  };
}
function $_(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<span>INICIALIZAR FICHA</span> <i class="fas fa-power-off"></i>', s(e, "class", "create-btn svelte-3e8cjx");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*confirmCreation*/
        l[8]
      ), t = !0);
    },
    p: ge,
    i: ge,
    o: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function e2(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = g(), o = r("span"), c = B("CRIPTOGRAFANDO DADOS... "), f = B(
        /*progress*/
        l[4]
      ), u = B("%"), s(i, "class", "fill svelte-3e8cjx"), ae(
        i,
        "width",
        /*progress*/
        l[4] + "%"
      ), s(t, "class", "loading-bar svelte-3e8cjx"), s(o, "class", "status-text svelte-3e8cjx"), s(e, "class", "processing-state svelte-3e8cjx");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(e, n), a(e, o), a(o, c), a(o, f), a(o, u);
    },
    p(p, m) {
      m & /*progress*/
      16 && ae(
        i,
        "width",
        /*progress*/
        p[4] + "%"
      ), m & /*progress*/
      16 && te(
        f,
        /*progress*/
        p[4]
      );
    },
    i(p) {
      p && (d || Ne(() => {
        d = st(e, Qe, {}), d.start();
      }));
    },
    o: ge,
    d(p) {
      p && P(e);
    }
  };
}
function t2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De, we, ke, me, re, ye, oe, be, de, Oe, _e = ce(
    /*folderList*/
    l[7]
  ), ue = [];
  for (let fe = 0; fe < _e.length; fe += 1)
    ue[fe] = pu(uu(l, _e, fe));
  let Re = ce(
    /*playerList*/
    l[6]
  ), Ce = [];
  for (let fe = 0; fe < Re.length; fe += 1)
    Ce[fe] = mu(du(l, Re, fe));
  function He(fe, Le) {
    return (
      /*isProcessing*/
      fe[3] ? e2 : $_
    );
  }
  let Ge = He(l), Xe = Ge(l);
  return {
    c() {
      e = r("div"), i = g(), n = r("div"), o = r("div"), c = g(), f = r("div"), u = g(), d = r("header"), p = r("div"), p.innerHTML = '<i class="fas fa-fingerprint"></i>', m = g(), b = r("div"), v = r("h1"), v.textContent = "NOVO REGISTRO", h = g(), _ = r("div"), w = r("span"), w.textContent = "V4.0", k = g(), A = r("span"), A.textContent = "//", y = g(), E = r("span"), E.textContent = `${game.user.name.toUpperCase()}`, S = g(), O = r("button"), O.innerHTML = '<i class="fas fa-times"></i>', C = g(), T = r("main"), N = r("div"), I = r("label"), I.innerHTML = '<i class="fas fa-tag svelte-3e8cjx"></i> CODENAME', D = g(), M = r("div"), G = r("input"), L = g(), U = r("div"), F = g(), W = r("div"), H = r("label"), H.innerHTML = '<i class="fas fa-folder svelte-3e8cjx"></i> DIRET√ìRIO DE ARQUIVO', V = g(), J = r("div"), j = r("select"), X = r("option"), X.textContent = "üìÇ [RAIZ DO MUNDO]";
      for (let fe = 0; fe < ue.length; fe += 1)
        ue[fe].c();
      K = g(), Z = r("i"), $ = g(), se = r("div"), Y = r("label"), Y.innerHTML = '<i class="fas fa-link svelte-3e8cjx"></i> V√çNCULO NEURAL (OPCIONAL)', Q = g(), ie = r("div"), ee = r("select"), pe = r("option"), pe.textContent = "üë§ APENAS EQUIPE AUXILIAR";
      for (let fe = 0; fe < Ce.length; fe += 1)
        Ce[fe].c();
      Ee = g(), De = r("i"), we = g(), ke = r("div"), ke.innerHTML = '<i class="fas fa-shield-alt svelte-3e8cjx"></i> ACESSO COMPARTILHADO COM TODOS AUXILIARES', re = g(), ye = r("footer"), Xe.c(), s(e, "class", "backdrop svelte-3e8cjx"), s(o, "class", "bg-grid svelte-3e8cjx"), s(f, "class", "bg-scanline svelte-3e8cjx"), s(p, "class", "h-icon svelte-3e8cjx"), s(v, "class", "svelte-3e8cjx"), s(A, "class", "sep svelte-3e8cjx"), s(_, "class", "h-meta svelte-3e8cjx"), s(b, "class", "h-info svelte-3e8cjx"), s(O, "class", "close-btn svelte-3e8cjx"), s(d, "class", "svelte-3e8cjx"), s(I, "class", "svelte-3e8cjx"), s(G, "type", "text"), s(G, "placeholder", "Digite o nome da identidade..."), G.autofocus = !0, G.disabled = /*isProcessing*/
      l[3], s(G, "class", "svelte-3e8cjx"), s(U, "class", "focus-line svelte-3e8cjx"), s(M, "class", "input-wrapper svelte-3e8cjx"), s(N, "class", "field-group svelte-3e8cjx"), s(H, "class", "svelte-3e8cjx"), X.__value = "", x(X, X.__value), X.selected = !0, j.disabled = /*isProcessing*/
      l[3], s(j, "class", "svelte-3e8cjx"), /*selectedFolderId*/
      l[2] === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[12].call(j)
      )), s(Z, "class", "fas fa-chevron-down arrow svelte-3e8cjx"), s(J, "class", "select-wrapper svelte-3e8cjx"), s(W, "class", "field-group svelte-3e8cjx"), s(Y, "class", "svelte-3e8cjx"), pe.__value = "", x(pe, pe.__value), pe.selected = !0, ee.disabled = /*isProcessing*/
      l[3], s(ee, "class", "svelte-3e8cjx"), /*selectedPlayerId*/
      l[1] === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[13].call(ee)
      )), s(De, "class", "fas fa-chevron-down arrow svelte-3e8cjx"), s(ie, "class", "select-wrapper svelte-3e8cjx"), s(ke, "class", "info-tag svelte-3e8cjx"), s(se, "class", "field-group svelte-3e8cjx"), s(T, "class", "svelte-3e8cjx"), s(ye, "class", "svelte-3e8cjx"), s(n, "class", "creator-window svelte-3e8cjx");
    },
    m(fe, Le) {
      q(fe, e, Le), q(fe, i, Le), q(fe, n, Le), a(n, o), a(n, c), a(n, f), a(n, u), a(n, d), a(d, p), a(d, m), a(d, b), a(b, v), a(b, h), a(b, _), a(_, w), a(_, k), a(_, A), a(_, y), a(_, E), a(d, S), a(d, O), a(n, C), a(n, T), a(T, N), a(N, I), a(N, D), a(N, M), a(M, G), x(
        G,
        /*newCharName*/
        l[0]
      ), a(M, L), a(M, U), a(T, F), a(T, W), a(W, H), a(W, V), a(W, J), a(J, j), a(j, X);
      for (let qe = 0; qe < ue.length; qe += 1)
        ue[qe] && ue[qe].m(j, null);
      ot(
        j,
        /*selectedFolderId*/
        l[2],
        !0
      ), a(J, K), a(J, Z), a(T, $), a(T, se), a(se, Y), a(se, Q), a(se, ie), a(ie, ee), a(ee, pe);
      for (let qe = 0; qe < Ce.length; qe += 1)
        Ce[qe] && Ce[qe].m(ee, null);
      ot(
        ee,
        /*selectedPlayerId*/
        l[1],
        !0
      ), a(ie, Ee), a(ie, De), a(se, we), a(se, ke), a(n, re), a(n, ye), Xe.m(ye, null), be = !0, G.focus(), de || (Oe = [
        R(
          e,
          "click",
          /*click_handler*/
          l[9]
        ),
        R(
          O,
          "click",
          /*click_handler_1*/
          l[10]
        ),
        R(
          G,
          "input",
          /*input_input_handler*/
          l[11]
        ),
        R(
          j,
          "change",
          /*select0_change_handler*/
          l[12]
        ),
        R(
          ee,
          "change",
          /*select1_change_handler*/
          l[13]
        )
      ], de = !0);
    },
    p(fe, [Le]) {
      if ((!be || Le & /*isProcessing*/
      8) && (G.disabled = /*isProcessing*/
      fe[3]), Le & /*newCharName*/
      1 && G.value !== /*newCharName*/
      fe[0] && x(
        G,
        /*newCharName*/
        fe[0]
      ), Le & /*folderList*/
      128) {
        _e = ce(
          /*folderList*/
          fe[7]
        );
        let qe;
        for (qe = 0; qe < _e.length; qe += 1) {
          const Me = uu(fe, _e, qe);
          ue[qe] ? ue[qe].p(Me, Le) : (ue[qe] = pu(Me), ue[qe].c(), ue[qe].m(j, null));
        }
        for (; qe < ue.length; qe += 1)
          ue[qe].d(1);
        ue.length = _e.length;
      }
      if ((!be || Le & /*isProcessing*/
      8) && (j.disabled = /*isProcessing*/
      fe[3]), Le & /*selectedFolderId, folderList*/
      132 && ot(
        j,
        /*selectedFolderId*/
        fe[2]
      ), Le & /*playerList*/
      64) {
        Re = ce(
          /*playerList*/
          fe[6]
        );
        let qe;
        for (qe = 0; qe < Re.length; qe += 1) {
          const Me = du(fe, Re, qe);
          Ce[qe] ? Ce[qe].p(Me, Le) : (Ce[qe] = mu(Me), Ce[qe].c(), Ce[qe].m(ee, null));
        }
        for (; qe < Ce.length; qe += 1)
          Ce[qe].d(1);
        Ce.length = Re.length;
      }
      (!be || Le & /*isProcessing*/
      8) && (ee.disabled = /*isProcessing*/
      fe[3]), Le & /*selectedPlayerId, playerList*/
      66 && ot(
        ee,
        /*selectedPlayerId*/
        fe[1]
      ), Ge === (Ge = He(fe)) && Xe ? Xe.p(fe, Le) : (Xe.d(1), Xe = Ge(fe), Xe && (Xe.c(), ne(Xe, 1), Xe.m(ye, null)));
    },
    i(fe) {
      be || (fe && Ne(() => {
        be && (t || (t = We(e, Qe, {}, !0)), t.run(1));
      }), fe && (z || Ne(() => {
        z = st(N, Sl, { y: 10, duration: 300, delay: 100 }), z.start();
      })), fe && (le || Ne(() => {
        le = st(W, Sl, { y: 10, duration: 300, delay: 200 }), le.start();
      })), fe && (me || Ne(() => {
        me = st(se, Sl, { y: 10, duration: 300, delay: 300 }), me.start();
      })), ne(Xe), fe && (oe || Ne(() => {
        oe = st(n, Mt, {
          duration: 400,
          start: 0.95,
          easing: S0
        }), oe.start();
      })), be = !0);
    },
    o(fe) {
      fe && (t || (t = We(e, Qe, {}, !1)), t.run(0)), be = !1;
    },
    d(fe) {
      fe && (P(e), P(i), P(n)), fe && t && t.end(), Fe(ue, fe), Fe(Ce, fe), Xe.d(), de = !1, Te(Oe);
    }
  };
}
function l2(l, e, t) {
  const i = ml();
  let n = game.users ? game.users.filter((k) => !k.isGM).map((k) => ({ id: k.id, name: k.name })) : [], o = game.folders ? game.folders.filter((k) => k.type === "Actor").sort((k, A) => k.name.localeCompare(A.name)) : [], c = "", f = "", u = "", d = !1, p = 0;
  async function m() {
    if (!c.trim()) return ui.notifications.warn(">> ERRO: NOME INV√ÅLIDO.");
    t(3, d = !0);
    let k = setInterval(
      () => {
        t(4, p += 8), p > 95 && clearInterval(k);
      },
      50
    );
    try {
      const A = Fl.getAuthorizedUsers();
      let y = { default: 0 };
      game.users.forEach((C) => {
        (C.isGM || A.includes(C.id) || C.id === game.user.id) && (y[C.id] = 3);
      }), f && (y[f] = 3);
      const E = {
        name: c,
        type: "character",
        img: "icons/svg/mystery-man.svg",
        folder: u || null,
        ownership: y,
        system: {}
      }, O = await getDocumentClass("Actor").create(E);
      clearInterval(k), t(4, p = 100), setTimeout(
        async () => {
          O && (ui.notifications.info(`>> PROTOCOLO: [${O.name}] REGISTRADO.`), await O.sheet.render(!0), i("close"));
        },
        600
      );
    } catch (A) {
      console.error(A), ui.notifications.error(`FALHA CR√çTICA: ${A.message}`), t(3, d = !1), t(4, p = 0);
    }
  }
  const b = () => i("close"), v = () => i("close");
  function h() {
    c = this.value, t(0, c);
  }
  function _() {
    u = Gt(this), t(2, u), t(7, o);
  }
  function w() {
    f = Gt(this), t(1, f), t(6, n);
  }
  return [
    c,
    f,
    u,
    d,
    p,
    i,
    n,
    o,
    m,
    b,
    v,
    h,
    _,
    w
  ];
}
class a2 extends mt {
  constructor(e) {
    super(), pt(this, e, l2, t2, dt, {});
  }
}
function i2(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("button"), i.innerHTML = '<i class="fas fa-coins svelte-13hu7tq"></i> <span>STIMULUS (+100)</span>', n = g(), o = r("button"), o.innerHTML = '<i class="fas fa-medkit svelte-13hu7tq"></i> <span>SUPORTE M√âDICO</span>', c = g(), f = r("button"), f.innerHTML = '<i class="fas fa-eye svelte-13hu7tq"></i> <span>REVELAR √ÅREA</span>', s(i, "class", "btn gold svelte-13hu7tq"), s(o, "class", "btn health svelte-13hu7tq"), s(f, "class", "btn util svelte-13hu7tq"), s(t, "class", "grid svelte-13hu7tq"), s(e, "class", "app-window svelte-13hu7tq");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(t, n), a(t, o), a(t, c), a(t, f), u || (d = [
        R(
          i,
          "click",
          /*click_handler*/
          l[0]
        ),
        R(
          o,
          "click",
          /*click_handler_1*/
          l[1]
        )
      ], u = !0);
    },
    p: ge,
    i: ge,
    o: ge,
    d(p) {
      p && P(e), u = !1, Te(d);
    }
  };
}
function s2(l) {
  return [() => run("coins"), () => run("heal")];
}
class n2 extends mt {
  constructor(e) {
    super(), pt(this, e, s2, i2, dt, {});
  }
}
function bu(l, e, t) {
  const i = l.slice();
  return i[14] = e[t], i;
}
function vu(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function hu(l) {
  let e, t, i = (
    /*f*/
    l[17].name + ""
  ), n;
  return {
    c() {
      e = r("option"), t = B("üìÇ "), n = B(i), e.__value = /*f*/
      l[17].id, x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, n);
    },
    p: ge,
    d(o) {
      o && P(e);
    }
  };
}
function gu(l) {
  let e, t, i = (
    /*p*/
    l[14].name.toUpperCase() + ""
  ), n;
  return {
    c() {
      e = r("option"), t = B("üëÅÔ∏è "), n = B(i), e.__value = /*p*/
      l[14].id, x(e, e.__value);
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, n);
    },
    p: ge,
    d(o) {
      o && P(e);
    }
  };
}
function o2(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = 'CRIAR REGISTRO <i class="fas fa-chevron-right"></i>', s(e, "class", "action-btn warn svelte-accp33");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*confirmCreation*/
        l[8]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function r2(l) {
  let e, t, i, n, o, c, f;
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("span"), o = B("COMPILANDO C√ìDIGO... "), c = B(
        /*progress*/
        l[4]
      ), f = B("%"), s(t, "class", "bar-fill warn svelte-accp33"), ae(
        t,
        "width",
        /*progress*/
        l[4] + "%"
      ), s(n, "class", "svelte-accp33"), s(e, "class", "processing-box svelte-accp33");
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f);
    },
    p(u, d) {
      d & /*progress*/
      16 && ae(
        t,
        "width",
        /*progress*/
        u[4] + "%"
      ), d & /*progress*/
      16 && te(
        c,
        /*progress*/
        u[4]
      );
    },
    d(u) {
      u && P(e);
    }
  };
}
function c2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee = ce(
    /*folderList*/
    l[7]
  ), De = [];
  for (let oe = 0; oe < Ee.length; oe += 1)
    De[oe] = hu(vu(l, Ee, oe));
  let we = ce(
    /*playerList*/
    l[6]
  ), ke = [];
  for (let oe = 0; oe < we.length; oe += 1)
    ke[oe] = gu(bu(l, we, oe));
  function me(oe, be) {
    return (
      /*isProcessing*/
      oe[3] ? r2 : o2
    );
  }
  let re = me(l), ye = re(l);
  return {
    c() {
      e = r("div"), i = g(), n = r("div"), o = r("div"), c = g(), f = r("div"), u = g(), d = r("header"), p = r("div"), p.innerHTML = '<i class="fas fa-bolt"></i>', m = g(), b = r("div"), b.innerHTML = '<h1 class="svelte-accp33">FORJAR PODER</h1> <small class="svelte-accp33">DB DE HABILIDADES V2.1</small>', v = g(), h = r("button"), h.textContent = "√ó", _ = g(), w = r("main"), k = r("div"), A = r("label"), A.textContent = "NOME DA HABILIDADE", y = g(), E = r("div"), S = r("input"), O = g(), C = r("div"), T = g(), N = r("div"), I = r("label"), I.textContent = "BANCO DE DADOS (PASTA DE ITENS)", D = g(), M = r("div"), G = r("select"), L = r("option"), L.textContent = "üìÇ [RAIZ DE ITENS]";
      for (let oe = 0; oe < De.length; oe += 1)
        De[oe].c();
      U = g(), z = r("i"), F = g(), W = r("div"), H = r("label"), H.textContent = "DESTINAT√ÅRIO (OBSERVADOR)", V = g(), J = r("div"), j = r("select"), X = r("option"), X.textContent = "üëÅÔ∏è APENAS AUXILIARES";
      for (let oe = 0; oe < ke.length; oe += 1)
        ke[oe].c();
      K = g(), Z = r("i"), le = g(), $ = r("div"), $.innerHTML = '<i class="fas fa-lock"></i> O jogador poder√° ver, mas n√£o editar.', se = g(), Y = r("footer"), ye.c(), s(e, "class", "backdrop svelte-accp33"), s(o, "class", "top-bar-deco svelte-accp33"), s(f, "class", "scan-line svelte-accp33"), s(p, "class", "icon-frame warn svelte-accp33"), s(b, "class", "header-text svelte-accp33"), s(h, "class", "close-btn svelte-accp33"), s(d, "class", "svelte-accp33"), s(A, "class", "svelte-accp33"), s(S, "type", "text"), s(S, "placeholder", "Ex: Raios Laser"), S.autofocus = !0, S.disabled = /*isProcessing*/
      l[3], s(S, "class", "svelte-accp33"), s(C, "class", "bar warn svelte-accp33"), s(E, "class", "cyber-input svelte-accp33"), s(k, "class", "input-block svelte-accp33"), s(I, "class", "svelte-accp33"), L.__value = "", x(L, L.__value), L.selected = !0, G.disabled = /*isProcessing*/
      l[3], s(G, "class", "svelte-accp33"), /*selectedFolderId*/
      l[2] === void 0 && Ne(() => (
        /*select0_change_handler*/
        l[12].call(G)
      )), s(z, "class", "fas fa-folder-open arrow svelte-accp33"), s(M, "class", "cyber-select svelte-accp33"), s(N, "class", "input-block svelte-accp33"), s(H, "class", "svelte-accp33"), X.__value = "", x(X, X.__value), X.selected = !0, j.disabled = /*isProcessing*/
      l[3], s(j, "class", "svelte-accp33"), /*selectedPlayerId*/
      l[1] === void 0 && Ne(() => (
        /*select1_change_handler*/
        l[13].call(j)
      )), s(Z, "class", "fas fa-eye arrow svelte-accp33"), s(J, "class", "cyber-select svelte-accp33"), s($, "class", "info-msg warn svelte-accp33"), s(W, "class", "input-block svelte-accp33"), s(w, "class", "svelte-accp33"), s(Y, "class", "svelte-accp33"), s(n, "class", "cyber-window svelte-accp33");
    },
    m(oe, be) {
      q(oe, e, be), q(oe, i, be), q(oe, n, be), a(n, o), a(n, c), a(n, f), a(n, u), a(n, d), a(d, p), a(d, m), a(d, b), a(d, v), a(d, h), a(n, _), a(n, w), a(w, k), a(k, A), a(k, y), a(k, E), a(E, S), x(
        S,
        /*newItemName*/
        l[0]
      ), a(E, O), a(E, C), a(w, T), a(w, N), a(N, I), a(N, D), a(N, M), a(M, G), a(G, L);
      for (let de = 0; de < De.length; de += 1)
        De[de] && De[de].m(G, null);
      ot(
        G,
        /*selectedFolderId*/
        l[2],
        !0
      ), a(M, U), a(M, z), a(w, F), a(w, W), a(W, H), a(W, V), a(W, J), a(J, j), a(j, X);
      for (let de = 0; de < ke.length; de += 1)
        ke[de] && ke[de].m(j, null);
      ot(
        j,
        /*selectedPlayerId*/
        l[1],
        !0
      ), a(J, K), a(J, Z), a(W, le), a(W, $), a(n, se), a(n, Y), ye.m(Y, null), ie = !0, S.focus(), ee || (pe = [
        R(
          e,
          "click",
          /*click_handler*/
          l[9]
        ),
        R(
          h,
          "click",
          /*click_handler_1*/
          l[10]
        ),
        R(
          S,
          "input",
          /*input_input_handler*/
          l[11]
        ),
        R(
          G,
          "change",
          /*select0_change_handler*/
          l[12]
        ),
        R(
          j,
          "change",
          /*select1_change_handler*/
          l[13]
        )
      ], ee = !0);
    },
    p(oe, [be]) {
      if ((!ie || be & /*isProcessing*/
      8) && (S.disabled = /*isProcessing*/
      oe[3]), be & /*newItemName*/
      1 && S.value !== /*newItemName*/
      oe[0] && x(
        S,
        /*newItemName*/
        oe[0]
      ), be & /*folderList*/
      128) {
        Ee = ce(
          /*folderList*/
          oe[7]
        );
        let de;
        for (de = 0; de < Ee.length; de += 1) {
          const Oe = vu(oe, Ee, de);
          De[de] ? De[de].p(Oe, be) : (De[de] = hu(Oe), De[de].c(), De[de].m(G, null));
        }
        for (; de < De.length; de += 1)
          De[de].d(1);
        De.length = Ee.length;
      }
      if ((!ie || be & /*isProcessing*/
      8) && (G.disabled = /*isProcessing*/
      oe[3]), be & /*selectedFolderId, folderList*/
      132 && ot(
        G,
        /*selectedFolderId*/
        oe[2]
      ), be & /*playerList*/
      64) {
        we = ce(
          /*playerList*/
          oe[6]
        );
        let de;
        for (de = 0; de < we.length; de += 1) {
          const Oe = bu(oe, we, de);
          ke[de] ? ke[de].p(Oe, be) : (ke[de] = gu(Oe), ke[de].c(), ke[de].m(j, null));
        }
        for (; de < ke.length; de += 1)
          ke[de].d(1);
        ke.length = we.length;
      }
      (!ie || be & /*isProcessing*/
      8) && (j.disabled = /*isProcessing*/
      oe[3]), be & /*selectedPlayerId, playerList*/
      66 && ot(
        j,
        /*selectedPlayerId*/
        oe[1]
      ), re === (re = me(oe)) && ye ? ye.p(oe, be) : (ye.d(1), ye = re(oe), ye && (ye.c(), ye.m(Y, null)));
    },
    i(oe) {
      ie || (oe && Ne(() => {
        ie && (t || (t = We(e, Qe, {}, !0)), t.run(1));
      }), oe && (Q || Ne(() => {
        Q = st(n, Mt, { duration: 300, start: 0.95 }), Q.start();
      })), ie = !0);
    },
    o(oe) {
      oe && (t || (t = We(e, Qe, {}, !1)), t.run(0)), ie = !1;
    },
    d(oe) {
      oe && (P(e), P(i), P(n)), oe && t && t.end(), Fe(De, oe), Fe(ke, oe), ye.d(), ee = !1, Te(pe);
    }
  };
}
function f2(l, e, t) {
  const i = ml();
  let n = game.users ? game.users.filter((k) => !k.isGM).map((k) => ({ id: k.id, name: k.name })) : [], o = game.folders ? game.folders.filter((k) => k.type === "Item").sort((k, A) => k.name.localeCompare(A.name)) : [], c = "", f = "", u = "", d = !1, p = 0;
  async function m() {
    if (!c.trim()) {
      ui.notifications.warn(">> ERRO: O Poder precisa de um nome.");
      return;
    }
    t(3, d = !0);
    let k = setInterval(
      () => {
        t(4, p += 15), p > 100 && clearInterval(k);
      },
      80
    );
    try {
      const A = Fl.getAuthorizedUsers();
      let y = {
        default: 0
        // Ningu√©m v√™ por padr√£o
      };
      game.users.forEach((C) => {
        (C.isGM || A.includes(C.id) || C.id === game.user.id) && (y[C.id] = 3);
      }), f && (y[f] = 2);
      const E = {
        name: c,
        type: "power",
        // TIPO CONFIRMADO NO CONSOLE
        img: "icons/svg/lightning.svg",
        // √çcone padr√£o de poder
        folder: u || null,
        ownership: y,
        system: {}
      }, O = await getDocumentClass("Item").create(E);
      clearInterval(k), t(4, p = 100), setTimeout(
        async () => {
          O && (ui.notifications.info(`>> PODER FORJADO: [${O.name}]`), await O.sheet.render(!0), i("close"));
        },
        400
      );
    } catch (A) {
      console.error(A), ui.notifications.error(`FALHA NA MATRIZ: ${A.message}`), t(3, d = !1), t(4, p = 0);
    }
  }
  const b = () => i("close"), v = () => i("close");
  function h() {
    c = this.value, t(0, c);
  }
  function _() {
    u = Gt(this), t(2, u), t(7, o);
  }
  function w() {
    f = Gt(this), t(1, f), t(6, n);
  }
  return [
    c,
    f,
    u,
    d,
    p,
    i,
    n,
    o,
    m,
    b,
    v,
    h,
    _,
    w
  ];
}
class d2 extends mt {
  constructor(e) {
    super(), pt(this, e, f2, c2, dt, {});
  }
}
function _u(l, e, t) {
  const i = l.slice();
  return i[20] = e[t], i;
}
function ku(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function wu(l, e, t) {
  const i = l.slice();
  return i[14] = e[t], i;
}
function u2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S = (
    /*isGM*/
    l[5] && b2(l)
  );
  const O = [h2, v2], C = [];
  function T(N, I) {
    return (
      /*viewMode*/
      N[1] === "config" && /*isGM*/
      N[5] ? 0 : 1
    );
  }
  return p = T(l), m = C[p] = O[p](l), {
    c() {
      e = r("div"), t = r("header"), i = r("div"), i.innerHTML = '<i class="fas fa-satellite-dish"></i> NEXUS_OS', n = g(), o = r("div"), c = B(
        /*currentTime*/
        l[3]
      ), f = g(), S && S.c(), u = g(), d = r("main"), m.c(), b = g(), v = r("footer"), h = r("div"), _ = r("span"), w = B(`
                    LOGADO COMO: `), k = r("b"), k.textContent = `${game.user.name.toUpperCase()}`, A = g(), y = r("div"), y.textContent = "CONEX√ÉO SEGURA", s(i, "class", "brand svelte-od90cm"), s(o, "class", "system-time svelte-od90cm"), s(t, "class", "svelte-od90cm"), s(d, "class", "svelte-od90cm"), s(_, "class", "indicator online svelte-od90cm"), s(h, "class", "user-block svelte-od90cm"), s(y, "class", "sys-status"), s(v, "class", "svelte-od90cm"), s(e, "class", "desktop-interface svelte-od90cm");
    },
    m(N, I) {
      q(N, e, I), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(t, f), S && S.m(t, null), a(e, u), a(e, d), C[p].m(d, null), a(e, b), a(e, v), a(v, h), a(h, _), a(h, w), a(h, k), a(v, A), a(v, y);
    },
    p(N, I) {
      I & /*currentTime*/
      8 && te(
        c,
        /*currentTime*/
        N[3]
      ), /*isGM*/
      N[5] && S.p(N, I);
      let D = p;
      p = T(N), p === D ? C[p].p(N, I) : ($e(), Ae(C[D], 1, 1, () => {
        C[D] = null;
      }), et(), m = C[p], m ? m.p(N, I) : (m = C[p] = O[p](N), m.c()), ne(m, 1), m.m(d, null));
    },
    i(N) {
      ne(m), N && (E || Ne(() => {
        E = st(e, Mt, { duration: 500, start: 0.95 }), E.start();
      }));
    },
    o(N) {
      Ae(m);
    },
    d(N) {
      N && P(e), S && S.d(), C[p].d();
    }
  };
}
function p2(l) {
  let e, t;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-lock large-icon svelte-od90cm"></i> <h2 class="svelte-od90cm">ACESSO NEGADO</h2> <p>Sua assinatura neural n√£o est√° autorizada.</p>', s(e, "class", "locked-screen svelte-od90cm");
    },
    m(i, n) {
      q(i, e, n);
    },
    p: ge,
    i(i) {
      i && (t || Ne(() => {
        t = st(e, Qe, {}), t.start();
      }));
    },
    o: ge,
    d(i) {
      i && P(e);
    }
  };
}
function m2(l) {
  let e, t, i, n, o, c, f = ce(
    /*bootLines*/
    l[2]
  ), u = [];
  for (let d = 0; d < f.length; d += 1)
    u[d] = Eu(wu(l, f, d));
  return {
    c() {
      e = r("div"), t = r("div"), t.innerHTML = '<i class="fas fa-network-wired pulse svelte-od90cm"></i>', i = g(), n = r("div");
      for (let d = 0; d < u.length; d += 1)
        u[d].c();
      o = g(), c = r("span"), c.textContent = "_", s(t, "class", "logo-boot svelte-od90cm"), s(c, "class", "cursor svelte-od90cm"), s(n, "class", "console-log"), s(e, "class", "boot-screen svelte-od90cm");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n);
      for (let m = 0; m < u.length; m += 1)
        u[m] && u[m].m(n, null);
      a(n, o), a(n, c);
    },
    p(d, p) {
      if (p & /*bootLines*/
      4) {
        f = ce(
          /*bootLines*/
          d[2]
        );
        let m;
        for (m = 0; m < f.length; m += 1) {
          const b = wu(d, f, m);
          u[m] ? u[m].p(b, p) : (u[m] = Eu(b), u[m].c(), u[m].m(n, o));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = f.length;
      }
    },
    i: ge,
    o: ge,
    d(d) {
      d && P(e), Fe(u, d);
    }
  };
}
function b2(l) {
  let e, t, i, n, o;
  return {
    c() {
      e = r("button"), t = r("i"), s(t, "class", "fas fa-users-cog"), s(e, "class", i = "cfg-btn " + /*viewMode*/
      (l[1] === "config" ? "active" : "") + " svelte-od90cm"), s(e, "title", "Gerenciar Permiss√µes");
    },
    m(c, f) {
      q(c, e, f), a(e, t), n || (o = R(
        e,
        "click",
        /*click_handler*/
        l[7]
      ), n = !0);
    },
    p(c, f) {
      f & /*viewMode*/
      2 && i !== (i = "cfg-btn " + /*viewMode*/
      (c[1] === "config" ? "active" : "") + " svelte-od90cm") && s(e, "class", i);
    },
    d(c) {
      c && P(e), n = !1, o();
    }
  };
}
function v2(l) {
  let e, t, i, n = ce(
    /*INSTALLED_APPS*/
    l[4]
  ), o = [];
  for (let c = 0; c < n.length; c += 1)
    o[c] = yu(_u(l, n, c));
  return {
    c() {
      e = r("div");
      for (let c = 0; c < o.length; c += 1)
        o[c].c();
      t = g(), i = r("button"), i.innerHTML = '<div class="icon-box svelte-od90cm"><i class="fas fa-shopping-bag"></i></div> <div class="app-meta svelte-od90cm"><span class="label svelte-od90cm">LOJA</span> <span class="desc svelte-od90cm">OFFLINE</span></div>', s(i, "class", "app-icon disabled svelte-od90cm"), s(e, "class", "app-grid svelte-od90cm");
    },
    m(c, f) {
      q(c, e, f);
      for (let u = 0; u < o.length; u += 1)
        o[u] && o[u].m(e, null);
      a(e, t), a(e, i);
    },
    p(c, f) {
      if (f & /*INSTALLED_APPS, launchApp*/
      16) {
        n = ce(
          /*INSTALLED_APPS*/
          c[4]
        );
        let u;
        for (u = 0; u < n.length; u += 1) {
          const d = _u(c, n, u);
          o[u] ? o[u].p(d, f) : (o[u] = yu(d), o[u].c(), o[u].m(e, t));
        }
        for (; u < o.length; u += 1)
          o[u].d(1);
        o.length = n.length;
      }
    },
    i: ge,
    o: ge,
    d(c) {
      c && P(e), Fe(o, c);
    }
  };
}
function h2(l) {
  let e, t, i, n, o, c, f = ce(
    /*usersList*/
    l[0]
  ), u = [];
  for (let d = 0; d < f.length; d += 1)
    u[d] = Au(ku(l, f, d));
  return {
    c() {
      e = r("div"), t = r("h3"), t.innerHTML = '<i class="fas fa-key"></i> GERENCIAMENTO DE ACESSO', i = g(), n = r("div");
      for (let d = 0; d < u.length; d += 1)
        u[d].c();
      s(t, "class", "svelte-od90cm"), s(n, "class", "user-list svelte-od90cm"), s(e, "class", "config-panel svelte-od90cm");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n);
      for (let m = 0; m < u.length; m += 1)
        u[m] && u[m].m(n, null);
      c = !0;
    },
    p(d, p) {
      if (p & /*usersList, toggleAuth*/
      65) {
        f = ce(
          /*usersList*/
          d[0]
        );
        let m;
        for (m = 0; m < f.length; m += 1) {
          const b = ku(d, f, m);
          u[m] ? u[m].p(b, p) : (u[m] = Au(b), u[m].c(), u[m].m(n, null));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = f.length;
      }
    },
    i(d) {
      c || (d && Ne(() => {
        c && (o || (o = We(e, yt, {}, !0)), o.run(1));
      }), c = !0);
    },
    o(d) {
      d && (o || (o = We(e, yt, {}, !1)), o.run(0)), c = !1;
    },
    d(d) {
      d && P(e), Fe(u, d), d && o && o.end();
    }
  };
}
function yu(l) {
  let e, t, i, n, o, c, f, u, d, p;
  function m() {
    return (
      /*click_handler_2*/
      l[9](
        /*app*/
        l[20]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("div"), i = r("i"), n = g(), o = r("div"), c = r("span"), c.textContent = `${/*app*/
      l[20].label}`, f = g(), u = r("span"), u.textContent = `${/*app*/
      l[20].desc}`, s(i, "class", "fas " + /*app*/
      l[20].icon + " svelte-od90cm"), s(t, "class", "icon-box svelte-od90cm"), s(c, "class", "label svelte-od90cm"), s(u, "class", "desc svelte-od90cm"), s(o, "class", "app-meta svelte-od90cm"), s(e, "class", "app-icon svelte-od90cm"), ae(
        e,
        "--app-color",
        /*app*/
        l[20].color
      );
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(t, i), a(e, n), a(e, o), a(o, c), a(o, f), a(o, u), d || (p = R(e, "click", m), d = !0);
    },
    p(b, v) {
      l = b;
    },
    d(b) {
      b && P(e), d = !1, p();
    }
  };
}
function Au(l) {
  let e, t, i, n, o, c = (
    /*user*/
    l[17].name + ""
  ), f, u, d, p = (
    /*user*/
    l[17].isAuth ? "AUTORIZADO" : "RESTRITO"
  ), m, b, v, h, _, w, k, A;
  function y() {
    return (
      /*click_handler_1*/
      l[8](
        /*user*/
        l[17]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = r("span"), f = B(c), u = g(), d = r("span"), m = B(p), b = g(), v = r("div"), h = r("i"), w = g(), s(t, "class", "u-avatar svelte-od90cm"), ae(
        t,
        "background-color",
        /*user*/
        l[17].color
      ), s(o, "class", "u-name svelte-od90cm"), s(d, "class", "u-status svelte-od90cm"), s(n, "class", "u-info svelte-od90cm"), s(h, "class", _ = "fas " + /*user*/
      (l[17].isAuth ? "fa-toggle-on" : "fa-toggle-off")), s(v, "class", "u-toggle svelte-od90cm"), s(e, "class", "user-row svelte-od90cm"), he(
        e,
        "authorized",
        /*user*/
        l[17].isAuth
      );
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(e, i), a(e, n), a(n, o), a(o, f), a(n, u), a(n, d), a(d, m), a(e, b), a(e, v), a(v, h), a(e, w), k || (A = R(e, "click", y), k = !0);
    },
    p(E, S) {
      l = E, S & /*usersList*/
      1 && ae(
        t,
        "background-color",
        /*user*/
        l[17].color
      ), S & /*usersList*/
      1 && c !== (c = /*user*/
      l[17].name + "") && te(f, c), S & /*usersList*/
      1 && p !== (p = /*user*/
      l[17].isAuth ? "AUTORIZADO" : "RESTRITO") && te(m, p), S & /*usersList*/
      1 && _ !== (_ = "fas " + /*user*/
      (l[17].isAuth ? "fa-toggle-on" : "fa-toggle-off")) && s(h, "class", _), S & /*usersList*/
      1 && he(
        e,
        "authorized",
        /*user*/
        l[17].isAuth
      );
    },
    d(E) {
      E && P(e), k = !1, A();
    }
  };
}
function Eu(l) {
  let e, t, i = (
    /*line*/
    l[14] + ""
  ), n;
  return {
    c() {
      e = r("p"), t = B("> "), n = B(i), s(e, "class", "log-line svelte-od90cm");
    },
    m(o, c) {
      q(o, e, c), a(e, t), a(e, n);
    },
    p(o, c) {
      c & /*bootLines*/
      4 && i !== (i = /*line*/
      o[14] + "") && te(n, i);
    },
    d(o) {
      o && P(e);
    }
  };
}
function g2(l) {
  let e, t, i, n, o;
  function c(d, p) {
    return (
      /*viewMode*/
      d[1] === "boot" ? m2 : (
        /*viewMode*/
        d[1] === "locked" ? p2 : u2
      )
    );
  }
  let f = c(l), u = f(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = g(), u.c(), s(t, "class", "scanlines svelte-od90cm"), s(n, "class", "noise"), s(e, "class", "shell svelte-od90cm");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), a(e, o), u.m(e, null);
    },
    p(d, [p]) {
      f === (f = c(d)) && u ? u.p(d, p) : (u.d(1), u = f(d), u && (u.c(), ne(u, 1), u.m(e, null)));
    },
    i(d) {
      ne(u);
    },
    o: ge,
    d(d) {
      d && P(e), u.d();
    }
  };
}
function _2(l) {
  if (!l.component) return ui.notifications.warn("M√≥dulo n√£o instalado.");
  class e extends Application {
    static get defaultOptions() {
      return foundry.utils.mergeObject(super.defaultOptions, {
        id: `nexus-app-${l.id}-${foundry.utils.randomID()}`,
        title: `NEXUS // ${l.label}`,
        template: "modules/multiversus-rpg/templates/sheet.html",
        // Use um template vazio v√°lido
        width: l.width,
        height: l.height,
        resizable: !0,
        classes: ["cyber-dialog"]
      });
    }
    activateListeners(i) {
      super.activateListeners(i), i.empty(), new l.component({ target: i[0] }).$on("close", () => this.close());
    }
  }
  new e().render(!0);
}
function k2(l, e, t) {
  const i = [
    {
      id: "creator",
      label: "NOVO AGENTE",
      desc: "REGISTRO DE IDENTIDADE",
      icon: "fa-user-plus",
      component: a2,
      width: 420,
      height: 500,
      color: "#00ff41"
    },
    {
      id: "tactical",
      label: "SUPORTE T√ÅTICO",
      desc: "OPERA√á√ïES DE COMBATE",
      icon: "fa-crosshairs",
      component: n2,
      width: 320,
      height: 450,
      color: "#ffcc00"
    },
    {
      id: "power_forge",
      label: "FORJA DE PODER",
      desc: "CRIAR HABILIDADE (ITEM)",
      icon: "fa-bolt",
      component: d2,
      width: 420,
      height: 500,
      color: "#ffcc00"
    }
  ], n = game.user.isGM;
  let o = [], c = !1, f = [], u = "boot", d = [], p = "";
  qt(() => {
    m(), Hooks.on("auxiliarUpdate", m), setInterval(
      () => {
        t(3, p = (/* @__PURE__ */ new Date()).toLocaleTimeString("pt-BR", { hour: "2-digit", minute: "2-digit" }));
      },
      1e3
    ), c ? b() : t(1, u = "locked");
  });
  function m() {
    o = Fl.getAuthorizedUsers(), c = Fl.isAuxiliar(), t(0, f = game.users.filter((k) => !k.isGM).map((k) => ({
      id: k.id,
      name: k.name,
      color: k.color,
      isAuth: o.includes(k.id)
    }))), !c && u !== "boot" && t(1, u = "locked");
  }
  async function b() {
    t(1, u = "boot");
    const k = [
      "NEXUS_OS KERNEL v4.0.2...",
      "VERIFICANDO ASSINATURA BIOM√âTRICA...",
      `USU√ÅRIO IDENTIFICADO: [${game.user.name.toUpperCase()}]`,
      "N√çVEL DE PERMISS√ÉO: AUXILIAR",
      "CARREGANDO M√ìDULOS..."
    ];
    for (const A of k)
      t(2, d = [...d, A]), await new Promise((y) => setTimeout(y, 400));
    await new Promise((A) => setTimeout(A, 600)), t(1, u = "desktop");
  }
  async function v(k) {
    await Fl.toggleUserAccess(k), m();
  }
  return [
    f,
    u,
    d,
    p,
    i,
    n,
    v,
    () => t(1, u = u === "config" ? "desktop" : "config"),
    (k) => v(k.id),
    (k) => _2(k)
  ];
}
class w2 extends mt {
  constructor(e) {
    super(), pt(this, e, k2, g2, dt, {});
  }
}
const { window: Ou } = Fi;
function Su(l) {
  let e, t, i, n, o, c, f, u, d, p;
  return {
    c() {
      e = r("button"), t = r("div"), t.innerHTML = '<span class="text svelte-2l75d1">MV</span> <div class="scan svelte-2l75d1"></div>', i = g(), n = r("div"), o = g(), c = r("div"), s(t, "class", "screen svelte-2l75d1"), s(n, "class", "stand svelte-2l75d1"), s(c, "class", "base svelte-2l75d1"), s(e, "class", "pc-trigger svelte-2l75d1"), ae(
        e,
        "top",
        /*pos*/
        l[1].y + "px"
      ), ae(
        e,
        "left",
        /*pos*/
        l[1].x + "px"
      ), s(e, "title", "Painel Auxiliar (Arraste para mover)");
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), u = !0, d || (p = R(
        e,
        "mousedown",
        /*onMouseDown*/
        l[2]
      ), d = !0);
    },
    p(m, b) {
      (!u || b & /*pos*/
      2) && ae(
        e,
        "top",
        /*pos*/
        m[1].y + "px"
      ), (!u || b & /*pos*/
      2) && ae(
        e,
        "left",
        /*pos*/
        m[1].x + "px"
      );
    },
    i(m) {
      u || (m && Ne(() => {
        u && (f || (f = We(e, Qe, {}, !0)), f.run(1));
      }), u = !0);
    },
    o(m) {
      m && (f || (f = We(e, Qe, {}, !1)), f.run(0)), u = !1;
    },
    d(m) {
      m && P(e), m && f && f.end(), d = !1, p();
    }
  };
}
function y2(l) {
  let e, t, i, n = (
    /*canAccess*/
    l[0] && Su(l)
  );
  return {
    c() {
      n && n.c(), e = Pt();
    },
    m(o, c) {
      n && n.m(o, c), q(o, e, c), t || (i = [
        R(
          Ou,
          "mousemove",
          /*onWindowMove*/
          l[3]
        ),
        R(
          Ou,
          "mouseup",
          /*onWindowUp*/
          l[4]
        )
      ], t = !0);
    },
    p(o, [c]) {
      /*canAccess*/
      o[0] ? n ? (n.p(o, c), c & /*canAccess*/
      1 && ne(n, 1)) : (n = Su(o), n.c(), ne(n, 1), n.m(e.parentNode, e)) : n && ($e(), Ae(n, 1, 1, () => {
        n = null;
      }), et());
    },
    i(o) {
      ne(n);
    },
    o(o) {
      Ae(n);
    },
    d(o) {
      o && P(e), n && n.d(o), t = !1, Te(i);
    }
  };
}
function A2(l, e, t) {
  let i = !1, n = null, o = { x: 120, y: window.innerHeight - 200 }, c = !1, f = { x: 0, y: 0 };
  qt(() => {
    u(), Hooks.on("auxiliarUpdate", u);
    const v = localStorage.getItem("multiversus-aux-pos");
    if (v)
      try {
        t(1, o = JSON.parse(v));
      } catch {
      }
  });
  function u() {
    t(0, i = Fl.isAuxiliar(game.user));
  }
  function d(v) {
    v.button === 0 && (c = !0, f = { x: v.clientX, y: v.clientY });
  }
  function p(v) {
    c && t(1, o = {
      x: o.x + v.movementX,
      y: o.y + v.movementY
    });
  }
  function m(v) {
    if (!c) return;
    c = !1, Math.hypot(v.clientX - f.x, v.clientY - f.y) < 5 ? b() : localStorage.setItem("multiversus-aux-pos", JSON.stringify(o));
  }
  function b() {
    if (n) {
      n.close(), n = null;
      return;
    }
    class v extends Application {
      static get defaultOptions() {
        return foundry.utils.mergeObject(super.defaultOptions, {
          id: "auxiliar-hud-window",
          title: "AUXILIAR_OS // SYSTEM",
          // CORRE√á√ÉO: Apontando para um arquivo que EXISTE (sheet.html)
          template: "modules/multiversus-rpg/templates/sheet.html",
          width: 500,
          height: 600,
          resizable: !0,
          classes: ["aux-window-shell"]
        });
      }
      activateListeners(_) {
        super.activateListeners(_), _.empty(), new w2({ target: _[0] });
      }
      close(_) {
        return n = null, super.close(_);
      }
    }
    n = new v(), n.render(!0);
  }
  return [i, o, d, p, m];
}
class E2 extends mt {
  constructor(e) {
    super(), pt(this, e, A2, y2, dt, {});
  }
}
function O2(l) {
  let e, t, i, n, o, c, f, u, d, p;
  return {
    c() {
      e = r("div"), t = r("div"), t.innerHTML = '<i class="fas fa-network-wired"></i> <div class="glitch-line svelte-13sikz8"></div>', i = g(), n = r("div"), o = g(), c = r("span"), c.textContent = "NEXUS", s(t, "class", "inner-hex svelte-13sikz8"), s(n, "class", "pulse-effect svelte-13sikz8"), s(c, "class", "label svelte-13sikz8"), s(e, "class", "social-floating-btn svelte-13sikz8"), ae(
        e,
        "left",
        /*x*/
        l[0] + "px"
      ), ae(
        e,
        "top",
        /*y*/
        l[1] + "px"
      );
    },
    m(m, b) {
      q(m, e, b), a(e, t), a(e, i), a(e, n), a(e, o), a(e, c), u = !0, d || (p = [
        R(
          e,
          "mousedown",
          /*handleMouseDown*/
          l[3]
        ),
        R(
          e,
          "click",
          /*toggleHub*/
          l[2]
        )
      ], d = !0);
    },
    p(m, [b]) {
      (!u || b & /*x*/
      1) && ae(
        e,
        "left",
        /*x*/
        m[0] + "px"
      ), (!u || b & /*y*/
      2) && ae(
        e,
        "top",
        /*y*/
        m[1] + "px"
      );
    },
    i(m) {
      u || (m && Ne(() => {
        u && (f || (f = We(e, Qe, {}, !0)), f.run(1));
      }), u = !0);
    },
    o(m) {
      m && (f || (f = We(e, Qe, {}, !1)), f.run(0)), u = !1;
    },
    d(m) {
      m && P(e), m && f && f.end(), d = !1, Te(p);
    }
  };
}
function S2(l, e, t) {
  let i = window.innerWidth - 80, n = window.innerHeight - 150, o = !1;
  const c = () => {
    o || window.NexusHub && (window.NexusHub.rendered ? window.NexusHub.close() : window.NexusHub.render(!0, { focus: !0 }));
  };
  function f(u) {
    o = !1;
    const d = u.clientX - i, p = u.clientY - n;
    function m(v) {
      o = !0, t(0, i = v.clientX - d), t(1, n = v.clientY - p);
    }
    function b() {
      window.removeEventListener("mousemove", m), window.removeEventListener("mouseup", b);
    }
    window.addEventListener("mousemove", m), window.addEventListener("mouseup", b);
  }
  return [i, n, c, f];
}
class C2 extends mt {
  constructor(e) {
    super(), pt(this, e, S2, O2, dt, {});
  }
}
const oi = {
  "neon-link": {
    label: "Neon Link (Padr√£o)",
    vars: {
      "--chat-bg": "#050505",
      "--chat-text": "#e0e0e0",
      "--chat-accent": "#00ff41",
      /* Verde Matrix */
      "--chat-border": "#1a1a1a",
      "--input-bg": "#0a0a0a",
      /* Mensagens */
      "--msg-mine-bg": "rgba(0, 255, 65, 0.1)",
      "--msg-mine-border": "#00ff41",
      "--msg-theirs-bg": "#111",
      "--msg-theirs-border": "#333",
      "--msg-roll-bg": "rgba(0,0,0,0.5)",
      "--font": "'Share Tech Mono', monospace",
      "--radius": "4px"
    }
  },
  "cyber-blue": {
    label: "Netrunner Blue",
    vars: {
      "--chat-bg": "#0a0f14",
      "--chat-text": "#d0e6ff",
      "--chat-accent": "#00d9ff",
      /* Azul Ciano */
      "--chat-border": "#1c2530",
      "--input-bg": "#11161d",
      "--msg-mine-bg": "rgba(0, 217, 255, 0.15)",
      "--msg-mine-border": "transparent",
      "--msg-theirs-bg": "#161b22",
      "--msg-theirs-border": "transparent",
      "--msg-roll-bg": "rgba(0,0,0,0.3)",
      "--font": "'Exo 2', sans-serif",
      "--radius": "12px"
    }
  },
  "arasaka-corp": {
    label: "Corporativo (Red)",
    vars: {
      "--chat-bg": "#000000",
      "--chat-text": "#ffffff",
      "--chat-accent": "#ff003c",
      /* Vermelho */
      "--chat-border": "#333",
      "--input-bg": "#1a1a1a",
      "--msg-mine-bg": "#1a0505",
      "--msg-mine-border": "#ff003c",
      "--msg-theirs-bg": "#111",
      "--msg-theirs-border": "#444",
      "--msg-roll-bg": "#000",
      "--font": "'Rajdhani', sans-serif",
      "--radius": "0px"
    }
  },
  "holo-glass": {
    label: "Holograma Transparente",
    vars: {
      "--chat-bg": "rgba(30, 41, 59, 0.7)",
      /* Transl√∫cido */
      "--chat-text": "#f8fafc",
      "--chat-accent": "#f472b6",
      /* Rosa/Roxo */
      "--chat-border": "rgba(255,255,255,0.1)",
      "--input-bg": "rgba(0,0,0,0.3)",
      "--msg-mine-bg": "rgba(244, 114, 182, 0.2)",
      "--msg-mine-border": "rgba(244, 114, 182, 0.5)",
      "--msg-theirs-bg": "rgba(255,255,255,0.05)",
      "--msg-theirs-border": "transparent",
      "--msg-roll-bg": "rgba(0,0,0,0.2)",
      "--font": "'Inter', sans-serif",
      "--radius": "8px"
    }
  }
}, Al = "multiversus-rpg";
class ii {
  static init() {
    console.log("MULTIVERSUS | Database Carregada."), game.settings.register(Al, "chatTheme", {
      scope: "client",
      config: !1,
      type: String,
      default: "neon-link"
    }), game.settings.register(Al, "social_hub_groups", {
      scope: "world",
      config: !1,
      type: Array,
      default: [{ id: "nexus-prime", name: "NEXUS_PRIME", icon: "fa-server", isPrivate: !1 }]
    }), game.settings.register(Al, "social_hub_messages", {
      scope: "world",
      config: !1,
      type: Array,
      default: []
    });
  }
  // --- GRUPOS ---
  static async createGroup(e, t = null) {
    if (!e) return;
    const i = game.settings.get(Al, "social_hub_groups") || [];
    i.push({
      id: foundry.utils.randomID(),
      name: e.toUpperCase(),
      icon: t ? "fa-lock" : "fa-hashtag",
      isPrivate: !!t,
      password: t
    }), await game.settings.set(Al, "social_hub_groups", i), this.notifyUpdate();
  }
  static async deleteGroup(e) {
    const i = (game.settings.get(Al, "social_hub_groups") || []).filter((n) => n.id !== e);
    await game.settings.set(Al, "social_hub_groups", i), this.notifyUpdate();
  }
  // --- MENSAGENS ---
  static async sendMessage(e) {
    const t = game.settings.get(Al, "social_hub_messages") || [];
    t.push({
      id: foundry.utils.randomID(),
      timestamp: Date.now(),
      ...e
    }), t.length > 200 && t.shift(), await game.settings.set(Al, "social_hub_messages", t), this.notifyUpdate();
  }
  static async clearChat() {
    await game.settings.set(Al, "social_hub_messages", []), this.notifyUpdate();
  }
  // --- CONTATOS ---
  static async addContact(e, t) {
    if (!e) return;
    const i = e.getFlag(Al, "contacts") || [];
    i.find((n) => n.commID === t) || (i.push({
      id: foundry.utils.randomID(),
      name: "Conex√£o " + t,
      commID: t,
      img: "icons/svg/mystery-man.svg"
    }), await e.setFlag(Al, "contacts", i), Hooks.callAll("socialHubUpdate"));
  }
  static notifyUpdate() {
    game.socket.emit(`module.${Al}`, { type: "SOCIAL_HUB_REFRESH" }), Hooks.callAll("socialHubUpdate");
  }
}
const H0 = jl([]), z0 = jl([]), ls = jl("chats"), as = jl("nexus-prime"), is = jl("NEXUS_PRIME");
function Cu() {
  const l = "multiversus-rpg";
  game.settings && (H0.set(game.settings.get(l, "social_hub_messages") || []), z0.set(game.settings.get(l, "social_hub_groups") || []));
}
function Iu(l, e, t) {
  const i = l.slice();
  return i[76] = e[t][0], i[77] = e[t][1], i;
}
function Tu(l, e, t) {
  const i = l.slice();
  return i[68] = e[t], i;
}
function Du(l, e, t) {
  const i = l.slice();
  return i[65] = e[t], i;
}
function Ru(l, e, t) {
  const i = l.slice();
  return i[68] = e[t], i;
}
function Mu(l, e, t) {
  const i = l.slice();
  return i[71] = e[t], i;
}
function Nu(l) {
  let e;
  return {
    c() {
      e = r("div"), s(e, "class", "custom-bg-layer svelte-1ind8n8");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function Lu(l) {
  let e, t, i;
  return t = new G0({
    props: {
      character: (
        /*mainActor*/
        l[10]
      ),
      pool: { d: 4, hd: 0, wd: 0 },
      externalHandler: (
        /*handleDiceLogicResult*/
        l[25]
      )
    }
  }), t.$on(
    "close",
    /*close_handler*/
    l[34]
  ), {
    c() {
      e = r("div"), kt(t.$$.fragment), ae(e, "position", "absolute"), ae(e, "inset", "0"), ae(e, "z-index", "100"), ae(e, "pointer-events", "auto");
    },
    m(n, o) {
      q(n, e, o), ht(t, e, null), i = !0;
    },
    p(n, o) {
      const c = {};
      o[0] & /*mainActor*/
      1024 && (c.character = /*mainActor*/
      n[10]), t.$set(c);
    },
    i(n) {
      i || (ne(t.$$.fragment, n), i = !0);
    },
    o(n) {
      Ae(t.$$.fragment, n), i = !1;
    },
    d(n) {
      n && P(e), gt(t);
    }
  };
}
function Pu(l) {
  let e, t, i;
  function n(f, u) {
    if (
      /*showWarning*/
      f[5]
    ) return M2;
    if (
      /*activeModal*/
      f[6] === "create_group"
    ) return R2;
    if (
      /*activeModal*/
      f[6] === "password"
    ) return D2;
    if (
      /*activeModal*/
      f[6] === "confirm_delete"
    ) return T2;
    if (
      /*activeModal*/
      f[6] === "delete_password"
    ) return I2;
  }
  let o = n(l), c = o && o(l);
  return {
    c() {
      e = r("div"), c && c.c(), s(e, "class", "modal-layer svelte-1ind8n8");
    },
    m(f, u) {
      q(f, e, u), c && c.m(e, null), i = !0;
    },
    p(f, u) {
      o === (o = n(f)) && c ? c.p(f, u) : (c && c.d(1), c = o && o(f), c && (c.c(), ne(c, 1), c.m(e, null)));
    },
    i(f) {
      i || (ne(c), f && Ne(() => {
        i && (t || (t = We(e, Qe, { duration: 150 }, !0)), t.run(1));
      }), i = !0);
    },
    o(f) {
      f && (t || (t = We(e, Qe, { duration: 150 }, !1)), t.run(0)), i = !1;
    },
    d(f) {
      f && P(e), c && c.d(), f && t && t.end();
    }
  };
}
function I2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "SENHA PARA EXCLUIR", i = g(), n = r("div"), o = r("input"), c = g(), f = r("div"), u = r("button"), u.textContent = "CANCELAR", d = r("button"), d.textContent = "DELETAR", s(t, "class", "svelte-1ind8n8"), s(o, "type", "password"), s(o, "class", "hacker-input-large svelte-1ind8n8"), o.autofocus = !0, s(n, "class", "card-content svelte-1ind8n8"), s(u, "class", "btn-ghost svelte-1ind8n8"), s(d, "class", "btn-main svelte-1ind8n8"), ae(d, "background", "red"), s(f, "class", "card-footer svelte-1ind8n8"), s(e, "class", "terminal-card small svelte-1ind8n8");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*modalData*/
        l[7].input
      ), a(e, c), a(e, f), a(f, u), a(f, d), o.focus(), m || (b = [
        R(
          o,
          "input",
          /*input_input_handler_1*/
          l[40]
        ),
        R(
          u,
          "click",
          /*closeModal*/
          l[18]
        ),
        R(
          d,
          "click",
          /*confirmDelete*/
          l[23]
        )
      ], m = !0);
    },
    p(v, h) {
      h[0] & /*modalData*/
      128 && o.value !== /*modalData*/
      v[7].input && x(
        o,
        /*modalData*/
        v[7].input
      );
    },
    i(v) {
      v && (p || Ne(() => {
        p = st(e, Mt, {}), p.start();
      }));
    },
    o: ge,
    d(v) {
      v && P(e), m = !1, Te(b);
    }
  };
}
function T2(l) {
  let e, t, i, n = (
    /*modalData*/
    l[7].targetGroup.name + ""
  ), o, c, f, u, d, p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("header"), i = B("EXCLUIR "), o = B(n), c = B("?"), f = g(), u = r("div"), u.textContent = "Esta a√ß√£o √© irrevers√≠vel.", d = g(), p = r("div"), m = r("button"), m.textContent = "N√ÉO", b = r("button"), b.textContent = "SIM, EXCLUIR", s(t, "class", "svelte-1ind8n8"), s(u, "class", "card-content svelte-1ind8n8"), ae(u, "color", "red"), ae(u, "text-align", "center"), s(m, "class", "btn-ghost svelte-1ind8n8"), s(b, "class", "btn-main svelte-1ind8n8"), ae(b, "background", "red"), s(p, "class", "card-footer svelte-1ind8n8"), s(e, "class", "terminal-card small svelte-1ind8n8");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, o), a(t, c), a(e, f), a(e, u), a(e, d), a(e, p), a(p, m), a(p, b), h || (_ = [
        R(
          m,
          "click",
          /*closeModal*/
          l[18]
        ),
        R(
          b,
          "click",
          /*confirmDelete*/
          l[23]
        )
      ], h = !0);
    },
    p(w, k) {
      k[0] & /*modalData*/
      128 && n !== (n = /*modalData*/
      w[7].targetGroup.name + "") && te(o, n);
    },
    i(w) {
      w && (v || Ne(() => {
        v = st(e, Mt, {}), v.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), h = !1, Te(_);
    }
  };
}
function D2(l) {
  let e, t, i, n = (
    /*modalData*/
    l[7].targetGroup.name + ""
  ), o, c, f, u, d, p, m, b, v, h, _;
  return {
    c() {
      e = r("div"), t = r("header"), i = B("SENHA: "), o = B(n), c = g(), f = r("div"), u = r("input"), d = g(), p = r("div"), m = r("button"), m.textContent = "VOLTAR", b = r("button"), b.textContent = "ENTRAR", s(t, "class", "svelte-1ind8n8"), s(u, "type", "password"), s(u, "class", "hacker-input-large svelte-1ind8n8"), u.autofocus = !0, s(f, "class", "card-content svelte-1ind8n8"), s(m, "class", "btn-ghost svelte-1ind8n8"), s(b, "class", "btn-main svelte-1ind8n8"), s(p, "class", "card-footer svelte-1ind8n8"), s(e, "class", "terminal-card small svelte-1ind8n8");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, o), a(e, c), a(e, f), a(f, u), x(
        u,
        /*modalData*/
        l[7].input
      ), a(e, d), a(e, p), a(p, m), a(p, b), u.focus(), h || (_ = [
        R(
          u,
          "input",
          /*input_input_handler*/
          l[38]
        ),
        R(
          u,
          "keydown",
          /*keydown_handler*/
          l[39]
        ),
        R(
          m,
          "click",
          /*closeModal*/
          l[18]
        ),
        R(
          b,
          "click",
          /*confirmPasswordEnter*/
          l[29]
        )
      ], h = !0);
    },
    p(w, k) {
      k[0] & /*modalData*/
      128 && n !== (n = /*modalData*/
      w[7].targetGroup.name + "") && te(o, n), k[0] & /*modalData*/
      128 && u.value !== /*modalData*/
      w[7].input && x(
        u,
        /*modalData*/
        w[7].input
      );
    },
    i(w) {
      w && (v || Ne(() => {
        v = st(e, Mt, {}), v.start();
      }));
    },
    o: ge,
    d(w) {
      w && P(e), h = !1, Te(_);
    }
  };
}
function R2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "NOVO CANAL", i = g(), n = r("div"), o = r("input"), c = g(), f = r("input"), u = g(), d = r("div"), p = r("button"), p.textContent = "X", m = r("button"), m.textContent = "CRIAR", s(t, "class", "svelte-1ind8n8"), s(o, "type", "text"), s(o, "class", "hacker-input svelte-1ind8n8"), s(o, "placeholder", "NOME"), s(f, "type", "password"), s(f, "class", "hacker-input svelte-1ind8n8"), s(f, "placeholder", "SENHA (OPCIONAL)"), ae(f, "margin-top", "10px"), s(n, "class", "card-content svelte-1ind8n8"), s(p, "class", "btn-ghost svelte-1ind8n8"), s(m, "class", "btn-main svelte-1ind8n8"), s(d, "class", "card-footer svelte-1ind8n8"), s(e, "class", "terminal-card svelte-1ind8n8");
    },
    m(_, w) {
      q(_, e, w), a(e, t), a(e, i), a(e, n), a(n, o), x(
        o,
        /*modalData*/
        l[7].input
      ), a(n, c), a(n, f), x(
        f,
        /*modalData*/
        l[7].input2
      ), a(e, u), a(e, d), a(d, p), a(d, m), v || (h = [
        R(
          o,
          "input",
          /*input0_input_handler*/
          l[36]
        ),
        R(
          f,
          "input",
          /*input1_input_handler*/
          l[37]
        ),
        R(
          p,
          "click",
          /*closeModal*/
          l[18]
        ),
        R(
          m,
          "click",
          /*createGroupAction*/
          l[21]
        )
      ], v = !0);
    },
    p(_, w) {
      w[0] & /*modalData*/
      128 && o.value !== /*modalData*/
      _[7].input && x(
        o,
        /*modalData*/
        _[7].input
      ), w[0] & /*modalData*/
      128 && f.value !== /*modalData*/
      _[7].input2 && x(
        f,
        /*modalData*/
        _[7].input2
      );
    },
    i(_) {
      _ && (b || Ne(() => {
        b = st(e, Mt, {}), b.start();
      }));
    },
    o: ge,
    d(_) {
      _ && P(e), v = !1, Te(h);
    }
  };
}
function M2(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("header"), t.textContent = "‚ö†Ô∏è SISTEMA VETOR", i = g(), n = r("div"), o = r("p"), o.textContent = "Conex√£o segura estabelecida.", c = r("button"), c.textContent = "ENTRAR", s(t, "class", "svelte-1ind8n8"), s(c, "class", "btn-full svelte-1ind8n8"), s(n, "class", "card-content svelte-1ind8n8"), s(e, "class", "terminal-card warning svelte-1ind8n8");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), u || (d = R(
        c,
        "click",
        /*click_handler*/
        l[35]
      ), u = !0);
    },
    p: ge,
    i(p) {
      p && (f || Ne(() => {
        f = st(e, Mt, {}), f.start();
      }));
    },
    o: ge,
    d(p) {
      p && P(e), u = !1, d();
    }
  };
}
function N2(l) {
  let e, t, i, n, o, c, f = ce(Object.entries(oi)), u = [];
  for (let d = 0; d < f.length; d += 1)
    u[d] = qu(Iu(l, f, d));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("label"), i.textContent = "TEMAS", n = g(), o = r("div");
      for (let d = 0; d < u.length; d += 1)
        u[d].c();
      s(o, "class", "theme-list svelte-1ind8n8"), s(t, "class", "settings-grid"), s(e, "class", "app-pane svelte-1ind8n8");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let m = 0; m < u.length; m += 1)
        u[m] && u[m].m(o, null);
    },
    p(d, p) {
      if (p[0] & /*savedTheme, setChatTheme*/
      134217729) {
        f = ce(Object.entries(oi));
        let m;
        for (m = 0; m < f.length; m += 1) {
          const b = Iu(d, f, m);
          u[m] ? u[m].p(b, p) : (u[m] = qu(b), u[m].c(), u[m].m(o, null));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = f.length;
      }
    },
    i(d) {
      d && (c || Ne(() => {
        c = st(e, Qe, {}), c.start();
      }));
    },
    o: ge,
    d(d) {
      d && P(e), Fe(u, d);
    }
  };
}
function L2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I = (
    /*identity*/
    l[9].active ? "ONLINE" : "OFFLINE"
  ), D, M, G, L, U, z, F, W = (
    /*identity*/
    l[9].avatar && Uu(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "IDENTIDADE", n = g(), o = r("div"), c = r("label"), c.textContent = "Codinome", f = r("input"), u = g(), d = r("div"), p = r("label"), p.textContent = "Avatar URL", m = r("input"), b = g(), W && W.c(), v = g(), h = r("div"), _ = r("label"), _.textContent = "Fundo Janela", w = r("input"), k = g(), A = r("div"), y = r("label"), y.textContent = "Cor Texto", E = r("div"), S = r("input"), O = g(), C = r("div"), T = r("span"), T.textContent = "USAR M√ÅSCARA", N = r("button"), D = B(I), G = g(), L = r("button"), L.textContent = "SALVAR", s(f, "type", "text"), s(f, "class", "hacker-input svelte-1ind8n8"), s(o, "class", "form-group svelte-1ind8n8"), s(m, "type", "text"), s(m, "class", "hacker-input svelte-1ind8n8"), s(m, "placeholder", "http://..."), s(d, "class", "form-group svelte-1ind8n8"), s(w, "type", "text"), s(w, "class", "hacker-input svelte-1ind8n8"), s(w, "placeholder", "URL Imagem/Gif"), s(h, "class", "form-group svelte-1ind8n8"), s(S, "type", "color"), s(E, "class", "color-picker-row"), s(A, "class", "form-group svelte-1ind8n8"), s(N, "class", M = "toggle-btn " + /*identity*/
      (l[9].active ? "on" : "off") + " svelte-1ind8n8"), s(C, "class", "toggle-row svelte-1ind8n8"), s(L, "class", "btn-full svelte-1ind8n8"), ae(L, "margin-top", "10px"), s(t, "class", "spoofer-box svelte-1ind8n8"), s(e, "class", "app-pane centered svelte-1ind8n8");
    },
    m(H, V) {
      q(H, e, V), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), x(
        f,
        /*identity*/
        l[9].nick
      ), a(t, u), a(t, d), a(d, p), a(d, m), x(
        m,
        /*identity*/
        l[9].avatar
      ), a(d, b), W && W.m(d, null), a(t, v), a(t, h), a(h, _), a(h, w), x(
        w,
        /*identity*/
        l[9].background
      ), a(t, k), a(t, A), a(A, y), a(A, E), a(E, S), x(
        S,
        /*identity*/
        l[9].color
      ), a(t, O), a(t, C), a(C, T), a(C, N), a(N, D), a(t, G), a(t, L), z || (F = [
        R(
          f,
          "input",
          /*input0_input_handler_1*/
          l[59]
        ),
        R(
          m,
          "input",
          /*input1_input_handler_1*/
          l[60]
        ),
        R(
          w,
          "input",
          /*input2_input_handler*/
          l[61]
        ),
        R(
          S,
          "input",
          /*input3_input_handler*/
          l[62]
        ),
        R(
          N,
          "click",
          /*click_handler_14*/
          l[63]
        ),
        R(
          L,
          "click",
          /*saveIdentity*/
          l[26]
        )
      ], z = !0);
    },
    p(H, V) {
      V[0] & /*identity*/
      512 && f.value !== /*identity*/
      H[9].nick && x(
        f,
        /*identity*/
        H[9].nick
      ), V[0] & /*identity*/
      512 && m.value !== /*identity*/
      H[9].avatar && x(
        m,
        /*identity*/
        H[9].avatar
      ), /*identity*/
      H[9].avatar ? W ? W.p(H, V) : (W = Uu(H), W.c(), W.m(d, null)) : W && (W.d(1), W = null), V[0] & /*identity*/
      512 && w.value !== /*identity*/
      H[9].background && x(
        w,
        /*identity*/
        H[9].background
      ), V[0] & /*identity*/
      512 && x(
        S,
        /*identity*/
        H[9].color
      ), V[0] & /*identity*/
      512 && I !== (I = /*identity*/
      H[9].active ? "ONLINE" : "OFFLINE") && te(D, I), V[0] & /*identity*/
      512 && M !== (M = "toggle-btn " + /*identity*/
      (H[9].active ? "on" : "off") + " svelte-1ind8n8") && s(N, "class", M);
    },
    i(H) {
      H && (U || Ne(() => {
        U = st(e, Qe, {}), U.start();
      }));
    },
    o: ge,
    d(H) {
      H && P(e), W && W.d(), z = !1, Te(F);
    }
  };
}
function P2(l) {
  let e, t, i, n, o, c, f = ce(
    /*allPlayers*/
    l[12]
  ), u = [];
  for (let d = 0; d < f.length; d += 1)
    u[d] = Gu(Tu(l, f, d));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("label"), i.textContent = "JOGADORES", n = g(), o = r("div");
      for (let d = 0; d < u.length; d += 1)
        u[d].c();
      s(o, "class", "player-list-grid svelte-1ind8n8"), s(t, "class", "settings-grid"), s(e, "class", "app-pane svelte-1ind8n8");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let m = 0; m < u.length; m += 1)
        u[m] && u[m].m(o, null);
    },
    p(d, p) {
      if (p[0] & /*allPlayers, openDM*/
      1052672) {
        f = ce(
          /*allPlayers*/
          d[12]
        );
        let m;
        for (m = 0; m < f.length; m += 1) {
          const b = Tu(d, f, m);
          u[m] ? u[m].p(b, p) : (u[m] = Gu(b), u[m].c(), u[m].m(o, null));
        }
        for (; m < u.length; m += 1)
          u[m].d(1);
        u.length = f.length;
      }
    },
    i(d) {
      d && (c || Ne(() => {
        c = st(e, Qe, {}), c.start();
      }));
    },
    o: ge,
    d(d) {
      d && P(e), Fe(u, d);
    }
  };
}
function q2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E = [], S = /* @__PURE__ */ new Map(), O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K = ce(
    /*groups*/
    l[14]
  ), Z = [];
  for (let Q = 0; Q < K.length; Q += 1)
    Z[Q] = Hu(Mu(l, K, Q));
  let le = ce(
    /*allPlayers*/
    l[12]
  ), $ = [];
  for (let Q = 0; Q < le.length; Q += 1)
    $[Q] = Bu(Ru(l, le, Q));
  let se = ce(
    /*messages*/
    l[11]
  );
  const Y = (Q) => (
    /*m*/
    Q[65].id
  );
  for (let Q = 0; Q < se.length; Q += 1) {
    let ie = Du(l, se, Q), ee = Y(ie);
    S.set(ee, E[Q] = Vu(ee, ie));
  }
  return {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), n = B("CANAIS "), o = r("button"), o.textContent = "+", c = g(), f = r("div");
      for (let Q = 0; Q < Z.length; Q += 1)
        Z[Q].c();
      u = g(), d = r("div"), d.textContent = "JOGADORES", p = g(), m = r("div");
      for (let Q = 0; Q < $.length; Q += 1)
        $[Q].c();
      b = g(), v = r("section"), h = r("header"), _ = r("span"), w = B("# "), k = B(
        /*$hubActiveChatName*/
        l[16]
      ), A = g(), y = r("div");
      for (let Q = 0; Q < E.length; Q += 1)
        E[Q].c();
      O = g(), C = r("div"), T = r("button"), T.innerHTML = '<i class="fas fa-microchip"></i> VETOR', N = g(), I = r("div"), D = r("span"), D.textContent = "ROLAR:", M = g(), G = r("input"), L = g(), U = r("div"), z = r("button"), z.innerHTML = '<i class="fas fa-image"></i>', F = g(), W = r("textarea"), H = g(), V = r("button"), V.innerHTML = '<i class="fas fa-paper-plane"></i>', s(o, "class", "btn-tiny svelte-1ind8n8"), s(i, "class", "section-label svelte-1ind8n8"), s(f, "class", "scroll-list custom-scroll svelte-1ind8n8"), s(d, "class", "section-label svelte-1ind8n8"), s(m, "class", "scroll-list custom-scroll svelte-1ind8n8"), s(t, "class", "chat-list-sidebar svelte-1ind8n8"), s(_, "class", "channel-name"), s(h, "class", "chat-header-bar svelte-1ind8n8"), s(y, "class", "message-log custom-scroll svelte-1ind8n8"), s(T, "class", "vetor-btn svelte-1ind8n8"), s(D, "class", "label-mini svelte-1ind8n8"), s(G, "type", "text"), s(G, "placeholder", "/r 1d20"), s(G, "class", "svelte-1ind8n8"), s(I, "class", "quick-roll-box svelte-1ind8n8"), s(C, "class", "action-bar svelte-1ind8n8"), s(z, "class", "btn-icon svelte-1ind8n8"), s(W, "placeholder", "Transmitir... (/cls)"), s(W, "class", "svelte-1ind8n8"), s(V, "class", "send-btn svelte-1ind8n8"), s(U, "class", "chat-composer svelte-1ind8n8"), s(v, "class", "chat-main svelte-1ind8n8"), s(e, "class", "split-view svelte-1ind8n8");
    },
    m(Q, ie) {
      q(Q, e, ie), a(e, t), a(t, i), a(i, n), a(i, o), a(t, c), a(t, f);
      for (let ee = 0; ee < Z.length; ee += 1)
        Z[ee] && Z[ee].m(f, null);
      a(t, u), a(t, d), a(t, p), a(t, m);
      for (let ee = 0; ee < $.length; ee += 1)
        $[ee] && $[ee].m(m, null);
      a(e, b), a(e, v), a(v, h), a(h, _), a(_, w), a(_, k), a(v, A), a(v, y);
      for (let ee = 0; ee < E.length; ee += 1)
        E[ee] && E[ee].m(y, null);
      l[51](y), a(v, O), a(v, C), a(C, T), a(C, N), a(C, I), a(I, D), a(I, M), a(I, G), x(
        G,
        /*simpleRollFormula*/
        l[3]
      ), a(v, L), a(v, U), a(U, z), a(U, F), a(U, W), x(
        W,
        /*newMessage*/
        l[2]
      ), a(U, H), a(U, V), j || (X = [
        R(
          o,
          "click",
          /*click_handler_5*/
          l[45]
        ),
        R(
          T,
          "click",
          /*click_handler_11*/
          l[52]
        ),
        R(
          G,
          "input",
          /*input_input_handler_2*/
          l[53]
        ),
        R(
          G,
          "keydown",
          /*keydown_handler_1*/
          l[54]
        ),
        R(
          z,
          "click",
          /*openImageDialog*/
          l[28]
        ),
        R(
          W,
          "input",
          /*textarea_input_handler*/
          l[55]
        ),
        R(
          W,
          "keydown",
          /*keydown_handler_2*/
          l[56]
        ),
        R(
          V,
          "click",
          /*click_handler_12*/
          l[57]
        )
      ], j = !0);
    },
    p(Q, ie) {
      if (ie[0] & /*$hubActiveChatId, groups, modalData, activeModal, switchChat, initiateDeleteGroup*/
      4735170) {
        K = ce(
          /*groups*/
          Q[14]
        );
        let ee;
        for (ee = 0; ee < K.length; ee += 1) {
          const pe = Mu(Q, K, ee);
          Z[ee] ? Z[ee].p(pe, ie) : (Z[ee] = Hu(pe), Z[ee].c(), Z[ee].m(f, null));
        }
        for (; ee < Z.length; ee += 1)
          Z[ee].d(1);
        Z.length = K.length;
      }
      if (ie[0] & /*openDM, allPlayers*/
      1052672) {
        le = ce(
          /*allPlayers*/
          Q[12]
        );
        let ee;
        for (ee = 0; ee < le.length; ee += 1) {
          const pe = Ru(Q, le, ee);
          $[ee] ? $[ee].p(pe, ie) : ($[ee] = Bu(pe), $[ee].c(), $[ee].m(m, null));
        }
        for (; ee < $.length; ee += 1)
          $[ee].d(1);
        $.length = le.length;
      }
      ie[0] & /*$hubActiveChatName*/
      65536 && te(
        k,
        /*$hubActiveChatName*/
        Q[16]
      ), ie[0] & /*messages*/
      2048 && (se = ce(
        /*messages*/
        Q[11]
      ), E = Tl(E, ie, Y, 1, Q, se, S, y, Qa, Vu, null, Du)), ie[0] & /*simpleRollFormula*/
      8 && G.value !== /*simpleRollFormula*/
      Q[3] && x(
        G,
        /*simpleRollFormula*/
        Q[3]
      ), ie[0] & /*newMessage*/
      4 && x(
        W,
        /*newMessage*/
        Q[2]
      );
    },
    i(Q) {
      for (let ie = 0; ie < se.length; ie += 1)
        ne(E[ie]);
      Q && (J || Ne(() => {
        J = st(e, Qe, {}), J.start();
      }));
    },
    o: ge,
    d(Q) {
      Q && P(e), Fe(Z, Q), Fe($, Q);
      for (let ie = 0; ie < E.length; ie += 1)
        E[ie].d();
      l[51](null), j = !1, Te(X);
    }
  };
}
function qu(l) {
  let e, t, i, n, o, c;
  function f() {
    return (
      /*click_handler_15*/
      l[64](
        /*key*/
        l[76]
      )
    );
  }
  return {
    c() {
      e = r("button"), t = r("div"), i = r("span"), i.textContent = `${/*theme*/
      l[77].label}`, n = g(), s(t, "class", "color-preview svelte-1ind8n8"), ae(
        t,
        "background",
        /*theme*/
        l[77].vars["--chat-accent"]
      ), s(e, "class", "theme-card svelte-1ind8n8"), he(
        e,
        "active",
        /*savedTheme*/
        l[0] === /*key*/
        l[76]
      );
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(e, i), a(e, n), o || (c = R(e, "click", f), o = !0);
    },
    p(u, d) {
      l = u, d[0] & /*savedTheme*/
      1 && he(
        e,
        "active",
        /*savedTheme*/
        l[0] === /*key*/
        l[76]
      );
    },
    d(u) {
      u && P(e), o = !1, c();
    }
  };
}
function Uu(l) {
  let e, t;
  return {
    c() {
      e = r("img"), at(e.src, t = /*identity*/
      l[9].avatar) || s(e, "src", t), ae(e, "width", "40px"), ae(e, "height", "40px"), ae(e, "margin-top", "5px"), ae(e, "border-radius", "50%"), s(e, "alt", "pv");
    },
    m(i, n) {
      q(i, e, n);
    },
    p(i, n) {
      n[0] & /*identity*/
      512 && !at(e.src, t = /*identity*/
      i[9].avatar) && s(e, "src", t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function Gu(l) {
  var y;
  let e, t, i, n, o, c, f, u, d = (
    /*u*/
    l[68].name + ""
  ), p, m, b = (
    /*u*/
    (((y = l[68].character) == null ? void 0 : y.name) || "---") + ""
  ), v, h, _, w, k;
  function A() {
    return (
      /*click_handler_13*/
      l[58](
        /*u*/
        l[68]
      )
    );
  }
  return {
    c() {
      var E;
      e = r("div"), t = r("div"), i = r("img"), o = r("div"), c = g(), f = r("div"), u = r("b"), p = B(d), m = r("span"), v = B(b), h = g(), at(i.src, n = /*u*/
      ((E = l[68].character) == null ? void 0 : E.img) || /*u*/
      l[68].avatar) || s(i, "src", n), s(i, "alt", "user"), s(i, "class", "svelte-1ind8n8"), s(o, "class", "p-dot svelte-1ind8n8"), s(t, "class", "p-avatar svelte-1ind8n8"), s(f, "class", "p-info"), s(e, "class", _ = "player-card " + /*u*/
      (l[68].active ? "on" : "off") + " svelte-1ind8n8");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, o), a(e, c), a(e, f), a(f, u), a(u, p), a(f, m), a(m, v), a(e, h), w || (k = R(e, "click", A), w = !0);
    },
    p(E, S) {
      var O, C;
      l = E, S[0] & /*allPlayers*/
      4096 && !at(i.src, n = /*u*/
      ((O = l[68].character) == null ? void 0 : O.img) || /*u*/
      l[68].avatar) && s(i, "src", n), S[0] & /*allPlayers*/
      4096 && d !== (d = /*u*/
      l[68].name + "") && te(p, d), S[0] & /*allPlayers*/
      4096 && b !== (b = /*u*/
      (((C = l[68].character) == null ? void 0 : C.name) || "---") + "") && te(v, b), S[0] & /*allPlayers*/
      4096 && _ !== (_ = "player-card " + /*u*/
      (l[68].active ? "on" : "off") + " svelte-1ind8n8") && s(e, "class", _);
    },
    d(E) {
      E && P(e), w = !1, k();
    }
  };
}
function Hu(l) {
  let e, t, i, n, o, c, f = (
    /*g*/
    l[71].name + ""
  ), u, d, p, m, b, v;
  function h(...w) {
    return (
      /*click_handler_6*/
      l[46](
        /*g*/
        l[71],
        ...w
      )
    );
  }
  function _() {
    return (
      /*click_handler_7*/
      l[47](
        /*g*/
        l[71]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), c = r("span"), u = B(f), d = g(), p = r("i"), m = g(), s(i, "class", n = "fas " + /*g*/
      (l[71].isPrivate ? "fa-lock" : "fa-hashtag")), ae(t, "display", "flex"), ae(t, "align-items", "center"), ae(t, "gap", "8px"), ae(t, "flex", "1"), s(p, "class", "fas fa-trash trash-icon svelte-1ind8n8"), s(p, "role", "button"), s(p, "tabindex", "0"), s(e, "class", "chat-row svelte-1ind8n8"), s(e, "role", "button"), s(e, "tabindex", "0"), he(
        e,
        "active",
        /*$hubActiveChatId*/
        l[1] === /*g*/
        l[71].id
      );
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(t, o), a(t, c), a(c, u), a(e, d), a(e, p), a(e, m), b || (v = [
        R(p, "click", Lt(h)),
        R(e, "click", _)
      ], b = !0);
    },
    p(w, k) {
      l = w, k[0] & /*groups*/
      16384 && n !== (n = "fas " + /*g*/
      (l[71].isPrivate ? "fa-lock" : "fa-hashtag")) && s(i, "class", n), k[0] & /*groups*/
      16384 && f !== (f = /*g*/
      l[71].name + "") && te(u, f), k[0] & /*$hubActiveChatId, groups*/
      16386 && he(
        e,
        "active",
        /*$hubActiveChatId*/
        l[1] === /*g*/
        l[71].id
      );
    },
    d(w) {
      w && P(e), b = !1, Te(v);
    }
  };
}
function zu(l) {
  let e, t, i, n, o, c = (
    /*u*/
    l[68].name + ""
  ), f, u, d, p;
  function m() {
    return (
      /*click_handler_8*/
      l[48](
        /*u*/
        l[68]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), n = g(), o = r("span"), f = B(c), u = g(), s(t, "class", i = "status-dot-mini " + /*u*/
      (l[68].active ? "online" : "offline") + " svelte-1ind8n8"), s(e, "class", "chat-row svelte-1ind8n8"), s(e, "role", "button"), s(e, "tabindex", "0");
    },
    m(b, v) {
      q(b, e, v), a(e, t), a(e, n), a(e, o), a(o, f), a(e, u), d || (p = R(e, "click", m), d = !0);
    },
    p(b, v) {
      l = b, v[0] & /*allPlayers*/
      4096 && i !== (i = "status-dot-mini " + /*u*/
      (l[68].active ? "online" : "offline") + " svelte-1ind8n8") && s(t, "class", i), v[0] & /*allPlayers*/
      4096 && c !== (c = /*u*/
      l[68].name + "") && te(f, c);
    },
    d(b) {
      b && P(e), d = !1, p();
    }
  };
}
function Bu(l) {
  let e, t = (
    /*u*/
    l[68].id !== game.user.id && zu(l)
  );
  return {
    c() {
      t && t.c(), e = Pt();
    },
    m(i, n) {
      t && t.m(i, n), q(i, e, n);
    },
    p(i, n) {
      /*u*/
      i[68].id !== game.user.id ? t ? t.p(i, n) : (t = zu(i), t.c(), t.m(e.parentNode, e)) : t && (t.d(1), t = null);
    },
    d(i) {
      i && P(e), t && t.d(i);
    }
  };
}
function Fu(l) {
  let e, t, i = (
    /*m*/
    l[65].realName + ""
  ), n, o;
  return {
    c() {
      e = r("span"), t = B("("), n = B(i), o = B(")"), s(e, "class", "msg-tag");
    },
    m(c, f) {
      q(c, e, f), a(e, t), a(e, n), a(e, o);
    },
    p(c, f) {
      f[0] & /*messages*/
      2048 && i !== (i = /*m*/
      c[65].realName + "") && te(n, i);
    },
    d(c) {
      c && P(e);
    }
  };
}
function ju(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_10*/
      l[50](
        /*m*/
        l[65]
      )
    );
  }
  return {
    c() {
      e = r("img"), at(e.src, t = /*m*/
      l[65].image) || s(e, "src", t), s(e, "class", "msg-attach svelte-1ind8n8"), s(e, "alt", "media");
    },
    m(c, f) {
      q(c, e, f), i || (n = R(e, "click", o), i = !0);
    },
    p(c, f) {
      l = c, f[0] & /*messages*/
      2048 && !at(e.src, t = /*m*/
      l[65].image) && s(e, "src", t);
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function Vu(l, e) {
  let t, i, n, o, c, f, u, d = (
    /*m*/
    e[65].senderName + ""
  ), p, m, b, v, h = new Date(
    /*m*/
    e[65].timestamp
  ).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) + "", _, w, k, A, y, E = (
    /*m*/
    e[65].text + ""
  ), S, O, C, T, N;
  function I() {
    return (
      /*click_handler_9*/
      e[49](
        /*m*/
        e[65]
      )
    );
  }
  let D = (
    /*m*/
    e[65].senderName !== /*m*/
    e[65].realName && Fu(e)
  ), M = (
    /*m*/
    e[65].image && ju(e)
  );
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("img"), o = g(), c = r("div"), f = r("div"), u = r("span"), p = B(d), m = g(), D && D.c(), b = g(), v = r("span"), _ = B(h), w = g(), k = r("div"), M && M.c(), A = g(), y = r("div"), O = g(), at(i.src, n = /*m*/
      e[65].senderImg) || s(i, "src", n), s(i, "class", "msg-avatar svelte-1ind8n8"), s(i, "alt", "av"), s(u, "class", "msg-sender svelte-1ind8n8"), ae(
        u,
        "color",
        /*m*/
        e[65].color
      ), s(v, "class", "msg-time svelte-1ind8n8"), s(f, "class", "msg-header svelte-1ind8n8"), s(y, "class", "msg-text"), s(k, "class", S = "msg-bubble " + /*m*/
      (e[65].isRoll ? "roll" : "") + " svelte-1ind8n8"), ae(
        k,
        "border-left-color",
        /*m*/
        e[65].color
      ), s(c, "class", "msg-content-wrapper svelte-1ind8n8"), s(t, "class", "msg-row svelte-1ind8n8"), he(
        t,
        "me",
        /*m*/
        e[65].senderId === game.user.id
      ), this.first = t;
    },
    m(G, L) {
      q(G, t, L), a(t, i), a(t, o), a(t, c), a(c, f), a(f, u), a(u, p), a(f, m), D && D.m(f, null), a(f, b), a(f, v), a(v, _), a(c, w), a(c, k), M && M.m(k, null), a(k, A), a(k, y), y.innerHTML = E, a(t, O), T || (N = R(i, "click", I), T = !0);
    },
    p(G, L) {
      e = G, L[0] & /*messages*/
      2048 && !at(i.src, n = /*m*/
      e[65].senderImg) && s(i, "src", n), L[0] & /*messages*/
      2048 && d !== (d = /*m*/
      e[65].senderName + "") && te(p, d), L[0] & /*messages*/
      2048 && ae(
        u,
        "color",
        /*m*/
        e[65].color
      ), /*m*/
      e[65].senderName !== /*m*/
      e[65].realName ? D ? D.p(e, L) : (D = Fu(e), D.c(), D.m(f, b)) : D && (D.d(1), D = null), L[0] & /*messages*/
      2048 && h !== (h = new Date(
        /*m*/
        e[65].timestamp
      ).toLocaleTimeString([], { hour: "2-digit", minute: "2-digit" }) + "") && te(_, h), /*m*/
      e[65].image ? M ? M.p(e, L) : (M = ju(e), M.c(), M.m(k, A)) : M && (M.d(1), M = null), L[0] & /*messages*/
      2048 && E !== (E = /*m*/
      e[65].text + "") && (y.innerHTML = E), L[0] & /*messages*/
      2048 && S !== (S = "msg-bubble " + /*m*/
      (e[65].isRoll ? "roll" : "") + " svelte-1ind8n8") && s(k, "class", S), L[0] & /*messages*/
      2048 && ae(
        k,
        "border-left-color",
        /*m*/
        e[65].color
      ), L[0] & /*messages*/
      2048 && he(
        t,
        "me",
        /*m*/
        e[65].senderId === game.user.id
      );
    },
    i(G) {
      G && (C || Ne(() => {
        C = st(t, Qe, {}), C.start();
      }));
    },
    o: ge,
    d(G) {
      G && P(t), D && D.d(), M && M.d(), T = !1, N();
    }
  };
}
function U2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G = (
    /*identity*/
    l[9].background && Nu()
  ), L = (
    /*showDiceLogic*/
    l[8] && Lu(l)
  ), U = (
    /*activeModal*/
    (l[6] || /*showWarning*/
    l[5]) && Pu(l)
  );
  function z(H, V) {
    if (
      /*$hubActiveTab*/
      H[15] === "chats"
    ) return q2;
    if (
      /*$hubActiveTab*/
      H[15] === "contacts"
    ) return P2;
    if (
      /*$hubActiveTab*/
      H[15] === "profile"
    ) return L2;
    if (
      /*$hubActiveTab*/
      H[15] === "settings"
    ) return N2;
  }
  let F = z(l), W = F && F(l);
  return {
    c() {
      var H;
      e = r("div"), G && G.c(), t = g(), L && L.c(), i = g(), U && U.c(), n = g(), o = r("aside"), c = r("div"), f = r("button"), f.innerHTML = '<i class="fas fa-comments"></i>', u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-users"></i>', p = g(), m = r("button"), m.innerHTML = '<i class="fas fa-user-circle"></i>', b = g(), v = r("div"), h = g(), _ = r("button"), _.innerHTML = '<i class="fas fa-paint-brush"></i>', w = g(), k = r("div"), A = r("img"), E = g(), S = r("div"), C = g(), T = r("main"), W && W.c(), s(f, "class", "svelte-1ind8n8"), he(
        f,
        "active",
        /*$hubActiveTab*/
        l[15] === "chats"
      ), s(d, "class", "svelte-1ind8n8"), he(
        d,
        "active",
        /*$hubActiveTab*/
        l[15] === "contacts"
      ), s(m, "class", "svelte-1ind8n8"), he(
        m,
        "active",
        /*$hubActiveTab*/
        l[15] === "profile"
      ), s(v, "class", "nav-sep"), s(_, "class", "svelte-1ind8n8"), he(
        _,
        "active",
        /*$hubActiveTab*/
        l[15] === "settings"
      ), s(c, "class", "nav-icons svelte-1ind8n8"), at(A.src, y = /*identity*/
      l[9].active && /*identity*/
      l[9].avatar ? (
        /*identity*/
        l[9].avatar
      ) : (
        /*mainActor*/
        ((H = l[10]) == null ? void 0 : H.img) || game.user.avatar
      )) || s(A, "src", y), s(A, "alt", "Me"), s(A, "class", "svelte-1ind8n8"), s(S, "class", O = "dot " + /*identity*/
      (l[9].active ? "spoof" : "real")), s(k, "class", "user-mini-status svelte-1ind8n8"), s(o, "class", "nexus-sidebar svelte-1ind8n8"), s(T, "class", "nexus-viewport svelte-1ind8n8"), s(e, "class", "nexus-hub-root svelte-1ind8n8"), s(e, "style", N = Object.entries(
        /*currentTheme*/
        l[13].vars
      ).map(Wu).join(";") + "; --custom-bg: url('" + /*identity*/
      (l[9].background || "") + "');");
    },
    m(H, V) {
      q(H, e, V), G && G.m(e, null), a(e, t), L && L.m(e, null), a(e, i), U && U.m(e, null), a(e, n), a(e, o), a(o, c), a(c, f), a(c, u), a(c, d), a(c, p), a(c, m), a(c, b), a(c, v), a(c, h), a(c, _), a(o, w), a(o, k), a(k, A), a(k, E), a(k, S), a(e, C), a(e, T), W && W.m(T, null), I = !0, D || (M = [
        R(
          f,
          "click",
          /*click_handler_1*/
          l[41]
        ),
        R(
          d,
          "click",
          /*click_handler_2*/
          l[42]
        ),
        R(
          m,
          "click",
          /*click_handler_3*/
          l[43]
        ),
        R(
          _,
          "click",
          /*click_handler_4*/
          l[44]
        )
      ], D = !0);
    },
    p(H, V) {
      var J;
      /*identity*/
      H[9].background ? G || (G = Nu(), G.c(), G.m(e, t)) : G && (G.d(1), G = null), /*showDiceLogic*/
      H[8] ? L ? (L.p(H, V), V[0] & /*showDiceLogic*/
      256 && ne(L, 1)) : (L = Lu(H), L.c(), ne(L, 1), L.m(e, i)) : L && ($e(), Ae(L, 1, 1, () => {
        L = null;
      }), et()), /*activeModal*/
      H[6] || /*showWarning*/
      H[5] ? U ? (U.p(H, V), V[0] & /*activeModal, showWarning*/
      96 && ne(U, 1)) : (U = Pu(H), U.c(), ne(U, 1), U.m(e, n)) : U && ($e(), Ae(U, 1, 1, () => {
        U = null;
      }), et()), (!I || V[0] & /*$hubActiveTab*/
      32768) && he(
        f,
        "active",
        /*$hubActiveTab*/
        H[15] === "chats"
      ), (!I || V[0] & /*$hubActiveTab*/
      32768) && he(
        d,
        "active",
        /*$hubActiveTab*/
        H[15] === "contacts"
      ), (!I || V[0] & /*$hubActiveTab*/
      32768) && he(
        m,
        "active",
        /*$hubActiveTab*/
        H[15] === "profile"
      ), (!I || V[0] & /*$hubActiveTab*/
      32768) && he(
        _,
        "active",
        /*$hubActiveTab*/
        H[15] === "settings"
      ), (!I || V[0] & /*identity, mainActor*/
      1536 && !at(A.src, y = /*identity*/
      H[9].active && /*identity*/
      H[9].avatar ? (
        /*identity*/
        H[9].avatar
      ) : (
        /*mainActor*/
        ((J = H[10]) == null ? void 0 : J.img) || game.user.avatar
      ))) && s(A, "src", y), (!I || V[0] & /*identity*/
      512 && O !== (O = "dot " + /*identity*/
      (H[9].active ? "spoof" : "real"))) && s(S, "class", O), F === (F = z(H)) && W ? W.p(H, V) : (W && W.d(1), W = F && F(H), W && (W.c(), ne(W, 1), W.m(T, null))), (!I || V[0] & /*currentTheme, identity*/
      8704 && N !== (N = Object.entries(
        /*currentTheme*/
        H[13].vars
      ).map(Wu).join(";") + "; --custom-bg: url('" + /*identity*/
      (H[9].background || "") + "');")) && s(e, "style", N);
    },
    i(H) {
      I || (ne(L), ne(U), ne(W), I = !0);
    },
    o(H) {
      Ae(L), Ae(U), I = !1;
    },
    d(H) {
      H && P(e), G && G.d(), L && L.d(), U && U.d(), W && W.d(), D = !1, Te(M);
    }
  };
}
const Ri = "multiversus-rpg";
function G2(l) {
  return l ? l.replace(/\*\*(.*?)\*\*/g, "<b>$1</b>").replace(/\*(.*?)\*/g, "<i>$1</i>").replace(/~~(.*?)~~/g, "<s>$1</s>") : "";
}
const Wu = ([l, e]) => `${l}:${e}`;
function H2(l, e, t) {
  let i, n, o, c, f, u, d, p, m, b, v;
  _a(l, as, (fe) => t(1, d = fe)), _a(l, z0, (fe) => t(32, p = fe)), _a(l, H0, (fe) => t(33, m = fe)), _a(l, ls, (fe) => t(15, b = fe)), _a(l, is, (fe) => t(16, v = fe));
  let { application: h } = e, _ = "neon-link", w = "", k = "", A, y = !0, E = null, S = { input: "", input2: "", targetGroup: null }, O = !1, C = {
    nick: game.user.name,
    avatar: "",
    background: "",
    color: "#ffffff",
    active: !1
  };
  qt(async () => {
    Cu();
    try {
      const fe = game.settings.get(Ri, "chatTheme");
      fe && t(0, _ = fe);
      const Le = game.user.getFlag(Ri, "social_identity");
      Le && t(9, C = { ...C, ...Le });
    } catch {
    }
    Hooks.on("socialHubUpdate", () => {
      Cu();
    }), Hooks.on("userConnected", () => {
      t(12, c = [...game.users]);
    });
  }), sm(() => {
    i && A && t(4, A.scrollTop = A.scrollHeight, A);
  });
  function T(fe) {
    ls.set(fe);
  }
  function N() {
    t(6, E = null), t(7, S = { input: "", input2: "", targetGroup: null });
  }
  function I(fe, Le) {
    as.set(fe), is.set(Le);
  }
  function D(fe) {
    const Le = [game.user.id, fe.id].sort();
    as.set(`dm-${Le.join("-")}`), is.set(fe.name), ls.set("chats");
  }
  async function M() {
    if (!S.input || S.input.trim() === "") return ui.notifications.warn("Nome inv√°lido.");
    await ii.createGroup(S.input, S.input2), N();
  }
  function G(fe, Le) {
    t(7, S.targetGroup = fe, S), fe.isPrivate && !game.user.isGM ? t(6, E = "delete_password") : t(6, E = "confirm_delete");
  }
  async function L() {
    if (E === "delete_password" && S.input !== S.targetGroup.password)
      return ui.notifications.error("Senha incorreta.");
    await ii.deleteGroup(S.targetGroup.id), N();
  }
  async function U(fe = null, Le = null, qe = !1) {
    if (!w.trim() && !fe && !Le) return;
    if (w.trim() === "/cls") {
      game.user.isGM ? (await ii.clearChat(), ui.notifications.info("Chat limpo.")) : ui.notifications.warn("Apenas GMs."), t(2, w = "");
      return;
    }
    let Me = (o == null ? void 0 : o.img) || game.user.avatar;
    C.active && C.avatar && C.avatar.length > 5 && (Me = C.avatar);
    const Se = {
      senderName: C.active ? C.nick : (o == null ? void 0 : o.name) || game.user.name,
      senderImg: Me,
      color: C.active ? C.color : "#ffffff",
      realName: game.user.name
    }, ve = qe ? Le : G2(w.trim());
    await ii.sendMessage({
      chatId: d,
      senderId: game.user.id,
      ...Se,
      text: ve,
      image: fe,
      isRoll: qe
    }), qe || t(2, w = "");
  }
  async function z(fe) {
    await U(null, fe, !0), t(8, O = !1);
  }
  async function F() {
    await game.user.setFlag(Ri, "social_identity", { ...C }), ui.notifications.info("Perfil Salvo.");
  }
  async function W(fe) {
    t(0, _ = fe), await game.settings.set(Ri, "chatTheme", fe);
  }
  function H() {
    new Dialog({
      title: "ENVIAR IMAGEM",
      content: '<input id="imgUrl" class="hacker-input" style="width:100%" placeholder="Cole o link aqui..." />',
      buttons: {
        send: {
          label: "ENVIAR",
          callback: (fe) => U(fe.find("#imgUrl").val())
        }
      }
    }).render(!0);
  }
  function V() {
    S.input === S.targetGroup.password ? (I(S.targetGroup.id, S.targetGroup.name), N()) : ui.notifications.error("Senha Incorreta");
  }
  const J = () => t(8, O = !1), j = () => t(5, y = !1);
  function X() {
    S.input = this.value, t(7, S);
  }
  function K() {
    S.input2 = this.value, t(7, S);
  }
  function Z() {
    S.input = this.value, t(7, S);
  }
  const le = (fe) => fe.key === "Enter" && V();
  function $() {
    S.input = this.value, t(7, S);
  }
  const se = () => T("chats"), Y = () => T("contacts"), Q = () => T("profile"), ie = () => T("settings"), ee = () => t(6, E = "create_group"), pe = (fe, Le) => G(fe), Ee = (fe) => {
    fe.isPrivate && !game.user.isGM ? (t(7, S.targetGroup = fe, S), t(6, E = "password")) : I(fe.id, fe.name);
  }, De = (fe) => D(fe), we = (fe) => window.open(fe.senderImg), ke = (fe) => window.open(fe.image);
  function me(fe) {
    wa[fe ? "unshift" : "push"](() => {
      A = fe, t(4, A);
    });
  }
  const re = () => t(8, O = !0);
  function ye() {
    k = this.value, t(3, k);
  }
  const oe = async (fe) => {
    if (fe.key === "Enter" && k)
      try {
        let Le = new Roll(k);
        await Le.evaluate(), U(null, await Le.render(), !0), t(3, k = "");
      } catch {
        ui.notifications.error("Erro na rolagem");
      }
  };
  function be() {
    w = this.value, t(2, w);
  }
  const de = (fe) => fe.key === "Enter" && !fe.shiftKey && (fe.preventDefault(), U()), Oe = () => U(), _e = (fe) => D(fe);
  function ue() {
    C.nick = this.value, t(9, C);
  }
  function Re() {
    C.avatar = this.value, t(9, C);
  }
  function Ce() {
    C.background = this.value, t(9, C);
  }
  function He() {
    C.color = this.value, t(9, C);
  }
  const Ge = () => {
    t(9, C.active = !C.active, C), F();
  }, Xe = (fe) => W(fe);
  return l.$$set = (fe) => {
    "application" in fe && t(30, h = fe.application);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*$hubActiveChatId*/
    2 | l.$$.dirty[1] & /*$hubChatStore*/
    4 && t(11, i = (m || []).filter((fe) => fe.chatId === d)), l.$$.dirty[1] & /*$hubGroupsStore*/
    2 && t(14, n = p || []), l.$$.dirty[0] & /*savedTheme*/
    1 && t(31, f = oi && oi[_] ? _ : "neon-link"), l.$$.dirty[1] & /*activeThemeKey*/
    1 && t(13, u = oi[f]);
  }, t(10, o = game.user.character || Array.from(game.actors).find((fe) => fe.isOwner)), t(12, c = game.users.filter((fe) => !fe.isGM || game.user.isGM)), [
    _,
    d,
    w,
    k,
    A,
    y,
    E,
    S,
    O,
    C,
    o,
    i,
    c,
    u,
    n,
    b,
    v,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    h,
    f,
    p,
    m,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re,
    Ce,
    He,
    Ge,
    Xe
  ];
}
let z2 = class extends mt {
  constructor(e) {
    super(), pt(this, e, H2, U2, dt, { application: 30 }, null, [-1, -1, -1]);
  }
};
class B2 extends Application {
  constructor(e = {}) {
    super(e), this.component = null;
  }
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      id: "nexus-social-hub",
      title: "NEXUS // MULTI-CHANNEL LINK",
      // Use um template .html vazio na sua pasta de templates
      template: "modules/multiversus-rpg/templates/PowerSheet.html",
      width: 950,
      height: 700,
      resizable: !0,
      minimizable: !0,
      classes: ["multiversus-rpg", "nexus-window-frame"]
    });
  }
  async _render(e, t) {
    await super._render(e, t);
    const i = this.element.find(".window-content")[0];
    i && (i.innerHTML = "", i.style.padding = "0", i.style.overflow = "hidden"), this.component ? this.component.$set({ updateTick: Date.now() }) : this.component = new z2({
      target: i,
      props: { application: this }
    });
  }
  async close(e = {}) {
    return this.component && (this.component.$destroy(), this.component = null), super.close(e);
  }
}
const Xu = [
  { id: "area", name: "√Årea", cost: 1, icon: "üí•", desc: "Seu poder explode em uma area, afetando diversas pessoas ou partes do corpo de um mesmo alvo, cada ponto em area aumenta o efeito, por questoes de Manobralidade, voce pode investir em Nivel da qualidade, m√°s (+1/dado). Hard Dice custam +2, Wiggle custam +4. Pode ser usado em Defesa ou √ötil." },
  { id: "augment", name: "Augment", cost: 4, icon: "üîã", desc: "Adiciona seus dados ao pool de outro poder. O n√∫mero de dados importa, n√£o o tipo. Limita√ß√µes se aplicam se houver outros extras." },
  { id: "booster", name: "Booster", cost: 1, icon: "üöÄ", desc: "Multiplica a Capacidade (Massa, Alcance, Velocidade) por 10 a cada n√≠vel." },
  { id: "burn", name: "Burn", cost: 2, icon: "üî•", desc: "Incendeia alvos causando dano cont√≠nuo, similar √† qualidade de arma Burn." },
  { id: "controlled", name: "Controlled Effect", cost: 1, icon: "üéØ", desc: "Permite escolher alvos espec√≠ficos (apenas inimigos, apenas amigos) dentro da √°rea." },
  { id: "daze", name: "Daze", cost: 1, icon: "üí´", desc: "Reduz o pool de dados do alvo em [Width] dados na pr√≥xima rodada." },
  { id: "deadly", name: "Deadly", cost: 1, icon: "‚ò†Ô∏è", desc: "Transforma dano Shock em Killing (+1) ou adiciona Killing ao Shock (+2 se pegar 2x)." },
  { id: "disintegrate", name: "Disintegrate", cost: 2, icon: "üí®", desc: "Se o ataque preencher o hit location com dano Killing, o alvo vira poeira." },
  { id: "duration", name: "Duration", cost: 2, icon: "‚è≥", desc: "O poder dura a cena inteira ou v√°rias rodadas com um √∫nico sucesso." },
  { id: "electrocuting", name: "Electrocuting", cost: 1, icon: "‚ö°", desc: "Dano viaja para hit locations adjacentes at√© o ch√£o (Dano em cadeia)." },
  { id: "endless", name: "Endless", cost: 3, icon: "‚ôæÔ∏è", desc: "O poder permanece ativo indefinidamente (mesmo dormindo) at√© ser desligado." },
  { id: "engulf", name: "Engulf", cost: 2, icon: "üåä", desc: "Afeta todas as Hit Locations do alvo simultaneamente com o mesmo dano." },
  { id: "gofirst", name: "Go First", cost: 1, icon: "üêá", desc: "Aumenta a largura (Width) da rolagem em +1 apenas para fins de Iniciativa." },
  { id: "hardened", name: "Hardened Defense", cost: 2, icon: "üõ°Ô∏è", desc: "Sua defesa (LAR) n√£o √© reduzida por Penetration. Requer Armored Defense." },
  { id: "highcap", name: "High Capacity", cost: 1, icon: "üì¶", desc: "Uma capacidade espec√≠fica (Massa/Range/Speed) sempre usa o valor m√°ximo dos dados." },
  { id: "interference", name: "Interference", cost: 3, icon: "üö´", desc: "Defesa poderosa. Reduz a largura da rolagem oposta ANTES da resolu√ß√£o." },
  { id: "native", name: "Native Power", cost: 1, icon: "üß¨", desc: "Habilidade natural. N√£o desliga com 0 Willpower e imune a Nullify de Fontes." },
  { id: "nophysics", name: "No Physics", cost: 1, icon: "üëª", desc: "Ignora in√©rcia, gravidade e alavancagem (parar caminh√£o sem quebrar, curvas imposs√≠veis)." },
  { id: "noupward", name: "No Upward Limit", cost: 2, icon: "üìà", desc: "Gaste Willpower para dobrar capacidades ou width sem limites." },
  { id: "nonphysical", name: "Non-Physical", cost: 2, icon: "üß†", desc: "Ataque ignora armaduras f√≠sicas convencionais. Requer defesa mental ou espec√≠fica." },
  { id: "onsight", name: "On Sight", cost: 1, icon: "üëÅÔ∏è", desc: "Afeta qualquer alvo que voc√™ possa ver (mesmo por c√¢mera), ignorando alcance." },
  { id: "penetration", name: "Penetration", cost: 1, icon: "üî©", desc: "Reduz a armadura (HAR e LAR) do alvo em 1. Pode ser pego m√∫ltiplas vezes." },
  { id: "permanent", name: "Permanent", cost: 4, icon: "üóø", desc: "Poder fica ativo para sempre, mesmo se morto ou sem Willpower. Requer desligamento deliberado." },
  { id: "radius", name: "Radius", cost: 2, icon: "‚≠ï", desc: "Afeta esfera de 10m. Cada compra adicional dobra o raio (20m, 40m...)." },
  { id: "capacity", name: "Power Capacity", cost: 2, icon: "‚ûï", desc: "Adiciona Massa, Alcance ou Velocidade (+2). Toque custa +1." },
  { id: "speeding", name: "Speeding Bullet", cost: 2, icon: "üöÑ", desc: "Dif√≠cil de evitar. Alvo precisa de 6+ dados em stat defensivo para tentar rolar oposi√ß√£o." },
  { id: "spray", name: "Spray", cost: 1, icon: "üí¶", desc: "Adiciona +1d (Spray). Permite a√ß√µes m√∫ltiplas sem penalidade. Hard custa +2, Wiggle +4." },
  { id: "subtle", name: "Subtle", cost: 1, icon: "ü•∑", desc: "Poder impercept√≠vel. Requer teste de Percep√ß√£o para notar." },
  { id: "traumatic", name: "Traumatic", cost: 1, icon: "üò±", desc: "Causa Trauma Check no alvo se causar dano. Obriga o atacante a fazer Trauma Check tamb√©m." },
  { id: "batata", name: "batata", cost: 1, icon: "üÜï", desc: "batata" },
  { id: "variable", name: "Variable Effect", cost: 4, icon: "üé≤", desc: "Pode mudar os efeitos do poder para emular outros poderes (Uma a√ß√£o para mudar)." }
], Ju = [
  { id: "alwayson", name: "Always On", cost: -1, icon: "üîå", desc: "N√£o pode desativar o poder. Combina com Permanent." },
  { id: "armored", name: "Armored Defense", cost: -2, icon: "üõ°Ô∏è", desc: 'Defends n√£o rola "gobble". Fornece LAR igual √† largura. Vulner√°vel a Penetration.' },
  { id: "attached", name: "Attached", cost: -1, icon: "üîó", desc: "S√≥ funciona junto com outro Poder/Stat. (-1 Stat / -2 Miracle - use Qtd 2 para Miracle)." },
  { id: "automatic", name: "Automatic", cost: -1, icon: "ü§ñ", desc: "Poder Attached ativa automaticamente. N√£o vale pontos se for Permanent." },
  { id: "backfires", name: "Backfires", cost: -2, icon: "üí•", desc: "Voc√™ recebe 1 ponto de dano Killing no torso ao usar o poder." },
  { id: "basewill", name: "Base Will Cost", cost: -4, icon: "üìâ", desc: "Custa 1 ponto de Base Will permanente para ativar." },
  { id: "directfeed", name: "Direct Feed", cost: -2, icon: "üßõ", desc: "Perde Willpower igual √† largura (Width) da rolagem a cada uso." },
  { id: "exhausted", name: "Exhausted", cost: -3, icon: "üò´", desc: "S√≥ pode usar o poder uma vez por cena/encontro." },
  { id: "focus", name: "Focus", cost: -1, icon: "üîÆ", desc: "Requer objeto externo. Pode ser tirado ou atacado. Possui HP pr√≥prio." },
  { id: "fragile", name: "Fragile", cost: -1, icon: "üç∑", desc: "Poder para se voc√™ sofrer dano ou distra√ß√£o (Gobble dice)." },
  { id: "fullpower", name: "Full Power Only", cost: -1, icon: "üì¢", desc: "Sempre usa capacidade, dados e dano m√°ximos. N√£o pode reduzir efeito." },
  { id: "golast", name: "Go Last", cost: -1, icon: "üêå", desc: "Iniciativa sempre considerada Width 1. Age por √∫ltimo." },
  { id: "horrifying", name: "Horrifying", cost: -1, icon: "üßü", desc: "Assusta testemunhas. Dificuldade de Charm +1 por qualidade com este Flaw." },
  { id: "ifthen", name: "If/Then", cost: -1, icon: "‚ùì", desc: "Requer condi√ß√£o espec√≠fica (cor, humor, ora√ß√£o) para funcionar." },
  { id: "limiteddmg", name: "Limited Damage", cost: -1, icon: "ü§ï", desc: "Attacks causam APENAS Shock ou APENAS Killing (escolha um)." },
  { id: "limitedwidth", name: "Limited Width", cost: -1, icon: "üìè", desc: "Largura (Width) efetiva √© sempre 1 para velocidade e dano." },
  { id: "locational", name: "Locational", cost: -1, icon: "üéØ", desc: "Ligado a hit location. Falha se o local sofrer dano." },
  { id: "loopy", name: "Loopy", cost: -1, icon: "üòµ", desc: "Desorienta o usu√°rio. Requer teste de Stability ou vaga em estupor." },
  { id: "mentalstrain", name: "Mental Strain", cost: -2, icon: "üß†", desc: "Sofre 1 ponto de dano Shock na cabe√ßa a cada uso." },
  { id: "nophysical", name: "No Physical Change", cost: -1, icon: "üëª", desc: "Ilus√£o mental. C√¢meras n√£o veem. Alvo pode resistir com Willpower." },
  { id: "obvious", name: "Obvious", cost: -1, icon: "üö®", desc: "Chama aten√ß√£o (luz, som, cheiro). Imposs√≠vel esconder o uso." },
  { id: "oneuse", name: "One Use", cost: -4, icon: "üïØÔ∏è", desc: "Funciona apenas uma vez e se perde para sempre." },
  { id: "reduced", name: "Reduced Capacities", cost: -1, icon: "ü§è", desc: "Alcance, Massa e Velocidade reduzidos a 1/10 do normal." },
  { id: "scattered", name: "Scattered Damage", cost: -1, icon: "üé≤", desc: "Dano espalhado. Role 1d10 para cada ponto de dano para ver onde acerta." },
  { id: "selfonly", name: "Self Only", cost: -3, icon: "üßò", desc: "Afeta apenas voc√™. N√£o funciona com Defends. Incompat√≠vel com Touch Only." },
  { id: "slow", name: "Slow", cost: -2, icon: "‚è±Ô∏è", desc: "Uso a cada duas rodadas (espera 1 rodada entre usos)." },
  { id: "touchonly", name: "Touch Only", cost: -2, icon: "‚úã", desc: "Sem alcance/velocidade/massa. S√≥ afeta o que toca/levanta." },
  { id: "uncontrollable", name: "Uncontrollable", cost: -2, icon: "ü§™", desc: "Vontade pr√≥pria. GM decide o que faz. Desligar requer teste oposto." },
  { id: "willbid", name: "Willpower Bid", cost: -1, icon: "üé≤", desc: "Aposte 1 Willpower. Perde se falhar na ativa√ß√£o." },
  { id: "willcost", name: "Willpower Cost", cost: -2, icon: "üí≤", desc: "Custo por dado para ativar (1/Normal, 2/Hard, 4/Wiggle)." },
  { id: "willinvest", name: "Willpower Investment", cost: -1, icon: "üè¶", desc: "Investe Willpower (retorna quando poder termina)." }
];
function F2(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<span class="bracket svelte-1v7piwj">[</span> INITIALIZE <span class="bracket svelte-1v7piwj">]</span>', s(e, "class", "btn-activate svelte-1v7piwj");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(e, "click", Lt(
        /*click_handler_3*/
        l[12]
      )), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function j2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b;
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "-", i = g(), n = r("div"), o = r("span"), o.textContent = "QTD", c = g(), f = r("span"), u = B(
        /*qty*/
        l[5]
      ), d = g(), p = r("button"), p.textContent = "+", s(t, "class", "btn-digital minus svelte-1v7piwj"), s(o, "class", "label svelte-1v7piwj"), s(f, "class", "value svelte-1v7piwj"), s(n, "class", "screen-qty svelte-1v7piwj"), s(p, "class", "btn-digital plus svelte-1v7piwj"), s(e, "class", "control-panel svelte-1v7piwj");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f), a(f, u), a(e, d), a(e, p), m || (b = [
        R(t, "click", Lt(
          /*click_handler_1*/
          l[10]
        )),
        R(p, "click", Lt(
          /*click_handler_2*/
          l[11]
        ))
      ], m = !0);
    },
    p(v, h) {
      h & /*qty*/
      32 && te(
        u,
        /*qty*/
        v[5]
      );
    },
    d(v) {
      v && P(e), m = !1, Te(b);
    }
  };
}
function V2(l) {
  let e, t, i, n, o = (
    /*effect*/
    l[0].cost > 0 ? "+" : ""
  ), c, f = (
    /*effect*/
    l[0].cost + ""
  ), u, d, p, m, b = (
    /*effect*/
    l[0].name + ""
  ), v, h, _, w, k, A, y = (
    /*effect*/
    l[0].icon + ""
  ), E, S, O, C, T, N, I, D, M, G, L, U;
  function z(H, V) {
    return (
      /*isActive*/
      H[6] ? j2 : F2
    );
  }
  let F = z(l), W = F(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), n = B("["), c = B(o), u = B(f), d = B("]"), p = g(), m = r("span"), v = B(b), _ = g(), w = r("div"), k = r("div"), A = r("span"), E = B(y), S = g(), O = r("div"), C = g(), T = r("div"), W.c(), N = g(), I = r("button"), I.textContent = "?", D = g(), M = r("div"), s(i, "class", "cost-badge svelte-1v7piwj"), ae(i, "color", "var(--neon-color)"), ae(i, "font-size", "1.1em"), s(m, "class", "card-name svelte-1v7piwj"), s(m, "title", h = /*effect*/
      l[0].name), s(t, "class", "card-header svelte-1v7piwj"), s(A, "class", "icon svelte-1v7piwj"), s(k, "class", "icon-frame"), s(O, "class", "scanline svelte-1v7piwj"), s(w, "class", "card-body svelte-1v7piwj"), s(T, "class", "card-footer svelte-1v7piwj"), s(I, "class", "btn-info svelte-1v7piwj"), s(I, "title", "Access Data"), s(M, "class", "bg-grid svelte-1v7piwj"), s(e, "class", G = "matrix-card " + /*type*/
      l[3] + " " + /*isActive*/
      (l[6] ? "active" : "") + " svelte-1v7piwj"), ae(
        e,
        "--neon-color",
        /*neonColor*/
        l[4]
      );
    },
    m(H, V) {
      q(H, e, V), a(e, t), a(t, i), a(i, n), a(i, c), a(i, u), a(i, d), a(t, p), a(t, m), a(m, v), a(e, _), a(e, w), a(w, k), a(k, A), a(A, E), a(w, S), a(w, O), a(e, C), a(e, T), W.m(T, null), a(e, N), a(e, I), a(e, D), a(e, M), L || (U = [
        R(
          w,
          "click",
          /*click_handler*/
          l[9]
        ),
        R(I, "click", Lt(
          /*click_handler_4*/
          l[13]
        ))
      ], L = !0);
    },
    p(H, [V]) {
      V & /*effect*/
      1 && o !== (o = /*effect*/
      H[0].cost > 0 ? "+" : "") && te(c, o), V & /*effect*/
      1 && f !== (f = /*effect*/
      H[0].cost + "") && te(u, f), V & /*effect*/
      1 && b !== (b = /*effect*/
      H[0].name + "") && te(v, b), V & /*effect*/
      1 && h !== (h = /*effect*/
      H[0].name) && s(m, "title", h), V & /*effect*/
      1 && y !== (y = /*effect*/
      H[0].icon + "") && te(E, y), F === (F = z(H)) && W ? W.p(H, V) : (W.d(1), W = F(H), W && (W.c(), W.m(T, null))), V & /*type, isActive*/
      72 && G !== (G = "matrix-card " + /*type*/
      H[3] + " " + /*isActive*/
      (H[6] ? "active" : "") + " svelte-1v7piwj") && s(e, "class", G), V & /*neonColor*/
      16 && ae(
        e,
        "--neon-color",
        /*neonColor*/
        H[4]
      );
    },
    i: ge,
    o: ge,
    d(H) {
      H && P(e), W.d(), L = !1, Te(U);
    }
  };
}
function W2(l, e, t) {
  let i, n, o, c, { effect: f } = e, { savedExtras: u } = e, { onUpdate: d } = e, { onInfo: p } = e, { type: m } = e;
  const b = () => d(f, 0), v = () => d(f, -1), h = () => d(f, 1), _ = () => d(f, 1), w = () => p(f.desc, f.name);
  return l.$$set = (k) => {
    "effect" in k && t(0, f = k.effect), "savedExtras" in k && t(7, u = k.savedExtras), "onUpdate" in k && t(1, d = k.onUpdate), "onInfo" in k && t(2, p = k.onInfo), "type" in k && t(3, m = k.type);
  }, l.$$.update = () => {
    l.$$.dirty & /*savedExtras, effect*/
    129 && t(8, i = u.find((k) => k.id === f.id)), l.$$.dirty & /*savedData*/
    256 && t(6, n = !!i), l.$$.dirty & /*savedData*/
    256 && t(5, o = i ? i.qty || 1 : 0), l.$$.dirty & /*type*/
    8 && t(4, c = m === "extra" ? "#00ff41" : "#ff003c");
  }, [
    f,
    d,
    p,
    m,
    c,
    o,
    n,
    u,
    i,
    b,
    v,
    h,
    _,
    w
  ];
}
class B0 extends mt {
  constructor(e) {
    super(), pt(this, e, W2, V2, dt, {
      effect: 0,
      savedExtras: 7,
      onUpdate: 1,
      onInfo: 2,
      type: 3
    });
  }
}
function Yu(l, e, t) {
  const i = l.slice();
  return i[14] = e[t], i;
}
function Qu(l, e, t) {
  const i = l.slice();
  return i[17] = e[t], i;
}
function Ku(l) {
  let e, t;
  return e = new B0({
    props: {
      effect: (
        /*extra*/
        l[17]
      ),
      savedExtras: (
        /*savedExtras*/
        l[1]
      ),
      onUpdate: (
        /*updateExtra*/
        l[2]
      ),
      onInfo: (
        /*showDescription*/
        l[3]
      ),
      type: "extra"
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*savedExtras*/
      2 && (o.savedExtras = /*savedExtras*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Zu(l) {
  let e, t;
  return e = new B0({
    props: {
      effect: (
        /*flaw*/
        l[14]
      ),
      savedExtras: (
        /*savedExtras*/
        l[1]
      ),
      onUpdate: (
        /*updateExtra*/
        l[2]
      ),
      onInfo: (
        /*showDescription*/
        l[3]
      ),
      type: "flaw"
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n & /*savedExtras*/
      2 && (o.savedExtras = /*savedExtras*/
      i[1]), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function xu(l) {
  let e, t, i, n = (
    /*selectedDescription*/
    l[0].title + ""
  ), o, c, f, u = (
    /*selectedDescription*/
    l[0].text + ""
  ), d, p, m, b;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), o = B(n), c = g(), f = r("div"), d = g(), p = r("button"), p.textContent = "Close", s(i, "class", "modal-title svelte-15s63qf"), s(f, "class", "modal-body svelte-15s63qf"), s(p, "class", "modal-close svelte-15s63qf"), s(t, "class", "modal-card svelte-15s63qf"), s(e, "class", "modal-overlay svelte-15s63qf");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), f.innerHTML = u, a(t, d), a(t, p), m || (b = [
        R(
          p,
          "click",
          /*click_handler_1*/
          l[11]
        ),
        R(t, "click", Lt(
          /*click_handler*/
          l[10]
        )),
        R(
          e,
          "click",
          /*click_handler_2*/
          l[12]
        )
      ], m = !0);
    },
    p(v, h) {
      h & /*selectedDescription*/
      1 && n !== (n = /*selectedDescription*/
      v[0].title + "") && te(o, n), h & /*selectedDescription*/
      1 && u !== (u = /*selectedDescription*/
      v[0].text + "") && (f.innerHTML = u);
    },
    d(v) {
      v && P(e), m = !1, Te(b);
    }
  };
}
function X2(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = ce(Xu), h = [];
  for (let E = 0; E < v.length; E += 1)
    h[E] = Ku(Qu(l, v, E));
  const _ = (E) => Ae(h[E], 1, 1, () => {
    h[E] = null;
  });
  let w = ce(Ju), k = [];
  for (let E = 0; E < w.length; E += 1)
    k[E] = Zu(Yu(l, w, E));
  const A = (E) => Ae(k[E], 1, 1, () => {
    k[E] = null;
  });
  let y = (
    /*selectedDescription*/
    l[0] && xu(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.innerHTML = '<i class="fas fa-plus-circle"></i> EXTRAS', n = g(), o = r("div");
      for (let E = 0; E < h.length; E += 1)
        h[E].c();
      c = g(), f = r("div"), u = r("div"), u.innerHTML = '<i class="fas fa-minus-circle"></i> FLAWS', d = g(), p = r("div");
      for (let E = 0; E < k.length; E += 1)
        k[E].c();
      m = g(), y && y.c(), s(i, "class", "col-header svelte-15s63qf"), s(o, "class", "grid-container svelte-15s63qf"), s(t, "class", "column extras-col svelte-15s63qf"), s(u, "class", "col-header svelte-15s63qf"), s(p, "class", "grid-container svelte-15s63qf"), s(f, "class", "column flaws-col svelte-15s63qf"), s(e, "class", "manager-layout svelte-15s63qf");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let O = 0; O < h.length; O += 1)
        h[O] && h[O].m(o, null);
      a(e, c), a(e, f), a(f, u), a(f, d), a(f, p);
      for (let O = 0; O < k.length; O += 1)
        k[O] && k[O].m(p, null);
      a(e, m), y && y.m(e, null), b = !0;
    },
    p(E, [S]) {
      if (S & /*savedExtras, updateExtra, showDescription*/
      14) {
        v = ce(Xu);
        let O;
        for (O = 0; O < v.length; O += 1) {
          const C = Qu(E, v, O);
          h[O] ? (h[O].p(C, S), ne(h[O], 1)) : (h[O] = Ku(C), h[O].c(), ne(h[O], 1), h[O].m(o, null));
        }
        for ($e(), O = v.length; O < h.length; O += 1)
          _(O);
        et();
      }
      if (S & /*savedExtras, updateExtra, showDescription*/
      14) {
        w = ce(Ju);
        let O;
        for (O = 0; O < w.length; O += 1) {
          const C = Yu(E, w, O);
          k[O] ? (k[O].p(C, S), ne(k[O], 1)) : (k[O] = Zu(C), k[O].c(), ne(k[O], 1), k[O].m(p, null));
        }
        for ($e(), O = w.length; O < k.length; O += 1)
          A(O);
        et();
      }
      /*selectedDescription*/
      E[0] ? y ? y.p(E, S) : (y = xu(E), y.c(), y.m(e, null)) : y && (y.d(1), y = null);
    },
    i(E) {
      if (!b) {
        for (let S = 0; S < v.length; S += 1)
          ne(h[S]);
        for (let S = 0; S < w.length; S += 1)
          ne(k[S]);
        b = !0;
      }
    },
    o(E) {
      h = h.filter(Boolean);
      for (let S = 0; S < h.length; S += 1)
        Ae(h[S]);
      k = k.filter(Boolean);
      for (let S = 0; S < k.length; S += 1)
        Ae(k[S]);
      b = !1;
    },
    d(E) {
      E && P(e), Fe(h, E), Fe(k, E), y && y.d();
    }
  };
}
const $u = "multiversus-rpg";
function J2(l, e, t) {
  let i, n, o, c, { item: f } = e, { qualityIndex: u } = e, { application: d } = e;
  const p = Hooks.on("updateItem", (k) => {
    k.id === f.id && t(4, f = k);
  });
  ra(() => {
    Hooks.off("updateItem", p);
  });
  let m = null;
  async function b(k, A = 0) {
    let y = c ? [...c] : [];
    const E = y.findIndex((O) => O.id === k.id);
    if (E >= 0)
      if (A === 0)
        y.splice(E, 1);
      else {
        let C = (y[E].qty || 1) + A;
        C < 1 ? y.splice(E, 1) : y[E].qty = C;
      }
    else
      A >= 0 && y.push({
        id: k.id,
        name: k.name,
        cost: k.cost,
        qty: 1
      });
    const S = JSON.parse(JSON.stringify(n));
    if (!S[u]) {
      console.error("Erro: Qualidade n√£o encontrada no √≠ndice", u);
      return;
    }
    S[u].extras = y, await f.update(
      {
        [`flags.${$u}.qualities`]: S
      },
      { render: !1 }
    );
  }
  function v(k, A) {
    t(0, m = { text: k, title: A });
  }
  function h(k) {
    Ol.call(this, l, k);
  }
  const _ = () => t(0, m = null), w = () => t(0, m = null);
  return l.$$set = (k) => {
    "item" in k && t(4, f = k.item), "qualityIndex" in k && t(5, u = k.qualityIndex), "application" in k && t(6, d = k.application);
  }, l.$$.update = () => {
    var k;
    l.$$.dirty & /*item*/
    16 && t(9, i = ((k = f.flags) == null ? void 0 : k[$u]) || {}), l.$$.dirty & /*flags*/
    512 && t(7, n = i.qualities || []), l.$$.dirty & /*qualities, qualityIndex*/
    160 && t(8, o = n[u] || {}), l.$$.dirty & /*quality*/
    256 && t(1, c = o.extras || []);
  }, [
    m,
    c,
    b,
    v,
    f,
    u,
    d,
    n,
    o,
    i,
    h,
    _,
    w
  ];
}
class Y2 extends mt {
  constructor(e) {
    super(), pt(this, e, J2, X2, dt, { item: 4, qualityIndex: 5, application: 6 });
  }
}
const { ApplicationV2: Q2 } = foundry.applications.api;
class F0 extends Q2 {
  constructor(e, t) {
    super({ window: { title: `Gerenciador: ${e.name}` } }), this.item = e, this.qualityIndex = t, this.component = null;
  }
  /* -------------------------------------------- */
  /* Renderiza√ß√£o                                */
  /* -------------------------------------------- */
  /**
   * Cria o HTML inicial. Na V2, isso retorna o elemento DOM, n√£o uma string.
   */
  async _renderHTML(e, t) {
    const i = document.createElement("div");
    return i.style.height = "100%", i.style.overflow = "hidden", i.style.display = "flex", i.style.flexDirection = "column", i.classList.add("svelte-wrapper"), this.component && this.component.$destroy(), this.component = new Y2({
      target: i,
      props: {
        item: this.item,
        qualityIndex: this.qualityIndex,
        application: this
      }
    }), i;
  }
  /**
   * Substitui o conte√∫do no DOM. Padr√£o da V2.
   */
  _replaceHTML(e, t, i) {
    t.replaceWith(e);
  }
  /* -------------------------------------------- */
  /* Ciclo de Vida (Limpeza)                     */
  /* -------------------------------------------- */
  /**
   * IMPORTANTE: Quando fechar a janela, matar o Svelte.
   * Isso previne erros de "update on destroyed component" e vazamento de mem√≥ria.
   */
  _onClose(e) {
    this.component && (this.component.$destroy(), this.component = null);
  }
}
yl(F0, "DEFAULT_OPTIONS", {
  tag: "div",
  window: {
    resizable: !0,
    width: 750,
    height: 600,
    icon: "fas fa-bolt",
    contentClasses: ["standard-form", "multiversus-app"]
    // Garante rolagem e estilo base
  },
  position: {
    width: 750,
    height: 600
  }
});
const Hi = {
  "neon-operator": {
    label: "Neon Operator (Padr√£o)",
    vars: {
      "--bg-base": "#090a0c",
      "--bg-card": "rgba(20, 22, 28, 0.9)",
      "--bg-input": "#050505",
      "--accent": "#00ff41",
      /* Cor principal (Verde Matrix) */
      "--text-main": "#e0e6ed",
      "--text-muted": "#64748b",
      "--border": "#1f2229",
      "--radius": "4px",
      "--font": "'Exo 2', sans-serif"
    }
  },
  "royal-fantasy": {
    label: "Royal Fantasy",
    vars: {
      "--bg-base": "#1a1614",
      "--bg-card": "rgba(40, 30, 25, 0.95)",
      "--bg-input": "#120e0c",
      "--accent": "#ffbb00",
      /* Dourado */
      "--text-main": "#f0e6d2",
      "--text-muted": "#8a7b70",
      "--border": "#4a3b32",
      "--radius": "2px",
      "--font": "'Cinzel', serif"
    }
  },
  "cyber-red": {
    label: "Arasaka Red",
    vars: {
      "--bg-base": "#000000",
      "--bg-card": "rgba(20, 0, 0, 0.95)",
      "--bg-input": "#1a0000",
      "--accent": "#ff003c",
      /* Vermelho Cyberpunk */
      "--text-main": "#ffffff",
      "--text-muted": "#888888",
      "--border": "#330000",
      "--radius": "0px",
      "--font": "'Rajdhani', sans-serif"
    }
  },
  "clean-glass": {
    label: "Clean Glass",
    vars: {
      "--bg-base": "#1e293b",
      "--bg-card": "rgba(255, 255, 255, 0.05)",
      "--bg-input": "rgba(0, 0, 0, 0.2)",
      "--accent": "#38bdf8",
      /* Azul C√©u */
      "--text-main": "#f1f5f9",
      "--text-muted": "#94a3b8",
      "--border": "rgba(255,255,255,0.1)",
      "--radius": "12px",
      "--font": "'Inter', sans-serif"
    }
  },
  "paper-rpg": {
    label: "Grim√≥rio Antigo",
    vars: {
      "--bg-base": "#2c241b",
      "--bg-card": "#e3dac9",
      /* Cor de Papel */
      "--bg-input": "rgba(0,0,0,0.05)",
      "--accent": "#8b0000",
      /* Vinho */
      "--text-main": "#222222",
      /* Texto Escuro no papel */
      "--text-muted": "#555555",
      "--border": "#8b7355",
      "--radius": "2px",
      "--font": "'Times New Roman', serif"
    }
  }
}, ep = [
  { d: 1, mass: 50, range: 10, speed: 2 },
  { d: 2, mass: 100, range: 20, speed: 5 },
  { d: 3, mass: 200, range: 40, speed: 10 },
  { d: 4, mass: 400, range: 80, speed: 20 },
  { d: 5, mass: 800, range: 160, speed: 40 },
  { d: 6, mass: 1600, range: 320, speed: 80 },
  { d: 7, mass: 3200, range: 640, speed: 160 },
  { d: 8, mass: 6400, range: 1280, speed: 320 },
  { d: 9, mass: 12800, range: 2560, speed: 640 },
  { d: 10, mass: 25600, range: 5120, speed: 1280 }
], ds = [
  { id: "mass", name: "Mass (Massa)", unit: "lbs" },
  { id: "range", name: "Range (Alcance)", unit: "yds" },
  { id: "speed", name: "Speed (Velocidade)", unit: "yds" },
  { id: "touch", name: "Touch (Toque)", unit: "-" },
  { id: "self", name: "Self (Pr√≥prio)", unit: "-" }
];
function K2(l, e, t = 0, i = 0) {
  if (e === "touch") return "Toque F√≠sico";
  if (e === "self") return "Apenas Voc√™";
  if (!e) return "Selecione...";
  let n = 0;
  if (l < 1) return "0";
  if (l <= 10)
    n = ep[l - 1][e];
  else {
    let u = ep[9][e], d = l - 10;
    n = u * Math.pow(2, d);
  }
  let o = Math.pow(2, t), c = i > 0 ? i * 10 : 1, f = n * o * c;
  return Z2(f, e);
}
function Z2(l, e) {
  if (e === "mass") {
    if (l >= 2e3) {
      let t = l / 2e3;
      return `${Mi(t)} Tons`;
    }
    return `${Mi(l)} lbs`;
  }
  if (e === "range" || e === "speed") {
    if (l >= 1760) {
      let t = l / 1760;
      return `${Mi(t)} Miles`;
    }
    return `${Mi(l)} yds`;
  }
  return l;
}
function Mi(l) {
  return l.toLocaleString("en-US", { maximumFractionDigits: 2 });
}
function tp(l, e, t) {
  const i = l.slice();
  return i[75] = e[t], i[77] = t, i;
}
function lp(l, e, t) {
  const i = l.slice();
  i[78] = e[t], i[81] = t;
  const n = K2(
    /*totalDice*/
    i[16],
    /*cap*/
    i[78].type,
    /*cap*/
    i[78].nul,
    /*cap*/
    i[78].booster
  );
  return i[79] = n, i;
}
function x2(l, e, t) {
  const i = l.slice();
  return i[82] = e[t], i;
}
function ap(l, e, t) {
  const i = l.slice();
  return i[85] = e[t], i;
}
function ip(l, e, t) {
  const i = l.slice();
  return i[88] = e[t], i;
}
function sp(l, e, t) {
  const i = l.slice();
  return i[91] = e[t][0], i[92] = e[t][1], i;
}
function np(l) {
  let e, t, i, n, o, c, f, u, d, p, m = ce(Object.entries(Hi)), b = [];
  for (let v = 0; v < m.length; v += 1)
    b[v] = op(sp(l, m, v));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.textContent = "SELECIONAR TEMA VISUAL", n = g(), o = r("div");
      for (let v = 0; v < b.length; v += 1)
        b[v].c();
      s(i, "class", "svelte-1wwn3nb"), s(o, "class", "theme-grid svelte-1wwn3nb"), s(t, "class", "theme-modal svelte-1wwn3nb"), s(e, "class", "modal-backdrop svelte-1wwn3nb");
    },
    m(v, h) {
      q(v, e, h), a(e, t), a(t, i), a(t, n), a(t, o);
      for (let _ = 0; _ < b.length; _ += 1)
        b[_] && b[_].m(o, null);
      u = !0, d || (p = R(e, "click", w0(
        /*click_handler_1*/
        l[45]
      )), d = !0);
    },
    p(v, h) {
      if (h[0] & /*currentThemeKey, setTheme*/
      134218240) {
        m = ce(Object.entries(Hi));
        let _;
        for (_ = 0; _ < m.length; _ += 1) {
          const w = sp(v, m, _);
          b[_] ? b[_].p(w, h) : (b[_] = op(w), b[_].c(), b[_].m(o, null));
        }
        for (; _ < b.length; _ += 1)
          b[_].d(1);
        b.length = m.length;
      }
    },
    i(v) {
      u || (v && Ne(() => {
        u && (c || (c = We(t, Mt, { start: 0.95 }, !0)), c.run(1));
      }), v && Ne(() => {
        u && (f || (f = We(e, Qe, { duration: 150 }, !0)), f.run(1));
      }), u = !0);
    },
    o(v) {
      v && (c || (c = We(t, Mt, { start: 0.95 }, !1)), c.run(0)), v && (f || (f = We(e, Qe, { duration: 150 }, !1)), f.run(0)), u = !1;
    },
    d(v) {
      v && P(e), Fe(b, v), v && c && c.end(), v && f && f.end(), d = !1, p();
    }
  };
}
function op(l) {
  let e, t = (
    /*theme*/
    l[92].label + ""
  ), i, n, o, c, f;
  function u() {
    return (
      /*click_handler*/
      l[44](
        /*key*/
        l[91]
      )
    );
  }
  return {
    c() {
      e = r("button"), i = B(t), n = g(), s(e, "class", o = "theme-btn " + /*currentThemeKey*/
      (l[9] === /*key*/
      l[91] ? "active" : "") + " svelte-1wwn3nb"), ae(e, "border-left", "4px solid " + /*theme*/
      l[92].vars["--accent"]);
    },
    m(d, p) {
      q(d, e, p), a(e, i), a(e, n), c || (f = R(e, "click", u), c = !0);
    },
    p(d, p) {
      l = d, p[0] & /*currentThemeKey*/
      512 && o !== (o = "theme-btn " + /*currentThemeKey*/
      (l[9] === /*key*/
      l[91] ? "active" : "") + " svelte-1wwn3nb") && s(e, "class", o);
    },
    d(d) {
      d && P(e), c = !1, f();
    }
  };
}
function $2(l) {
  let e, t, i, n, o;
  return {
    c() {
      e = r("button"), t = r("i"), s(t, "class", "fas fa-star"), s(e, "class", i = "icon-btn " + /*isInitial*/
      (l[5] ? "active-star" : "") + " svelte-1wwn3nb");
    },
    m(c, f) {
      q(c, e, f), a(e, t), n || (o = R(
        e,
        "click",
        /*click_handler_3*/
        l[48]
      ), n = !0);
    },
    p(c, f) {
      f[0] & /*isInitial*/
      32 && i !== (i = "icon-btn " + /*isInitial*/
      (c[5] ? "active-star" : "") + " svelte-1wwn3nb") && s(e, "class", i);
    },
    d(c) {
      c && P(e), n = !1, o();
    }
  };
}
function rp(l) {
  let e, t = (
    /*r*/
    l[88].toUpperCase() + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*r*/
      l[88], x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function cp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se = (
    /*isInitial*/
    l[5] && fp(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), n.textContent = "CUSTO TOTAL (XP)", o = g(), c = r("div"), se && se.c(), f = g(), u = B(
        /*xpCost*/
        l[14]
      ), d = g(), p = r("div"), m = r("span"), m.textContent = "BALANCEAMENTO (PB)", b = g(), v = r("div"), h = B(
        /*usedPB*/
        l[12]
      ), _ = g(), w = r("span"), k = B("/ "), A = B(
        /*maxPB*/
        l[13]
      ), E = g(), S = r("div"), O = r("div"), C = r("input"), T = g(), N = r("span"), N.textContent = "NORMAL (1x)", I = g(), D = r("div"), M = r("input"), G = g(), L = r("span"), L.textContent = "DURO (2x)", U = g(), z = r("div"), F = r("input"), W = g(), H = r("span"), H.textContent = "MOLE (4x)", V = g(), J = r("div"), j = r("div"), j.textContent = "NOTAS DE SISTEMA (WILD TALENTS)", X = g(), K = r("textarea"), s(n, "class", "hud-lbl svelte-1wwn3nb"), s(c, "class", "hud-val accent-text svelte-1wwn3nb"), s(i, "class", "hud-card svelte-1wwn3nb"), s(m, "class", "hud-lbl svelte-1wwn3nb"), s(w, "class", "dim svelte-1wwn3nb"), s(v, "class", y = "hud-val " + /*usedPB*/
      (l[12] > /*maxPB*/
      l[13] ? "danger-text" : "") + " svelte-1wwn3nb"), s(p, "class", "hud-card svelte-1wwn3nb"), s(t, "class", "hud-container svelte-1wwn3nb"), s(C, "type", "number"), s(C, "min", "0"), C.value = /*diceNormal*/
      l[8], s(C, "class", "svelte-1wwn3nb"), s(N, "class", "lbl svelte-1wwn3nb"), s(O, "class", "dice-input normal svelte-1wwn3nb"), s(M, "type", "number"), s(M, "min", "0"), M.value = /*diceHard*/
      l[7], s(M, "class", "svelte-1wwn3nb"), s(L, "class", "lbl svelte-1wwn3nb"), s(D, "class", "dice-input hard svelte-1wwn3nb"), s(F, "type", "number"), s(F, "min", "0"), F.value = /*diceWiggle*/
      l[6], s(F, "class", "svelte-1wwn3nb"), s(H, "class", "lbl svelte-1wwn3nb"), s(z, "class", "dice-input wiggle svelte-1wwn3nb"), s(S, "class", "dice-matrix svelte-1wwn3nb"), s(j, "class", "editor-label svelte-1wwn3nb"), K.value = /*description*/
      l[15], s(K, "placeholder", "Descri√ß√£o do poder (Sincronizado com a ficha original)..."), s(K, "class", "svelte-1wwn3nb"), s(J, "class", "text-editor-container svelte-1wwn3nb"), s(e, "class", "tab-pane svelte-1wwn3nb");
    },
    m(Y, Q) {
      q(Y, e, Q), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), se && se.m(c, null), a(c, f), a(c, u), a(t, d), a(t, p), a(p, m), a(p, b), a(p, v), a(v, h), a(v, _), a(v, w), a(w, k), a(w, A), a(e, E), a(e, S), a(S, O), a(O, C), a(O, T), a(O, N), a(S, I), a(S, D), a(D, M), a(D, G), a(D, L), a(S, U), a(S, z), a(z, F), a(z, W), a(z, H), a(e, V), a(e, J), a(J, j), a(J, X), a(J, K), le || ($ = [
        R(
          C,
          "change",
          /*change_handler_3*/
          l[53]
        ),
        R(
          M,
          "change",
          /*change_handler_4*/
          l[54]
        ),
        R(
          F,
          "change",
          /*change_handler_5*/
          l[55]
        ),
        R(
          K,
          "change",
          /*change_handler_6*/
          l[56]
        )
      ], le = !0);
    },
    p(Y, Q) {
      /*isInitial*/
      Y[5] ? se ? se.p(Y, Q) : (se = fp(Y), se.c(), se.m(c, f)) : se && (se.d(1), se = null), Q[0] & /*xpCost*/
      16384 && te(
        u,
        /*xpCost*/
        Y[14]
      ), Q[0] & /*usedPB*/
      4096 && te(
        h,
        /*usedPB*/
        Y[12]
      ), Q[0] & /*maxPB*/
      8192 && te(
        A,
        /*maxPB*/
        Y[13]
      ), Q[0] & /*usedPB, maxPB*/
      12288 && y !== (y = "hud-val " + /*usedPB*/
      (Y[12] > /*maxPB*/
      Y[13] ? "danger-text" : "") + " svelte-1wwn3nb") && s(v, "class", y), Q[0] & /*diceNormal*/
      256 && C.value !== /*diceNormal*/
      Y[8] && (C.value = /*diceNormal*/
      Y[8]), Q[0] & /*diceHard*/
      128 && M.value !== /*diceHard*/
      Y[7] && (M.value = /*diceHard*/
      Y[7]), Q[0] & /*diceWiggle*/
      64 && F.value !== /*diceWiggle*/
      Y[6] && (F.value = /*diceWiggle*/
      Y[6]), Q[0] & /*description*/
      32768 && (K.value = /*description*/
      Y[15]);
    },
    i(Y) {
      Y && (Z || Ne(() => {
        Z = st(e, Qe, { duration: 200 }), Z.start();
      }));
    },
    o: ge,
    d(Y) {
      Y && P(e), se && se.d(), le = !1, Te($);
    }
  };
}
function fp(l) {
  let e, t;
  return {
    c() {
      e = r("span"), t = B(
        /*rawXpCost*/
        l[4]
      ), s(e, "class", "strike svelte-1wwn3nb");
    },
    m(i, n) {
      q(i, e, n), a(e, t);
    },
    p(i, n) {
      n[0] & /*rawXpCost*/
      16 && te(
        t,
        /*rawXpCost*/
        i[4]
      );
    },
    d(i) {
      i && P(e);
    }
  };
}
function dp(l) {
  let e, t, i, n, o, c = (
    /*usedPB*/
    l[12] > /*maxPB*/
    l[13] ? "SOBRECARGA" : "EST√ÅVEL"
  ), f, u, d, p, m, b, v, h, _, w, k = ce(
    /*qualities*/
    l[1]
  ), A = [];
  for (let E = 0; E < k.length; E += 1)
    A[E] = bp(tp(l, k, E));
  const y = (E) => Ae(A[E], 1, 1, () => {
    A[E] = null;
  });
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("i"), o = g(), f = B(c), d = g(), p = r("button"), p.innerHTML = '<i class="fas fa-plus"></i> NOVA SUB-ROTINA', m = g(), b = r("div");
      for (let E = 0; E < A.length; E += 1)
        A[E].c();
      s(n, "class", "fas fa-circle"), s(i, "class", u = "status-pill " + /*usedPB*/
      (l[12] > /*maxPB*/
      l[13] ? "danger" : "success") + " svelte-1wwn3nb"), s(p, "class", "btn-new svelte-1wwn3nb"), s(t, "class", "toolbar svelte-1wwn3nb"), s(b, "class", "cards-list svelte-1wwn3nb"), s(e, "class", "tab-pane svelte-1wwn3nb");
    },
    m(E, S) {
      q(E, e, S), a(e, t), a(t, i), a(i, n), a(i, o), a(i, f), a(t, d), a(t, p), a(e, m), a(e, b);
      for (let O = 0; O < A.length; O += 1)
        A[O] && A[O].m(b, null);
      h = !0, _ || (w = R(
        p,
        "click",
        /*addQuality*/
        l[28]
      ), _ = !0);
    },
    p(E, S) {
      if ((!h || S[0] & /*usedPB, maxPB*/
      12288) && c !== (c = /*usedPB*/
      E[12] > /*maxPB*/
      E[13] ? "SOBRECARGA" : "EST√ÅVEL") && te(f, c), (!h || S[0] & /*usedPB, maxPB*/
      12288 && u !== (u = "status-pill " + /*usedPB*/
      (E[12] > /*maxPB*/
      E[13] ? "danger" : "success") + " svelte-1wwn3nb")) && s(i, "class", u), S[0] & /*qualities, totalDice, updateQuality, removeQuality, QUALITY_MODES*/
      1614872578 | S[1] & /*openExtraSelector, updateCapacity, toggleCapCollapse, removeCapacity, addCapacity*/
      31) {
        k = ce(
          /*qualities*/
          E[1]
        );
        let O;
        for (O = 0; O < k.length; O += 1) {
          const C = tp(E, k, O);
          A[O] ? (A[O].p(C, S), ne(A[O], 1)) : (A[O] = bp(C), A[O].c(), ne(A[O], 1), A[O].m(b, null));
        }
        for ($e(), O = k.length; O < A.length; O += 1)
          y(O);
        et();
      }
    },
    i(E) {
      if (!h) {
        for (let S = 0; S < k.length; S += 1)
          ne(A[S]);
        E && (v || Ne(() => {
          v = st(e, Qe, { duration: 200 }), v.start();
        })), h = !0;
      }
    },
    o(E) {
      A = A.filter(Boolean);
      for (let S = 0; S < A.length; S += 1)
        Ae(A[S]);
      h = !1;
    },
    d(E) {
      E && P(e), Fe(A, E), _ = !1, w();
    }
  };
}
function up(l) {
  let e, t = (
    /*mode*/
    l[85].label + ""
  ), i;
  return {
    c() {
      e = r("option"), i = B(t), e.__value = /*mode*/
      l[85].id, x(e, e.__value);
    },
    m(n, o) {
      q(n, e, o), a(e, i);
    },
    p: ge,
    d(n) {
      n && P(e);
    }
  };
}
function pp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w = (
    /*cap*/
    (l[78].nul || 0) + ""
  ), k, A, y, E, S, O, C, T, N, I, D, M = (
    /*cap*/
    (l[78].booster || 0) + ""
  ), G, L, U, z, F, W, H, V = ce(ds), J = [];
  for (let $ = 0; $ < V.length; $ += 1)
    J[$] = ek(x2(l, V, $));
  function j(...$) {
    return (
      /*change_handler_11*/
      l[66](
        /*i*/
        l[77],
        /*cIndex*/
        l[81],
        ...$
      )
    );
  }
  function X() {
    return (
      /*click_handler_10*/
      l[67](
        /*i*/
        l[77],
        /*cIndex*/
        l[81],
        /*cap*/
        l[78]
      )
    );
  }
  function K() {
    return (
      /*click_handler_11*/
      l[68](
        /*i*/
        l[77],
        /*cIndex*/
        l[81],
        /*cap*/
        l[78]
      )
    );
  }
  function Z() {
    return (
      /*click_handler_12*/
      l[69](
        /*i*/
        l[77],
        /*cIndex*/
        l[81],
        /*cap*/
        l[78]
      )
    );
  }
  function le() {
    return (
      /*click_handler_13*/
      l[70](
        /*i*/
        l[77],
        /*cIndex*/
        l[81],
        /*cap*/
        l[78]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("select");
      for (let $ = 0; $ < J.length; $ += 1)
        J[$].c();
      o = g(), c = r("i"), f = g(), u = r("div"), d = r("div"), p = r("label"), p.textContent = "Sem Limite (x2)", m = g(), b = r("div"), v = r("button"), v.textContent = "-", h = g(), _ = r("span"), k = B(w), A = g(), y = r("button"), y.textContent = "+", E = g(), S = r("div"), O = r("label"), O.textContent = "Booster (x10)", C = g(), T = r("div"), N = r("button"), N.textContent = "-", I = g(), D = r("span"), G = B(M), L = g(), U = r("button"), U.textContent = "+", s(i, "class", "svelte-1wwn3nb"), s(c, "class", "fas fa-caret-down arrow svelte-1wwn3nb"), s(t, "class", "custom-select full svelte-1wwn3nb"), s(p, "class", "svelte-1wwn3nb"), s(v, "class", "svelte-1wwn3nb"), s(_, "class", "svelte-1wwn3nb"), s(y, "class", "svelte-1wwn3nb"), s(b, "class", "step-ctrl svelte-1wwn3nb"), s(d, "class", "stepper svelte-1wwn3nb"), s(O, "class", "svelte-1wwn3nb"), s(N, "class", "svelte-1wwn3nb"), s(D, "class", "svelte-1wwn3nb"), s(U, "class", "svelte-1wwn3nb"), s(T, "class", "step-ctrl svelte-1wwn3nb"), s(S, "class", "stepper svelte-1wwn3nb"), s(u, "class", "steppers svelte-1wwn3nb"), s(e, "class", "cap-tools svelte-1wwn3nb");
    },
    m($, se) {
      q($, e, se), a(e, t), a(t, i);
      for (let Y = 0; Y < J.length; Y += 1)
        J[Y] && J[Y].m(i, null);
      ot(
        i,
        /*cap*/
        l[78].type || "mass"
      ), a(t, o), a(t, c), a(e, f), a(e, u), a(u, d), a(d, p), a(d, m), a(d, b), a(b, v), a(b, h), a(b, _), a(_, k), a(b, A), a(b, y), a(u, E), a(u, S), a(S, O), a(S, C), a(S, T), a(T, N), a(T, I), a(T, D), a(D, G), a(T, L), a(T, U), F = !0, W || (H = [
        R(i, "change", j),
        R(v, "click", X),
        R(y, "click", K),
        R(N, "click", Z),
        R(U, "click", le)
      ], W = !0);
    },
    p($, se) {
      l = $, (!F || se[0] & /*qualities, QUALITY_MODES*/
      4194306 && n !== (n = /*cap*/
      l[78].type || "mass")) && ot(
        i,
        /*cap*/
        l[78].type || "mass"
      ), (!F || se[0] & /*qualities*/
      2) && w !== (w = /*cap*/
      (l[78].nul || 0) + "") && te(k, w), (!F || se[0] & /*qualities*/
      2) && M !== (M = /*cap*/
      (l[78].booster || 0) + "") && te(G, M);
    },
    i($) {
      F || ($ && Ne(() => {
        F && (z || (z = We(e, yt, {}, !0)), z.run(1));
      }), F = !0);
    },
    o($) {
      $ && (z || (z = We(e, yt, {}, !1)), z.run(0)), F = !1;
    },
    d($) {
      $ && P(e), Fe(J, $), $ && z && z.end(), W = !1, Te(H);
    }
  };
}
function ek(l) {
  let e;
  return {
    c() {
      e = r("option"), e.textContent = `${/*type*/
      l[82].name}`, e.__value = /*type*/
      l[82].id, x(e, e.__value);
    },
    m(t, i) {
      q(t, e, i);
    },
    p: ge,
    d(t) {
      t && P(e);
    }
  };
}
function mp(l) {
  var T;
  let e, t, i, n, o, c, f = (((T = ds.find(E)) == null ? void 0 : T.name) || "...") + "", u, d, p, m = (
    /*capResult*/
    l[79] + ""
  ), b, v, h, _, w, k, A, y;
  function E(...N) {
    return (
      /*func*/
      l[63](
        /*cap*/
        l[78],
        ...N
      )
    );
  }
  function S() {
    return (
      /*click_handler_8*/
      l[64](
        /*i*/
        l[77],
        /*cIndex*/
        l[81]
      )
    );
  }
  function O() {
    return (
      /*click_handler_9*/
      l[65](
        /*i*/
        l[77],
        /*cIndex*/
        l[81]
      )
    );
  }
  let C = !/*cap*/
  l[78].collapsed && pp(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), c = r("span"), u = B(f), d = g(), p = r("span"), b = B(m), v = g(), h = r("button"), h.textContent = "√ó", _ = g(), C && C.c(), w = g(), s(i, "class", n = "fas fa-chevron-" + /*cap*/
      (l[78].collapsed ? "right" : "down") + " chevron svelte-1wwn3nb"), s(c, "class", "cap-label svelte-1wwn3nb"), s(p, "class", "cap-result svelte-1wwn3nb"), s(h, "class", "btn-icon small svelte-1wwn3nb"), s(t, "class", "cap-main svelte-1wwn3nb"), s(e, "class", k = "cap-row " + /*cap*/
      (l[78].collapsed ? "collapsed" : "") + " svelte-1wwn3nb");
    },
    m(N, I) {
      q(N, e, I), a(e, t), a(t, i), a(t, o), a(t, c), a(c, u), a(t, d), a(t, p), a(p, b), a(t, v), a(t, h), a(e, _), C && C.m(e, null), a(e, w), A || (y = [
        R(h, "click", Lt(S)),
        R(t, "click", O)
      ], A = !0);
    },
    p(N, I) {
      var D;
      l = N, I[0] & /*qualities, QUALITY_MODES*/
      4194306 && n !== (n = "fas fa-chevron-" + /*cap*/
      (l[78].collapsed ? "right" : "down") + " chevron svelte-1wwn3nb") && s(i, "class", n), I[0] & /*qualities*/
      2 && f !== (f = (((D = ds.find(E)) == null ? void 0 : D.name) || "...") + "") && te(u, f), I[0] & /*totalDice, qualities*/
      65538 && m !== (m = /*capResult*/
      l[79] + "") && te(b, m), /*cap*/
      l[78].collapsed ? C && ($e(), Ae(C, 1, 1, () => {
        C = null;
      }), et()) : C ? (C.p(l, I), I[0] & /*qualities*/
      2 && ne(C, 1)) : (C = pp(l), C.c(), ne(C, 1), C.m(e, w)), I[0] & /*qualities, QUALITY_MODES*/
      4194306 && k !== (k = "cap-row " + /*cap*/
      (l[78].collapsed ? "collapsed" : "") + " svelte-1wwn3nb") && s(e, "class", k);
    },
    d(N) {
      N && P(e), C && C.d(), A = !1, Te(y);
    }
  };
}
function bp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K = 2 + /*q*/
  (l[75].level || 0) + "", Z, le, $, se, Y, Q, ie, ee, pe;
  function Ee(..._e) {
    return (
      /*change_handler_7*/
      l[57](
        /*i*/
        l[77],
        ..._e
      )
    );
  }
  let De = ce(
    /*QUALITY_MODES*/
    l[22]
  ), we = [];
  for (let _e = 0; _e < De.length; _e += 1)
    we[_e] = up(ap(l, De, _e));
  function ke(..._e) {
    return (
      /*change_handler_8*/
      l[58](
        /*i*/
        l[77],
        ..._e
      )
    );
  }
  function me(..._e) {
    return (
      /*change_handler_9*/
      l[59](
        /*i*/
        l[77],
        ..._e
      )
    );
  }
  function re() {
    return (
      /*click_handler_6*/
      l[60](
        /*i*/
        l[77]
      )
    );
  }
  function ye(..._e) {
    return (
      /*change_handler_10*/
      l[61](
        /*i*/
        l[77],
        ..._e
      )
    );
  }
  function oe() {
    return (
      /*click_handler_7*/
      l[62](
        /*i*/
        l[77]
      )
    );
  }
  let be = ce(
    /*q*/
    l[75].capacities || []
  ), de = [];
  for (let _e = 0; _e < be.length; _e += 1)
    de[_e] = mp(lp(l, be, _e));
  function Oe() {
    return (
      /*click_handler_14*/
      l[71](
        /*i*/
        l[77]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), n = r("span"), n.textContent = `#${/*i*/
      l[77] + 1}`, o = g(), c = r("div"), f = r("input"), d = g(), p = r("span"), m = g(), b = r("div"), v = r("div"), h = r("select");
      for (let _e = 0; _e < we.length; _e += 1)
        we[_e].c();
      w = g(), k = r("div"), A = r("span"), A.textContent = "NVL", y = g(), E = r("input"), O = g(), C = r("button"), C.innerHTML = '<i class="fas fa-times"></i>', T = g(), N = r("div"), I = r("textarea"), M = g(), G = r("div"), L = r("div"), U = r("span"), U.textContent = "CAPACIDADES", z = g(), F = r("button"), F.textContent = "+ Adicionar", W = g();
      for (let _e = 0; _e < de.length; _e += 1)
        de[_e].c();
      H = g(), V = r("div"), J = r("div"), j = B("CUSTO: "), X = r("strong"), Z = B(K), le = B(" PB"), $ = g(), se = r("button"), se.innerHTML = '<i class="fas fa-sliders-h"></i> CONFIGURAR EXTRAS', Y = g(), s(n, "class", "index-badge svelte-1wwn3nb"), s(f, "type", "text"), f.value = u = /*q*/
      l[75].name, s(f, "placeholder", "Nome..."), s(f, "class", "svelte-1wwn3nb"), s(p, "class", "underline svelte-1wwn3nb"), s(c, "class", "input-inline svelte-1wwn3nb"), s(i, "class", "header-left svelte-1wwn3nb"), s(h, "class", "svelte-1wwn3nb"), s(v, "class", "mini-select svelte-1wwn3nb"), s(A, "class", "svelte-1wwn3nb"), s(E, "type", "number"), E.value = S = /*q*/
      l[75].level, s(E, "class", "svelte-1wwn3nb"), s(k, "class", "lvl-control svelte-1wwn3nb"), s(C, "class", "btn-icon delete svelte-1wwn3nb"), s(b, "class", "header-right svelte-1wwn3nb"), s(t, "class", "card-header svelte-1wwn3nb"), s(I, "rows", "1"), s(I, "class", "mini-desc svelte-1wwn3nb"), I.value = D = /*q*/
      l[75].description || "", s(I, "placeholder", "Descri√ß√£o curta do efeito..."), s(F, "class", "btn-text svelte-1wwn3nb"), s(L, "class", "caps-header svelte-1wwn3nb"), s(G, "class", "caps-list svelte-1wwn3nb"), s(X, "class", "svelte-1wwn3nb"), s(J, "class", "cost-badge svelte-1wwn3nb"), s(se, "class", "btn-extra svelte-1wwn3nb"), s(V, "class", "card-footer svelte-1wwn3nb"), s(N, "class", "card-body svelte-1wwn3nb"), s(e, "class", "quality-card svelte-1wwn3nb");
    },
    m(_e, ue) {
      q(_e, e, ue), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(c, f), a(c, d), a(c, p), a(t, m), a(t, b), a(b, v), a(v, h);
      for (let Re = 0; Re < we.length; Re += 1)
        we[Re] && we[Re].m(h, null);
      ot(
        h,
        /*q*/
        l[75].type || "atk"
      ), a(b, w), a(b, k), a(k, A), a(k, y), a(k, E), a(b, O), a(b, C), a(e, T), a(e, N), a(N, I), a(N, M), a(N, G), a(G, L), a(L, U), a(L, z), a(L, F), a(G, W);
      for (let Re = 0; Re < de.length; Re += 1)
        de[Re] && de[Re].m(G, null);
      a(N, H), a(N, V), a(V, J), a(J, j), a(J, X), a(X, Z), a(X, le), a(V, $), a(V, se), a(e, Y), ie = !0, ee || (pe = [
        R(f, "change", Ee),
        R(h, "change", ke),
        R(E, "change", me),
        R(C, "click", re),
        R(I, "change", ye),
        R(F, "click", oe),
        R(se, "click", Oe)
      ], ee = !0);
    },
    p(_e, ue) {
      if (l = _e, (!ie || ue[0] & /*qualities, QUALITY_MODES*/
      4194306 && u !== (u = /*q*/
      l[75].name) && f.value !== u) && (f.value = u), ue[0] & /*QUALITY_MODES*/
      4194304) {
        De = ce(
          /*QUALITY_MODES*/
          l[22]
        );
        let Re;
        for (Re = 0; Re < De.length; Re += 1) {
          const Ce = ap(l, De, Re);
          we[Re] ? we[Re].p(Ce, ue) : (we[Re] = up(Ce), we[Re].c(), we[Re].m(h, null));
        }
        for (; Re < we.length; Re += 1)
          we[Re].d(1);
        we.length = De.length;
      }
      if ((!ie || ue[0] & /*qualities, QUALITY_MODES*/
      4194306 && _ !== (_ = /*q*/
      l[75].type || "atk")) && ot(
        h,
        /*q*/
        l[75].type || "atk"
      ), (!ie || ue[0] & /*qualities, QUALITY_MODES*/
      4194306 && S !== (S = /*q*/
      l[75].level) && E.value !== S) && (E.value = S), (!ie || ue[0] & /*qualities, QUALITY_MODES*/
      4194306 && D !== (D = /*q*/
      l[75].description || "")) && (I.value = D), ue[0] & /*qualities, totalDice*/
      65538 | ue[1] & /*updateCapacity, toggleCapCollapse, removeCapacity*/
      14) {
        be = ce(
          /*q*/
          l[75].capacities || []
        );
        let Re;
        for (Re = 0; Re < be.length; Re += 1) {
          const Ce = lp(l, be, Re);
          de[Re] ? de[Re].p(Ce, ue) : (de[Re] = mp(Ce), de[Re].c(), de[Re].m(G, null));
        }
        for (; Re < de.length; Re += 1)
          de[Re].d(1);
        de.length = be.length;
      }
      (!ie || ue[0] & /*qualities*/
      2) && K !== (K = 2 + /*q*/
      (l[75].level || 0) + "") && te(Z, K);
    },
    i(_e) {
      ie || (_e && Ne(() => {
        ie && (Q || (Q = We(e, yt, {}, !0)), Q.run(1));
      }), ie = !0);
    },
    o(_e) {
      _e && (Q || (Q = We(e, yt, {}, !1)), Q.run(0)), ie = !1;
    },
    d(_e) {
      _e && P(e), Fe(we, _e), Fe(de, _e), _e && Q && Q.end(), ee = !1, Te(pe);
    }
  };
}
function tk(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J, j, X, K, Z, le, $, se, Y, Q, ie, ee, pe, Ee, De, we = (
    /*showThemeSelector*/
    l[11] && np(l)
  ), ke = (
    /*isGM*/
    l[20] && $2(l)
  ), me = ce(Object.keys(
    /*PB_BASE_VALUES*/
    l[21]
  )), re = [];
  for (let be = 0; be < me.length; be += 1)
    re[be] = rp(ip(l, me, be));
  let ye = (
    /*activeTab*/
    l[10] === "geral" && cp(l)
  ), oe = (
    /*activeTab*/
    l[10] === "balanceamento" && dp(l)
  );
  return {
    c() {
      e = r("div"), we && we.c(), t = g(), i = r("header"), n = r("div"), o = r("div"), c = r("img"), u = g(), d = r("div"), d.innerHTML = '<i class="fas fa-edit"></i>', p = g(), m = r("div"), b = r("div"), v = r("div"), h = r("input"), _ = g(), w = r("label"), w.textContent = "NOME DO PODER", k = g(), A = r("span"), y = g(), E = r("button"), E.innerHTML = '<i class="fas fa-cog"></i>', S = g(), ke && ke.c(), O = g(), C = r("div"), T = r("div"), N = r("label"), N.textContent = "CATEGORIA", I = g(), D = r("select"), M = r("option"), M.textContent = "PRINCIPAL (8xp)", G = r("option"), G.textContent = "SECUND√ÅRIO (4xp)", L = r("option"), L.textContent = "HABILIDADE (2xp)", U = g(), z = r("i"), F = g(), W = r("div"), H = r("label"), H.textContent = "RARIDADE", V = g(), J = r("select");
      for (let be = 0; be < re.length; be += 1)
        re[be].c();
      j = g(), X = r("i"), K = g(), Z = r("nav"), le = r("button"), le.textContent = "VIS√ÉO GERAL", $ = g(), se = r("button"), se.textContent = "ENGENHARIA", Y = g(), Q = r("main"), ye && ye.c(), ie = g(), oe && oe.c(), at(c.src, f = /*displayImg*/
      l[18]) || s(c, "src", f), s(
        c,
        "alt",
        /*name*/
        l[17]
      ), s(c, "class", "svelte-1wwn3nb"), s(d, "class", "avatar-overlay svelte-1wwn3nb"), s(o, "class", "avatar-frame svelte-1wwn3nb"), s(n, "class", "profile-section svelte-1wwn3nb"), s(h, "type", "text"), h.value = /*name*/
      l[17], s(h, "placeholder", " "), s(h, "class", "svelte-1wwn3nb"), s(w, "class", "svelte-1wwn3nb"), s(A, "class", "bar svelte-1wwn3nb"), s(v, "class", "input-group grow svelte-1wwn3nb"), s(E, "class", "icon-btn svelte-1wwn3nb"), s(E, "title", "Configurar Tema"), s(b, "class", "title-row svelte-1wwn3nb"), s(N, "class", "svelte-1wwn3nb"), M.__value = "principal", x(M, M.__value), G.__value = "secundario", x(G, G.__value), L.__value = "habilidade", x(L, L.__value), s(D, "class", "svelte-1wwn3nb"), s(z, "class", "fas fa-chevron-down arrow svelte-1wwn3nb"), s(T, "class", "custom-select grow svelte-1wwn3nb"), s(H, "class", "svelte-1wwn3nb"), s(J, "class", "svelte-1wwn3nb"), s(X, "class", "fas fa-chevron-down arrow svelte-1wwn3nb"), s(W, "class", "custom-select grow svelte-1wwn3nb"), s(C, "class", "meta-row svelte-1wwn3nb"), s(m, "class", "info-section svelte-1wwn3nb"), s(i, "class", "sheet-header svelte-1wwn3nb"), s(le, "class", "svelte-1wwn3nb"), he(
        le,
        "active",
        /*activeTab*/
        l[10] === "geral"
      ), s(se, "class", "svelte-1wwn3nb"), he(
        se,
        "active",
        /*activeTab*/
        l[10] === "balanceamento"
      ), s(Z, "class", "sheet-nav svelte-1wwn3nb"), s(Q, "class", "sheet-content svelte-1wwn3nb"), s(e, "class", "rpg-sheet-root svelte-1wwn3nb"), s(e, "style", ee = Object.entries(
        /*activeTheme*/
        l[19].vars
      ).map(vp).join(";"));
    },
    m(be, de) {
      q(be, e, de), we && we.m(e, null), a(e, t), a(e, i), a(i, n), a(n, o), a(o, c), a(o, u), a(o, d), a(i, p), a(i, m), a(m, b), a(b, v), a(v, h), a(v, _), a(v, w), a(v, k), a(v, A), a(b, y), a(b, E), a(b, S), ke && ke.m(b, null), a(m, O), a(m, C), a(C, T), a(T, N), a(T, I), a(T, D), a(D, M), a(D, G), a(D, L), ot(
        D,
        /*category*/
        l[2]
      ), a(T, U), a(T, z), a(C, F), a(C, W), a(W, H), a(W, V), a(W, J);
      for (let Oe = 0; Oe < re.length; Oe += 1)
        re[Oe] && re[Oe].m(J, null);
      ot(
        J,
        /*rarity*/
        l[3]
      ), a(W, j), a(W, X), a(e, K), a(e, Z), a(Z, le), a(Z, $), a(Z, se), a(e, Y), a(e, Q), ye && ye.m(Q, null), a(Q, ie), oe && oe.m(Q, null), pe = !0, Ee || (De = [
        R(
          d,
          "click",
          /*pickLibraryImage*/
          l[26]
        ),
        R(
          h,
          "change",
          /*change_handler*/
          l[46]
        ),
        R(
          E,
          "click",
          /*click_handler_2*/
          l[47]
        ),
        R(
          D,
          "change",
          /*change_handler_1*/
          l[49]
        ),
        R(
          J,
          "change",
          /*change_handler_2*/
          l[50]
        ),
        R(
          le,
          "click",
          /*click_handler_4*/
          l[51]
        ),
        R(
          se,
          "click",
          /*click_handler_5*/
          l[52]
        )
      ], Ee = !0);
    },
    p(be, de) {
      if (/*showThemeSelector*/
      be[11] ? we ? (we.p(be, de), de[0] & /*showThemeSelector*/
      2048 && ne(we, 1)) : (we = np(be), we.c(), ne(we, 1), we.m(e, t)) : we && ($e(), Ae(we, 1, 1, () => {
        we = null;
      }), et()), (!pe || de[0] & /*displayImg*/
      262144 && !at(c.src, f = /*displayImg*/
      be[18])) && s(c, "src", f), (!pe || de[0] & /*name*/
      131072) && s(
        c,
        "alt",
        /*name*/
        be[17]
      ), (!pe || de[0] & /*name*/
      131072 && h.value !== /*name*/
      be[17]) && (h.value = /*name*/
      be[17]), /*isGM*/
      be[20] && ke.p(be, de), (!pe || de[0] & /*category*/
      4) && ot(
        D,
        /*category*/
        be[2]
      ), de[0] & /*PB_BASE_VALUES*/
      2097152) {
        me = ce(Object.keys(
          /*PB_BASE_VALUES*/
          be[21]
        ));
        let Oe;
        for (Oe = 0; Oe < me.length; Oe += 1) {
          const _e = ip(be, me, Oe);
          re[Oe] ? re[Oe].p(_e, de) : (re[Oe] = rp(_e), re[Oe].c(), re[Oe].m(J, null));
        }
        for (; Oe < re.length; Oe += 1)
          re[Oe].d(1);
        re.length = me.length;
      }
      (!pe || de[0] & /*rarity, PB_BASE_VALUES*/
      2097160) && ot(
        J,
        /*rarity*/
        be[3]
      ), (!pe || de[0] & /*activeTab*/
      1024) && he(
        le,
        "active",
        /*activeTab*/
        be[10] === "geral"
      ), (!pe || de[0] & /*activeTab*/
      1024) && he(
        se,
        "active",
        /*activeTab*/
        be[10] === "balanceamento"
      ), /*activeTab*/
      be[10] === "geral" ? ye ? (ye.p(be, de), de[0] & /*activeTab*/
      1024 && ne(ye, 1)) : (ye = cp(be), ye.c(), ne(ye, 1), ye.m(Q, ie)) : ye && (ye.d(1), ye = null), /*activeTab*/
      be[10] === "balanceamento" ? oe ? (oe.p(be, de), de[0] & /*activeTab*/
      1024 && ne(oe, 1)) : (oe = dp(be), oe.c(), ne(oe, 1), oe.m(Q, null)) : oe && ($e(), Ae(oe, 1, 1, () => {
        oe = null;
      }), et()), (!pe || de[0] & /*activeTheme*/
      524288 && ee !== (ee = Object.entries(
        /*activeTheme*/
        be[19].vars
      ).map(vp).join(";"))) && s(e, "style", ee);
    },
    i(be) {
      pe || (ne(we), ne(ye), ne(oe), pe = !0);
    },
    o(be) {
      Ae(we), Ae(oe), pe = !1;
    },
    d(be) {
      be && P(e), we && we.d(), ke && ke.d(), Fe(re, be), ye && ye.d(), oe && oe.d(), Ee = !1, Te(De);
    }
  };
}
const lk = "multiversus-rpg", vp = ([l, e]) => `${l}:${e}`;
function ak(l, e, t) {
  var Tt;
  let i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, { item: I } = e, { application: D } = e, { flags: M = ((Tt = I.flags) == null ? void 0 : Tt["multiversus-rpg"]) || {} } = e;
  const G = game.user.isGM, L = {
    principal: 8,
    secundario: 4,
    habilidade: 2
  }, U = {
    Comum: 2,
    Raro: 4,
    Lend√°rio: 8,
    M√≠tico: 12,
    Universal: 16,
    Multiversal: 32
  }, z = {
    principal: 1,
    secundario: 0.5,
    habilidade: 0.25
  }, F = [
    { id: "atk", label: "ATAQUE" },
    { id: "def", label: "DEFESA" },
    { id: "util", label: "UTILIDADE" }
  ];
  let W = "geral", H = !1;
  async function V(ze, it) {
    await I.update({ [`flags.${lk}.${ze}`]: it });
  }
  async function J(ze) {
    await I.update({ "system.notes": ze });
  }
  async function j(ze, it) {
    let Ze = { ...h };
    Ze[ze] = parseInt(it) || 0, await V("dice", Ze);
  }
  function X() {
    new FilePicker({
      type: "image",
      current: I.img,
      callback: (ze) => I.update({ img: ze })
    }).render(!0);
  }
  async function K(ze) {
    await V("themeKey", ze), t(11, H = !1);
  }
  async function Z() {
    const ze = {
      name: "Nova Sub-rotina",
      type: "atk",
      level: 0,
      description: "",
      extras: [],
      capacities: [
        {
          type: "mass",
          nul: 0,
          booster: 0,
          collapsed: !1
        }
      ],
      collapsed: !1
    };
    await V("qualities", [...p, ze]);
  }
  async function le(ze) {
    const it = p.filter((Ze, ut) => ut !== ze);
    await V("qualities", it);
  }
  async function $(ze, it, Ze) {
    const ut = JSON.parse(JSON.stringify(p));
    ut[ze][it] = Ze, await V("qualities", ut);
  }
  async function se(ze) {
    const it = JSON.parse(JSON.stringify(p));
    it[ze].capacities || (it[ze].capacities = []), it[ze].capacities.push({
      type: "mass",
      nul: 0,
      booster: 0,
      collapsed: !1
    }), await V("qualities", it);
  }
  async function Y(ze, it) {
    const Ze = JSON.parse(JSON.stringify(p));
    Ze[ze].capacities && Ze[ze].capacities.length > it && (Ze[ze].capacities.splice(it, 1), await V("qualities", Ze));
  }
  async function Q(ze, it, Ze, ut) {
    const Be = JSON.parse(JSON.stringify(p));
    Be[ze].capacities && Be[ze].capacities[it] && (Be[ze].capacities[it][Ze] = ut, await V("qualities", Be));
  }
  async function ie(ze, it) {
    const Ze = JSON.parse(JSON.stringify(p));
    Ze[ze].capacities && Ze[ze].capacities[it] && (Ze[ze].capacities[it].collapsed = !Ze[ze].capacities[it].collapsed, await V("qualities", Ze));
  }
  function ee(ze) {
    new F0(I, ze).render(!0);
  }
  const pe = (ze) => K(ze), Ee = () => t(11, H = !1), De = (ze) => I.update({ name: ze.target.value }), we = () => t(11, H = !H), ke = () => V("isInitial", !v), me = (ze) => V("category", ze.target.value), re = (ze) => V("rarity", ze.target.value), ye = () => t(10, W = "geral"), oe = () => t(10, W = "balanceamento"), be = (ze) => j("normal", ze.target.value), de = (ze) => j("hard", ze.target.value), Oe = (ze) => j("wiggle", ze.target.value), _e = (ze) => J(ze.target.value), ue = (ze, it) => $(ze, "name", it.target.value), Re = (ze, it) => $(ze, "type", it.target.value), Ce = (ze, it) => $(ze, "level", +it.target.value), He = (ze) => le(ze), Ge = (ze, it) => $(ze, "description", it.target.value), Xe = (ze) => se(ze), fe = (ze, it) => it.id === ze.type, Le = (ze, it) => Y(ze, it), qe = (ze, it) => ie(ze, it), Me = (ze, it, Ze) => Q(ze, it, "type", Ze.target.value), Se = (ze, it, Ze) => Q(ze, it, "nul", Math.max(0, (Ze.nul || 0) - 1)), ve = (ze, it, Ze) => Q(ze, it, "nul", (Ze.nul || 0) + 1), Ue = (ze, it, Ze) => Q(ze, it, "booster", Math.max(0, (Ze.booster || 0) - 1)), Ve = (ze, it, Ze) => Q(ze, it, "booster", (Ze.booster || 0) + 1), rt = (ze) => ee(ze);
  return l.$$set = (ze) => {
    "item" in ze && t(0, I = ze.item), "application" in ze && t(36, D = ze.application), "flags" in ze && t(37, M = ze.flags);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*item*/
    1 && t(42, i = I.system || {}), l.$$.dirty[1] & /*flags*/
    64 && t(9, n = M.themeKey || "neon-operator"), l.$$.dirty[0] & /*currentThemeKey*/
    512 && t(19, o = Hi[n] || Hi["neon-operator"]), l.$$.dirty[0] & /*item*/
    1 && t(43, c = I.img), l.$$.dirty[1] & /*flags*/
    64 && t(38, f = M.customUrl || ""), l.$$.dirty[1] & /*customUrl, libraryImg*/
    4224 && t(18, u = f || c), l.$$.dirty[0] & /*item*/
    1 && t(17, d = I.name), l.$$.dirty[1] & /*flags*/
    64 && t(1, p = M.qualities || []), l.$$.dirty[1] & /*flags*/
    64 && t(3, m = M.rarity || "Comum"), l.$$.dirty[1] & /*flags*/
    64 && t(2, b = M.category || "principal"), l.$$.dirty[1] & /*flags*/
    64 && t(5, v = M.isInitial || !1), l.$$.dirty[1] & /*flags*/
    64 && t(39, h = M.dice || {}), l.$$.dirty[1] & /*diceData*/
    256 && t(8, _ = h.normal || 0), l.$$.dirty[1] & /*diceData*/
    256 && t(7, w = h.hard || 0), l.$$.dirty[1] & /*diceData*/
    256 && t(6, k = h.wiggle || 0), l.$$.dirty[0] & /*diceNormal, diceHard, diceWiggle*/
    448 && t(16, A = _ + w + k), l.$$.dirty[1] & /*system*/
    2048 && t(15, y = i.notes || ""), l.$$.dirty[0] & /*category*/
    4 && t(41, E = L[b] || 8), l.$$.dirty[0] & /*diceNormal, diceHard, diceWiggle*/
    448 | l.$$.dirty[1] & /*baseCost*/
    1024 && t(4, S = _ * E + w * E * 2 + k * E * 4), l.$$.dirty[0] & /*isInitial*/
    32 | l.$$.dirty[1] & /*baseCost*/
    1024 && t(40, O = v ? 4 * E : 0), l.$$.dirty[0] & /*rawXpCost*/
    16 | l.$$.dirty[1] & /*discount*/
    512 && t(14, C = Math.max(0, S - O)), l.$$.dirty[0] & /*rarity, category*/
    12 && t(13, T = Math.floor((U[m] || 2) * (z[b] || 1))), l.$$.dirty[0] & /*qualities*/
    2 && t(12, N = p.reduce(
      (ze, it) => {
        const Ze = (it.extras || []).reduce((ut, Be) => ut + (Be.cost || 0) * (Be.qty || 1), 0);
        return ze + 2 + (it.level || 0) + Ze;
      },
      0
    ));
  }, [
    I,
    p,
    b,
    m,
    S,
    v,
    k,
    w,
    _,
    n,
    W,
    H,
    N,
    T,
    C,
    y,
    A,
    d,
    u,
    o,
    G,
    U,
    F,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    D,
    M,
    f,
    h,
    O,
    E,
    i,
    c,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re,
    Ce,
    He,
    Ge,
    Xe,
    fe,
    Le,
    qe,
    Me,
    Se,
    ve,
    Ue,
    Ve,
    rt
  ];
}
class ik extends mt {
  constructor(e) {
    super(), pt(this, e, ak, tk, dt, { item: 0, application: 36, flags: 37 }, null, [-1, -1, -1, -1]);
  }
}
class sk extends ItemSheet {
  constructor(e, t = {}) {
    super(e, t), this.component = null;
  }
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      classes: ["multiversus", "sheet", "item"],
      width: 850,
      height: 750,
      resizable: !0,
      template: "modules/multiversus-rpg/templates/power-sheet.html",
      submitOnClose: !1,
      submitOnChange: !1,
      closeOnSubmit: !1
    });
  }
  /** @override */
  async _render(e, t) {
    if (!e && this.component) {
      const n = this.document.flags["multiversus-rpg"] || {};
      this.component.$set({
        item: this.document,
        flags: { ...n },
        // Clona para for√ßar o Svelte a ver a mudan√ßa
        application: this
      }), this.element.find(".window-title").text(this.title);
      return;
    }
    await super._render(e, t);
    const i = this.element.find(".window-content")[0];
    if (i) {
      i.innerHTML = "", i.style.padding = "0", i.style.overflow = "hidden", i.style.height = "100%", this.component && this.component.$destroy();
      const n = this.document.flags["multiversus-rpg"] || {};
      this.component = new ik({
        target: i,
        props: {
          item: this.document,
          flags: { ...n },
          // Passa flags desde o in√≠cio
          application: this
        }
      });
    }
  }
  /** @override */
  async close(e = {}) {
    return this.component && (this.component.$destroy(), this.component = null), super.close(e);
  }
}
class mi {
  static init() {
    console.log("MULTIVERSUS DB | Sistema de Persist√™ncia Global Ativo"), window.addEventListener("beforeunload", () => {
      this.flush();
    });
  }
  /**
   * Fun√ß√£o M√°gica de Salvamento
   * @param {Document} doc - O Ator ou Item
   * @param {String} path - O caminho (ex: "survival.bio.fome")
   * @param {Any} value - O valor
   * @param {Boolean} force - Se true, salva agora (bot√µes). Se false, espera parar de digitar.
   */
  static async scheduleUpdate(e, t, i, n = !1) {
    if (!e || !e.id) return;
    const c = ["name", "img", "folder", "sort", "ownership", "prototypeToken"].includes(t.split(".")[0]) ? t : `system.${t}`;
    if (n) {
      await e.update({ [c]: i });
      return;
    }
    const f = e.id;
    this._queue[f] || (this._queue[f] = { doc: e, updates: {} }), this._queue[f].updates[c] = i, this._timers[f] && clearTimeout(this._timers[f]), this._timers[f] = setTimeout(() => {
      this._commit(f);
    }, 800);
  }
  static async _commit(e) {
    if (!this._queue[e]) return;
    const { doc: t, updates: i } = this._queue[e];
    delete this._queue[e], delete this._timers[e];
    try {
      await t.update(i), console.log(`[DB] Auto-Save ${t.name}:`, i);
    } catch (n) {
      console.error("[DB] Falha ao salvar:", n);
    }
  }
  static async flush() {
    for (const e of Object.keys(this._queue))
      await this._commit(e);
  }
}
yl(mi, "_queue", {}), yl(mi, "_timers", {});
const na = "multiversus-rpg";
Hooks.once("init", () => {
  game.settings.register(na, "webhookShop", { name: "Discord: Canal do Mercado", scope: "world", config: !0, type: String, default: "" }), game.settings.register(na, "webhookBank", { name: "Discord: Canal do Caixa", scope: "world", config: !0, type: String, default: "" }), game.settings.register(na, "webhookStatus", { name: "Discord: Canal de Status", scope: "world", config: !0, type: String, default: "" }), game.settings.register(na, "webhookSecurity", { name: "Discord: Logs de Seguran√ßa", scope: "world", config: !0, type: String, default: "" });
});
async function Aa(l, e, t, i, n = []) {
  let o = "";
  l === "shop" && (o = game.settings.get(na, "webhookShop")), l === "bank" && (o = game.settings.get(na, "webhookBank")), l === "status" && (o = game.settings.get(na, "webhookStatus")), l === "security" && (o = game.settings.get(na, "webhookSecurity")), o && fetch(o, {
    method: "POST",
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({
      username: "Nexus OS",
      avatar_url: "https://i.imgur.com/SEU_ICON.png",
      embeds: [{
        title: e,
        description: t,
        color: i,
        fields: n,
        footer: { text: `Registro Oficial ‚Ä¢ ${(/* @__PURE__ */ new Date()).toLocaleTimeString()}` }
      }]
    })
  });
}
Hooks.on("nexusStoreItemAdded", (l) => {
  if (!game.user.isGM) return;
  const e = l.system.stock === -1 ? "Infinito" : l.system.stock;
  Aa(
    "shop",
    "üõí Nova Oferta Dispon√≠vel",
    `**${l.name}** foi adicionado ao cat√°logo.`,
    16766720,
    [{ name: "Pre√ßo", value: `${l.price} MC`, inline: !0 }, { name: "Estoque", value: String(e), inline: !0 }]
  );
});
Hooks.on("nexusTransaction", (l, e) => {
  game.user.id === l.id && Aa(
    "bank",
    "üí∏ Transa√ß√£o Aprovada",
    "Compra registrada no sistema.",
    5763719,
    [{ name: "Cliente", value: l.name, inline: !0 }, { name: "Produto", value: e.name, inline: !0 }, { name: "Valor", value: `-${e.price} MC`, inline: !0 }]
  );
});
Hooks.on("nexusItemActivated", (l, e) => {
  game.user.id === e.id && Aa("status", "‚ö° Protocolo de Renderiza√ß√£o", `**${e.name}** ativou: **${l.name}**.`, 3447003);
});
Hooks.on("updateScene", (l, e) => {
  e.active === !0 && game.user.isGM && Aa("status", "üåç Atualiza√ß√£o de Local", `Entrando em: **${l.name}**.`, 3447003);
});
Hooks.on("nexusXPGain", (l, e, t, i) => {
  Aa(
    "security",
    "üìà Evolu√ß√£o Registrada (XP)",
    `O usu√°rio **${l.name}** recebeu experi√™ncia.`,
    10181046,
    // Roxo
    [
      { name: "Valor", value: `+${e} XP`, inline: !0 },
      { name: "Motivo", value: t, inline: !0 },
      { name: "Novo Total", value: String(i), inline: !0 }
    ]
  );
});
Hooks.on("nexusPointSpent", (l, e, t, i, n) => {
  const o = i > 0, c = o ? `üìâ Investimento: ${e}` : `‚ôªÔ∏è Reembolso: ${e}`, f = o ? `**${l}** investiu pontos.` : `**${l}** recuperou pontos.`;
  Aa("security", c, f, o ? 15105570 : 3066993, [
    { name: "Detalhe", value: t, inline: !0 },
    // Ex: "Corpo (Normal): 4 ‚ûî 5"
    { name: "Custo", value: `${Math.abs(i)} Pontos`, inline: !0 },
    { name: "Saldo Dispon√≠vel", value: `${n}`, inline: !0 }
  ]);
});
Hooks.on("updateActor", (l, e, t, i) => {
  if (game.user.id !== i) return;
  const n = foundry.utils.getProperty(e, "system.xp");
  if (n !== void 0) {
    const o = l.system.xp || 0, c = n - o;
    c !== 0 && Aa(
      "security",
      "‚ö†Ô∏è Altera√ß√£o Manual de XP",
      `**${l.name}** editou o XP diretamente na ficha.`,
      15158332,
      // Vermelho
      [
        { name: "Mudan√ßa", value: `${o} ‚ûî ${n}`, inline: !0 },
        { name: "Diferen√ßa", value: `${c > 0 ? "+" : ""}${c}`, inline: !0 }
      ]
    );
  }
});
const nl = {
  default: {
    id: "default",
    label: "Nexus Green",
    colors: {
      primary: "#00ff41",
      bg: "radial-gradient(circle at center, #111 0%, #000 90%)",
      text: "#fff"
    },
    minigame: "star",
    // Define qual minigame carrega
    font: "'Share Tech Mono', monospace"
  },
  red_protocol: {
    id: "red_protocol",
    label: "Red Protocol",
    colors: {
      primary: "#ff3333",
      bg: "radial-gradient(circle at center, #220000 0%, #000 90%)",
      text: "#ffcccc"
    },
    minigame: "star",
    font: "'Courier New', monospace"
  },
  cyber_blue: {
    id: "cyber_blue",
    label: "Cyber Blue",
    colors: {
      primary: "#00bfff",
      bg: "radial-gradient(circle at center, #001122 0%, #000 90%)",
      text: "#e0ffff"
    },
    minigame: "star",
    // Poderia ser outro no futuro
    font: "'Segoe UI', sans-serif"
  }
};
function nk(l) {
  let e, t;
  return {
    c() {
      e = r("div"), e.textContent = "INFORMA√á√ÇO FORNECIDA AO SR VOLHEIM", s(e, "class", "success-msg svelte-5ieaar");
    },
    m(i, n) {
      q(i, e, n);
    },
    p: ge,
    i(i) {
      i && (t || Ne(() => {
        t = st(e, Mt, {}), t.start();
      }));
    },
    o: ge,
    d(i) {
      i && P(e);
    }
  };
}
function ok(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), e.innerHTML = 'PROTOCOLO: PEGUE A ESTRELA<br/> <span style="font-size: 0.7em; opacity: 0.7;">INTERCEPTE O SINAL DA LOCALIZA√á√ÇO DA ESTRELA</span>', i = g(), n = r("button"), o = r("i"), s(e, "class", "instructions svelte-5ieaar"), s(o, "class", "fas fa-star"), s(n, "class", "the-star svelte-5ieaar"), ae(
        n,
        "left",
        /*starX*/
        l[1] + "%"
      ), ae(
        n,
        "top",
        /*starY*/
        l[2] + "%"
      ), ae(
        n,
        "--theme",
        /*themeColor*/
        l[0]
      ), ae(
        n,
        "transition",
        /*attempts*/
        l[3] > 5 ? "0.5s" : "0.1s"
      );
    },
    m(p, m) {
      q(p, e, m), q(p, i, m), q(p, n, m), a(n, o), f = !0, u || (d = [
        R(
          n,
          "mouseenter",
          /*runAway*/
          l[5]
        ),
        R(
          n,
          "click",
          /*catchStar*/
          l[6]
        )
      ], u = !0);
    },
    p(p, m) {
      (!f || m & /*starX*/
      2) && ae(
        n,
        "left",
        /*starX*/
        p[1] + "%"
      ), (!f || m & /*starY*/
      4) && ae(
        n,
        "top",
        /*starY*/
        p[2] + "%"
      ), (!f || m & /*themeColor*/
      1) && ae(
        n,
        "--theme",
        /*themeColor*/
        p[0]
      ), (!f || m & /*attempts*/
      8) && ae(
        n,
        "transition",
        /*attempts*/
        p[3] > 5 ? "0.5s" : "0.1s"
      );
    },
    i(p) {
      f || (p && (t || Ne(() => {
        t = st(e, Qe, {}), t.start();
      })), p && Ne(() => {
        f && (c || (c = We(n, Mt, {}, !0)), c.run(1));
      }), f = !0);
    },
    o(p) {
      p && (c || (c = We(n, Mt, {}, !1)), c.run(0)), f = !1;
    },
    d(p) {
      p && (P(e), P(i), P(n)), p && c && c.end(), u = !1, Te(d);
    }
  };
}
function rk(l) {
  let e, t, i, n, o;
  const c = [ok, nk], f = [];
  function u(d, p) {
    return (
      /*isCaught*/
      d[4] ? 1 : 0
    );
  }
  return t = u(l), i = f[t] = c[t](l), {
    c() {
      e = r("div"), i.c(), s(e, "class", "minigame-area svelte-5ieaar");
    },
    m(d, p) {
      q(d, e, p), f[t].m(e, null), n || (o = R(
        e,
        "mousemove",
        /*runAway*/
        l[5]
      ), n = !0);
    },
    p(d, [p]) {
      let m = t;
      t = u(d), t === m ? f[t].p(d, p) : ($e(), Ae(f[m], 1, 1, () => {
        f[m] = null;
      }), et(), i = f[t], i ? i.p(d, p) : (i = f[t] = c[t](d), i.c()), ne(i, 1), i.m(e, null));
    },
    i(d) {
      ne(i);
    },
    o(d) {
      Ae(i);
    },
    d(d) {
      d && P(e), f[t].d(), n = !1, o();
    }
  };
}
function ck(l, e, t) {
  let { themeColor: i = "#00ff41" } = e;
  const n = ml();
  let o = 50, c = 50, f = 0, u = !1;
  function d() {
    u || (t(3, f++, f), !(f > 5) && (t(1, o = Math.random() * 80 + 10), t(2, c = Math.random() * 80 + 10)));
  }
  function p() {
    t(4, u = !0), setTimeout(
      () => {
        n("win");
      },
      800
    );
  }
  return l.$$set = (m) => {
    "themeColor" in m && t(0, i = m.themeColor);
  }, [i, o, c, f, u, d, p];
}
class fk extends mt {
  constructor(e) {
    super(), pt(this, e, ck, rk, dt, { themeColor: 0 });
  }
}
function hp(l, e, t) {
  const i = l.slice();
  return i[68] = e[t], i[70] = t, i;
}
function gp(l, e, t) {
  const i = l.slice();
  return i[71] = e[t], i[70] = t, i;
}
function _p(l, e, t) {
  const i = l.slice();
  return i[73] = e[t], i[70] = t, i;
}
function kp(l, e, t) {
  const i = l.slice();
  return i[68] = e[t], i[75] = e, i[70] = t, i;
}
function wp(l, e, t) {
  const i = l.slice();
  return i[71] = e[t], i[76] = e, i[70] = t, i;
}
function yp(l, e, t) {
  const i = l.slice();
  return i[73] = e[t], i[77] = e, i[70] = t, i;
}
function Ap(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T = (
    /*editTab*/
    l[7] === "meta" && Ep(l)
  ), N = (
    /*editTab*/
    l[7] === "cards" && Op(l)
  ), I = (
    /*editTab*/
    l[7] === "stats" && Ip(l)
  ), D = (
    /*editTab*/
    l[7] === "trends" && Rp(l)
  );
  return E = new vs({
    props: { data: (
      /*data*/
      l[0]
    ), mode: "view" }
  }), {
    c() {
      e = r("div"), t = r("aside"), i = r("div"), n = r("button"), n.textContent = "GERAL", o = g(), c = r("button"), c.textContent = "NOT√çCIAS", f = g(), u = r("button"), u.textContent = "DADOS", d = g(), p = r("button"), p.textContent = "TRENDS", m = g(), b = r("div"), T && T.c(), v = g(), N && N.c(), h = g(), I && I.c(), _ = g(), D && D.c(), w = g(), k = r("div"), A = r("div"), A.textContent = "PREVIEW AO VIVO", y = g(), kt(E.$$.fragment), s(n, "class", "svelte-4e5teb"), he(
        n,
        "active",
        /*editTab*/
        l[7] === "meta"
      ), s(c, "class", "svelte-4e5teb"), he(
        c,
        "active",
        /*editTab*/
        l[7] === "cards"
      ), s(u, "class", "svelte-4e5teb"), he(
        u,
        "active",
        /*editTab*/
        l[7] === "stats"
      ), s(p, "class", "svelte-4e5teb"), he(
        p,
        "active",
        /*editTab*/
        l[7] === "trends"
      ), s(i, "class", "editor-tabs svelte-4e5teb"), s(b, "class", "editor-content svelte-4e5teb"), s(t, "class", "editor-sidebar custom-scroll svelte-4e5teb"), s(A, "class", "preview-label svelte-4e5teb"), s(k, "class", "editor-preview custom-scroll svelte-4e5teb"), s(e, "class", "editor-layout svelte-4e5teb");
    },
    m(M, G) {
      q(M, e, G), a(e, t), a(t, i), a(i, n), a(i, o), a(i, c), a(i, f), a(i, u), a(i, d), a(i, p), a(t, m), a(t, b), T && T.m(b, null), a(b, v), N && N.m(b, null), a(b, h), I && I.m(b, null), a(b, _), D && D.m(b, null), a(e, w), a(e, k), a(k, A), a(k, y), ht(E, k, null), S = !0, O || (C = [
        R(
          n,
          "click",
          /*click_handler_1*/
          l[24]
        ),
        R(
          c,
          "click",
          /*click_handler_2*/
          l[25]
        ),
        R(
          u,
          "click",
          /*click_handler_3*/
          l[26]
        ),
        R(
          p,
          "click",
          /*click_handler_4*/
          l[27]
        )
      ], O = !0);
    },
    p(M, G) {
      (!S || G[0] & /*editTab*/
      128) && he(
        n,
        "active",
        /*editTab*/
        M[7] === "meta"
      ), (!S || G[0] & /*editTab*/
      128) && he(
        c,
        "active",
        /*editTab*/
        M[7] === "cards"
      ), (!S || G[0] & /*editTab*/
      128) && he(
        u,
        "active",
        /*editTab*/
        M[7] === "stats"
      ), (!S || G[0] & /*editTab*/
      128) && he(
        p,
        "active",
        /*editTab*/
        M[7] === "trends"
      ), /*editTab*/
      M[7] === "meta" ? T ? T.p(M, G) : (T = Ep(M), T.c(), T.m(b, v)) : T && (T.d(1), T = null), /*editTab*/
      M[7] === "cards" ? N ? N.p(M, G) : (N = Op(M), N.c(), N.m(b, h)) : N && (N.d(1), N = null), /*editTab*/
      M[7] === "stats" ? I ? I.p(M, G) : (I = Ip(M), I.c(), I.m(b, _)) : I && (I.d(1), I = null), /*editTab*/
      M[7] === "trends" ? D ? D.p(M, G) : (D = Rp(M), D.c(), D.m(b, null)) : D && (D.d(1), D = null);
      const L = {};
      G[0] & /*data*/
      1 && (L.data = /*data*/
      M[0]), E.$set(L);
    },
    i(M) {
      S || (ne(E.$$.fragment, M), S = !0);
    },
    o(M) {
      Ae(E.$$.fragment, M), S = !1;
    },
    d(M) {
      M && P(e), T && T.d(), N && N.d(), I && I.d(), D && D.d(), gt(E), O = !1, Te(C);
    }
  };
}
function Ep(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J;
  return {
    c() {
      e = r("h3"), e.textContent = "CONFIGURA√á√ïES GERAIS", t = g(), i = r("label"), n = r("span"), n.textContent = "Edi√ß√£o (Topo):", o = g(), c = r("input"), f = g(), u = r("label"), d = r("span"), d.textContent = "Data / Dia Atual:", p = g(), m = r("input"), b = g(), v = r("label"), h = B("Status do Mundo: "), _ = r("input"), w = g(), k = r("div"), A = r("label"), y = r("strong"), y.textContent = "üñºÔ∏è Imagem de Capa (Hero Banner):", E = g(), S = r("input"), O = g(), C = r("label"), T = r("strong"), T.textContent = "üéµ M√∫sica (YouTube/MP3):", N = g(), I = r("input"), D = g(), M = r("div"), G = r("label"), L = B("Cor Principal: "), U = r("input"), z = g(), F = r("label"), W = B("Cor Secund√°ria: "), H = r("input"), s(e, "class", "svelte-4e5teb"), ae(n, "color", "var(--theme-color)"), s(c, "type", "text"), s(c, "class", "svelte-4e5teb"), s(i, "class", "svelte-4e5teb"), ae(d, "color", "var(--theme-color)"), s(m, "type", "text"), s(m, "placeholder", "Ex: 01/06/01"), s(m, "class", "svelte-4e5teb"), s(u, "class", "svelte-4e5teb"), s(_, "type", "text"), s(_, "class", "svelte-4e5teb"), s(v, "class", "svelte-4e5teb"), s(S, "type", "text"), s(S, "placeholder", "Cole a URL da imagem destaque..."), s(S, "class", "svelte-4e5teb"), s(A, "class", "svelte-4e5teb"), s(I, "type", "text"), s(I, "placeholder", "Cole o link do √°udio/v√≠deo..."), s(I, "class", "svelte-4e5teb"), ae(C, "margin-top", "10px"), s(C, "class", "svelte-4e5teb"), s(k, "class", "highlight-box svelte-4e5teb"), s(U, "type", "color"), s(U, "class", "svelte-4e5teb"), s(G, "class", "svelte-4e5teb"), s(H, "type", "color"), s(H, "class", "svelte-4e5teb"), s(F, "class", "svelte-4e5teb"), s(M, "class", "color-pickers");
    },
    m(j, X) {
      q(j, e, X), q(j, t, X), q(j, i, X), a(i, n), a(i, o), a(i, c), x(
        c,
        /*data*/
        l[0].edition
      ), q(j, f, X), q(j, u, X), a(u, d), a(u, p), a(u, m), x(
        m,
        /*data*/
        l[0].date
      ), q(j, b, X), q(j, v, X), a(v, h), a(v, _), x(
        _,
        /*data*/
        l[0].status
      ), q(j, w, X), q(j, k, X), a(k, A), a(A, y), a(A, E), a(A, S), x(
        S,
        /*data*/
        l[0].coverImage
      ), a(k, O), a(k, C), a(C, T), a(C, N), a(C, I), x(
        I,
        /*data*/
        l[0].audio
      ), q(j, D, X), q(j, M, X), a(M, G), a(G, L), a(G, U), x(
        U,
        /*data*/
        l[0].themeColor
      ), a(M, z), a(M, F), a(F, W), a(F, H), x(
        H,
        /*data*/
        l[0].matrixColor
      ), V || (J = [
        R(
          c,
          "input",
          /*input0_input_handler*/
          l[28]
        ),
        R(
          m,
          "input",
          /*input1_input_handler*/
          l[29]
        ),
        R(
          _,
          "input",
          /*input2_input_handler*/
          l[30]
        ),
        R(
          S,
          "input",
          /*input3_input_handler*/
          l[31]
        ),
        R(
          I,
          "input",
          /*input4_input_handler*/
          l[32]
        ),
        R(
          U,
          "input",
          /*input5_input_handler*/
          l[33]
        ),
        R(
          H,
          "input",
          /*input6_input_handler*/
          l[34]
        )
      ], V = !0);
    },
    p(j, X) {
      X[0] & /*data*/
      1 && c.value !== /*data*/
      j[0].edition && x(
        c,
        /*data*/
        j[0].edition
      ), X[0] & /*data*/
      1 && m.value !== /*data*/
      j[0].date && x(
        m,
        /*data*/
        j[0].date
      ), X[0] & /*data*/
      1 && _.value !== /*data*/
      j[0].status && x(
        _,
        /*data*/
        j[0].status
      ), X[0] & /*data*/
      1 && S.value !== /*data*/
      j[0].coverImage && x(
        S,
        /*data*/
        j[0].coverImage
      ), X[0] & /*data*/
      1 && I.value !== /*data*/
      j[0].audio && x(
        I,
        /*data*/
        j[0].audio
      ), X[0] & /*data*/
      1 && x(
        U,
        /*data*/
        j[0].themeColor
      ), X[0] & /*data*/
      1 && x(
        H,
        /*data*/
        j[0].matrixColor
      );
    },
    d(j) {
      j && (P(e), P(t), P(i), P(f), P(u), P(b), P(v), P(w), P(k), P(D), P(M)), V = !1, Te(J);
    }
  };
}
function Op(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*data*/
    l[0].cards
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = Cp(yp(l, u, p));
  return {
    c() {
      e = r("h3"), t = B("MANCHETES "), i = r("button"), i.textContent = "+", n = g();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      o = Pt(), s(i, "class", "mini-add svelte-4e5teb"), s(e, "class", "svelte-4e5teb");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), q(p, n, m);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(p, m);
      q(p, o, m), c || (f = R(
        i,
        "click",
        /*addCard*/
        l[13]
      ), c = !0);
    },
    p(p, m) {
      if (m[0] & /*data, collapsedItems, toggleEditCollapse, removeCard*/
      540929) {
        u = ce(
          /*data*/
          p[0].cards
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = yp(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = Cp(v), d[b].c(), d[b].m(o.parentNode, o));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
    },
    d(p) {
      p && (P(e), P(n), P(o)), Fe(d, p), c = !1, f();
    }
  };
}
function Sp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E;
  function S() {
    l[37].call(
      n,
      /*each_value_5*/
      l[77],
      /*i*/
      l[70]
    );
  }
  function O() {
    l[38].call(
      u,
      /*each_value_5*/
      l[77],
      /*i*/
      l[70]
    );
  }
  function C() {
    l[39].call(
      b,
      /*each_value_5*/
      l[77],
      /*i*/
      l[70]
    );
  }
  function T() {
    l[40].call(
      w,
      /*each_value_5*/
      l[77],
      /*i*/
      l[70]
    );
  }
  return {
    c() {
      e = r("div"), t = r("label"), i = B("T√≠tulo: "), n = r("input"), o = g(), c = r("label"), f = B("Imagem URL: "), u = r("input"), d = g(), p = r("label"), m = B("Hell Quote: "), b = r("input"), v = g(), h = r("label"), _ = B("Conte√∫do (HTML): "), w = r("textarea"), s(n, "type", "text"), s(n, "class", "svelte-4e5teb"), s(t, "class", "svelte-4e5teb"), s(u, "type", "text"), s(u, "class", "svelte-4e5teb"), s(c, "class", "svelte-4e5teb"), s(b, "type", "text"), s(b, "placeholder", "Deixe vazio se n√£o tiver"), s(b, "class", "svelte-4e5teb"), s(p, "class", "svelte-4e5teb"), s(w, "rows", "6"), s(w, "class", "svelte-4e5teb"), s(h, "class", "svelte-4e5teb"), s(e, "class", "item-body svelte-4e5teb");
    },
    m(N, I) {
      q(N, e, I), a(e, t), a(t, i), a(t, n), x(
        n,
        /*card*/
        l[73].title
      ), a(e, o), a(e, c), a(c, f), a(c, u), x(
        u,
        /*card*/
        l[73].image
      ), a(e, d), a(e, p), a(p, m), a(p, b), x(
        b,
        /*card*/
        l[73].hellQuote
      ), a(e, v), a(e, h), a(h, _), a(h, w), x(
        w,
        /*card*/
        l[73].text
      ), A = !0, y || (E = [
        R(n, "input", S),
        R(u, "input", O),
        R(b, "input", C),
        R(w, "input", T)
      ], y = !0);
    },
    p(N, I) {
      l = N, I[0] & /*data*/
      1 && n.value !== /*card*/
      l[73].title && x(
        n,
        /*card*/
        l[73].title
      ), I[0] & /*data*/
      1 && u.value !== /*card*/
      l[73].image && x(
        u,
        /*card*/
        l[73].image
      ), I[0] & /*data*/
      1 && b.value !== /*card*/
      l[73].hellQuote && x(
        b,
        /*card*/
        l[73].hellQuote
      ), I[0] & /*data*/
      1 && x(
        w,
        /*card*/
        l[73].text
      );
    },
    i(N) {
      A || (N && Ne(() => {
        A && (k || (k = We(e, yt, {}, !0)), k.run(1));
      }), A = !0);
    },
    o(N) {
      N && (k || (k = We(e, yt, {}, !1)), k.run(0)), A = !1;
    },
    d(N) {
      N && P(e), N && k && k.end(), y = !1, Te(E);
    }
  };
}
function Cp(l) {
  let e, t, i, n, o = (
    /*i*/
    l[70] + 1 + ""
  ), c, f, u = (
    /*card*/
    l[73].title + ""
  ), d, p, m, b, v, h, _, w, k, A, y;
  function E() {
    return (
      /*click_handler_5*/
      l[35](
        /*i*/
        l[70]
      )
    );
  }
  function S() {
    return (
      /*click_handler_6*/
      l[36](
        /*i*/
        l[70]
      )
    );
  }
  let O = !/*collapsedItems*/
  l[8].cards[
    /*i*/
    l[70]
  ] && Sp(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), n = B("#"), c = B(o), f = g(), d = B(u), p = g(), m = r("div"), b = r("button"), b.textContent = "üóëÔ∏è", v = g(), h = r("i"), w = g(), O && O.c(), k = g(), s(b, "class", "del svelte-4e5teb"), s(h, "class", _ = "fas fa-chevron-" + /*collapsedItems*/
      (l[8].cards[
        /*i*/
        l[70]
      ] ? "down" : "up")), s(m, "class", "acts"), s(t, "class", "item-header svelte-4e5teb"), s(e, "class", "editor-item svelte-4e5teb");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(t, i), a(i, n), a(i, c), a(i, f), a(i, d), a(t, p), a(t, m), a(m, b), a(m, v), a(m, h), a(e, w), O && O.m(e, null), a(e, k), A || (y = [
        R(b, "click", Lt(E)),
        R(t, "click", S)
      ], A = !0);
    },
    p(C, T) {
      l = C, T[0] & /*data*/
      1 && u !== (u = /*card*/
      l[73].title + "") && te(d, u), T[0] & /*collapsedItems*/
      256 && _ !== (_ = "fas fa-chevron-" + /*collapsedItems*/
      (l[8].cards[
        /*i*/
        l[70]
      ] ? "down" : "up")) && s(h, "class", _), /*collapsedItems*/
      l[8].cards[
        /*i*/
        l[70]
      ] ? O && ($e(), Ae(O, 1, 1, () => {
        O = null;
      }), et()) : O ? (O.p(l, T), T[0] & /*collapsedItems*/
      256 && ne(O, 1)) : (O = Sp(l), O.c(), ne(O, 1), O.m(e, k));
    },
    d(C) {
      C && P(e), O && O.d(), A = !1, Te(y);
    }
  };
}
function Ip(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*data*/
    l[0].stats
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = Dp(wp(l, u, p));
  return {
    c() {
      e = r("h3"), t = B("ESTAT√çSTICAS "), i = r("button"), i.textContent = "+", n = g();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      o = Pt(), s(i, "class", "mini-add svelte-4e5teb"), s(e, "class", "svelte-4e5teb");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), q(p, n, m);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(p, m);
      q(p, o, m), c || (f = R(
        i,
        "click",
        /*addStat*/
        l[15]
      ), c = !0);
    },
    p(p, m) {
      if (m[0] & /*data, collapsedItems, toggleEditCollapse, removeStat*/
      590081) {
        u = ce(
          /*data*/
          p[0].stats
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = wp(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = Dp(v), d[b].c(), d[b].m(o.parentNode, o));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
    },
    d(p) {
      p && (P(e), P(n), P(o)), Fe(d, p), c = !1, f();
    }
  };
}
function Tp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E;
  function S() {
    l[43].call(
      n,
      /*each_value_4*/
      l[76],
      /*i*/
      l[70]
    );
  }
  function O() {
    l[44].call(
      u,
      /*each_value_4*/
      l[76],
      /*i*/
      l[70]
    );
  }
  function C() {
    l[45].call(
      b,
      /*each_value_4*/
      l[76],
      /*i*/
      l[70]
    );
  }
  function T() {
    l[46].call(
      w,
      /*each_value_4*/
      l[76],
      /*i*/
      l[70]
    );
  }
  return {
    c() {
      e = r("div"), t = r("label"), i = B("Label: "), n = r("input"), o = g(), c = r("label"), f = B("Valor: "), u = r("input"), d = g(), p = r("label"), m = B("Tooltip: "), b = r("input"), v = g(), h = r("label"), _ = B("Hell Quote: "), w = r("input"), s(n, "type", "text"), s(n, "class", "svelte-4e5teb"), s(t, "class", "svelte-4e5teb"), s(u, "type", "text"), s(u, "class", "svelte-4e5teb"), s(c, "class", "svelte-4e5teb"), s(b, "type", "text"), s(b, "class", "svelte-4e5teb"), s(p, "class", "svelte-4e5teb"), s(w, "type", "text"), s(w, "class", "svelte-4e5teb"), s(h, "class", "svelte-4e5teb"), s(e, "class", "item-body svelte-4e5teb");
    },
    m(N, I) {
      q(N, e, I), a(e, t), a(t, i), a(t, n), x(
        n,
        /*stat*/
        l[71].label
      ), a(e, o), a(e, c), a(c, f), a(c, u), x(
        u,
        /*stat*/
        l[71].value
      ), a(e, d), a(e, p), a(p, m), a(p, b), x(
        b,
        /*stat*/
        l[71].tooltip
      ), a(e, v), a(e, h), a(h, _), a(h, w), x(
        w,
        /*stat*/
        l[71].hellQuote
      ), A = !0, y || (E = [
        R(n, "input", S),
        R(u, "input", O),
        R(b, "input", C),
        R(w, "input", T)
      ], y = !0);
    },
    p(N, I) {
      l = N, I[0] & /*data*/
      1 && n.value !== /*stat*/
      l[71].label && x(
        n,
        /*stat*/
        l[71].label
      ), I[0] & /*data*/
      1 && u.value !== /*stat*/
      l[71].value && x(
        u,
        /*stat*/
        l[71].value
      ), I[0] & /*data*/
      1 && b.value !== /*stat*/
      l[71].tooltip && x(
        b,
        /*stat*/
        l[71].tooltip
      ), I[0] & /*data*/
      1 && w.value !== /*stat*/
      l[71].hellQuote && x(
        w,
        /*stat*/
        l[71].hellQuote
      );
    },
    i(N) {
      A || (N && Ne(() => {
        A && (k || (k = We(e, yt, {}, !0)), k.run(1));
      }), A = !0);
    },
    o(N) {
      N && (k || (k = We(e, yt, {}, !1)), k.run(0)), A = !1;
    },
    d(N) {
      N && P(e), N && k && k.end(), y = !1, Te(E);
    }
  };
}
function Dp(l) {
  let e, t, i, n = (
    /*stat*/
    l[71].label + ""
  ), o, c, f = (
    /*stat*/
    l[71].value + ""
  ), u, d, p, m, b, v, h, _;
  function w() {
    return (
      /*click_handler_7*/
      l[41](
        /*i*/
        l[70]
      )
    );
  }
  function k() {
    return (
      /*click_handler_8*/
      l[42](
        /*i*/
        l[70]
      )
    );
  }
  let A = !/*collapsedItems*/
  l[8].stats[
    /*i*/
    l[70]
  ] && Tp(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), c = B(": "), u = B(f), d = g(), p = r("div"), m = r("button"), m.textContent = "üóëÔ∏è", b = g(), A && A.c(), v = g(), s(m, "class", "del svelte-4e5teb"), s(p, "class", "acts"), s(t, "class", "item-header svelte-4e5teb"), s(e, "class", "editor-item svelte-4e5teb");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(t, i), a(i, o), a(i, c), a(i, u), a(t, d), a(t, p), a(p, m), a(e, b), A && A.m(e, null), a(e, v), h || (_ = [
        R(m, "click", Lt(w)),
        R(t, "click", k)
      ], h = !0);
    },
    p(y, E) {
      l = y, E[0] & /*data*/
      1 && n !== (n = /*stat*/
      l[71].label + "") && te(o, n), E[0] & /*data*/
      1 && f !== (f = /*stat*/
      l[71].value + "") && te(u, f), /*collapsedItems*/
      l[8].stats[
        /*i*/
        l[70]
      ] ? A && ($e(), Ae(A, 1, 1, () => {
        A = null;
      }), et()) : A ? (A.p(l, E), E[0] & /*collapsedItems*/
      256 && ne(A, 1)) : (A = Tp(l), A.c(), ne(A, 1), A.m(e, v));
    },
    d(y) {
      y && P(e), A && A.d(), h = !1, Te(_);
    }
  };
}
function Rp(l) {
  let e, t, i, n, o, c, f, u = ce(
    /*data*/
    l[0].trends
  ), d = [];
  for (let p = 0; p < u.length; p += 1)
    d[p] = Np(kp(l, u, p));
  return {
    c() {
      e = r("h3"), t = B("TEND√äNCIAS "), i = r("button"), i.textContent = "+", n = g();
      for (let p = 0; p < d.length; p += 1)
        d[p].c();
      o = Pt(), s(i, "class", "mini-add svelte-4e5teb"), s(e, "class", "svelte-4e5teb");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, i), q(p, n, m);
      for (let b = 0; b < d.length; b += 1)
        d[b] && d[b].m(p, m);
      q(p, o, m), c || (f = R(
        i,
        "click",
        /*addTrend*/
        l[17]
      ), c = !0);
    },
    p(p, m) {
      if (m[0] & /*data, collapsedItems, toggleEditCollapse, removeTrend*/
      786689) {
        u = ce(
          /*data*/
          p[0].trends
        );
        let b;
        for (b = 0; b < u.length; b += 1) {
          const v = kp(p, u, b);
          d[b] ? d[b].p(v, m) : (d[b] = Np(v), d[b].c(), d[b].m(o.parentNode, o));
        }
        for (; b < d.length; b += 1)
          d[b].d(1);
        d.length = u.length;
      }
    },
    d(p) {
      p && (P(e), P(n), P(o)), Fe(d, p), c = !1, f();
    }
  };
}
function Mp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E;
  function S() {
    l[49].call(
      n,
      /*each_value_3*/
      l[75],
      /*i*/
      l[70]
    );
  }
  function O() {
    l[50].call(
      u,
      /*each_value_3*/
      l[75],
      /*i*/
      l[70]
    );
  }
  function C() {
    l[51].call(
      b,
      /*each_value_3*/
      l[75],
      /*i*/
      l[70]
    );
  }
  function T() {
    l[52].call(
      w,
      /*each_value_3*/
      l[75],
      /*i*/
      l[70]
    );
  }
  return {
    c() {
      e = r("div"), t = r("label"), i = B("Nome: "), n = r("input"), o = g(), c = r("label"), f = B("Subt√≠tulo: "), u = r("input"), d = g(), p = r("label"), m = B("Imagem URL: "), b = r("input"), v = g(), h = r("label"), _ = B("Hell Quote: "), w = r("input"), s(n, "type", "text"), s(n, "class", "svelte-4e5teb"), s(t, "class", "svelte-4e5teb"), s(u, "type", "text"), s(u, "class", "svelte-4e5teb"), s(c, "class", "svelte-4e5teb"), s(b, "type", "text"), s(b, "class", "svelte-4e5teb"), s(p, "class", "svelte-4e5teb"), s(w, "type", "text"), s(w, "class", "svelte-4e5teb"), s(h, "class", "svelte-4e5teb"), s(e, "class", "item-body svelte-4e5teb");
    },
    m(N, I) {
      q(N, e, I), a(e, t), a(t, i), a(t, n), x(
        n,
        /*trend*/
        l[68].name
      ), a(e, o), a(e, c), a(c, f), a(c, u), x(
        u,
        /*trend*/
        l[68].sub
      ), a(e, d), a(e, p), a(p, m), a(p, b), x(
        b,
        /*trend*/
        l[68].image
      ), a(e, v), a(e, h), a(h, _), a(h, w), x(
        w,
        /*trend*/
        l[68].hellQuote
      ), A = !0, y || (E = [
        R(n, "input", S),
        R(u, "input", O),
        R(b, "input", C),
        R(w, "input", T)
      ], y = !0);
    },
    p(N, I) {
      l = N, I[0] & /*data*/
      1 && n.value !== /*trend*/
      l[68].name && x(
        n,
        /*trend*/
        l[68].name
      ), I[0] & /*data*/
      1 && u.value !== /*trend*/
      l[68].sub && x(
        u,
        /*trend*/
        l[68].sub
      ), I[0] & /*data*/
      1 && b.value !== /*trend*/
      l[68].image && x(
        b,
        /*trend*/
        l[68].image
      ), I[0] & /*data*/
      1 && w.value !== /*trend*/
      l[68].hellQuote && x(
        w,
        /*trend*/
        l[68].hellQuote
      );
    },
    i(N) {
      A || (N && Ne(() => {
        A && (k || (k = We(e, yt, {}, !0)), k.run(1));
      }), A = !0);
    },
    o(N) {
      N && (k || (k = We(e, yt, {}, !1)), k.run(0)), A = !1;
    },
    d(N) {
      N && P(e), N && k && k.end(), y = !1, Te(E);
    }
  };
}
function Np(l) {
  let e, t, i, n = (
    /*trend*/
    l[68].name + ""
  ), o, c, f, u, d, p, m, b;
  function v() {
    return (
      /*click_handler_9*/
      l[47](
        /*i*/
        l[70]
      )
    );
  }
  function h() {
    return (
      /*click_handler_10*/
      l[48](
        /*i*/
        l[70]
      )
    );
  }
  let _ = !/*collapsedItems*/
  l[8].trends[
    /*i*/
    l[70]
  ] && Mp(l);
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), o = B(n), c = g(), f = r("div"), u = r("button"), u.textContent = "üóëÔ∏è", d = g(), _ && _.c(), p = g(), s(u, "class", "del svelte-4e5teb"), s(f, "class", "acts"), s(t, "class", "item-header svelte-4e5teb"), s(e, "class", "editor-item svelte-4e5teb");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(t, i), a(i, o), a(t, c), a(t, f), a(f, u), a(e, d), _ && _.m(e, null), a(e, p), m || (b = [
        R(u, "click", Lt(v)),
        R(t, "click", h)
      ], m = !0);
    },
    p(w, k) {
      l = w, k[0] & /*data*/
      1 && n !== (n = /*trend*/
      l[68].name + "") && te(o, n), /*collapsedItems*/
      l[8].trends[
        /*i*/
        l[70]
      ] ? _ && ($e(), Ae(_, 1, 1, () => {
        _ = null;
      }), et()) : _ ? (_.p(l, k), k[0] & /*collapsedItems*/
      256 && ne(_, 1)) : (_ = Mp(l), _.c(), ne(_, 1), _.m(e, p));
    },
    d(w) {
      w && P(e), _ && _.d(), m = !1, Te(b);
    }
  };
}
function Lp(l) {
  let e, t, i, n, o, c, f, u, d = (
    /*data*/
    l[0].edition + ""
  ), p, m, b, v, h = (
    /*data*/
    l[0].date + ""
  ), _, w, k, A, y, E = (
    /*data*/
    l[0].status + ""
  ), S, O, C, T, N, I, D, M, G, L, U, z, F, W = (
    /*data*/
    l[0].coverImage && Pp(l)
  ), H = (
    /*data*/
    l[0].audio && qp(l)
  ), V = ce(
    /*data*/
    l[0].cards
  ), J = [];
  for (let $ = 0; $ < V.length; $ += 1)
    J[$] = Gp(_p(l, V, $));
  let j = ce(
    /*data*/
    l[0].stats
  ), X = [];
  for (let $ = 0; $ < j.length; $ += 1)
    X[$] = Bp(gp(l, j, $));
  let K = ce(
    /*data*/
    l[0].trends
  ), Z = [];
  for (let $ = 0; $ < K.length; $ += 1)
    Z[$] = jp(hp(l, K, $));
  let le = (
    /*activeModal*/
    l[2] && Vp(l)
  );
  return {
    c() {
      e = r("div"), W && W.c(), t = g(), i = r("header"), n = r("div"), n.textContent = "DATA HELL", o = g(), c = r("div"), f = r("div"), u = B("EDI√á√ÉO "), p = B(d), m = g(), b = r("div"), v = B("DATA: "), _ = B(h), w = g(), k = r("div"), A = B("STATUS: "), y = r("span"), S = B(E), O = g(), H && H.c(), C = g(), T = r("div"), N = r("main");
      for (let $ = 0; $ < J.length; $ += 1)
        J[$].c();
      I = g(), D = r("aside"), M = r("div");
      for (let $ = 0; $ < X.length; $ += 1)
        X[$].c();
      G = g(), L = r("div"), U = r("div"), U.textContent = "TEND√äNCIAS", z = g();
      for (let $ = 0; $ < Z.length; $ += 1)
        Z[$].c();
      F = g(), le && le.c(), s(n, "class", "dh-title svelte-4e5teb"), s(f, "class", "meta-row"), s(b, "class", "meta-row"), s(y, "class", "status-txt svelte-4e5teb"), s(k, "class", "meta-row"), s(c, "class", "dh-meta svelte-4e5teb"), s(i, "class", "dh-header svelte-4e5teb"), he(
        i,
        "with-banner",
        /*data*/
        l[0].coverImage
      ), s(N, "class", "dh-column svelte-4e5teb"), s(M, "class", "dh-data-box svelte-4e5teb"), s(U, "class", "dh-trend-title svelte-4e5teb"), s(L, "class", "dh-trends-section"), s(D, "class", "dh-sidebar svelte-4e5teb"), s(T, "class", "dh-grid svelte-4e5teb"), s(e, "class", "dh-view-container custom-scroll svelte-4e5teb");
    },
    m($, se) {
      q($, e, se), W && W.m(e, null), a(e, t), a(e, i), a(i, n), a(i, o), a(i, c), a(c, f), a(f, u), a(f, p), a(c, m), a(c, b), a(b, v), a(b, _), a(c, w), a(c, k), a(k, A), a(k, y), a(y, S), a(c, O), H && H.m(c, null), a(e, C), a(e, T), a(T, N);
      for (let Y = 0; Y < J.length; Y += 1)
        J[Y] && J[Y].m(N, null);
      a(T, I), a(T, D), a(D, M);
      for (let Y = 0; Y < X.length; Y += 1)
        X[Y] && X[Y].m(M, null);
      a(D, G), a(D, L), a(L, U), a(L, z);
      for (let Y = 0; Y < Z.length; Y += 1)
        Z[Y] && Z[Y].m(L, null);
      a(e, F), le && le.m(e, null);
    },
    p($, se) {
      if (/*data*/
      $[0].coverImage ? W ? W.p($, se) : (W = Pp($), W.c(), W.m(e, t)) : W && (W.d(1), W = null), se[0] & /*data*/
      1 && d !== (d = /*data*/
      $[0].edition + "") && te(p, d), se[0] & /*data*/
      1 && h !== (h = /*data*/
      $[0].date + "") && te(_, h), se[0] & /*data*/
      1 && E !== (E = /*data*/
      $[0].status + "") && te(S, E), /*data*/
      $[0].audio ? H ? H.p($, se) : (H = qp($), H.c(), H.m(c, null)) : H && (H.d(1), H = null), se[0] & /*data*/
      1 && he(
        i,
        "with-banner",
        /*data*/
        $[0].coverImage
      ), se[0] & /*data, expandedCardIndex, toggleCardView, openHell*/
      3145737) {
        V = ce(
          /*data*/
          $[0].cards
        );
        let Y;
        for (Y = 0; Y < V.length; Y += 1) {
          const Q = _p($, V, Y);
          J[Y] ? J[Y].p(Q, se) : (J[Y] = Gp(Q), J[Y].c(), J[Y].m(N, null));
        }
        for (; Y < J.length; Y += 1)
          J[Y].d(1);
        J.length = V.length;
      }
      if (se[0] & /*openHell, data*/
      2097153) {
        j = ce(
          /*data*/
          $[0].stats
        );
        let Y;
        for (Y = 0; Y < j.length; Y += 1) {
          const Q = gp($, j, Y);
          X[Y] ? X[Y].p(Q, se) : (X[Y] = Bp(Q), X[Y].c(), X[Y].m(M, null));
        }
        for (; Y < X.length; Y += 1)
          X[Y].d(1);
        X.length = j.length;
      }
      if (se[0] & /*openHell, data*/
      2097153) {
        K = ce(
          /*data*/
          $[0].trends
        );
        let Y;
        for (Y = 0; Y < K.length; Y += 1) {
          const Q = hp($, K, Y);
          Z[Y] ? Z[Y].p(Q, se) : (Z[Y] = jp(Q), Z[Y].c(), Z[Y].m(L, null));
        }
        for (; Y < Z.length; Y += 1)
          Z[Y].d(1);
        Z.length = K.length;
      }
      /*activeModal*/
      $[2] ? le ? (le.p($, se), se[0] & /*activeModal*/
      4 && ne(le, 1)) : (le = Vp($), le.c(), ne(le, 1), le.m(e, null)) : le && ($e(), Ae(le, 1, 1, () => {
        le = null;
      }), et());
    },
    d($) {
      $ && P(e), W && W.d(), H && H.d(), Fe(J, $), Fe(X, $), Fe(Z, $), le && le.d();
    }
  };
}
function Pp(l) {
  let e, t;
  return {
    c() {
      e = r("div"), t = r("div"), s(t, "class", "hero-overlay svelte-4e5teb"), s(e, "class", "dh-hero-banner svelte-4e5teb"), ae(e, "background-image", "url('" + /*data*/
      l[0].coverImage + "')");
    },
    m(i, n) {
      q(i, e, n), a(e, t);
    },
    p(i, n) {
      n[0] & /*data*/
      1 && ae(e, "background-image", "url('" + /*data*/
      i[0].coverImage + "')");
    },
    d(i) {
      i && P(e);
    }
  };
}
function qp(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("button"), i = r("i"), c = g(), f = r("input"), s(i, "class", n = "fas " + /*isPlaying*/
      (l[5] ? "fa-pause" : "fa-play")), s(t, "class", "play-btn svelte-4e5teb"), s(t, "title", o = /*isPlaying*/
      l[5] ? "Pausar" : "Tocar"), s(f, "type", "range"), s(f, "class", "vol-slider svelte-4e5teb"), s(f, "min", "0"), s(f, "max", "1"), s(f, "step", "0.05"), s(f, "title", "Volume"), s(e, "class", "audio-panel svelte-4e5teb");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(t, i), a(e, c), a(e, f), x(
        f,
        /*currentVolume*/
        l[6]
      ), u || (d = [
        R(
          t,
          "click",
          /*togglePlayPause*/
          l[11]
        ),
        R(
          f,
          "change",
          /*input_change_input_handler*/
          l[53]
        ),
        R(
          f,
          "input",
          /*input_change_input_handler*/
          l[53]
        ),
        R(
          f,
          "input",
          /*handleVolumeChange*/
          l[12]
        )
      ], u = !0);
    },
    p(p, m) {
      m[0] & /*isPlaying*/
      32 && n !== (n = "fas " + /*isPlaying*/
      (p[5] ? "fa-pause" : "fa-play")) && s(i, "class", n), m[0] & /*isPlaying*/
      32 && o !== (o = /*isPlaying*/
      p[5] ? "Pausar" : "Tocar") && s(t, "title", o), m[0] & /*currentVolume*/
      64 && x(
        f,
        /*currentVolume*/
        p[6]
      );
    },
    d(p) {
      p && P(e), u = !1, Te(d);
    }
  };
}
function Up(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_11*/
      l[54](
        /*i*/
        l[70]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "üî•", s(e, "class", "hell-btn svelte-4e5teb");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", Lt(n)), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function Gp(l) {
  let e, t, i, n, o = (
    /*card*/
    l[73].title + ""
  ), c, f, u, d = (
    /*card*/
    l[73].text + ""
  ), p, m, b, v = (
    /*card*/
    l[73].hellQuote && Up(l)
  );
  function h() {
    return (
      /*click_handler_12*/
      l[55](
        /*i*/
        l[70]
      )
    );
  }
  return {
    c() {
      e = r("div"), v && v.c(), t = g(), i = r("div"), n = r("h2"), c = B(o), f = g(), u = r("div"), p = g(), s(n, "class", "dh-card-title svelte-4e5teb"), s(u, "class", "dh-card-text custom-scroll svelte-4e5teb"), s(i, "class", "dh-overlay svelte-4e5teb"), s(e, "class", "dh-card svelte-4e5teb"), ae(e, "background-image", "url('" + /*card*/
      l[73].image + "')"), he(
        e,
        "expanded",
        /*expandedCardIndex*/
        l[3] === /*i*/
        l[70]
      );
    },
    m(_, w) {
      q(_, e, w), v && v.m(e, null), a(e, t), a(e, i), a(i, n), a(n, c), a(i, f), a(i, u), u.innerHTML = d, a(e, p), m || (b = R(i, "click", h), m = !0);
    },
    p(_, w) {
      l = _, /*card*/
      l[73].hellQuote ? v ? v.p(l, w) : (v = Up(l), v.c(), v.m(e, t)) : v && (v.d(1), v = null), w[0] & /*data*/
      1 && o !== (o = /*card*/
      l[73].title + "") && te(c, o), w[0] & /*data*/
      1 && d !== (d = /*card*/
      l[73].text + "") && (u.innerHTML = d), w[0] & /*data*/
      1 && ae(e, "background-image", "url('" + /*card*/
      l[73].image + "')"), w[0] & /*expandedCardIndex*/
      8 && he(
        e,
        "expanded",
        /*expandedCardIndex*/
        l[3] === /*i*/
        l[70]
      );
    },
    d(_) {
      _ && P(e), v && v.d(), m = !1, b();
    }
  };
}
function Hp(l) {
  let e, t, i = (
    /*stat*/
    l[71].tooltip + ""
  ), n;
  return {
    c() {
      e = r("span"), e.textContent = "[?]", t = r("span"), n = B(i), s(e, "class", "qm svelte-4e5teb"), s(t, "class", "dh-tooltip svelte-4e5teb");
    },
    m(o, c) {
      q(o, e, c), q(o, t, c), a(t, n);
    },
    p(o, c) {
      c[0] & /*data*/
      1 && i !== (i = /*stat*/
      o[71].tooltip + "") && te(n, i);
    },
    d(o) {
      o && (P(e), P(t));
    }
  };
}
function zp(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_13*/
      l[56](
        /*i*/
        l[70]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "üî•", s(e, "class", "hell-btn-mini svelte-4e5teb");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function Bp(l) {
  let e, t, i = (
    /*stat*/
    l[71].label + ""
  ), n, o, c, f, u = (
    /*stat*/
    l[71].value + ""
  ), d, p, m, b = (
    /*stat*/
    l[71].tooltip && Hp(l)
  ), v = (
    /*stat*/
    l[71].hellQuote && zp(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), n = B(i), o = g(), b && b.c(), c = g(), f = r("div"), d = B(u), p = g(), v && v.c(), m = g(), s(t, "class", "dh-stat-label svelte-4e5teb"), s(f, "class", "dh-stat-value svelte-4e5teb"), s(e, "class", "dh-stat-row svelte-4e5teb");
    },
    m(h, _) {
      q(h, e, _), a(e, t), a(t, n), a(t, o), b && b.m(t, null), a(e, c), a(e, f), a(f, d), a(f, p), v && v.m(f, null), a(e, m);
    },
    p(h, _) {
      _[0] & /*data*/
      1 && i !== (i = /*stat*/
      h[71].label + "") && te(n, i), /*stat*/
      h[71].tooltip ? b ? b.p(h, _) : (b = Hp(h), b.c(), b.m(t, null)) : b && (b.d(1), b = null), _[0] & /*data*/
      1 && u !== (u = /*stat*/
      h[71].value + "") && te(d, u), /*stat*/
      h[71].hellQuote ? v ? v.p(h, _) : (v = zp(h), v.c(), v.m(f, null)) : v && (v.d(1), v = null);
    },
    d(h) {
      h && P(e), b && b.d(), v && v.d();
    }
  };
}
function Fp(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_14*/
      l[57](
        /*i*/
        l[70]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "üî•", s(e, "class", "hell-btn static svelte-4e5teb");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function jp(l) {
  let e, t, i, n, o, c, f = (
    /*trend*/
    l[68].name + ""
  ), u, d, p, m = (
    /*trend*/
    l[68].sub + ""
  ), b, v, h, _ = (
    /*trend*/
    l[68].hellQuote && Fp(l)
  );
  return {
    c() {
      e = r("div"), t = r("img"), n = g(), o = r("div"), c = r("strong"), u = B(f), d = g(), p = r("small"), b = B(m), v = g(), _ && _.c(), h = g(), at(t.src, i = /*trend*/
      l[68].image || "https://placehold.co/100/222/fff?text=?") || s(t, "src", i), s(t, "class", "dh-trend-img svelte-4e5teb"), s(t, "alt", "Item"), ae(c, "color", "var(--theme-color)"), ae(c, "display", "block"), ae(p, "color", "#aaa"), s(e, "class", "dh-trend-item svelte-4e5teb");
    },
    m(w, k) {
      q(w, e, k), a(e, t), a(e, n), a(e, o), a(o, c), a(c, u), a(o, d), a(o, p), a(p, b), a(e, v), _ && _.m(e, null), a(e, h);
    },
    p(w, k) {
      k[0] & /*data*/
      1 && !at(t.src, i = /*trend*/
      w[68].image || "https://placehold.co/100/222/fff?text=?") && s(t, "src", i), k[0] & /*data*/
      1 && f !== (f = /*trend*/
      w[68].name + "") && te(u, f), k[0] & /*data*/
      1 && m !== (m = /*trend*/
      w[68].sub + "") && te(b, m), /*trend*/
      w[68].hellQuote ? _ ? _.p(w, k) : (_ = Fp(w), _.c(), _.m(e, h)) : _ && (_.d(1), _ = null);
    },
    d(w) {
      w && P(e), _ && _.d();
    }
  };
}
function Vp(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C = (
    /*hellAnim*/
    l[4] === "cinema" && Wp()
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.innerHTML = '<img src="https://placehold.co/100/ffcc00/000?text=HELL" alt="Hell Avatar" class="svelte-4e5teb"/>', n = g(), o = r("p"), c = B('"'), f = B(
        /*currentHellQuote*/
        l[10]
      ), u = B('"'), d = g(), p = r("div"), m = r("button"), m.textContent = "CALA A BOCA, HELL", b = g(), v = r("button"), v.textContent = "TANTO FAZ", h = g(), _ = r("button"), _.textContent = "ABSOLUTE CINEMA", w = g(), C && C.c(), s(i, "class", "hell-avatar svelte-4e5teb"), s(o, "class", "hell-quote svelte-4e5teb"), s(m, "class", "h-btn angry svelte-4e5teb"), s(v, "class", "h-btn neutral svelte-4e5teb"), s(_, "class", "h-btn cinema svelte-4e5teb"), s(p, "class", "hell-actions svelte-4e5teb"), s(t, "class", "hell-content svelte-4e5teb"), s(e, "class", A = "hell-modal " + /*hellAnim*/
      l[4] + " svelte-4e5teb");
    },
    m(T, N) {
      q(T, e, N), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), a(o, u), a(t, d), a(t, p), a(p, m), a(p, b), a(p, v), a(p, h), a(p, _), a(t, w), C && C.m(t, null), E = !0, S || (O = [
        R(
          m,
          "click",
          /*click_handler_15*/
          l[58]
        ),
        R(
          v,
          "click",
          /*click_handler_16*/
          l[59]
        ),
        R(
          _,
          "click",
          /*click_handler_17*/
          l[60]
        ),
        R(t, "click", Lt(
          /*click_handler*/
          l[23]
        ))
      ], S = !0);
    },
    p(T, N) {
      (!E || N[0] & /*currentHellQuote*/
      1024) && te(
        f,
        /*currentHellQuote*/
        T[10]
      ), /*hellAnim*/
      T[4] === "cinema" ? C || (C = Wp(), C.c(), C.m(t, null)) : C && (C.d(1), C = null), (!E || N[0] & /*hellAnim*/
      16 && A !== (A = "hell-modal " + /*hellAnim*/
      T[4] + " svelte-4e5teb")) && s(e, "class", A);
    },
    i(T) {
      E || (T && Ne(() => {
        E && (k || (k = We(t, Mt, {}, !0)), k.run(1));
      }), T && Ne(() => {
        E && (y || (y = We(e, Qe, {}, !0)), y.run(1));
      }), E = !0);
    },
    o(T) {
      T && (k || (k = We(t, Mt, {}, !1)), k.run(0)), T && (y || (y = We(e, Qe, {}, !1)), y.run(0)), E = !1;
    },
    d(T) {
      T && P(e), C && C.d(), T && k && k.end(), T && y && y.end(), S = !1, Te(O);
    }
  };
}
function Wp(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<span class="sparkle s1 svelte-4e5teb">‚ú®</span> <span class="sparkle s2 svelte-4e5teb">üî•</span> <span class="sparkle s3 svelte-4e5teb">‚ú®</span> <span class="sparkle s4 svelte-4e5teb">üí•</span>', s(e, "class", "vfx-cinema svelte-4e5teb");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function dk(l) {
  let e, t, i, n = (
    /*mode*/
    l[1] === "edit" && Ap(l)
  ), o = (
    /*mode*/
    l[1] === "view" && Lp(l)
  );
  return {
    c() {
      e = r("div"), n && n.c(), t = g(), o && o.c(), s(e, "class", "dh-root svelte-4e5teb"), s(
        e,
        "style",
        /*cssVars*/
        l[9]
      );
    },
    m(c, f) {
      q(c, e, f), n && n.m(e, null), a(e, t), o && o.m(e, null), i = !0;
    },
    p(c, f) {
      /*mode*/
      c[1] === "edit" ? n ? (n.p(c, f), f[0] & /*mode*/
      2 && ne(n, 1)) : (n = Ap(c), n.c(), ne(n, 1), n.m(e, t)) : n && ($e(), Ae(n, 1, 1, () => {
        n = null;
      }), et()), /*mode*/
      c[1] === "view" ? o ? o.p(c, f) : (o = Lp(c), o.c(), o.m(e, null)) : o && (o.d(1), o = null), (!i || f[0] & /*cssVars*/
      512) && s(
        e,
        "style",
        /*cssVars*/
        c[9]
      );
    },
    i(c) {
      i || (ne(n), i = !0);
    },
    o(c) {
      Ae(n), i = !1;
    },
    d(c) {
      c && P(e), n && n.d(), o && o.d();
    }
  };
}
function uk(l, e, t) {
  let i, n, { data: o = {
    // Metadados
    edition: "#0",
    date: "01/01/2077",
    status: "CR√çTICO",
    audio: "",
    coverImage: "",
    // NOVA: Imagem de Capa
    themeColor: "#ff0055",
    // Cor Principal
    matrixColor: "#00ff41",
    // Cor Secund√°ria
    // Conte√∫do
    cards: [],
    stats: [],
    trends: []
  } } = e, { mode: c = "view" } = e, f = -1, u = null, d = "", p = null, m = null, b = null, v = !1, h = 0.5;
  const _ = "dh-audio-" + Math.random().toString(36).substr(2, 9);
  let w = "meta", k = { cards: {}, stats: {}, trends: {} };
  qt(() => {
    c === "view" && o.audio && A(o.audio);
  }), ra(() => {
    E();
  });
  function A(Me) {
    if (!Me) return;
    E(), t(5, v = !0);
    const Se = Me.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b/);
    if (Se && Se[1]) {
      b = "yt";
      let ve = Se[1];
      const Ue = document.createElement("div");
      if (Ue.id = _, Ue.style.position = "absolute", Ue.style.left = "-9999px", Ue.style.width = "1px", Ue.style.height = "1px", document.body.appendChild(Ue), window.YT && window.YT.Player)
        y(ve);
      else if (window.ytCallbacks || (window.ytCallbacks = []), window.ytCallbacks.push(() => y(ve)), !document.getElementById("yt-api-script")) {
        const Ve = document.createElement("script");
        Ve.id = "yt-api-script", Ve.src = "https://www.youtube.com/iframe_api", document.head.appendChild(Ve), window.onYouTubeIframeAPIReady = () => {
          window.ytCallbacks.forEach((rt) => rt());
        };
      }
    } else
      b = "mp3", p = new Audio(Me), p.loop = !0, p.volume = h, p.play().catch((ve) => {
        console.error("Autoplay bloqueado pelo navegador:", ve), t(5, v = !1);
      });
  }
  function y(Me) {
    m = new window.YT.Player(
      _,
      {
        videoId: Me,
        playerVars: {
          autoplay: 1,
          loop: 1,
          playlist: Me,
          controls: 0
        },
        events: {
          onReady: (Se) => {
            Se.target.setVolume(h * 100), v && Se.target.playVideo();
          }
        }
      }
    );
  }
  function E() {
    p && (p.pause(), p = null), m && m.destroy && (m.destroy(), m = null);
    const Me = document.getElementById(_);
    Me && Me.remove(), t(5, v = !1), b = null;
  }
  function S() {
    t(5, v = !v), b === "yt" && m && m.getPlayerState ? v ? m.playVideo() : m.pauseVideo() : b === "mp3" && p && (v ? p.play() : p.pause());
  }
  function O(Me) {
    t(6, h = Me.target.value), b === "yt" && m && m.setVolume ? m.setVolume(h * 100) : b === "mp3" && p && (p.volume = h);
  }
  function C() {
    t(
      0,
      o.cards = [
        ...o.cards,
        {
          title: "NOVA MANCHETE",
          text: "<p>Escreva aqui...</p>",
          image: "https://placehold.co/800x400/111/ff0055",
          hellQuote: ""
        }
      ],
      o
    );
  }
  function T(Me) {
    t(0, o.cards = o.cards.filter((Se, ve) => ve !== Me), o);
  }
  function N() {
    t(
      0,
      o.stats = [
        ...o.stats,
        {
          label: "DADO",
          value: "000",
          tooltip: "Info...",
          hellQuote: ""
        }
      ],
      o
    );
  }
  function I(Me) {
    t(0, o.stats = o.stats.filter((Se, ve) => ve !== Me), o);
  }
  function D() {
    t(
      0,
      o.trends = [
        ...o.trends,
        {
          name: "ITEM",
          sub: "Detalhe",
          image: "",
          hellQuote: ""
        }
      ],
      o
    );
  }
  function M(Me) {
    t(0, o.trends = o.trends.filter((Se, ve) => ve !== Me), o);
  }
  function G(Me, Se) {
    t(8, k[Me][Se] = !k[Me][Se], k);
  }
  function L(Me) {
    c !== "edit" && t(3, f = f === Me ? -1 : Me);
  }
  function U(Me, Se) {
    c !== "edit" && (t(2, u = { type: Me, index: Se }), t(4, d = ""));
  }
  function z(Me) {
    t(4, d = Me), setTimeout(
      () => {
        t(2, u = null), t(4, d = "");
      },
      Me === "neutral" ? 300 : 1e3
    );
  }
  function F(Me) {
    Ol.call(this, l, Me);
  }
  const W = () => t(7, w = "meta"), H = () => t(7, w = "cards"), V = () => t(7, w = "stats"), J = () => t(7, w = "trends");
  function j() {
    o.edition = this.value, t(0, o);
  }
  function X() {
    o.date = this.value, t(0, o);
  }
  function K() {
    o.status = this.value, t(0, o);
  }
  function Z() {
    o.coverImage = this.value, t(0, o);
  }
  function le() {
    o.audio = this.value, t(0, o);
  }
  function $() {
    o.themeColor = this.value, t(0, o);
  }
  function se() {
    o.matrixColor = this.value, t(0, o);
  }
  const Y = (Me) => T(Me), Q = (Me) => G("cards", Me);
  function ie(Me, Se) {
    Me[Se].title = this.value, t(0, o);
  }
  function ee(Me, Se) {
    Me[Se].image = this.value, t(0, o);
  }
  function pe(Me, Se) {
    Me[Se].hellQuote = this.value, t(0, o);
  }
  function Ee(Me, Se) {
    Me[Se].text = this.value, t(0, o);
  }
  const De = (Me) => I(Me), we = (Me) => G("stats", Me);
  function ke(Me, Se) {
    Me[Se].label = this.value, t(0, o);
  }
  function me(Me, Se) {
    Me[Se].value = this.value, t(0, o);
  }
  function re(Me, Se) {
    Me[Se].tooltip = this.value, t(0, o);
  }
  function ye(Me, Se) {
    Me[Se].hellQuote = this.value, t(0, o);
  }
  const oe = (Me) => M(Me), be = (Me) => G("trends", Me);
  function de(Me, Se) {
    Me[Se].name = this.value, t(0, o);
  }
  function Oe(Me, Se) {
    Me[Se].sub = this.value, t(0, o);
  }
  function _e(Me, Se) {
    Me[Se].image = this.value, t(0, o);
  }
  function ue(Me, Se) {
    Me[Se].hellQuote = this.value, t(0, o);
  }
  function Re() {
    h = Je(this.value), t(6, h);
  }
  const Ce = (Me) => U("card", Me), He = (Me) => L(Me), Ge = (Me) => U("stat", Me), Xe = (Me) => U("trend", Me), fe = () => z("angry"), Le = () => z("neutral"), qe = () => z("cinema");
  return l.$$set = (Me) => {
    "data" in Me && t(0, o = Me.data), "mode" in Me && t(1, c = Me.mode);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*activeModal, data*/
    5 && t(10, i = u ? u.type === "card" ? o.cards[u.index].hellQuote : u.type === "stat" ? o.stats[u.index].hellQuote : o.trends[u.index].hellQuote : ""), l.$$.dirty[0] & /*data*/
    1 && t(9, n = `--theme-color: ${o.themeColor || "#ff0055"}; --matrix-color: ${o.matrixColor || "#00ff41"};`);
  }, [
    o,
    c,
    u,
    f,
    d,
    v,
    h,
    w,
    k,
    n,
    i,
    S,
    O,
    C,
    T,
    N,
    I,
    D,
    M,
    G,
    L,
    U,
    z,
    F,
    W,
    H,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de,
    Oe,
    _e,
    ue,
    Re,
    Ce,
    He,
    Ge,
    Xe,
    fe,
    Le,
    qe
  ];
}
class vs extends mt {
  constructor(e) {
    super(), pt(this, e, uk, dk, dt, { data: 0, mode: 1 }, null, [-1, -1, -1]);
  }
}
function Xp(l, e, t) {
  const i = l.slice();
  return i[58] = e[t], i;
}
function Jp(l, e, t) {
  const i = l.slice();
  return i[61] = e[t], i;
}
function Yp(l) {
  let e, t, i, n, o, c = (
    /*showCreateOptions*/
    l[9] && Qp(l)
  );
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-plus"></i> NOVA P√ÅGINA', i = g(), c && c.c(), s(t, "class", "btn-admin svelte-1bpn3pt"), s(e, "class", "create-wrapper svelte-1bpn3pt");
    },
    m(f, u) {
      q(f, e, u), a(e, t), a(e, i), c && c.m(e, null), n || (o = R(
        t,
        "click",
        /*click_handler*/
        l[27]
      ), n = !0);
    },
    p(f, u) {
      /*showCreateOptions*/
      f[9] ? c ? (c.p(f, u), u[0] & /*showCreateOptions*/
      512 && ne(c, 1)) : (c = Qp(f), c.c(), ne(c, 1), c.m(e, null)) : c && ($e(), Ae(c, 1, 1, () => {
        c = null;
      }), et());
    },
    d(f) {
      f && P(e), c && c.d(), n = !1, o();
    }
  };
}
function Qp(l) {
  let e, t, i, n, o, c, f, u;
  return {
    c() {
      e = r("div"), t = r("button"), t.textContent = "NOT√çCIA PADR√ÉO", i = g(), n = r("button"), n.textContent = "DATA HELL (ESTILO)", s(t, "class", "svelte-1bpn3pt"), s(n, "class", "dh-opt svelte-1bpn3pt"), s(e, "class", "create-dropdown svelte-1bpn3pt");
    },
    m(d, p) {
      q(d, e, p), a(e, t), a(e, i), a(e, n), c = !0, f || (u = [
        R(
          t,
          "click",
          /*click_handler_1*/
          l[28]
        ),
        R(
          n,
          "click",
          /*click_handler_2*/
          l[29]
        )
      ], f = !0);
    },
    p: ge,
    i(d) {
      c || (d && Ne(() => {
        c && (o || (o = We(e, yt, {}, !0)), o.run(1));
      }), c = !0);
    },
    o(d) {
      d && (o || (o = We(e, yt, {}, !1)), o.run(0)), c = !1;
    },
    d(d) {
      d && P(e), d && o && o.end(), f = !1, Te(u);
    }
  };
}
function Kp(l) {
  let e, t, i, n, o, c, f, u, d = [], p = /* @__PURE__ */ new Map(), m, b, v = ce(
    /*categories*/
    l[1]
  ), h = [];
  for (let y = 0; y < v.length; y += 1)
    h[y] = xp(Jp(l, v, y));
  let _ = (
    /*isGM*/
    l[12] && pk(l)
  ), w = ce(
    /*filteredNews*/
    l[10]
  );
  const k = (y) => (
    /*news*/
    y[58].id
  );
  for (let y = 0; y < w.length; y += 1) {
    let E = Xp(l, w, y), S = k(E);
    p.set(S, d[y] = $p(S, E));
  }
  let A = (
    /*filteredNews*/
    l[10].length === 0 && e0()
  );
  return {
    c() {
      e = r("nav"), t = r("div"), t.textContent = "PASTAS DO SISTEMA", i = g(), n = r("div");
      for (let y = 0; y < h.length; y += 1)
        h[y].c();
      o = g(), _ && _.c(), c = g(), f = r("div"), u = r("div");
      for (let y = 0; y < d.length; y += 1)
        d[y].c();
      m = g(), A && A.c(), s(t, "class", "cat-header svelte-1bpn3pt"), s(n, "class", "cat-list custom-scroll svelte-1bpn3pt"), s(e, "class", "category-sidebar svelte-1bpn3pt"), s(u, "class", "news-grid svelte-1bpn3pt"), s(f, "class", "news-grid-area custom-scroll svelte-1bpn3pt");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(e, i), a(e, n);
      for (let S = 0; S < h.length; S += 1)
        h[S] && h[S].m(n, null);
      a(e, o), _ && _.m(e, null), q(y, c, E), q(y, f, E), a(f, u);
      for (let S = 0; S < d.length; S += 1)
        d[S] && d[S].m(u, null);
      a(u, m), A && A.m(u, null);
    },
    p(y, E) {
      if (E[0] & /*activeCategory, categories, selectCategory, handleDrop, deleteCategory, isGM*/
      118787) {
        v = ce(
          /*categories*/
          y[1]
        );
        let S;
        for (S = 0; S < v.length; S += 1) {
          const O = Jp(y, v, S);
          h[S] ? h[S].p(O, E) : (h[S] = xp(O), h[S].c(), h[S].m(n, null));
        }
        for (; S < h.length; S += 1)
          h[S].d(1);
        h.length = v.length;
      }
      /*isGM*/
      y[12] && _.p(y, E), E[0] & /*isGM, filteredNews, openNews, editNews*/
      4461568 && (w = ce(
        /*filteredNews*/
        y[10]
      ), d = Tl(d, E, k, 1, y, w, p, u, Qa, $p, m, Xp)), /*filteredNews*/
      y[10].length === 0 ? A || (A = e0(), A.c(), A.m(u, null)) : A && (A.d(1), A = null);
    },
    i(y) {
      y && (b || Ne(() => {
        b = st(u, yt, { y: 20, duration: 400 }), b.start();
      }));
    },
    o: ge,
    d(y) {
      y && (P(e), P(c), P(f)), Fe(h, y), _ && _.d();
      for (let E = 0; E < d.length; E += 1)
        d[E].d();
      A && A.d();
    }
  };
}
function Zp(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_3*/
      l[30](
        /*cat*/
        l[61]
      )
    );
  }
  return {
    c() {
      e = r("button"), e.textContent = "√ó", s(e, "class", "del-cat svelte-1bpn3pt");
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", Lt(n)), t = !0);
    },
    p(o, c) {
      l = o;
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function xp(l) {
  let e, t, i, n, o, c = (
    /*cat*/
    l[61] + ""
  ), f, u, d, p, m, b = (
    /*isGM*/
    l[12] && /*cat*/
    l[61] !== "GERAL" && Zp(l)
  );
  function v() {
    return (
      /*click_handler_4*/
      l[31](
        /*cat*/
        l[61]
      )
    );
  }
  function h(..._) {
    return (
      /*drop_handler*/
      l[32](
        /*cat*/
        l[61],
        ..._
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("div"), i = r("i"), o = g(), f = B(c), u = g(), b && b.c(), d = g(), s(i, "class", n = "fas " + /*activeCategory*/
      (l[0] === /*cat*/
      l[61] ? "fa-folder-open" : "fa-folder")), s(t, "class", "cat-name svelte-1bpn3pt"), s(e, "class", "cat-item svelte-1bpn3pt"), he(
        e,
        "active",
        /*activeCategory*/
        l[0] === /*cat*/
        l[61]
      );
    },
    m(_, w) {
      q(_, e, w), a(e, t), a(t, i), a(t, o), a(t, f), a(e, u), b && b.m(e, null), a(e, d), p || (m = [
        R(e, "click", v),
        R(e, "dragover", Ak),
        R(e, "drop", h)
      ], p = !0);
    },
    p(_, w) {
      l = _, w[0] & /*activeCategory, categories*/
      3 && n !== (n = "fas " + /*activeCategory*/
      (l[0] === /*cat*/
      l[61] ? "fa-folder-open" : "fa-folder")) && s(i, "class", n), w[0] & /*categories*/
      2 && c !== (c = /*cat*/
      l[61] + "") && te(f, c), /*isGM*/
      l[12] && /*cat*/
      l[61] !== "GERAL" ? b ? b.p(l, w) : (b = Zp(l), b.c(), b.m(e, d)) : b && (b.d(1), b = null), w[0] & /*activeCategory, categories*/
      3 && he(
        e,
        "active",
        /*activeCategory*/
        l[0] === /*cat*/
        l[61]
      );
    },
    d(_) {
      _ && P(e), b && b.d(), p = !1, Te(m);
    }
  };
}
function pk(l) {
  let e, t, i;
  const n = [bk, mk], o = [];
  function c(f, u) {
    return (
      /*showCatInput*/
      f[8] ? 0 : 1
    );
  }
  return t = c(l), i = o[t] = n[t](l), {
    c() {
      e = r("div"), i.c(), s(e, "class", "cat-creator svelte-1bpn3pt");
    },
    m(f, u) {
      q(f, e, u), o[t].m(e, null);
    },
    p(f, u) {
      let d = t;
      t = c(f), t === d ? o[t].p(f, u) : ($e(), Ae(o[d], 1, 1, () => {
        o[d] = null;
      }), et(), i = o[t], i ? i.p(f, u) : (i = o[t] = n[t](f), i.c()), ne(i, 1), i.m(e, null));
    },
    d(f) {
      f && P(e), o[t].d();
    }
  };
}
function mk(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.innerHTML = '<i class="fas fa-plus-circle"></i> NOVA PASTA', s(e, "class", "add-cat-btn svelte-1bpn3pt");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_5*/
        l[35]
      ), t = !0);
    },
    p: ge,
    i: ge,
    o: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function bk(l) {
  let e, t, i, n, o, c, f, u;
  return {
    c() {
      e = r("div"), t = r("input"), i = g(), n = r("button"), n.textContent = "OK", s(t, "type", "text"), s(t, "placeholder", "Nome..."), t.autofocus = !0, s(t, "class", "svelte-1bpn3pt"), s(n, "class", "svelte-1bpn3pt"), s(e, "class", "cat-input-group svelte-1bpn3pt");
    },
    m(d, p) {
      q(d, e, p), a(e, t), x(
        t,
        /*newCategoryName*/
        l[7]
      ), a(e, i), a(e, n), c = !0, t.focus(), f || (u = [
        R(
          t,
          "input",
          /*input_input_handler*/
          l[33]
        ),
        R(
          t,
          "keydown",
          /*keydown_handler*/
          l[34]
        ),
        R(
          n,
          "click",
          /*addCategory*/
          l[13]
        )
      ], f = !0);
    },
    p(d, p) {
      p[0] & /*newCategoryName*/
      128 && t.value !== /*newCategoryName*/
      d[7] && x(
        t,
        /*newCategoryName*/
        d[7]
      );
    },
    i(d) {
      c || (d && Ne(() => {
        c && (o || (o = We(e, yt, {}, !0)), o.run(1));
      }), c = !0);
    },
    o(d) {
      d && (o || (o = We(e, yt, {}, !1)), o.run(0)), c = !1;
    },
    d(d) {
      d && P(e), d && o && o.end(), f = !1, Te(u);
    }
  };
}
function vk(l) {
  let e, t, i, n;
  function o() {
    return (
      /*click_handler_6*/
      l[36](
        /*news*/
        l[58]
      )
    );
  }
  return {
    c() {
      e = r("div"), t = r("button"), t.innerHTML = '<i class="fas fa-edit"></i>', s(t, "class", "gm-btn edit svelte-1bpn3pt"), s(e, "class", "gm-tools svelte-1bpn3pt");
    },
    m(c, f) {
      q(c, e, f), a(e, t), i || (n = R(t, "click", Lt(o)), i = !0);
    },
    p(c, f) {
      l = c;
    },
    d(c) {
      c && P(e), i = !1, n();
    }
  };
}
function $p(l, e) {
  let t, i, n, o = (
    /*news*/
    e[58].dateReal + ""
  ), c, f, u, d, p, m, b = (
    /*news*/
    e[58].dateGame + ""
  ), v, h, _, w = (
    /*news*/
    e[58].title + ""
  ), k, A, y, E = (
    /*news*/
    e[58].summary + ""
  ), S, O, C, T, N, I, D = (
    /*isGM*/
    e[12] && vk(e)
  );
  function M() {
    return (
      /*click_handler_7*/
      e[37](
        /*news*/
        e[58]
      )
    );
  }
  function G(...L) {
    return (
      /*dragstart_handler*/
      e[38](
        /*news*/
        e[58],
        ...L
      )
    );
  }
  return {
    key: l,
    first: null,
    c() {
      t = r("div"), i = r("div"), n = r("div"), c = B(o), f = g(), u = r("div"), d = r("div"), p = r("span"), p.textContent = "‚Ä¢", m = g(), v = B(b), h = g(), _ = r("h3"), k = B(w), A = g(), y = r("p"), S = B(E), O = g(), D && D.c(), C = g(), T = r("div"), s(n, "class", "date-overlay svelte-1bpn3pt"), s(i, "class", "card-img svelte-1bpn3pt"), ae(i, "background-image", "url('" + /*news*/
      e[58].image + "')"), s(p, "class", "bullet"), s(d, "class", "game-date svelte-1bpn3pt"), s(_, "class", "svelte-1bpn3pt"), s(y, "class", "svelte-1bpn3pt"), s(u, "class", "card-info svelte-1bpn3pt"), s(T, "class", "card-glow"), s(t, "class", "news-card svelte-1bpn3pt"), s(
        t,
        "draggable",
        /*isGM*/
        e[12]
      ), he(
        t,
        "dh-card-style",
        /*news*/
        e[58].type === "datahell"
      ), this.first = t;
    },
    m(L, U) {
      q(L, t, U), a(t, i), a(i, n), a(n, c), a(t, f), a(t, u), a(u, d), a(d, p), a(d, m), a(d, v), a(u, h), a(u, _), a(_, k), a(u, A), a(u, y), a(y, S), a(u, O), D && D.m(u, null), a(t, C), a(t, T), N || (I = [
        R(t, "click", M),
        R(t, "dragstart", G)
      ], N = !0);
    },
    p(L, U) {
      e = L, U[0] & /*filteredNews*/
      1024 && o !== (o = /*news*/
      e[58].dateReal + "") && te(c, o), U[0] & /*filteredNews*/
      1024 && ae(i, "background-image", "url('" + /*news*/
      e[58].image + "')"), U[0] & /*filteredNews*/
      1024 && b !== (b = /*news*/
      e[58].dateGame + "") && te(v, b), U[0] & /*filteredNews*/
      1024 && w !== (w = /*news*/
      e[58].title + "") && te(k, w), U[0] & /*filteredNews*/
      1024 && E !== (E = /*news*/
      e[58].summary + "") && te(S, E), /*isGM*/
      e[12] && D.p(e, U), U[0] & /*filteredNews*/
      1024 && he(
        t,
        "dh-card-style",
        /*news*/
        e[58].type === "datahell"
      );
    },
    d(L) {
      L && P(t), D && D.d(), N = !1, Te(I);
    }
  };
}
function e0(l) {
  let e;
  return {
    c() {
      e = r("div"), e.innerHTML = '<i class="fas fa-folder-open"></i> <span>PASTA VAZIA</span>', s(e, "class", "empty-state svelte-1bpn3pt");
    },
    m(t, i) {
      q(t, e, i);
    },
    d(t) {
      t && P(e);
    }
  };
}
function t0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = (
    /*selectedNews*/
    l[3].audio && l0(l)
  );
  const h = [kk, _k], _ = [];
  function w(k, A) {
    return (
      /*selectedNews*/
      k[3].type === "datahell" ? 0 : 1
    );
  }
  return f = w(l), u = _[f] = h[f](l), {
    c() {
      e = r("div"), t = r("div"), i = r("button"), i.innerHTML = '<i class="fas fa-chevron-left"></i> VOLTAR', n = g(), o = r("div"), v && v.c(), c = g(), u.c(), s(i, "class", "btn-back svelte-1bpn3pt"), s(o, "class", "audio-controls"), s(t, "class", "reader-toolbar svelte-1bpn3pt"), s(e, "class", "news-reader full-width svelte-1bpn3pt");
    },
    m(k, A) {
      q(k, e, A), a(e, t), a(t, i), a(t, n), a(t, o), v && v.m(o, null), a(e, c), _[f].m(e, null), p = !0, m || (b = R(
        i,
        "click",
        /*backToList*/
        l[19]
      ), m = !0);
    },
    p(k, A) {
      /*selectedNews*/
      k[3].audio ? v ? v.p(k, A) : (v = l0(k), v.c(), v.m(o, null)) : v && (v.d(1), v = null);
      let y = f;
      f = w(k), f === y ? _[f].p(k, A) : ($e(), Ae(_[y], 1, 1, () => {
        _[y] = null;
      }), et(), u = _[f], u ? u.p(k, A) : (u = _[f] = h[f](k), u.c()), ne(u, 1), u.m(e, null));
    },
    i(k) {
      p || (ne(u), k && (d || Ne(() => {
        d = st(e, Qe, {}), d.start();
      })), p = !0);
    },
    o(k) {
      Ae(u), p = !1;
    },
    d(k) {
      k && P(e), v && v.d(), _[f].d(), m = !1, b();
    }
  };
}
function l0(l) {
  let e, t, i;
  function n(f, u) {
    return (
      /*isMuted*/
      f[4] ? gk : hk
    );
  }
  let o = n(l), c = o(l);
  return {
    c() {
      e = r("button"), c.c(), s(e, "class", "btn-audio svelte-1bpn3pt"), he(
        e,
        "muted",
        /*isMuted*/
        l[4]
      );
    },
    m(f, u) {
      q(f, e, u), c.m(e, null), t || (i = R(
        e,
        "click",
        /*toggleMute*/
        l[17]
      ), t = !0);
    },
    p(f, u) {
      o !== (o = n(f)) && (c.d(1), c = o(f), c && (c.c(), c.m(e, null))), u[0] & /*isMuted*/
      16 && he(
        e,
        "muted",
        /*isMuted*/
        f[4]
      );
    },
    d(f) {
      f && P(e), c.d(), t = !1, i();
    }
  };
}
function hk(l) {
  let e, t;
  return {
    c() {
      e = r("i"), t = B(" TOCANDO..."), s(e, "class", "fas fa-volume-up");
    },
    m(i, n) {
      q(i, e, n), q(i, t, n);
    },
    d(i) {
      i && (P(e), P(t));
    }
  };
}
function gk(l) {
  let e, t;
  return {
    c() {
      e = r("i"), t = B(" OFF"), s(e, "class", "fas fa-volume-mute");
    },
    m(i, n) {
      q(i, e, n), q(i, t, n);
    },
    d(i) {
      i && (P(e), P(t));
    }
  };
}
function _k(l) {
  let e, t, i, n, o, c, f = (
    /*selectedNews*/
    l[3].dateGame + ""
  ), u, d, p, m = (
    /*selectedNews*/
    l[3].title + ""
  ), b, v, h, _, w = (
    /*selectedNews*/
    l[3].contentHtml + ""
  ), k, A;
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("div"), o = r("div"), c = r("span"), u = B(f), d = g(), p = r("h1"), b = B(m), v = g(), h = r("div"), _ = r("div"), k = g(), A = r("div"), A.textContent = "/// FIM DA TRANSMISS√ÉO ///", s(t, "class", "header-overlay svelte-1bpn3pt"), s(c, "class", "meta-tag svelte-1bpn3pt"), s(p, "class", "svelte-1bpn3pt"), s(o, "class", "title-block svelte-1bpn3pt"), s(n, "class", "header-content svelte-1bpn3pt"), s(e, "class", "reader-header svelte-1bpn3pt"), ae(e, "background-image", "url('" + /*selectedNews*/
      l[3].image + "')"), s(_, "class", "reader-content html-injection svelte-1bpn3pt"), s(A, "class", "end-mark"), s(h, "class", "reader-scroll-area custom-scroll svelte-1bpn3pt");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(e, i), a(e, n), a(n, o), a(o, c), a(c, u), a(o, d), a(o, p), a(p, b), q(y, v, E), q(y, h, E), a(h, _), _.innerHTML = w, a(h, k), a(h, A);
    },
    p(y, E) {
      E[0] & /*selectedNews*/
      8 && f !== (f = /*selectedNews*/
      y[3].dateGame + "") && te(u, f), E[0] & /*selectedNews*/
      8 && m !== (m = /*selectedNews*/
      y[3].title + "") && te(b, m), E[0] & /*selectedNews*/
      8 && ae(e, "background-image", "url('" + /*selectedNews*/
      y[3].image + "')"), E[0] & /*selectedNews*/
      8 && w !== (w = /*selectedNews*/
      y[3].contentHtml + "") && (_.innerHTML = w);
    },
    i: ge,
    o: ge,
    d(y) {
      y && (P(e), P(v), P(h));
    }
  };
}
function kk(l) {
  let e, t;
  return e = new vs({
    props: {
      data: (
        /*selectedNews*/
        l[3].dataHell
      ),
      mode: "view"
    }
  }), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p(i, n) {
      const o = {};
      n[0] & /*selectedNews*/
      8 && (o.data = /*selectedNews*/
      i[3].dataHell), e.$set(o);
    },
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function a0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T;
  function N(D) {
    l[42](D);
  }
  let I = { mode: "edit" };
  return (
    /*dataHellForm*/
    l[6] !== void 0 && (I.data = /*dataHellForm*/
    l[6]), y = new vs({ props: I }), wa.push(() => fm(y, "data", N)), {
      c() {
        e = r("div"), t = r("div"), i = r("span"), i.textContent = "EDITOR DATA HELL", n = g(), o = r("label"), c = B("T√≠tulo (Lista): "), f = r("input"), u = g(), d = r("label"), p = B("Resumo (Lista): "), m = r("input"), b = g(), v = r("div"), h = r("button"), h.textContent = "üíæ SALVAR", _ = g(), w = r("button"), w.textContent = "‚ùå", k = g(), A = r("div"), kt(y.$$.fragment), ae(i, "color", "#ff0055"), ae(i, "font-weight", "bold"), ae(i, "margin-right", "10px"), s(f, "type", "text"), s(f, "class", "svelte-1bpn3pt"), s(o, "class", "svelte-1bpn3pt"), s(m, "type", "text"), s(m, "class", "svelte-1bpn3pt"), s(d, "class", "svelte-1bpn3pt"), s(h, "class", "save svelte-1bpn3pt"), s(h, "title", "Salvar"), s(w, "class", "cancel svelte-1bpn3pt"), s(w, "title", "Cancelar"), s(v, "class", "actions svelte-1bpn3pt"), ae(v, "margin-left", "auto"), s(t, "class", "meta-editor-bar svelte-1bpn3pt"), ae(A, "flex", "1"), ae(A, "overflow", "hidden"), s(e, "class", "admin-full-wrapper svelte-1bpn3pt");
      },
      m(D, M) {
        q(D, e, M), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), x(
          f,
          /*form*/
          l[5].title
        ), a(t, u), a(t, d), a(d, p), a(d, m), x(
          m,
          /*form*/
          l[5].summary
        ), a(t, b), a(t, v), a(v, h), a(v, _), a(v, w), a(e, k), a(e, A), ht(y, A, null), O = !0, C || (T = [
          R(
            f,
            "input",
            /*input0_input_handler*/
            l[39]
          ),
          R(
            m,
            "input",
            /*input1_input_handler*/
            l[40]
          ),
          R(
            h,
            "click",
            /*saveNews*/
            l[23]
          ),
          R(
            w,
            "click",
            /*click_handler_8*/
            l[41]
          )
        ], C = !0);
      },
      p(D, M) {
        M[0] & /*form*/
        32 && f.value !== /*form*/
        D[5].title && x(
          f,
          /*form*/
          D[5].title
        ), M[0] & /*form*/
        32 && m.value !== /*form*/
        D[5].summary && x(
          m,
          /*form*/
          D[5].summary
        );
        const G = {};
        !E && M[0] & /*dataHellForm*/
        64 && (E = !0, G.data = /*dataHellForm*/
        D[6], nm(() => E = !1)), y.$set(G);
      },
      i(D) {
        O || (ne(y.$$.fragment, D), D && (S || Ne(() => {
          S = st(e, yt, {}), S.start();
        })), O = !0);
      },
      o(D) {
        Ae(y.$$.fragment, D), O = !1;
      },
      d(D) {
        D && P(e), gt(y), C = !1, Te(T);
      }
    }
  );
}
function i0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O, C, T, N, I, D, M, G, L, U, z, F, W, H, V, J = (
    /*form*/
    l[5].contentHtml + ""
  ), j, X, K, Z = (
    /*form*/
    l[5].id && s0(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = r("h3"), i.innerHTML = '<i class="fas fa-terminal"></i> EDITOR PADR√ÉO', n = g(), o = r("div"), c = r("label"), c.textContent = "T√≠tulo", f = r("input"), u = g(), d = r("div"), p = r("label"), p.textContent = "Data In-Game", m = r("input"), b = g(), v = r("div"), h = r("label"), h.textContent = "Imagem URL", _ = r("input"), w = g(), k = r("div"), A = r("label"), A.textContent = "√Åudio", y = r("input"), E = g(), S = r("div"), O = r("label"), O.textContent = "Resumo", C = r("textarea"), T = g(), N = r("div"), I = r("label"), I.textContent = "HTML Content", D = r("textarea"), M = g(), G = r("div"), L = r("button"), L.textContent = "SALVAR", U = g(), z = r("button"), z.textContent = "CANCELAR", F = g(), Z && Z.c(), W = g(), H = r("div"), V = r("div"), s(c, "class", "svelte-1bpn3pt"), s(f, "type", "text"), s(f, "class", "svelte-1bpn3pt"), s(o, "class", "form-group svelte-1bpn3pt"), s(p, "class", "svelte-1bpn3pt"), s(m, "type", "text"), s(m, "class", "svelte-1bpn3pt"), s(d, "class", "form-group svelte-1bpn3pt"), s(h, "class", "svelte-1bpn3pt"), s(_, "type", "text"), s(_, "class", "svelte-1bpn3pt"), s(v, "class", "form-group svelte-1bpn3pt"), s(A, "class", "svelte-1bpn3pt"), s(y, "type", "text"), s(y, "class", "svelte-1bpn3pt"), s(k, "class", "form-group svelte-1bpn3pt"), s(O, "class", "svelte-1bpn3pt"), s(C, "rows", "3"), s(C, "class", "svelte-1bpn3pt"), s(S, "class", "form-group svelte-1bpn3pt"), s(I, "class", "svelte-1bpn3pt"), s(D, "class", "code-editor svelte-1bpn3pt"), s(D, "rows", "15"), s(N, "class", "form-group full svelte-1bpn3pt"), s(L, "class", "save svelte-1bpn3pt"), s(z, "class", "cancel svelte-1bpn3pt"), s(G, "class", "admin-actions svelte-1bpn3pt"), s(t, "class", "admin-sidebar custom-scroll svelte-1bpn3pt"), s(V, "class", "html-injection preview-body svelte-1bpn3pt"), s(H, "class", "admin-preview custom-scroll svelte-1bpn3pt"), s(e, "class", "admin-panel full-width svelte-1bpn3pt");
    },
    m(le, $) {
      q(le, e, $), a(e, t), a(t, i), a(t, n), a(t, o), a(o, c), a(o, f), x(
        f,
        /*form*/
        l[5].title
      ), a(t, u), a(t, d), a(d, p), a(d, m), x(
        m,
        /*form*/
        l[5].dateGame
      ), a(t, b), a(t, v), a(v, h), a(v, _), x(
        _,
        /*form*/
        l[5].image
      ), a(t, w), a(t, k), a(k, A), a(k, y), x(
        y,
        /*form*/
        l[5].audio
      ), a(t, E), a(t, S), a(S, O), a(S, C), x(
        C,
        /*form*/
        l[5].summary
      ), a(t, T), a(t, N), a(N, I), a(N, D), x(
        D,
        /*form*/
        l[5].contentHtml
      ), a(t, M), a(t, G), a(G, L), a(G, U), a(G, z), a(G, F), Z && Z.m(G, null), a(e, W), a(e, H), a(H, V), V.innerHTML = J, X || (K = [
        R(
          f,
          "input",
          /*input0_input_handler_1*/
          l[43]
        ),
        R(
          m,
          "input",
          /*input1_input_handler_1*/
          l[44]
        ),
        R(
          _,
          "input",
          /*input2_input_handler*/
          l[45]
        ),
        R(
          y,
          "input",
          /*input3_input_handler*/
          l[46]
        ),
        R(
          C,
          "input",
          /*textarea0_input_handler*/
          l[47]
        ),
        R(
          D,
          "input",
          /*textarea1_input_handler*/
          l[48]
        ),
        R(
          L,
          "click",
          /*saveNews*/
          l[23]
        ),
        R(
          z,
          "click",
          /*click_handler_9*/
          l[49]
        )
      ], X = !0);
    },
    p(le, $) {
      $[0] & /*form*/
      32 && f.value !== /*form*/
      le[5].title && x(
        f,
        /*form*/
        le[5].title
      ), $[0] & /*form*/
      32 && m.value !== /*form*/
      le[5].dateGame && x(
        m,
        /*form*/
        le[5].dateGame
      ), $[0] & /*form*/
      32 && _.value !== /*form*/
      le[5].image && x(
        _,
        /*form*/
        le[5].image
      ), $[0] & /*form*/
      32 && y.value !== /*form*/
      le[5].audio && x(
        y,
        /*form*/
        le[5].audio
      ), $[0] & /*form*/
      32 && x(
        C,
        /*form*/
        le[5].summary
      ), $[0] & /*form*/
      32 && x(
        D,
        /*form*/
        le[5].contentHtml
      ), /*form*/
      le[5].id ? Z ? Z.p(le, $) : (Z = s0(le), Z.c(), Z.m(G, null)) : Z && (Z.d(1), Z = null), $[0] & /*form*/
      32 && J !== (J = /*form*/
      le[5].contentHtml + "") && (V.innerHTML = J);
    },
    i(le) {
      le && (j || Ne(() => {
        j = st(e, yt, {}), j.start();
      }));
    },
    o: ge,
    d(le) {
      le && P(e), Z && Z.d(), X = !1, Te(K);
    }
  };
}
function s0(l) {
  let e, t, i;
  return {
    c() {
      e = r("button"), e.textContent = "üóëÔ∏è", s(e, "class", "delete svelte-1bpn3pt");
    },
    m(n, o) {
      q(n, e, o), t || (i = R(
        e,
        "click",
        /*click_handler_10*/
        l[50]
      ), t = !0);
    },
    p: ge,
    d(n) {
      n && P(e), t = !1, i();
    }
  };
}
function wk(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y = (
    /*isGM*/
    l[12] && /*viewMode*/
    l[2] === "list" && Yp(l)
  ), E = (
    /*viewMode*/
    l[2] === "list" && Kp(l)
  ), S = (
    /*viewMode*/
    l[2] === "detail" && /*selectedNews*/
    l[3] && t0(l)
  ), O = (
    /*viewMode*/
    l[2] === "admin-datahell" && /*isGM*/
    l[12] && a0(l)
  ), C = (
    /*viewMode*/
    l[2] === "admin" && /*isGM*/
    l[12] && i0(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), i = g(), n = r("header"), o = r("div"), o.innerHTML = '<i class="fas fa-globe-americas spin-icon svelte-1bpn3pt"></i> DATA HELL NEWS', c = g(), f = r("div"), y && y.c(), u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-power-off"></i> SAIR', p = g(), m = r("div"), E && E.c(), b = g(), S && S.c(), v = g(), O && O.c(), h = g(), C && C.c(), s(t, "class", "scanlines svelte-1bpn3pt"), s(o, "class", "brand svelte-1bpn3pt"), s(d, "class", "btn-close svelte-1bpn3pt"), s(f, "class", "controls"), s(n, "class", "journal-header svelte-1bpn3pt"), s(m, "class", "journal-body-layout svelte-1bpn3pt"), s(e, "class", "journal-container svelte-1bpn3pt"), ae(
        e,
        "--primary",
        /*theme*/
        l[11].colors.primary
      ), ae(
        e,
        "--bg-color",
        /*theme*/
        l[11].colors.bg
      ), ae(
        e,
        "--font-main",
        /*theme*/
        l[11].font
      );
    },
    m(T, N) {
      q(T, e, N), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f), y && y.m(f, null), a(f, u), a(f, d), a(e, p), a(e, m), E && E.m(m, null), a(m, b), S && S.m(m, null), a(m, v), O && O.m(m, null), a(m, h), C && C.m(m, null), w = !0, k || (A = R(
        d,
        "click",
        /*closeApp*/
        l[20]
      ), k = !0);
    },
    p(T, N) {
      /*isGM*/
      T[12] && /*viewMode*/
      T[2] === "list" ? y ? y.p(T, N) : (y = Yp(T), y.c(), y.m(f, u)) : y && (y.d(1), y = null), /*viewMode*/
      T[2] === "list" ? E ? (E.p(T, N), N[0] & /*viewMode*/
      4 && ne(E, 1)) : (E = Kp(T), E.c(), ne(E, 1), E.m(m, b)) : E && (E.d(1), E = null), /*viewMode*/
      T[2] === "detail" && /*selectedNews*/
      T[3] ? S ? (S.p(T, N), N[0] & /*viewMode, selectedNews*/
      12 && ne(S, 1)) : (S = t0(T), S.c(), ne(S, 1), S.m(m, v)) : S && ($e(), Ae(S, 1, 1, () => {
        S = null;
      }), et()), /*viewMode*/
      T[2] === "admin-datahell" && /*isGM*/
      T[12] ? O ? (O.p(T, N), N[0] & /*viewMode*/
      4 && ne(O, 1)) : (O = a0(T), O.c(), ne(O, 1), O.m(m, h)) : O && ($e(), Ae(O, 1, 1, () => {
        O = null;
      }), et()), /*viewMode*/
      T[2] === "admin" && /*isGM*/
      T[12] ? C ? (C.p(T, N), N[0] & /*viewMode*/
      4 && ne(C, 1)) : (C = i0(T), C.c(), ne(C, 1), C.m(m, null)) : C && (C.d(1), C = null), (!w || N[0] & /*theme*/
      2048) && ae(
        e,
        "--primary",
        /*theme*/
        T[11].colors.primary
      ), (!w || N[0] & /*theme*/
      2048) && ae(
        e,
        "--bg-color",
        /*theme*/
        T[11].colors.bg
      ), (!w || N[0] & /*theme*/
      2048) && ae(
        e,
        "--font-main",
        /*theme*/
        T[11].font
      );
    },
    i(T) {
      w || (ne(E), ne(S), ne(O), ne(C), T && (_ || Ne(() => {
        _ = st(e, Qe, { duration: 300 }), _.start();
      })), w = !0);
    },
    o(T) {
      Ae(S), Ae(O), w = !1;
    },
    d(T) {
      T && P(e), y && y.d(), E && E.d(), S && S.d(), O && O.d(), C && C.d(), k = !1, A();
    }
  };
}
function ss() {
  return {
    edition: "#1",
    date: "01/01/2077",
    status: "CR√çTICO",
    // Garante que a imagem de capa exista no objeto
    coverImage: "",
    cards: [
      {
        title: "MANCHETE",
        text: "<p>Texto...</p>",
        image: "",
        hellQuote: ""
      }
    ],
    stats: [
      {
        label: "CASOS",
        value: "0",
        tooltip: "Info"
      }
    ],
    trends: []
  };
}
function yk(l, e) {
  l.dataTransfer.setData("text/plain", e), l.dataTransfer.effectAllowed = "move";
}
function Ak(l) {
  l.preventDefault(), l.dataTransfer.dropEffect = "move";
}
function Ek(l, e, t) {
  let i, n, { active: o = !1 } = e;
  const c = ml(), f = game.user.isGM;
  let u = game.settings.get("multiversus-rpg", "menuTheme") || "default", d = [], p = ["GERAL"];
  try {
    d = game.settings.get("multiversus-rpg", "worldNewsData") || [], p = game.settings.get("multiversus-rpg", "worldNewsCategories") || ["GERAL", "MISS√ïES", "RUMORES"];
  } catch (Oe) {
    console.error("NEXUS | Erro ao carregar configura√ß√µes do Jornal:", Oe), f && ui.notifications.error("Erro de Configura√ß√£o: Adicione 'worldNewsCategories' no main.js!");
  }
  Array.isArray(p) || (p = ["GERAL"]);
  let m = "list", b = null, v = "GERAL", h = null, _ = !1, w = E(), k = ss(), A = "", y = !1;
  function E() {
    return {
      id: null,
      type: "standard",
      category: v,
      title: "",
      summary: "",
      image: "",
      audio: "",
      dateGame: "",
      contentHtml: "",
      dateReal: (/* @__PURE__ */ new Date()).toLocaleDateString("pt-BR")
    };
  }
  async function S() {
    A && (p.includes(A.toUpperCase()) || (t(1, p = [...p, A.toUpperCase()]), await game.settings.set("multiversus-rpg", "worldNewsCategories", p)), t(7, A = ""), t(8, y = !1));
  }
  async function O(Oe) {
    if (Oe === "GERAL") return ui.notifications.warn("N√£o pode deletar a categoria padr√£o.");
    confirm(`Deletar a pasta ${Oe}? Not√≠cias nela ir√£o para GERAL.`) && (t(26, d = d.map((_e) => _e.category === Oe ? { ..._e, category: "GERAL" } : _e)), await game.settings.set("multiversus-rpg", "worldNewsData", d), t(1, p = p.filter((_e) => _e !== Oe)), await game.settings.set("multiversus-rpg", "worldNewsCategories", p), t(0, v = "GERAL"));
  }
  function C(Oe) {
    t(0, v = Oe);
  }
  async function T(Oe, _e) {
    Oe.preventDefault();
    const ue = Oe.dataTransfer.getData("text/plain"), Re = d.findIndex((Ce) => Ce.id === ue);
    Re >= 0 && d[Re].category !== _e && (t(26, d[Re].category = _e, d), t(26, d = [...d]), await game.settings.set("multiversus-rpg", "worldNewsData", d), ui.notifications.info(`Not√≠cia movida para: ${_e}`));
  }
  function N(Oe) {
    if (!Oe) return;
    I();
    const _e = Oe.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/user\/\S+|\/ytscreeningroom\?v=))([\w\-]{10,12})\b/);
    if (_e && _e[1]) {
      let ue = _e[1];
      const Re = document.createElement("iframe");
      Re.id = "news-audio-yt", Re.style.display = "none", Re.src = `https://www.youtube.com/embed/${ue}?autoplay=1&loop=1&playlist=${ue}`, document.body.appendChild(Re);
    } else
      h = new Audio(Oe), h.loop = !0, h.muted = _, h.volume = 0.5, h.play().catch((ue) => console.error("Autoplay bloqueado:", ue));
  }
  function I() {
    h && (h.pause(), h = null);
    const Oe = document.getElementById("news-audio-yt");
    Oe && (Oe.src = "", Oe.remove());
  }
  function D() {
    t(4, _ = !_), h && (h.muted = _);
  }
  function M(Oe) {
    t(3, b = Oe), t(2, m = "detail"), Oe.audio && N(Oe.audio);
  }
  function G() {
    I(), t(3, b = null), t(2, m = "list");
  }
  function L() {
    I(), c("close");
  }
  let U = !1;
  function z(Oe) {
    t(9, U = !1), t(5, w = E()), t(5, w.id = foundry.utils.randomID(), w), t(5, w.category = v, w), Oe === "datahell" ? (t(5, w.type = "datahell", w), t(5, w.title = "NOVA EDI√á√ÉO DATA HELL", w), t(5, w.image = "https://placehold.co/400x200/2a0a10/ff0055?text=DATA+HELL", w), t(6, k = ss()), t(2, m = "admin-datahell")) : (t(5, w.type = "standard", w), t(2, m = "admin"));
  }
  function F(Oe) {
    Oe.type === "datahell" ? (t(5, w = { ...Oe }), t(6, k = Oe.dataHell || ss()), t(2, m = "admin-datahell")) : (t(5, w = { ...Oe }), t(2, m = "admin"));
  }
  async function W() {
    const Oe = d.findIndex((_e) => _e.id === w.id);
    w.type === "datahell" && (t(5, w.dataHell = k, w), k.coverImage && k.coverImage.trim() !== "" && t(5, w.image = k.coverImage, w)), Oe >= 0 ? t(26, d[Oe] = { ...w }, d) : t(26, d = [w, ...d]), await game.settings.set("multiversus-rpg", "worldNewsData", d), t(2, m = "list");
  }
  async function H(Oe) {
    confirm("Deletar arquivo permanentemente?") && (t(26, d = d.filter((_e) => _e.id !== Oe)), await game.settings.set("multiversus-rpg", "worldNewsData", d), t(2, m = "list"));
  }
  ra(() => I());
  const V = () => t(9, U = !U), J = () => z("standard"), j = () => z("datahell"), X = (Oe) => O(Oe), K = (Oe) => C(Oe), Z = (Oe, _e) => T(_e, Oe);
  function le() {
    A = this.value, t(7, A);
  }
  const $ = (Oe) => Oe.key === "Enter" && S(), se = () => t(8, y = !0), Y = (Oe) => F(Oe), Q = (Oe) => M(Oe), ie = (Oe, _e) => yk(_e, Oe.id);
  function ee() {
    w.title = this.value, t(5, w);
  }
  function pe() {
    w.summary = this.value, t(5, w);
  }
  const Ee = () => t(2, m = "list");
  function De(Oe) {
    k = Oe, t(6, k);
  }
  function we() {
    w.title = this.value, t(5, w);
  }
  function ke() {
    w.dateGame = this.value, t(5, w);
  }
  function me() {
    w.image = this.value, t(5, w);
  }
  function re() {
    w.audio = this.value, t(5, w);
  }
  function ye() {
    w.summary = this.value, t(5, w);
  }
  function oe() {
    w.contentHtml = this.value, t(5, w);
  }
  const be = () => t(2, m = "list"), de = () => H(w.id);
  return l.$$set = (Oe) => {
    "active" in Oe && t(25, o = Oe.active);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*newsData, activeCategory*/
    67108865 && t(10, n = d.filter((Oe) => (Oe.category || "GERAL") === v));
  }, t(11, i = (nl == null ? void 0 : nl[u]) || (nl == null ? void 0 : nl.default) || {
    colors: { primary: "#00ff41", bg: "#000" },
    font: "monospace"
  }), [
    v,
    p,
    m,
    b,
    _,
    w,
    k,
    A,
    y,
    U,
    n,
    i,
    f,
    S,
    O,
    C,
    T,
    D,
    M,
    G,
    L,
    z,
    F,
    W,
    H,
    o,
    d,
    V,
    J,
    j,
    X,
    K,
    Z,
    le,
    $,
    se,
    Y,
    Q,
    ie,
    ee,
    pe,
    Ee,
    De,
    we,
    ke,
    me,
    re,
    ye,
    oe,
    be,
    de
  ];
}
class Ok extends mt {
  constructor(e) {
    super(), pt(this, e, Ek, wk, dt, { active: 25 }, null, [-1, -1, -1]);
  }
}
function n0(l, e, t) {
  const i = l.slice();
  return i[33] = e[t], i;
}
function o0(l, e, t) {
  const i = l.slice();
  return i[36] = e[t], i;
}
function r0(l) {
  let e, t, i, n, o, c, f, u, d;
  return {
    c() {
      e = r("div"), t = r("video"), n = g(), o = r("button"), o.innerHTML = 'PULAR TRANSMISS√ÉO <i class="fas fa-forward"></i>', at(t.src, i = /*VIDEO_PATH*/
      l[7]) || s(t, "src", i), t.autoplay = !0, s(t, "crossorigin", "anonymous"), s(t, "class", "video-element svelte-ak54f8"), s(o, "class", "skip-btn svelte-ak54f8"), s(e, "class", "fullscreen-layer bg-black svelte-ak54f8");
    },
    m(p, m) {
      q(p, e, m), a(e, t), a(e, n), a(e, o), f = !0, u || (d = [
        R(
          t,
          "ended",
          /*endVideo*/
          l[9]
        ),
        R(
          t,
          "click",
          /*endVideo*/
          l[9]
        ),
        R(
          o,
          "click",
          /*endVideo*/
          l[9]
        )
      ], u = !0);
    },
    p: ge,
    i(p) {
      f || (c && c.end(1), f = !0);
    },
    o(p) {
      p && (c = vi(e, Qe, { duration: 1e3 })), f = !1;
    },
    d(p) {
      p && P(e), p && c && c.end(), u = !1, Te(d);
    }
  };
}
function c0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v = ce(
    /*terminalLines*/
    l[5]
  ), h = [];
  for (let _ = 0; _ < v.length; _ += 1)
    h[_] = f0(o0(l, v, _));
  return {
    c() {
      e = r("div"), t = r("div"), i = r("div"), i.textContent = "TERMINAL DE SEGURAN√áA DA *****, DIVIS√ÇO ALPHA", n = g();
      for (let _ = 0; _ < h.length; _ += 1)
        h[_].c();
      o = g(), c = r("div"), c.innerHTML = '<span class="cursor-blink svelte-ak54f8">_</span>', f = g(), u = r("button"), u.textContent = "[ PULAR BOOT ]", s(i, "class", "term-header svelte-ak54f8"), s(c, "class", "typing-line"), s(t, "class", "terminal-box svelte-ak54f8"), s(u, "class", "skip-text-btn"), s(e, "class", "fullscreen-layer bg-black terminal-layout scanlines svelte-ak54f8");
    },
    m(_, w) {
      q(_, e, w), a(e, t), a(t, i), a(t, n);
      for (let k = 0; k < h.length; k += 1)
        h[k] && h[k].m(t, null);
      a(t, o), a(t, c), a(e, f), a(e, u), p = !0, m || (b = R(
        u,
        "click",
        /*click_handler*/
        l[19]
      ), m = !0);
    },
    p(_, w) {
      if (w[0] & /*terminalLines*/
      32) {
        v = ce(
          /*terminalLines*/
          _[5]
        );
        let k;
        for (k = 0; k < v.length; k += 1) {
          const A = o0(_, v, k);
          h[k] ? h[k].p(A, w) : (h[k] = f0(A), h[k].c(), h[k].m(t, o));
        }
        for (; k < h.length; k += 1)
          h[k].d(1);
        h.length = v.length;
      }
    },
    i(_) {
      p || (d && d.end(1), p = !0);
    },
    o(_) {
      _ && (d = vi(e, Qe, { duration: 500 })), p = !1;
    },
    d(_) {
      _ && P(e), Fe(h, _), _ && d && d.end(), m = !1, b();
    }
  };
}
function f0(l) {
  let e, t = (
    /*line*/
    l[36] + ""
  );
  return {
    c() {
      e = r("div"), s(e, "class", "term-line svelte-ak54f8");
    },
    m(i, n) {
      q(i, e, n), e.innerHTML = t;
    },
    p(i, n) {
      n[0] & /*terminalLines*/
      32 && t !== (t = /*line*/
      i[36] + "") && (e.innerHTML = t);
    },
    d(i) {
      i && P(e);
    }
  };
}
function d0(l) {
  let e, t, i, n, o, c, f, u, d, p, m;
  return t = new fk({
    props: {
      themeColor: (
        /*theme*/
        l[6].colors.primary
      )
    }
  }), t.$on(
    "win",
    /*onMinigameWin*/
    l[10]
  ), {
    c() {
      e = r("div"), kt(t.$$.fragment), i = g(), n = r("div"), n.textContent = "CAPTURE O SINAL PARA PROSSEGUIR", o = g(), c = r("button"), c.textContent = "[ BYPASS SECURITY ]", s(n, "class", "minigame-hint"), s(c, "class", "skip-text-btn"), s(e, "class", "fullscreen-layer bg-black svelte-ak54f8");
    },
    m(b, v) {
      q(b, e, v), ht(t, e, null), a(e, i), a(e, n), a(e, o), a(e, c), d = !0, p || (m = R(
        c,
        "click",
        /*onMinigameWin*/
        l[10]
      ), p = !0);
    },
    p(b, v) {
      const h = {};
      v[0] & /*theme*/
      64 && (h.themeColor = /*theme*/
      b[6].colors.primary), t.$set(h);
    },
    i(b) {
      d || (ne(t.$$.fragment, b), b && Ne(() => {
        d && (u && u.end(1), f = st(e, Qe, { duration: 500 }), f.start());
      }), d = !0);
    },
    o(b) {
      Ae(t.$$.fragment, b), f && f.invalidate(), b && (u = vi(e, Qe, { duration: 500 })), d = !1;
    },
    d(b) {
      b && P(e), gt(t), b && u && u.end(), p = !1, m();
    }
  };
}
function u0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A = (
    /*showSettings*/
    l[4] && p0(l)
  );
  return {
    c() {
      e = r("div"), t = r("div"), t.innerHTML = '<h1 class="glitch-title svelte-ak54f8">MULTIVERSUS RPG</h1> <div class="subtitle svelte-ak54f8">SEASON 1: DATA AND DEVIL</div>', i = g(), n = r("div"), o = r("button"), o.innerHTML = '<i class="fas fa-power-off"></i> <span>INICIAR SESS√ÉO</span>', c = g(), f = r("button"), f.innerHTML = '<i class="fas fa-newspaper"></i> <span>JORNAL DATA HELL</span>', u = g(), d = r("button"), d.innerHTML = '<i class="fas fa-user-secret"></i> <span>REDE SECRETA</span> <span class="tag svelte-ak54f8">EM BREVE</span>', p = g(), m = r("button"), m.innerHTML = '<i class="fas fa-cog"></i> OP√á√ïES DE SISTEMA', b = g(), A && A.c(), v = g(), h = r("div"), h.textContent = `STATUS: CONECTADO // ID: ${game.user.id} // PING: ${Math.floor(Math.random() * 50 + 20)}ms`, s(t, "class", "logo-area svelte-ak54f8"), s(o, "class", "menu-btn primary svelte-ak54f8"), s(f, "class", "menu-btn svelte-ak54f8"), s(d, "class", "menu-btn locked svelte-ak54f8"), s(n, "class", "menu-options svelte-ak54f8"), s(m, "class", "settings-toggle svelte-ak54f8"), he(
        m,
        "active",
        /*showSettings*/
        l[4]
      ), s(h, "class", "footer-credits svelte-ak54f8"), s(e, "class", "fullscreen-layer main-menu svelte-ak54f8");
    },
    m(y, E) {
      q(y, e, E), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f), a(n, u), a(n, d), a(e, p), a(e, m), a(e, b), A && A.m(e, null), a(e, v), a(e, h), w || (k = [
        R(
          o,
          "click",
          /*enterGame*/
          l[16]
        ),
        R(
          f,
          "click",
          /*openJournal*/
          l[14]
        ),
        R(d, "click", Ik),
        R(
          m,
          "click",
          /*toggleSettings*/
          l[11]
        )
      ], w = !0);
    },
    p(y, E) {
      E[0] & /*showSettings*/
      16 && he(
        m,
        "active",
        /*showSettings*/
        y[4]
      ), /*showSettings*/
      y[4] ? A ? (A.p(y, E), E[0] & /*showSettings*/
      16 && ne(A, 1)) : (A = p0(y), A.c(), ne(A, 1), A.m(e, v)) : A && ($e(), Ae(A, 1, 1, () => {
        A = null;
      }), et());
    },
    i(y) {
      ne(A), y && (_ || Ne(() => {
        _ = st(e, Sl, { y: 50, duration: 1500, opacity: 0 }), _.start();
      }));
    },
    o(y) {
      Ae(A);
    },
    d(y) {
      y && P(e), A && A.d(), w = !1, Te(k);
    }
  };
}
function p0(l) {
  let e, t, i, n, o, c, f, u, d, p, m, b, v, h, _, w, k, A, y, E, S, O = nl && Sk(l);
  return {
    c() {
      e = r("div"), t = r("h3"), t.textContent = "PREFER√äNCIAS DE BOOT", i = g(), n = r("label"), o = r("span"), o.textContent = "Pular V√≠deo de Abertura", c = g(), f = r("input"), u = g(), d = r("label"), p = r("span"), p.textContent = "Pular Login/Anima√ß√£o", m = g(), b = r("input"), v = g(), h = r("div"), _ = r("span"), _.textContent = "Interface Theme:", w = g(), k = r("div"), O && O.c(), s(t, "class", "svelte-ak54f8"), s(f, "type", "checkbox"), f.checked = /*skipVideoPref*/
      l[1], s(n, "class", "toggle-row svelte-ak54f8"), s(b, "type", "checkbox"), b.checked = /*skipLoginPref*/
      l[2], s(d, "class", "toggle-row svelte-ak54f8"), s(k, "class", "theme-grid svelte-ak54f8"), s(h, "class", "theme-section svelte-ak54f8"), s(e, "class", "settings-modal svelte-ak54f8");
    },
    m(C, T) {
      q(C, e, T), a(e, t), a(e, i), a(e, n), a(n, o), a(n, c), a(n, f), a(e, u), a(e, d), a(d, p), a(d, m), a(d, b), a(e, v), a(e, h), a(h, _), a(h, w), a(h, k), O && O.m(k, null), y = !0, E || (S = [
        R(
          f,
          "change",
          /*change_handler*/
          l[20]
        ),
        R(
          b,
          "change",
          /*change_handler_1*/
          l[21]
        )
      ], E = !0);
    },
    p(C, T) {
      (!y || T[0] & /*skipVideoPref*/
      2) && (f.checked = /*skipVideoPref*/
      C[1]), (!y || T[0] & /*skipLoginPref*/
      4) && (b.checked = /*skipLoginPref*/
      C[2]), nl && O.p(C, T);
    },
    i(C) {
      y || (C && Ne(() => {
        y && (A || (A = We(e, yt, { duration: 300 }, !0)), A.run(1));
      }), y = !0);
    },
    o(C) {
      C && (A || (A = We(e, yt, { duration: 300 }, !1)), A.run(0)), y = !1;
    },
    d(C) {
      C && P(e), O && O.d(), C && A && A.end(), E = !1, Te(S);
    }
  };
}
function Sk(l) {
  let e, t = ce(Object.values(nl)), i = [];
  for (let n = 0; n < t.length; n += 1)
    i[n] = m0(n0(l, t, n));
  return {
    c() {
      for (let n = 0; n < i.length; n += 1)
        i[n].c();
      e = Pt();
    },
    m(n, o) {
      for (let c = 0; c < i.length; c += 1)
        i[c] && i[c].m(n, o);
      q(n, e, o);
    },
    p(n, o) {
      if (o[0] & /*currentThemeId, changeTheme*/
      4097) {
        t = ce(Object.values(nl));
        let c;
        for (c = 0; c < t.length; c += 1) {
          const f = n0(n, t, c);
          i[c] ? i[c].p(f, o) : (i[c] = m0(f), i[c].c(), i[c].m(e.parentNode, e));
        }
        for (; c < i.length; c += 1)
          i[c].d(1);
        i.length = t.length;
      }
    },
    d(n) {
      n && P(e), Fe(i, n);
    }
  };
}
function m0(l) {
  let e, t, i;
  function n() {
    return (
      /*click_handler_1*/
      l[22](
        /*t*/
        l[33]
      )
    );
  }
  return {
    c() {
      e = r("button"), s(e, "class", "theme-btn svelte-ak54f8"), ae(
        e,
        "background",
        /*t*/
        l[33].colors.primary
      ), s(
        e,
        "title",
        /*t*/
        l[33].label
      ), he(
        e,
        "selected",
        /*currentThemeId*/
        l[0] === /*t*/
        l[33].id
      );
    },
    m(o, c) {
      q(o, e, c), t || (i = R(e, "click", n), t = !0);
    },
    p(o, c) {
      l = o, c[0] & /*currentThemeId*/
      1 && he(
        e,
        "selected",
        /*currentThemeId*/
        l[0] === /*t*/
        l[33].id
      );
    },
    d(o) {
      o && P(e), t = !1, i();
    }
  };
}
function b0(l) {
  let e, t, i, n, o, c, f;
  return {
    c() {
      e = r("div"), t = r("div"), i = r("span"), i.textContent = "SINCRONIZANDO ATIVIDADE NEURAL DO ATIVO COM A DIVIS√ÇO GAMA...", n = g(), o = r("span"), o.textContent = `BEM VINDO, ${/*playerName*/
      l[8].toUpperCase()}`, c = g(), f = r("div"), f.innerHTML = '<div class="bar-fill svelte-ak54f8"></div>', s(i, "class", "wel-sub svelte-ak54f8"), s(o, "class", "wel-main svelte-ak54f8"), s(t, "class", "welcome-msg svelte-ak54f8"), s(f, "class", "loading-bar-container svelte-ak54f8"), s(e, "class", "fullscreen-layer entering-screen svelte-ak54f8");
    },
    m(u, d) {
      q(u, e, d), a(e, t), a(t, i), a(t, n), a(t, o), a(e, c), a(e, f);
    },
    p: ge,
    d(u) {
      u && P(e);
    }
  };
}
function v0(l) {
  let e, t;
  return e = new Ok({}), e.$on(
    "close",
    /*closeJournal*/
    l[15]
  ), {
    c() {
      kt(e.$$.fragment);
    },
    m(i, n) {
      ht(e, i, n), t = !0;
    },
    p: ge,
    i(i) {
      t || (ne(e.$$.fragment, i), t = !0);
    },
    o(i) {
      Ae(e.$$.fragment, i), t = !1;
    },
    d(i) {
      gt(e, i);
    }
  };
}
function Ck(l) {
  let e, t, i, n, o, c, f, u = (
    /*state*/
    l[3] === "video" && r0(l)
  ), d = (
    /*state*/
    l[3] === "login" && c0(l)
  ), p = (
    /*state*/
    l[3] === "minigame" && d0(l)
  ), m = (
    /*state*/
    l[3] === "menu" && u0(l)
  ), b = (
    /*state*/
    l[3] === "entering" && b0(l)
  ), v = (
    /*state*/
    l[3] === "journal" && v0(l)
  );
  return {
    c() {
      e = r("div"), u && u.c(), t = g(), d && d.c(), i = g(), p && p.c(), n = g(), m && m.c(), o = g(), b && b.c(), c = g(), v && v.c(), s(e, "class", "main-container svelte-ak54f8"), ae(
        e,
        "--primary",
        /*theme*/
        l[6].colors.primary
      ), ae(
        e,
        "--bg-grad",
        /*theme*/
        l[6].colors.bg
      ), ae(
        e,
        "--font",
        /*theme*/
        l[6].font
      );
    },
    m(h, _) {
      q(h, e, _), u && u.m(e, null), a(e, t), d && d.m(e, null), a(e, i), p && p.m(e, null), a(e, n), m && m.m(e, null), a(e, o), b && b.m(e, null), a(e, c), v && v.m(e, null), f = !0;
    },
    p(h, _) {
      /*state*/
      h[3] === "video" ? u ? (u.p(h, _), _[0] & /*state*/
      8 && ne(u, 1)) : (u = r0(h), u.c(), ne(u, 1), u.m(e, t)) : u && ($e(), Ae(u, 1, 1, () => {
        u = null;
      }), et()), /*state*/
      h[3] === "login" ? d ? (d.p(h, _), _[0] & /*state*/
      8 && ne(d, 1)) : (d = c0(h), d.c(), ne(d, 1), d.m(e, i)) : d && ($e(), Ae(d, 1, 1, () => {
        d = null;
      }), et()), /*state*/
      h[3] === "minigame" ? p ? (p.p(h, _), _[0] & /*state*/
      8 && ne(p, 1)) : (p = d0(h), p.c(), ne(p, 1), p.m(e, n)) : p && ($e(), Ae(p, 1, 1, () => {
        p = null;
      }), et()), /*state*/
      h[3] === "menu" ? m ? (m.p(h, _), _[0] & /*state*/
      8 && ne(m, 1)) : (m = u0(h), m.c(), ne(m, 1), m.m(e, o)) : m && (m.d(1), m = null), /*state*/
      h[3] === "entering" ? b ? b.p(h, _) : (b = b0(h), b.c(), b.m(e, c)) : b && (b.d(1), b = null), /*state*/
      h[3] === "journal" ? v ? (v.p(h, _), _[0] & /*state*/
      8 && ne(v, 1)) : (v = v0(h), v.c(), ne(v, 1), v.m(e, null)) : v && ($e(), Ae(v, 1, 1, () => {
        v = null;
      }), et()), (!f || _[0] & /*theme*/
      64) && ae(
        e,
        "--primary",
        /*theme*/
        h[6].colors.primary
      ), (!f || _[0] & /*theme*/
      64) && ae(
        e,
        "--bg-grad",
        /*theme*/
        h[6].colors.bg
      ), (!f || _[0] & /*theme*/
      64) && ae(
        e,
        "--font",
        /*theme*/
        h[6].font
      );
    },
    i(h) {
      f || (ne(u), ne(d), ne(p), ne(m), ne(v), f = !0);
    },
    o(h) {
      Ae(u), Ae(d), Ae(p), Ae(v), f = !1;
    },
    d(h) {
      h && P(e), u && u.d(), d && d.d(), p && p.d(), m && m.d(), b && b.d(), v && v.d();
    }
  };
}
function Ik() {
  ui.notifications.warn("ACESSO NEGADO: M√≥dulo n√£o instalado ou n√≠vel insuficiente.");
}
function Tk(l, e, t) {
  let i, { app: n } = e, { onFinish: o } = e;
  const c = game.settings.get("multiversus-rpg", "openingVideoUrl"), f = game.settings.get("multiversus-rpg", "openingMusicUrl");
  let u = game.settings.get("multiversus-rpg", "skipOpeningVideo"), d = game.settings.get("multiversus-rpg", "skipLoginAnim"), p = game.settings.get("multiversus-rpg", "menuTheme") || "default", m = "init", b = !1, v = [];
  const h = game.user.name;
  let _ = null, w = null, k = null, A = !1;
  qt(() => {
    n != null && n.element && n.element.css({
      width: "100vw",
      height: "100vh",
      border: "none",
      zIndex: 999999
    }), c && !u ? t(3, m = "video") : d ? N() : O();
  }), ra(() => {
    k && clearTimeout(k), E();
  });
  function y() {
    if (!f) return;
    _ = new Audio(f), _.loop = !0, _.volume = 0, _.play().catch((J) => console.log("Autoplay bloqueado pelo navegador:", J));
    let V = 0;
    w = setInterval(
      () => {
        V < 0.5 ? (V += 0.05, _ && (_.volume = V)) : clearInterval(w);
      },
      200
    );
  }
  function E() {
    if (w && clearInterval(w), _) {
      let V = _.volume;
      const J = setInterval(
        () => {
          V > 0.05 ? (V -= 0.05, _.volume = V) : (clearInterval(J), _.pause(), _ = null);
        },
        100
      );
    }
  }
  function S() {
    d ? N() : O();
  }
  function O() {
    t(3, m = "login"), y(), C();
  }
  async function C() {
    t(5, v = []);
    const V = (X) => new Promise((K) => setTimeout(K, X));
    await V(500), t(5, v = [
      ...v,
      "Conectando as Databases Centrais de todos os Eixos de Exist√™ncia.."
    ]), await V(400), t(5, v = [...v, "Estabelecendo link neural com todos os jogadores..."]), await V(600), t(5, v = [...v, "Buscando credenciais de acesso v√°lidas..."]), await V(600), t(5, v = [...v, "> USER: Volheim"]), await V(800), t(5, v = [...v, "> PASS: *****"]);
    let j = v.length - 1;
    for (let X = 0; X < 8; X++)
      await V(100 + Math.random() * 150), t(
        5,
        v[j] = X % 2 === 0 ? "> PASS: <span class='glitch-elena'>ELENA</span>" : "> PASS: *****",
        v
      );
    t(5, v[j] = "> PASS: *****", v), await V(600), t(5, v = [...v, "Autenticando..."]), await V(1e3), t(5, v = [...v, "<span class='success'>ACESSO AUTORIZADO.</span>"]), await V(500), t(5, v = [...v, "Bem-vindo √† Rede, <strong>Guia</strong>."]), await V(1500), t(3, m = "minigame");
  }
  function T() {
    N();
  }
  function N() {
    t(3, m = "menu"), _ || y();
  }
  function I() {
    t(4, b = !b);
  }
  async function D(V) {
    t(0, p = V), await game.settings.set("multiversus-rpg", "menuTheme", V);
  }
  async function M(V, J) {
    V === "video" && (t(1, u = J), await game.settings.set("multiversus-rpg", "skipOpeningVideo", J)), V === "login" && (t(2, d = J), await game.settings.set("multiversus-rpg", "skipLoginAnim", J));
  }
  function G() {
    t(3, m = "journal");
  }
  function L() {
    t(3, m = "menu");
  }
  function U() {
    A || (A = !0, t(3, m = "entering"), E(), k = setTimeout(
      () => {
        o ? o() : n && n.close();
      },
      3500
    ));
  }
  const z = () => t(3, m = "minigame"), F = (V) => M("video", V.target.checked), W = (V) => M("login", V.target.checked), H = (V) => D(V.id);
  return l.$$set = (V) => {
    "app" in V && t(17, n = V.app), "onFinish" in V && t(18, o = V.onFinish);
  }, l.$$.update = () => {
    l.$$.dirty[0] & /*currentThemeId*/
    1 && t(6, i = (nl == null ? void 0 : nl[p]) || (nl == null ? void 0 : nl.default) || {
      colors: { primary: "#00ff41", bg: "#000" },
      font: "monospace"
    });
  }, [
    p,
    u,
    d,
    m,
    b,
    v,
    i,
    c,
    h,
    S,
    T,
    I,
    D,
    M,
    G,
    L,
    U,
    n,
    o,
    z,
    F,
    W,
    H
  ];
}
class Dk extends mt {
  constructor(e) {
    super(), pt(this, e, Tk, Ck, dt, { app: 17, onFinish: 18 }, null, [-1, -1]);
  }
}
const pl = "multiversus-rpg";
Hooks.once("init", async function() {
  console.log(`!!! ${pl.toUpperCase()} OS: KERNEL INICIALIZANDO !!!`), ii.init(), game.settings.register(pl, "battlePassSeason", {
    name: "Dados da Temporada",
    scope: "world",
    config: !1,
    type: Object,
    default: { status: "closed", startDate: null, endDate: null, name: "Temporada Inicial", rewardsMap: [] }
  }), game.settings.register(pl, "battlePassUsers", {
    name: "Progresso dos Jogadores",
    scope: "world",
    config: !1,
    type: Object,
    default: {}
  }), game.settings.register(pl, "comms_chat_log", {
    scope: "world",
    config: !1,
    type: Array,
    default: []
  }), game.settings.register(pl, "comms_groups", {
    scope: "world",
    config: !1,
    type: Array,
    default: [{ id: "global", name: "CANAL_GERAL", icon: "fa-globe" }]
  }), game.settings.register("multiversus-rpg", "openingVideoUrl", {
    name: "URL do V√≠deo de Abertura",
    hint: "Cole o link do Discord ou Internet (mp4/webm). Se vazio, pula o v√≠deo.",
    scope: "world",
    config: !0,
    type: String,
    default: ""
  }), game.settings.register("multiversus-rpg", "worldNewsCategories", {
    name: "Categorias do Jornal",
    scope: "world",
    config: !1,
    // Escondido do menu, pois o App gerencia
    type: Object,
    // Foundry salva Arrays como Object/JSON
    default: ["GERAL", "MISS√ïES", "RUMORES"]
  }), game.settings.register("multiversus-rpg", "worldNewsData", {
    name: "Database de Not√≠cias",
    scope: "world",
    config: !1,
    // Escondido do menu padr√£o
    type: Object,
    default: []
    // Array vazio inicial
  }), game.settings.register("multiversus-rpg", "skipOpeningVideo", {
    name: "Sempre Pular V√≠deo",
    scope: "client",
    // Cada jogador escolhe o seu
    config: !1,
    // N√£o aparece no menu padr√£o (vamos controlar pelo nosso menu)
    type: Boolean,
    default: !1
  }), game.settings.register("multiversus-rpg", "openingMusicUrl", {
    name: "URL da M√∫sica de Menu",
    hint: "Link direto (mp3/ogg) que toca ap√≥s o v√≠deo, durante o login e menu.",
    scope: "world",
    config: !0,
    type: String,
    default: ""
    // Ex: "modules/multiversus-rpg/sounds/cyber_theme.mp3"
  }), game.settings.register("multiversus-rpg", "skipLoginAnim", {
    name: "Sempre Pular Anima√ß√£o/Login",
    scope: "client",
    config: !1,
    type: Boolean,
    default: !1
  }), game.settings.register("multiversus-rpg", "menuTheme", {
    name: "Tema do Menu",
    scope: "client",
    config: !1,
    type: String,
    default: "default"
  }), game.settings.register(pl, "comms_status", {
    scope: "world",
    config: !1,
    type: Object,
    default: {}
  }), game.settings.register("multiversus-rpg", "calendarData", {
    scope: "world",
    config: !1,
    type: Object,
    default: {
      currentDate: { day: 1, month: 0, year: 1 },
      events: {},
      // { "1-0-1": [{type: 'note', text: 'Inicio'}, {type: 'group', id: 'xyz'}] }
      notes: {}
    }
  }), mi.init(), Ut.init(), Xt.init(), Fl.init(), Items.unregisterSheet("wildtalents", ItemSheet), Items.registerSheet("wildtalents", sk, {
    types: ["power"],
    makeDefault: !0,
    label: "Multiversus Power Sheet"
  }), CONFIG.Actor.sheetClasses.character = {}, Actors.registerSheet("core", Rk, {
    types: ["character"],
    makeDefault: !0,
    label: "Multiversus RPG"
  });
  const l = CONFIG.Actor.documentClass;
  l.prototype.save = function(e, t, i = !1) {
    mi.scheduleUpdate(this, e, t, i);
  }, console.log("MULTIVERSUS RPG | Init Conclu√≠do.");
});
Hooks.once("ready", async function() {
  console.log(`!!! ${pl.toUpperCase()} OS: SISTEMAS PRONTOS !!!`), console.log("MULTIVERSUS | Iniciando Nexus Social Hub..."), window.NexusHub || (window.NexusHub = new B2()), game.socket.on("module.multiversus-rpg", (t) => {
    t.type === "SOCIAL_HUB_REFRESH" && Hooks.callAll("socialHubUpdate");
  });
  let l = document.getElementById("multiversus-social-button-root");
  l || (l = document.createElement("div"), l.id = "multiversus-social-button-root", Object.assign(l.style, {
    position: "fixed",
    inset: "0",
    pointerEvents: "none",
    zIndex: "10000"
  }), document.body.appendChild(l));
  try {
    new C2({
      target: l
    }), console.log("MULTIVERSUS | Bot√£o Nexus Social: ONLINE");
  } catch (t) {
    console.error("MULTIVERSUS | Erro ao carregar bot√£o social:", t);
  }
  if (game.user.isGM) {
    let t = document.getElementById("multiversus-admin-root");
    t || (t = document.createElement("div"), t.id = "multiversus-admin-root", Object.assign(t.style, { position: "fixed", inset: "0", pointerEvents: "none", zIndex: "10000" }), document.body.appendChild(t)), window.multiversusAdminHUD || (window.multiversusAdminHUD = new u_({ target: t }));
  }
  let e = document.getElementById("multiversus-aux-root");
  e || (e = document.createElement("div"), e.id = "multiversus-aux-root", Object.assign(e.style, { position: "fixed", inset: "0", pointerEvents: "none", zIndex: "9000" }), document.body.appendChild(e)), new E2({ target: e }), game.socket.on(`module.${pl}`, async (t) => {
    if (game.user.isGM) {
      if (t.type === "AUX_ACTION_CREATE_SHEET") {
        const { name: i, ownerId: n } = t;
        let o = {
          default: 0
          // Ningu√©m v√™ por padr√£o
        };
        n && (o[n] = 3), Fl.getAuthorizedUsers().forEach((u) => {
          o[u] = 3;
        });
        const f = await Actor.create({
          name: i,
          type: "character",
          ownership: o,
          img: "icons/svg/mystery-man.svg"
        });
        ui.notifications.info(`[AUX] Ficha '${f.name}' criada.`);
      }
      if (t.type === "AUX_ACTION_COINS") {
        const i = t.amount;
        for (const n of game.users.filter((o) => !o.isGM))
          await mi.adminModifyCoins(n.id, i, "add");
        ui.notifications.info(`[AUX] +${i} MC para todos.`);
      }
      if (t.type === "AUX_ACTION_HEAL") {
        const i = t.ids || [];
        for (const n of i) {
          const o = canvas.tokens.get(n);
          o && o.actor && ui.notifications.info(`[AUX] Cura solicitada em: ${o.name}`);
        }
      }
      if (t.type === "COMMS_SEND_MSG") {
        const { CommsDatabase: i } = await Promise.resolve().then(() => Si);
        await i.sendMessage(t.msg), game.socket.emit(`module.${pl}`, { type: "COMMS_REFRESH" }), Hooks.callAll("commsUpdate");
      }
      if (t.type === "COMMS_DELETE_MSG") {
        const { CommsDatabase: i } = await Promise.resolve().then(() => Si);
        await i.deleteMessage(t.msgId), game.socket.emit(`module.${pl}`, { type: "COMMS_REFRESH" }), Hooks.callAll("commsUpdate");
      }
      if (t.type === "COMMS_CREATE_GROUP") {
        const { CommsDatabase: i } = await Promise.resolve().then(() => Si);
        await i.createGroup(t.group.name), game.socket.emit(`module.${pl}`, { type: "COMMS_REFRESH" }), Hooks.callAll("commsUpdate");
      }
      if (t.type === "COMMS_UPDATE_STATUS") {
        const { CommsDatabase: i } = await Promise.resolve().then(() => Si);
        await i.updateStatus(t.status.text), game.socket.emit(`module.${pl}`, { type: "COMMS_REFRESH" }), Hooks.callAll("commsUpdate");
      }
      if (t.type === "PLAYER_DB_SAVE") {
        const { PlayerDatabase: i } = await Promise.resolve().then(() => fs);
        await i.saveEntry(t.entry), game.socket.emit(`module.${pl}`, { type: "PLAYER_DB_UPDATE_NOTIFY" });
      }
    }
    t.type === "AUXILIAR_REFRESH" && Hooks.callAll("auxiliarUpdate"), t.type === "COMMS_REFRESH" && Hooks.callAll("commsUpdate"), t.type === "PLAYER_DB_UPDATE_NOTIFY" && Hooks.callAll("nexusUpdate"), t.type === "passUpdate" && Hooks.callAll("passSystemUpdate");
  });
});
class Rk extends ActorSheet {
  constructor(...e) {
    super(...e), this.component = null;
  }
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      // ADICIONE ESTE ID FIXO PARA GARANTIR
      id: "multiversus-actor-sheet",
      classes: ["multiversus-os", "sheet", "actor"],
      width: 1400,
      height: 900,
      resizable: !0,
      template: `modules/${pl}/templates/sheet.html`
    });
  }
  // SOBRESCREVA O GET ID PARA FOR√áAR UM ID SEGURO
  get id() {
    return `multiversus-actor-${this.actor.id}`;
  }
  _getSubmitData(e) {
    return null;
  }
  async _updateObject(e, t) {
  }
  async _render(e, t) {
    if (window.multiversusMacroHUD)
      window.multiversusMacroHUD.$set({ actor: this.actor });
    else {
      const n = document.createElement("div");
      n.id = "multiversus-macro-root", Object.assign(n.style, { position: "fixed", inset: "0", pointerEvents: "none", zIndex: "10000" }), document.body.appendChild(n), window.multiversusMacroHUD = new x_({ target: n, props: { actor: this.actor } });
    }
    if ((!this.options.id || this.options.id.includes("$")) && (this.options.id = `multiversus-actor-${this.actor.id}`), await super._render(e, t), !this.element || !this.element.length) return;
    const i = this.element.find(".window-content")[0];
    if (i)
      if (i.innerHTML = "", Object.assign(i.style, { padding: "0", margin: "0", height: "100%", overflow: "hidden", background: "#000", display: "flex", flexDirection: "column" }), this.component)
        this.component.$set({ actor: this.actor, system: this.actor.system });
      else
        try {
          this.component = new Hh({ target: i, props: { actor: this.actor, system: this.actor.system } });
        } catch (n) {
          console.error("MULTIVERSUS | Erro ao montar ficha:", n);
        }
  }
  async close(e) {
    return this.component && (this.component.$destroy(), this.component = null), super.close(e);
  }
}
class Mk extends Combat {
  /** @override */
  async rollInitiative(e, { formula: t = null, updateTurn: i = !0, messageOptions: n = {} } = {}) {
    const o = [], c = [];
    for (let [f, u] of e.entries()) {
      const d = this.combatants.get(u), p = d.actor;
      if (!p) {
        o.push({ _id: u, initiative: 0 });
        continue;
      }
      const m = Number(foundry.utils.getProperty(p, "system.stats.sense.normal")) || 0, b = Number(foundry.utils.getProperty(p, "system.stats.mind.normal")) || 0, v = Number(foundry.utils.getProperty(p, "system.stats.coordination.normal")) || 0, h = 100 - m - b / 100 - v / 1e4;
      o.push({ _id: u, initiative: h });
      const _ = {
        speaker: ChatMessage.getSpeaker({ actor: p, token: d.token, alias: d.name }),
        flavor: `<h4 style="border-bottom:2px solid #00ff41; margin-bottom:5px;">Iniciativa Rolada</h4>
                         <div style="display:flex; justify-content:space-between; font-size:12px; color:#ccc;">
                            <span>üëÅÔ∏è Sense: <strong>${m}</strong></span>
                            <span>üß† Mind: <strong>${b}</strong></span>
                            <span>üèÉ Coord: <strong>${v}</strong></span>
                         </div>
                         <div style="text-align:center; margin-top:5px; font-size:10px; color:#666;">
                            (Menores atributos agem primeiro)
                         </div>`,
        content: `<div style="text-align:center; font-size:18px; font-weight:bold; color:#00ff41;">
                            Score: ${h.toFixed(4)}
                          </div>`
      };
      c.push(_);
    }
    return o.length ? (await this.updateEmbeddedDocuments("Combatant", o), i && this._combatant && await this.update({ turn: this.turns.findIndex((f) => f.id === this._combatant.id) }), c.length > 0 && ChatMessage.createDocuments(c), this) : this;
  }
}
Hooks.on("init", () => {
  CONFIG.Combat.documentClass = Mk, CONFIG.Combat.initiative = {
    decimals: 2
  };
});
class Nk extends Application {
  constructor(e = {}) {
    super(e), this.svelteContainer = null, this.component = null, this.completed = !1;
  }
  // Mantemos o defaultOptions apenas para o Foundry n√£o reclamar, 
  // mas n√£o vamos usar a janela que ele cria.
  static get defaultOptions() {
    return foundry.utils.mergeObject(super.defaultOptions, {
      id: "nexus-opening-controller",
      popOut: !0,
      template: "modules/multiversus-rpg/templates/empty.html",
      // Template vazio
      minimizable: !1,
      resizable: !1,
      width: 100,
      height: 100
      // Irrelevante
    });
  }
  // Sobrescrevemos o render para N√ÉO desenhar a janela padr√£o
  async _render(e, t) {
    this.component || (this.svelteContainer = document.createElement("div"), this.svelteContainer.id = "nexus-opening-overlay", Object.assign(this.svelteContainer.style, {
      position: "fixed",
      top: "0",
      left: "0",
      width: "100vw",
      height: "100vh",
      zIndex: "9999999",
      // Acima de tudo, at√© do Loading nativo
      backgroundColor: "black",
      margin: "0",
      padding: "0",
      overflow: "hidden",
      border: "none"
    }), document.body.appendChild(this.svelteContainer), this.component = new Dk({
      target: this.svelteContainer,
      props: {
        app: this,
        // Passamos 'this' para o Svelte poder chamar close()
        onFinish: () => {
          this.completed || (this.completed = !0, this.close());
        }
      }
    }));
  }
  // Sobrescrevemos o close para limpar nossa bagun√ßa
  async close(e = {}) {
    return this.component && (this.component.$destroy(), this.component = null), this.svelteContainer && (this.svelteContainer.remove(), this.svelteContainer = null), this.completed && setTimeout(() => {
      new NexusLoading(!0).render(!0);
    }, 50), Promise.resolve();
  }
}
Hooks.once("ready", async function() {
  console.log(`!!! ${pl.toUpperCase()} OS: SISTEMAS PRONTOS !!!`), new Nk().render(!0);
});
